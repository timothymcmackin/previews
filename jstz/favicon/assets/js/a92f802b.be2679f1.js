"use strict";(self.webpackChunkjstz_docs=self.webpackChunkjstz_docs||[]).push([[734],{1252:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"architecture/bridge","title":"Asset bridge","description":"jstz maintains a persistent ledger of all accounts and their balances of L2 tez (stored as mutez).","source":"@site/architecture/bridge.md","sourceDirName":"architecture","slug":"/architecture/bridge","permalink":"/previews/jstz/favicon/architecture/bridge","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Asset bridge","sidebar_label":"Asset bridge"},"sidebar":"documentationSidebar","previous":{"title":"Architecture","permalink":"/previews/jstz/favicon/architecture/overview"},"next":{"title":"Accounts","permalink":"/previews/jstz/favicon/architecture/accounts"}}');var r=t(4848),i=t(3023);const o={title:"Asset bridge",sidebar_label:"Asset bridge"},c=void 0,d={},a=[{value:"Quick Start",id:"quick-start",level:2},{value:"Deposit",id:"deposit",level:3},{value:"Withdraw",id:"withdraw",level:3},{value:"How it Works?",id:"how-it-works",level:2}];function l(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"jstz"})," maintains a persistent ledger of all accounts and their balances of L2 tez (stored as mutez)."]}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"jstz"})," ",(0,r.jsx)(s.em,{children:"bridge"})," implements a bridge protocol that allows to transfer tezos tokens from Tezos to the ",(0,r.jsx)(s.code,{children:"jstz"})," rollup and back."]}),"\n",(0,r.jsx)(s.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,r.jsx)(s.h3,{id:"deposit",children:"Deposit"}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"jstz"})," CLI empowers you to effortlessly transfer assets between a Tezos address (",(0,r.jsx)(s.code,{children:"tz1"}),") and a ",(0,r.jsx)(s.code,{children:"jstz"})," L2 address (",(0,r.jsx)(s.code,{children:"tz1"}),") using the provided ",(0,r.jsx)(s.code,{children:"bridge"})," commands."]}),"\n",(0,r.jsxs)(s.p,{children:["To deposit assets from a Tezos address to a ",(0,r.jsx)(s.code,{children:"jstz"})," L2 address, run the following command:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"jstz bridge deposit --from <TZ1_ADDRESS/ALIAS> --to <TZ1_ADDRESS/ALIAS> --amount <AMOUNT>\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Replace ",(0,r.jsx)(s.code,{children:"<TZ1_ADDRESS/ALIAS>"})," with the source Tezos address or alias (managed by ",(0,r.jsx)(s.code,{children:"octez-client"}),"), ",(0,r.jsx)(s.code,{children:"<TZ1_ADDRESS/ALIAS>"})," with the destination ",(0,r.jsx)(s.code,{children:"jstz"})," address, and ",(0,r.jsx)(s.code,{children:"<AMOUNT>"})," with the quantity of XTZ to deposit."]}),"\n",(0,r.jsx)(s.p,{children:"For example, running:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"jstz bridge deposit --from tz1faswCTDciRzE4oJ9jn2Vm2dvjeyA9fUzU \\\n    --to tz1ZvXcDBWMAys2ro6kJXrgiWUcUF8RvCHYy \\\n    --amount 42\n"})}),"\n",(0,r.jsxs)(s.p,{children:["successfully deposits 42 XTZ from ",(0,r.jsx)(s.code,{children:"tz1faswCTDciRzE4oJ9jn2Vm2dvjeyA9fUzU"})," to the ",(0,r.jsx)(s.code,{children:"tz1ZvXcDBWMAys2ro6kJXrgiWUcUF8RvCHYy"})," ",(0,r.jsx)(s.code,{children:"jstz"})," address, outputting:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Deposited 42 XTZ to tz4N7y3T2e2dfCyHB1Ama68jnt3Fps7Ufu6d\n"})}),"\n",(0,r.jsx)(s.h3,{id:"withdraw",children:"Withdraw"}),"\n",(0,r.jsx)(s.admonition,{type:"danger",children:(0,r.jsxs)(s.p,{children:["\u26a0\ufe0f Withdrawals on ",(0,r.jsx)(s.code,{children:"jstz"})," to Tezos is still a work in progress"]})}),"\n",(0,r.jsxs)(s.p,{children:["To withdraw assets from ",(0,r.jsx)(s.code,{children:"jstz"})," L2 address to a Tezos address, run the following command:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:" jstz bridge withdraw --to <TZ1_ADDRESS/ALIAS> --amount <AMOUNT>\n"})}),"\n",(0,r.jsxs)(s.p,{children:["This will withdraw ",(0,r.jsx)(s.code,{children:"<AMOUNT>"}),"\ua729 from the current logged in ",(0,r.jsx)(s.code,{children:"jstz"})," account to ",(0,r.jsx)(s.code,{children:"<TZ1_ADDRESS/ALIAS>"})," Tezos account"]}),"\n",(0,r.jsx)(s.p,{children:"For example, running:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"jstz bridge withdraw --to tz1faswCTDciRzE4oJ9jn2Vm2dvjeyA9fUzU \\\n    --amount 42\n"})}),"\n",(0,r.jsx)(s.p,{children:"will output the following response on success:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"Running function at jstz://jstz/withdraw\nStatus code: 200 OK\nHeaders: {}\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Communication from L2 and L1 within the Tezos ecosystem is performed through ",(0,r.jsx)(s.a,{href:"https://tezos.gitlab.io/shell/smart_rollup_node.html#triggering-the-execution-of-an-outbox-message",children:"outbox messages"}),". Use ",(0,r.jsx)(s.a,{href:"https://github.com/jstz-dev/jstz/blob/main/scripts/execute_latest_outbox_message.sh",children:"execute_latest_outbox_message"})," to execute the withdraw message."]}),"\n",(0,r.jsx)(s.admonition,{type:"warning",children:(0,r.jsxs)(s.p,{children:["\u26a0\ufe0f The following example will not work with ",(0,r.jsx)(s.code,{children:"octez-client"})," in the Nix shell."]})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Requires octez client binary as an argument\n./scripts/execute_latest_outbox_message.sh octez-client\n"})}),"\n",(0,r.jsx)(s.h2,{id:"how-it-works",children:"How it Works?"}),"\n",(0,r.jsx)(s.admonition,{type:"danger",children:(0,r.jsx)(s.p,{children:"\u26a0\ufe0f Under construction \u26a0\ufe0f"})})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},3023:(e,s,t)=>{t.d(s,{R:()=>o,x:()=>c});var n=t(6540);const r={},i=n.createContext(r);function o(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);