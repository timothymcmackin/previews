"use strict";(self.webpackChunkjstz_docs=self.webpackChunkjstz_docs||[]).push([[425],{3023:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>s});var o=t(6540);const r={},d=o.createContext(r);function c(e){const n=o.useContext(d);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),o.createElement(d.Provider,{value:n},e.children)}},5817:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>s,default:()=>h,frontMatter:()=>c,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"api/text_decoder","title":"TextDecoder","description":"The TextDecoder interface represents a decoder for a specific text encoding, such as UTF-8, ISO-8859-2, KOI8-R, GBK, etc. A decoder takes a stream of bytes as input and emits a stream of code points.","source":"@site/api/text_decoder.md","sourceDirName":"api","slug":"/api/text_decoder","permalink":"/previews/jstz/favicon/api/text_decoder","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"TextDecoder","sidebar_label":"TextDecoder"},"sidebar":"documentationSidebar","previous":{"title":"TextEncoder","permalink":"/previews/jstz/favicon/api/text_encoder"}}');var r=t(4848),d=t(3023);const c={title:"TextDecoder",sidebar_label:"TextDecoder"},s=void 0,i={},l=[{value:"Constructor",id:"constructor",level:2},{value:"<code>new TextDecoder(label?: string, options?: TextDecoderOptions): TextDecoder</code>",id:"new-textdecoderlabel-string-options-textdecoderoptions-textdecoder",level:3},{value:"Instance properties",id:"instance-properties",level:2},{value:"<code>readonly TextDecoder.encoding: string</code>",id:"readonly-textdecoderencoding-string",level:3},{value:"<code>readonly TextDecoder.fatal: boolean</code>",id:"readonly-textdecoderfatal-boolean",level:3},{value:"<code>readonly TextDecoder.ignoreBOM: boolean</code>",id:"readonly-textdecoderignorebom-boolean",level:3},{value:"Instance methods",id:"instance-methods",level:2},{value:"<code>TextDecoder.decode(input?: BufferSource, options?: TextDecodeOptions): string</code>",id:"textdecoderdecodeinput-buffersource-options-textdecodeoptions-string",level:3},{value:"Examples",id:"examples",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["The TextDecoder interface represents a decoder for a specific text encoding, such as ",(0,r.jsx)(n.code,{children:"UTF-8"}),", ",(0,r.jsx)(n.code,{children:"ISO-8859-2"}),", ",(0,r.jsx)(n.code,{children:"KOI8-R"}),", ",(0,r.jsx)(n.code,{children:"GBK"}),", etc. A decoder takes a stream of bytes as input and emits a stream of code points."]}),"\n",(0,r.jsx)(n.admonition,{type:"danger",children:(0,r.jsxs)(n.p,{children:["\u26a0\ufe0f ",(0,r.jsx)(n.code,{children:"jstz"}),"'s implementation is not fully spec compliant \u26a0\ufe0f"]})}),"\n",(0,r.jsx)(n.h2,{id:"constructor",children:"Constructor"}),"\n",(0,r.jsx)(n.h3,{id:"new-textdecoderlabel-string-options-textdecoderoptions-textdecoder",children:(0,r.jsx)(n.code,{children:"new TextDecoder(label?: string, options?: TextDecoderOptions): TextDecoder"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"TextDecoder()"})," constructor returns a newly created TextDecoder object for the encoding specified in parameter."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"label"})," A string, defaulting to ",(0,r.jsx)(n.code,{children:'"utf-8"'}),". This may be ",(0,r.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Encoding_API/Encodings",children:"any valid label"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"options"})," An object with the property:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"fatal"})," A boolean value indicating if the ",(0,r.jsx)(n.code,{children:"TextDecoder.decode()"})," method must throw a ",(0,r.jsx)(n.code,{children:"TypeError"})," when decoding invalid data. It defaults to ",(0,r.jsx)(n.code,{children:"false"}),", which means that the decoder will substitute malformed data with a replacement character."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ignoreBOM"})," A boolean value indicating whether the byte order mark is ignored. It defaults to ",(0,r.jsx)(n.code,{children:"false"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface TextDecoderOptions {\n  fatal?: boolean;\n  ignoreBOM?: boolean;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"instance-properties",children:"Instance properties"}),"\n",(0,r.jsx)(n.h3,{id:"readonly-textdecoderencoding-string",children:(0,r.jsx)(n.code,{children:"readonly TextDecoder.encoding: string"})}),"\n",(0,r.jsxs)(n.p,{children:["Returns encoding's name, lowercased. The encoding is set by the ",(0,r.jsx)(n.code,{children:"TextDecoder()"})," constructor ",(0,r.jsx)(n.code,{children:"label"})," parameter, and defaults to ",(0,r.jsx)(n.code,{children:'"utf-8"'}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"readonly-textdecoderfatal-boolean",children:(0,r.jsx)(n.code,{children:"readonly TextDecoder.fatal: boolean"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"fatal"})," read-only property of the ",(0,r.jsx)(n.code,{children:"TextDecoder"})," interface is a boolean indicating whether the error mode is ",(0,r.jsx)(n.code,{children:"fatal"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["If the property is ",(0,r.jsx)(n.code,{children:"true"}),", then a decoder will throw a ",(0,r.jsx)(n.code,{children:"TypeError"})," if it encounters malformed data while decoding. If ",(0,r.jsx)(n.code,{children:"false"}),", the decoder will substitute the invalid data with the replacement character ",(0,r.jsx)(n.code,{children:"U+FFFD"})," (\ufffd). The value of the property is set in the ",(0,r.jsx)(n.code,{children:"TextDecoder()"})," constructor."]}),"\n",(0,r.jsx)(n.h3,{id:"readonly-textdecoderignorebom-boolean",children:(0,r.jsx)(n.code,{children:"readonly TextDecoder.ignoreBOM: boolean"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"ignoreBOM"})," read-only property of the ",(0,r.jsx)(n.code,{children:"TextDecoder"})," interface is a boolean indicating whether the ",(0,r.jsx)(n.em,{children:"byte order mark"})," is ignored."]}),"\n",(0,r.jsx)(n.h2,{id:"instance-methods",children:"Instance methods"}),"\n",(0,r.jsx)(n.h3,{id:"textdecoderdecodeinput-buffersource-options-textdecodeoptions-string",children:(0,r.jsx)(n.code,{children:"TextDecoder.decode(input?: BufferSource, options?: TextDecodeOptions): string"})}),"\n",(0,r.jsx)(n.admonition,{type:"danger",children:(0,r.jsxs)(n.p,{children:["\u26a0\ufe0f Spec deviation: input can not be a ",(0,r.jsx)(n.code,{children:"SharedArrayBuffer"})," \u26a0\ufe0f"]})}),"\n",(0,r.jsxs)(n.p,{children:["Returns the result of running encoding's decoder. The method can be invoked zero or more times with ",(0,r.jsx)(n.code,{children:"options.stream"})," set to ",(0,r.jsx)(n.code,{children:"true"}),", and then once without ",(0,r.jsx)(n.code,{children:"options. stream"})," (or set to ",(0,r.jsx)(n.code,{children:"false"}),"), to process a fragmented stream. If the invocation without ",(0,r.jsx)(n.code,{children:"options.stream"})," (or set to ",(0,r.jsx)(n.code,{children:"false"}),") has no input, it's clearest to omit both arguments."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"input"})," An ",(0,r.jsx)(n.code,{children:"ArrayBuffer"}),", a ",(0,r.jsx)(n.code,{children:"TypedArray"}),", or a ",(0,r.jsx)(n.code,{children:"DataView"})," object containing the encoded text to decode."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"options"})," An object with the property:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"stream"}),' If the error mode is "fatal" and encoding\'s decoder returns error, throws a ',(0,r.jsx)(n.code,{children:"TypeError"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface TextDecodeOptions {\n  stream?: boolean;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsxs)(n.p,{children:["Encodes and decodes the euro symbol, ",(0,r.jsx)(n.code,{children:"\u20ac"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'const encoder = new TextEncoder();\nconst array = encoder.encode("\u20ac"); // Uint8Array(3) [226, 130, 172]\ndocument.getElementById("encoded-value").textContent = array;\n\nconst decoder = new TextDecoder();\nconst str = decoder.decode(array); // String "\u20ac"\ndocument.getElementById("decoded-value").textContent = str;\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:["Decode from a buffer in a loop using the ",(0,r.jsx)(n.code,{children:"stream"})," option."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'let string = "";\nlet decoder = new TextDecoder(encoding);\n\nlet buffer;\nwhile ((buffer = stream_next_chunk())) {\n  string += decoder.decode(buffer, { stream: true });\n}\n\nstring += decoder.decode(); // end-of-stream\n'})})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);