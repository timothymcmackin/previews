"use strict";(self.webpackChunkjstz_docs=self.webpackChunkjstz_docs||[]).push([[141],{1718:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"sandbox","title":"Sandbox","description":"The Jstz sandbox is a local environment that you can use to develop and test smart functions.","source":"@site/sandbox.md","sourceDirName":".","slug":"/sandbox","permalink":"/jstz/sandbox","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Sandbox"},"sidebar":"documentationSidebar","previous":{"title":"CLI","permalink":"/jstz/cli"},"next":{"title":"Transfer","permalink":"/jstz/transfer"}}');var o=t(4848),i=t(3023);const r={title:"Sandbox"},a=void 0,c={},d=[{value:"Running the sandbox",id:"running-the-sandbox",level:2},{value:"The <code>jstzd</code> daemon",id:"the-jstzd-daemon",level:2},{value:"Bootstrap Accounts",id:"bootstrap-accounts",level:3},{value:"API Endpoints",id:"api-endpoints",level:3}];function l(n){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.p,{children:"The Jstz sandbox is a local environment that you can use to develop and test smart functions.\nIts core features are:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Low block time and commitment period"}),"\n",(0,o.jsx)(e.li,{children:"Pre-loaded bootstrap accounts"}),"\n",(0,o.jsx)(e.li,{children:"Pre-deployed native bridge"}),"\n",(0,o.jsx)(e.li,{children:"Centralized configuration between Jstz and Octez infrastructure"}),"\n"]}),"\n",(0,o.jsx)(e.admonition,{type:"note",children:(0,o.jsx)(e.p,{children:"The sandbox runs in a Docker container, so it persists only as long as you leave that container running."})}),"\n",(0,o.jsx)(e.p,{children:"The sandbox includes:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"A simulated Tezos layer 1 environment, including an Octez node and bootstrap accounts that have tez"}),"\n",(0,o.jsx)(e.li,{children:"The layer 1 infrastructure that hosts the Jstz Smart Rollup"}),"\n",(0,o.jsxs)(e.li,{children:["The ",(0,o.jsx)(e.a,{href:"/architecture/bridge",children:"Asset bridge"}),", which allows you to bridge tez from the bootstrap accounts to Jstz smart functions and accounts"]}),"\n",(0,o.jsx)(e.li,{children:"The Jstz environment itself, which runs smart functions and keeps track of Jstz accounts"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"running-the-sandbox",children:"Running the sandbox"}),"\n",(0,o.jsx)(e.p,{children:"To start the sandbox, make sure that Docker is installed and then run this command to start the sandbox in a Docker container:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-sh",children:"jstz sandbox --container start\n"})}),"\n",(0,o.jsxs)(e.p,{children:["If you see an error that says that the configuration file is improperly configured, delete the ",(0,o.jsx)(e.code,{children:"~/.config/jstz/"})," folder and try to start the sandbox again."]}),"\n",(0,o.jsx)(e.admonition,{type:"tip",children:(0,o.jsxs)(e.p,{children:["The ",(0,o.jsx)(e.code,{children:"--detach"})," (",(0,o.jsx)(e.code,{children:"-d"}),") flag starts the sandbox in the background, allowing you to continue working in the same terminal.\nYou can stop or reset the sandbox with the commands ",(0,o.jsx)(e.code,{children:"jstz sandbox --container stop"})," or ",(0,o.jsx)(e.code,{children:"jstz sandbox --container restart"}),", but the state of the sandbox is not persistent."]})}),"\n",(0,o.jsx)(e.p,{children:"If you see the following output, the sandbox is running:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:'\n           __________\n           \\  jstz  /\n            )______(\n            |""""""|_.-._,.---------.,_.-._\n            |      | | |               | | \'\'-.\n            |      |_| |_             _| |_..-\'\n            |______| \'-\' `\'---------\'` \'-\'\n            )""""""(\n           /________\\\n           `\'------\'`\n         .------------.\n        /______________\\\n\n        0.1.1-alpha.1 https://github.com/jstz-dev/jstz\n\n  +---------------------------------------------------+---------------------+\n  | Address                                           | XTZ Balance (mutez) |\n  +===================================================+=====================+\n  | (bootstrap0) tz1TGu6TN5GSez2ndXXeDX6LgUDvLzPLqgYV | 100000000000        |\n  +---------------------------------------------------+---------------------+\n  | (bootstrap1) tz1KqTpEZ7Yob7QbPE4Hy4Wo8fHG8LhKxZSx | 100000000000        |\n  +---------------------------------------------------+---------------------+\n  | (bootstrap2) tz1gjaF81ZRRvdzjobyfVNsAeSC6PScjfQwN | 100000000000        |\n  +---------------------------------------------------+---------------------+\n  | (bootstrap3) tz1faswCTDciRzE4oJ9jn2Vm2dvjeyA9fUzU | 100000000000        |\n  +---------------------------------------------------+---------------------+\n  | (bootstrap4) tz1b7tUupMgCNw2cCLpKTkSD1NZzB5TkP2sv | 100000000000        |\n  +---------------------------------------------------+---------------------+\n  | (bootstrap5) tz1ddb9NMYHZi5UzPdzTZMYQQZoMub195zgv | 100000000000        |\n  +---------------------------------------------------+---------------------+\n'})}),"\n",(0,o.jsxs)(e.p,{children:["When the sandbox starts, it shows the bootstrap accounts, which are on the sandbox's simulation of Tezos layer 1, not on Jstz.\nAt this point, no Jstz accounts have any tez.\nTo fund Jstz smart functions and user accounts, you can bridge tez from these bootstrap accounts.\nFor example, this command bridges 1,000 tez from a layer 1 bootstrap account to a Jstz account with the address ",(0,o.jsx)(e.code,{children:"tz1N8BsvfrSjGdomFi5V9RwwYLasgD8s4pxF"}),":"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-sh",children:"jstz bridge deposit --from bootstrap1 --to tz1N8BsvfrSjGdomFi5V9RwwYLasgD8s4pxF --amount 1000 -n dev\n"})}),"\n",(0,o.jsx)(e.p,{children:"Then you can deploy and call smart functions in the sandbox."}),"\n",(0,o.jsxs)(e.h2,{id:"the-jstzd-daemon",children:["The ",(0,o.jsx)(e.code,{children:"jstzd"})," daemon"]}),"\n",(0,o.jsxs)(e.p,{children:["The ",(0,o.jsx)(e.code,{children:"jstzd"})," daemon orchestrates and manages the core components of the ",(0,o.jsx)(e.code,{children:"jstz"})," local sandbox.\nIt serves as the central coordinator for setting up the necessary infrastructure, such as the Jstz node and Octez binaries that run an instance of the Jstz kernel."]}),"\n",(0,o.jsx)(e.admonition,{type:"note",children:(0,o.jsxs)(e.p,{children:["The ",(0,o.jsx)(e.code,{children:"jstzd"})," daemon does not run a complete sandbox by itself.\nRunning the sandbox without using the ",(0,o.jsx)(e.code,{children:"jstz sandbox"})," command requires you to configure the Octez binaries for use with the daemon and to configure the Jstz CLI to use it."]})}),"\n",(0,o.jsx)(e.p,{children:"To start the daemon directly, run this command:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"jstzd run\n"})}),"\n",(0,o.jsxs)(e.p,{children:["By default, ",(0,o.jsx)(e.code,{children:"jstzd"})," runs on port 54321.\nYou can customize the configuration through a JSON configuration file.\nFor example, if you want to start ",(0,o.jsx)(e.code,{children:"jstzd"})," on port 54320 and the Octez node on port 3000, you can create a config.json file with the following content:"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",children:'{\n  "server_port": 54320,\n  "octez_node": {\n    "rpc_endpoint": "localhost:3000"\n  }\n}\n'})}),"\n",(0,o.jsx)(e.p,{children:"Then start the daemon with this configuration by running this command:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"jstzd run config.json\n"})}),"\n",(0,o.jsx)(e.h3,{id:"bootstrap-accounts",children:"Bootstrap Accounts"}),"\n",(0,o.jsx)(e.p,{children:"Jstzd automatically sets up 6 bootstrap accounts with an initial balance of 100,000,000,000 mutez each:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"tz1TGu6TN5GSez2ndXXeDX6LgUDvLzPLqgYV"})," (bootstrap0)"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"tz1KqTpEZ7Yob7QbPE4Hy4Wo8fHG8LhKxZSx"})," (bootstrap1)"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"tz1gjaF81ZRRvdzjobyfVNsAeSC6PScjfQwN"})," (bootstrap2)"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"tz1faswCTDciRzE4oJ9jn2Vm2dvjeyA9fUzU"})," (bootstrap3)"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"tz1b7tUupMgCNw2cCLpKTkSD1NZzB5TkP2sv"})," (bootstrap4)"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"tz1ddb9NMYHZi5UzPdzTZMYQQZoMub195zgv"})," (bootstrap5)"]}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"api-endpoints",children:"API Endpoints"}),"\n",(0,o.jsxs)(e.p,{children:["The ",(0,o.jsx)(e.code,{children:"jstzd"})," daemon provides endpoints to monitor the health, retrieve the configuration of the running processes, and shut down the system:"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"GET /health"})," - Returns 200 if the processes are running properly"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"GET /config/"})," - Get full system configuration"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"GET /config/:config_type"})," - Get specific component config (including the Jstz node and the Octez node)"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"PUT /shutdown"})," - Gracefully shut down the system"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(l,{...n})}):l(n)}},3023:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>a});var s=t(6540);const o={},i=s.createContext(o);function r(n){const e=s.useContext(i);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);