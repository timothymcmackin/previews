"use strict";(self.webpackChunkjstz_docs=self.webpackChunkjstz_docs||[]).push([[984],{3023:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var s=t(6540);const c={},o=s.createContext(c);function a(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:a(e.components),s.createElement(o.Provider,{value:n},e.children)}},5371:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>i,default:()=>l,frontMatter:()=>a,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"architecture/accounts","title":"Accounts","description":"Jstz works with two kinds of accounts:","source":"@site/architecture/accounts.md","sourceDirName":"architecture","slug":"/architecture/accounts","permalink":"/previews/jstz/docusaurus-381/architecture/accounts","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Accounts"},"sidebar":"documentationSidebar","previous":{"title":"Asset bridge","permalink":"/previews/jstz/docusaurus-381/architecture/bridge"},"next":{"title":"Smart functions","permalink":"/previews/jstz/docusaurus-381/functions/overview"}}');var c=t(4848),o=t(3023);const a={title:"Accounts"},i=void 0,r={},u=[{value:"Working with user accounts",id:"working-with-user-accounts",level:2},{value:"Signing transactions from user accounts",id:"signing-transactions-from-user-accounts",level:2},{value:"Working with smart function accounts",id:"working-with-smart-function-accounts",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.p,{children:"Jstz works with two kinds of accounts:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["User accounts start with ",(0,c.jsx)(n.code,{children:"tz1"})," and store tez (XTZ)."]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Smart function accounts start with ",(0,c.jsx)(n.code,{children:"KT1"})," and store tez and the immutable code of the smart function."]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"working-with-user-accounts",children:"Working with user accounts"}),"\n",(0,c.jsxs)(n.p,{children:["User accounts are stored in the local file ",(0,c.jsx)(n.code,{children:"~/.config/jstz/config.json"}),", including the alias, address, public key, and secret key for each account."]}),"\n",(0,c.jsx)(n.admonition,{type:"warning",children:(0,c.jsx)(n.p,{children:"You must keep the secret keys for the accounts secure.\nJstz does not yet support storing keys in wallets, on hardware devices, or with remote signers."})}),"\n",(0,c.jsxs)(n.p,{children:["To create a user account, pass an alias for the new account to the ",(0,c.jsx)(n.code,{children:"jstz account create"})," command, as in this example:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"jstz account create <ALIAS>\n"})}),"\n",(0,c.jsxs)(n.p,{children:["When Jstz creates an account in this way, you can use it on any network, but for many commands you must specify the network to use with the ",(0,c.jsx)(n.code,{children:"-n"})," argument."]}),"\n",(0,c.jsxs)(n.p,{children:["The new account does not automatically become the active, logged in account.\nTo switch the active account, pass the account alias to the ",(0,c.jsx)(n.code,{children:"jstz login"})," command.\nThe active account is the account that calls to smart functions and transfers of tez come from.\nYou can list all accounts with the ",(0,c.jsx)(n.code,{children:"jstz account list"})," command and get information about the active account with the ",(0,c.jsx)(n.code,{children:"jstz whoami"})," command."]}),"\n",(0,c.jsxs)(n.p,{children:["Before you can use an account, it must be revealed.\nTo reveal an account, send tez to it.\nFor example, you can bridge one tez to it with this command, where ",(0,c.jsx)(n.code,{children:"<ALIAS>"})," is the alias for the account:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"jstz bridge deposit --from bootstrap1 --to <ALIAS> --amount 1 -n dev\n"})}),"\n",(0,c.jsx)(n.h2,{id:"signing-transactions-from-user-accounts",children:"Signing transactions from user accounts"}),"\n",(0,c.jsxs)(n.p,{children:["Because Jstz does not yet support wallets, you must provide the secret key of the user account to sign transactions.\nFor example, the ",(0,c.jsx)(n.a,{href:"https://github.com/jstz-dev/jstz/tree/main/examples/call-from-web",children:(0,c.jsx)(n.code,{children:"call-from-web"})})," sample application uses the Jstz client SDK to sign applications given the address, public key, and secret key of the application:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-typescript",children:'import { Jstz } from "@jstz-dev/jstz-client";\nimport * as signer from "jstz_sdk";\n\n// ...\n\n// Sign operation using provided secret key\n// DO NOT use this in production until Jstz has a way of signing in a secure manner\nconst signature = signer.sign_operation(operation, secretKey);\nconst response = await jstzClient.operations.injectAndPoll({\n  inner: operation,\n  public_key: publicKey,\n  signature: signature,\n});\n'})}),"\n",(0,c.jsx)(n.h2,{id:"working-with-smart-function-accounts",children:"Working with smart function accounts"}),"\n",(0,c.jsxs)(n.p,{children:["Like user accounts, you can set local aliases for smart functions with the ",(0,c.jsx)(n.code,{children:"jstz account alias"})," command.\nThen you can refer to that alias instead of the full address in other commands."]}),"\n",(0,c.jsxs)(n.p,{children:["After you deploy a smart function, you can't modify its code or access its tez balance directly, but you can view its code with the ",(0,c.jsx)(n.code,{children:"jstz account code"})," command.\nFor example to get the code of a smart function in the local sandbox, run this command, with the address or alias as ",(0,c.jsx)(n.code,{children:"<ALIAS_OR_ADDRESS>"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"jstz account -a <ALIAS_OR_ADDRESS> -n dev\n"})}),"\n",(0,c.jsxs)(n.p,{children:["To call a smart function from the command line, use the ",(0,c.jsx)(n.code,{children:"jstz run"})," command and pass the address or alias, as in this example from the ",(0,c.jsx)(n.a,{href:"/quick_start",children:"Quick start"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'jstz run jstz://<ALIAS_OR_ADDRESS>/ --data \'{"message":"Give me tez now."}\' -n dev\n'})}),"\n",(0,c.jsx)(n.p,{children:"The Jstz command-line client sends the command from the active local user account.\nUsing aliases like this works only in the command-line client, not in the client SDK."})]})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}}}]);