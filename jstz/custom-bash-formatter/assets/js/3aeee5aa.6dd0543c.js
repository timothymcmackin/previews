"use strict";(self.webpackChunkjstz_docs=self.webpackChunkjstz_docs||[]).push([[4133],{105:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>d,toc:()=>c});const d=JSON.parse('{"id":"api/ledger","title":"Ledger","description":"The Ledger API is deprecated and will be removed in future versions of Jstz","source":"@site/api/ledger.md","sourceDirName":"api","slug":"/api/ledger","permalink":"/previews/jstz/custom-bash-formatter/api/ledger","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Ledger","sidebar_label":"Ledger"},"sidebar":"documentationSidebar","previous":{"title":"SmartFunction","permalink":"/previews/jstz/custom-bash-formatter/api/smart_function"},"next":{"title":"Headers","permalink":"/previews/jstz/custom-bash-formatter/api/headers"}}');var n=r(4848),t=r(3023);const a={title:"Ledger",sidebar_label:"Ledger"},i=void 0,o={},c=[{value:"Quick Start",id:"quick-start",level:2},{value:"Types",id:"types",level:2},{value:"<code>type Address = string</code>",id:"type-address--string",level:3},{value:"Instance Properties",id:"instance-properties",level:2},{value:"<code>readonly Ledger.selfAddress: Address</code>",id:"readonly-ledgerselfaddress-address",level:3},{value:"Instance Methods",id:"instance-methods",level:2},{value:"<code>Ledger.balance(address: Address): Mutez</code>",id:"ledgerbalanceaddress-address-mutez",level:3},{value:"<code>Ledger.transfer(dst: Address, amount: Mutez): void</code>",id:"ledgertransferdst-address-amount-mutez-void",level:3}];function l(e){const s={admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.admonition,{type:"warning",children:(0,n.jsx)(s.p,{children:"The Ledger API is deprecated and will be removed in future versions of Jstz"})}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"Ledger"})," object maintains a persistent ledger of all accounts and their\nbalances of L2 tez (stored as mutez). Additionally, the ",(0,n.jsx)(s.code,{children:"Ledger"})," object stores the 'self address' of\nthe smart function, which is the address of the smart function itself."]}),"\n",(0,n.jsxs)(s.p,{children:["All operations on ",(0,n.jsx)(s.code,{children:"Ledger"})," are synchronous and atomic, committed if the request to the smart function succeeds."]}),"\n",(0,n.jsx)(s.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,n.jsxs)(s.p,{children:["We can obtain the balance of an account using ",(0,n.jsx)(s.code,{children:"Ledger.balance()"}),":"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-typescript",children:'const alice: Address = "tz1abc...";\nconsole.log(Ledger.balance(alice)); // 0\n'})}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.em,{children:"self address"})," of the smart function is accessible from the readonly property ",(0,n.jsx)(s.code,{children:"Ledger.selfAddress"}),":"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-typescript",children:"console.log(Ledger.balance(Ledger.selfAddress)); // 420\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Transfers are performed using ",(0,n.jsx)(s.code,{children:"Ledger.transfer()"}),":"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-typescript",children:"Ledger.transfer(alice, 420); // Transfer 420 mutez to Alice from the balance of the smart function\nconsole.log(Ledger.balance(alice)); // 420\nconsole.log(Ledger.balance(Ledger.selfAddress)); // 0\n"})}),"\n",(0,n.jsx)(s.h2,{id:"types",children:"Types"}),"\n",(0,n.jsx)(s.h3,{id:"type-address--string",children:(0,n.jsx)(s.code,{children:"type Address = string"})}),"\n",(0,n.jsxs)(s.p,{children:["An address is a string of 36 characters, starting with ",(0,n.jsx)(s.code,{children:"KT1"}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"instance-properties",children:"Instance Properties"}),"\n",(0,n.jsx)(s.h3,{id:"readonly-ledgerselfaddress-address",children:(0,n.jsx)(s.code,{children:"readonly Ledger.selfAddress: Address"})}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"selfAddress"})," property of the ",(0,n.jsx)(s.code,{children:"Ledger"})," object is the address of the smart function."]}),"\n",(0,n.jsx)(s.h2,{id:"instance-methods",children:"Instance Methods"}),"\n",(0,n.jsx)(s.h3,{id:"ledgerbalanceaddress-address-mutez",children:(0,n.jsx)(s.code,{children:"Ledger.balance(address: Address): Mutez"})}),"\n",(0,n.jsxs)(s.p,{children:["Returns the balance of the given address in mutez, or ",(0,n.jsx)(s.code,{children:"0"})," if the address is not in the ledger."]}),"\n",(0,n.jsx)(s.h3,{id:"ledgertransferdst-address-amount-mutez-void",children:(0,n.jsx)(s.code,{children:"Ledger.transfer(dst: Address, amount: Mutez): void"})}),"\n",(0,n.jsx)(s.p,{children:"Transfers the given amount of mutez from the balance of the smart function to the given address. If the smart function does not have enough balance, this throws an error."})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},3023:(e,s,r)=>{r.d(s,{R:()=>a,x:()=>i});var d=r(6540);const n={},t=d.createContext(n);function a(e){const s=d.useContext(t);return d.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),d.createElement(t.Provider,{value:s},e.children)}}}]);