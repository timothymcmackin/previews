"use strict";(self.webpackChunkjstz_docs=self.webpackChunkjstz_docs||[]).push([[5405],{3023:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>o});var i=s(6540);const t={},l=i.createContext(t);function r(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:n},e.children)}},5135:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"installation","title":"Installing Jstz","description":"Jstz has several components, but the primary tool that you need to develop on Jstz is the Jstz CLI, which is available as the NPM package @jstz-dev/cli.","source":"@site/installation.md","sourceDirName":".","slug":"/installation","permalink":"/previews/jstz/custom-bash-formatter/installation","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Installing Jstz","sidebar_label":"Installation"},"sidebar":"documentationSidebar","next":{"title":"Quick start","permalink":"/previews/jstz/custom-bash-formatter/quick_start"}}');var t=s(4848),l=s(3023);const r={title:"Installing Jstz",sidebar_label:"Installation"},o=void 0,c={},a=[{value:"Building from source",id:"building-from-source",level:2},{value:"Building on MacOS",id:"building-on-macos",level:3},{value:"Building on Linux",id:"building-on-linux",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Jstz has several ",(0,t.jsx)(n.a,{href:"/architecture/overview#components",children:"components"}),", but the primary tool that you need to develop on Jstz is the ",(0,t.jsx)(n.a,{href:"/cli",children:"Jstz CLI"}),", which is available as the NPM package ",(0,t.jsx)(n.a,{href:"https://www.npmjs.com/package/@jstz-dev/cli",children:(0,t.jsx)(n.code,{children:"@jstz-dev/cli"})}),".\nIt allows you to start the Jstz sandbox, deploy smart functions to it, and interact with them."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Jstz is available only on Unix-based systems."})}),"\n",(0,t.jsx)(n.p,{children:"Follow these instructions to install the Jstz CLI:"}),"\n",(0,t.jsxs)(n.p,{children:["Ensure that ",(0,t.jsx)(n.a,{href:"https://docs.docker.com/get-docker/",children:"Docker"})," is installed on your system.\nThen, download and install ",(0,t.jsx)(n.code,{children:"jstz"})," via NPM with this command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"npm i -g @jstz-dev/cli\n"})}),"\n",(0,t.jsx)(n.p,{children:"or with yarn:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"yarn global add @jstz-dev/cli\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Congratulations! \ud83c\udf89 ",(0,t.jsx)(n.code,{children:"jstz"})," is now installed and configured on your system.\nYou are now ready to ",(0,t.jsx)(n.a,{href:"/quick_start",children:"write your first smart function"})," \ud83d\ude80."]}),"\n",(0,t.jsx)(n.h2,{id:"building-from-source",children:"Building from source"}),"\n",(0,t.jsx)(n.p,{children:"For simplicity, you can install and initialize the Nix package management and system configuration tool, which provides the dependencies to build Jstz.\nIf you don't use Nix, you must install the dependencies yourself."}),"\n",(0,t.jsx)(n.p,{children:"These sections show how to build Jstz on MacOS and Linux systems:"}),"\n",(0,t.jsx)(n.h3,{id:"building-on-macos",children:"Building on MacOS"}),"\n",(0,t.jsx)(n.p,{children:"Nix is the easiest way to build Jstz on MacOS:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Clone the Jstz repository:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"git clone https://github.com/jstz-dev/jstz.git\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Install and configure Nix:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Install Nix as described in its documentation: ",(0,t.jsx)(n.a,{href:"https://nixos.org/download.html",children:"https://nixos.org/download.html"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Ensure that Nix flakes are enabled: ",(0,t.jsx)(n.a,{href:"https://nixos.wiki/wiki/Flakes#Enable_flakes",children:"https://nixos.wiki/wiki/Flakes#Enable_flakes"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Run ",(0,t.jsx)(n.code,{children:"nix develop"})," to enter a shell with the build dependencies or use ",(0,t.jsx)(n.code,{children:"direnv"})," to automatically enter the shell when you enter the ",(0,t.jsx)(n.code,{children:"jstz"})," directory."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Build the Jstz kernel by running this command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"make build\n"})}),"\n",(0,t.jsxs)(n.p,{children:["You can locate the resulting built artifact at ",(0,t.jsx)(n.code,{children:"target/wasm32-unknown-unknown/release/jstz_kernel.wasm"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Build and start the sandbox by running these commands:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"cargo run --bin jstzd -- run\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"building-on-linux",children:"Building on Linux"}),"\n",(0,t.jsx)(n.p,{children:"Nix is not required on Linux systems but it is easier than installing dependencies individually."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Clone the Jstz repository:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"git clone https://github.com/jstz-dev/jstz.git\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"(Optional) If you are using Nix, install and configure it:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Install Nix as described in its documentation: ",(0,t.jsx)(n.a,{href:"https://nixos.org/download.html",children:"https://nixos.org/download.html"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Ensure that Nix flakes are enabled: ",(0,t.jsx)(n.a,{href:"https://nixos.wiki/wiki/Flakes#Enable_flakes",children:"https://nixos.wiki/wiki/Flakes#Enable_flakes"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Run ",(0,t.jsx)(n.code,{children:"nix develop"})," to enter a shell with the build dependencies or use ",(0,t.jsx)(n.code,{children:"direnv"})," to automatically enter the shell when you enter the ",(0,t.jsx)(n.code,{children:"jstz"})," directory."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"If you are not using Nix, install these dependencies manually:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Install LLVM:"}),"\n",(0,t.jsx)(n.p,{children:"Ubuntu:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"sudo apt install clang\nexport CC=clang\n"})}),"\n",(0,t.jsx)(n.p,{children:"Fedora:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"sudo dnf install clang\nexport CC=clang\n"})}),"\n",(0,t.jsx)(n.p,{children:"Linux:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",metastring:"Arch",children:"pacman -S clang\nexport CC=clang\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["From the ",(0,t.jsx)(n.code,{children:"jstz"})," directory, install the specific version of Rust that Jstz requires, which is specified in the ",(0,t.jsx)(n.code,{children:"rust-toolchain"})," file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Install the following Octez binaries:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"octez-client"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"octez-node"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"octez-smart-rollup-node"})}),"\n",(0,t.jsx)(n.li,{children:"The appropriate Octez baker for the current protocol"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["You can get the Octez suite of tools from the Octez release page here: ",(0,t.jsx)(n.a,{href:"https://gitlab.com/tezos/tezos/-/releases",children:"https://gitlab.com/tezos/tezos/-/releases"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Currently, Jstz uses the protocol-specific baker, such as ",(0,t.jsx)(n.code,{children:"octez-baker-PsRiotum"})," or ",(0,t.jsx)(n.code,{children:"octez-baker-PsQuebec"}),", not the agnostic baker named ",(0,t.jsx)(n.code,{children:"octez-baker"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["For each of these binaries, you must download or build the appropriate binary for your system architecture (x86 or arm64), rename the file to remove the architecture prefix (so, for example, ",(0,t.jsx)(n.code,{children:"arm64-octez-baker-PsQuebec"})," becomes ",(0,t.jsx)(n.code,{children:"octez-baker-PsQuebec"}),"), make the binary executable with the ",(0,t.jsx)(n.code,{children:"chmod +x"})," command, and ensure that the file is on your system's ",(0,t.jsx)(n.code,{children:"PATH"})," environment variable."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Build the Jstz kernel by running this command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"make build\n"})}),"\n",(0,t.jsxs)(n.p,{children:["You can locate the resulting built artifact at ",(0,t.jsx)(n.code,{children:"target/wasm32-unknown-unknown/release/jstz_kernel.wasm"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Build and start the sandbox by running these commands:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'echo \'{"protocol":{"protocol":"rio"}}\' > config.json\ncargo run --bin jstzd -- run config.json\n'})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);