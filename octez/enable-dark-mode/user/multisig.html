
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Built-in multisig contracts &#8212; Octez &amp; Protocol products documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=3301396a" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=67af7658"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-KT3Z3X4Y82"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-KT3Z3X4Y82');
            </script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-KT3Z3X4Y82');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user/multisig';</script>
    <script src="../_static/js/custom.js?v=e7f469e6"></script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="FA1.2 support" href="fa12.html" />
    <link rel="prev" title="Monitoring the consensus protocol" href="teztale.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.svg" class="logo__image only-light" alt="Octez & Protocol products documentation - Home"/>
    <script>document.write(`<img src="../_static/logo.svg" class="logo__image only-dark" alt="Octez & Protocol products documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../introduction/tezos.html">Octez &amp; Protocol overview</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../introduction/howtoget.html">Installing Octez</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../introduction/cosign-verify.html">Verifying Octez Docker Images with Cosign</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/get_troubleshooting.html">Installation troubleshooting</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/howtouse.html">Getting started with Octez</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/howtorun.html">Running Octez</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/services.html">Setting up Octez Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/versioning.html">Octez &amp; Protocol versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/breaking_changes.html">BREAKING CHANGES</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Octez User manual</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="setup-client.html">Setting up the client</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="client-configuration.html">Client Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="key-management.html">Key Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="sandbox.html">Sandboxed mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="mockup.html">Mockup mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="proxy.html">Proxy mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="light.html">Light mode</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="setup-node.html">Setting up the node</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="node-configuration.html">Node Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="multinetwork.html">Connecting to a Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="history_modes.html">History modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapshots.html">Snapshots</a></li>
<li class="toctree-l2"><a class="reference internal" href="proxy-server.html">Proxy server</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="node-monitoring.html">Monitoring an Octez Node</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/openmetrics.html">Supported Open Metrics</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="teztale.html">Monitoring the consensus protocol</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Built-in multisig contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="fa12.html">FA1.2 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging features</a></li>
<li class="toctree-l1"><a class="reference internal" href="exits.html">Exit codes and signals</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Octez Reference manual</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../shell/the_big_picture.html">Octez Software Architecture</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../shell/shell.html">The Octez Shell</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../shell/validation.html">The validation subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/prevalidation.html">The Prevalidator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/storage.html">The storage layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/sync.html">Synchronisation heuristic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/p2p.html">The peer-to-peer layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/protocol_environment.html">Protocol Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/micheline.html">Micheline</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../shell/data_availability_committees.html">Data Availability Committees</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../shell/dal.html">Data Availability Layer</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../shell/dal_overview.html">DAL overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/dal_node.html">The DAL node</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/dal_bakers.html">Bakers &amp; the DAL</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../shell/smart_rollup_node.html">Smart rollup node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shell/p2p_api.html">P2P message format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shell/cli-commands.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shell/rpc.html">Shell RPCs - Reference</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Protocol Reference Manuals</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../active/index.html">Paris Protocol Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../active/protocol.html">Economic protocol features</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../active/protocol_overview.html">Overview of the economic protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/proof_of_stake.html">Proof-of-stake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/randomness_generation.html">Randomness generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/consensus.html">The consensus algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/voting.html">The Amendment (and Voting) Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/accounts.html">Accounts and addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/michelson.html">Michelson: the language of Smart Contracts in Tezos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/views.html">On-chain Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/timelock.html">Time-lock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/sapling.html">Sapling support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/liquidity_baking.html">Liquidity Baking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/global_constants.html">Global Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/michelson_anti_patterns.html">Michelson Anti-Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/token_management.html">Token transfers and balance updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/precheck.html">Prechecking of manager operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/smart_rollups.html">Smart Optimistic Rollups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/plugins.html">Protocol Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/event.html">Contract events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/blocks_ops.html">Blocks and Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/validation.html">Validation and Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/tickets.html">Tickets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/adaptive_issuance.html">Adaptive Issuance and Staking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/adaptive_slashing.html">Adaptive Slashing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/dal_support.html">DAL support</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../active/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../active/cli-commands.html">Command Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../active/rpc.html">Paris RPCs - Reference</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../quebeca/index.html">Quebeca Protocol Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../quebeca/protocol.html">Economic protocol features</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/protocol_overview.html">Overview of the economic protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/proof_of_stake.html">Proof-of-stake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/randomness_generation.html">Randomness generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/baking_power.html">Baking Power</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/consensus.html">The consensus algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/voting.html">The Amendment (and Voting) Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/accounts.html">Accounts and addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/michelson.html">Michelson: the language of Smart Contracts in Tezos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/views.html">On-chain Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/timelock.html">Time-lock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/sapling.html">Sapling support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/liquidity_baking.html">Liquidity Baking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/global_constants.html">Global Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/michelson_anti_patterns.html">Michelson Anti-Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/token_management.html">Token transfers and balance updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/precheck.html">Prechecking of manager operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/smart_rollups.html">Smart Optimistic Rollups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/plugins.html">Protocol Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/event.html">Contract events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/blocks_ops.html">Blocks and Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/validation.html">Validation and Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/tickets.html">Tickets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/adaptive_issuance.html">Adaptive Issuance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/staking.html">Staking mechanism</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/adaptive_slashing.html">Adaptive Slashing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/dal_support.html">DAL support</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../quebeca/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quebeca/cli-commands.html">Command Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quebeca/rpc.html">Quebeca RPCs - Reference</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../alpha/index.html">Alpha Dev Protocol Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../alpha/protocol.html">Economic protocol features</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../alpha/protocol_overview.html">Overview of the economic protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/proof_of_stake.html">Proof-of-stake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/randomness_generation.html">Randomness generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/baking_power.html">Baking Power</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/consensus.html">The consensus algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/voting.html">The Amendment (and Voting) Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/accounts.html">Accounts and addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/michelson.html">Michelson: the language of Smart Contracts in Tezos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/views.html">On-chain Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/timelock.html">Time-lock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/sapling.html">Sapling support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/liquidity_baking.html">Liquidity Baking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/global_constants.html">Global Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/michelson_anti_patterns.html">Michelson Anti-Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/token_management.html">Token transfers and balance updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/precheck.html">Prechecking of manager operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/smart_rollups.html">Smart Optimistic Rollups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/plugins.html">Protocol Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/event.html">Contract events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/blocks_ops.html">Blocks and Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/validation.html">Validation and Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/tickets.html">Tickets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/adaptive_issuance.html">Adaptive Issuance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/staking.html">Staking mechanism</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/adaptive_slashing.html">Adaptive Slashing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/dal_support.html">DAL support</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../alpha/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../alpha/cli-commands.html">Command Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../alpha/rpc.html">Alpha RPCs - Reference</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tezos developer Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../developer/rpc.html">JSON/RPC interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/errors.html">RPC Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/openapi.html">RPCs - OpenAPI reference</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Changes in Octez releases</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../releases/releases.html">Release System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/version-20.html">Version 20.2</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../releases/history.html">Older Versions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-19.html">Version 19.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-18.html">Version 18.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-17.html">Version 17.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-16.html">Version 16.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-15.html">Version 15.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-14.html">Version 14.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-13.html">Version 13.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-12.html">Version 12.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-11.html">Version 11.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-10.html">Version 10.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-9.html">Version 9.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-8.html">Version 8.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-7.html">Version 7.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/january-2020.html">Mainnet January 2020</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/december-2019.html">Mainnet December 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/october-2019.html">Mainnet-Staging October 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/september-2019.html">Mainnet September 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/may-2019.html">Mainnet May 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/april-2019.html">Mainnet April 2019</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Changes in protocol versions</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../protocols/naming.html">Protocol versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocols/019_paris.html">Protocol Paris</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocols/021_quebeca.html">Protocol Quebeca</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocols/alpha.html">Protocol Alpha</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../protocols/history.html">Older Protocols</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../protocols/018_oxford.html">Protocol Oxford</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/017_nairobi.html">Protocol Nairobi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/016_mumbai.html">Protocol Mumbai</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/015_lima.html">Protocol Lima</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/014_kathmandu.html">Protocol Kathmandu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/013_jakarta.html">Protocol Jakarta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/012_ithaca.html">Protocol Ithaca</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/011_hangzhou.html">Protocol Hangzhou</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/010_granada.html">Protocol Granada</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/009_florence.html">Protocol Florence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/008_edo.html">Protocol Edo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/007_delphi.html">Protocol Delphi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/006_carthage.html">Protocol Carthage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/005_babylon.html">Protocol Babylon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/004_Pt24m4xi.html">Protocol Athens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/003_PsddFKi3.html">Protocol 003_PsddFKi3</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer/contributing_index.html">How to contribute</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../developer/contributing.html">How to contribute to Octez</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/contributing-adding-a-new-opam-dependency.html">How to add or update opam dependencies</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/merge_team.html">Octez Merge Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/guidelines.html">Documentation and coding guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/repository_scope.html">Scope of the Octez repository</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer/programming.html">Programming tutorials</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/gadt.html">Generalized Algebraic Data Types (GADTs)</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../developer/error_monad.html">The Error Monad</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/error_monad_p1_result.html">Part 1: <code class="docutils literal notranslate"><span class="pre">result</span></code>, Lwt, and Lwt-<code class="docutils literal notranslate"><span class="pre">result</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/error_monad_p2_tzresult.html">Part 2: <code class="docutils literal notranslate"><span class="pre">tzresult</span></code> and Lwt-<code class="docutils literal notranslate"><span class="pre">tzresult</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/error_monad_p3_advanced.html">Part 3: Advanced topics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/error_monad_p4_appendices.html">Part 4: Appendices</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/clic.html">The <code class="docutils literal notranslate"><span class="pre">clic</span></code> library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/data_encoding.html">The <code class="docutils literal notranslate"><span class="pre">data_encoding</span></code> library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/event_logging_framework.html">Using The Event Logging Framework</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer/testing_index.html">Testing in Octez</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/testing.html">Overview of Testing in Octez</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/ppx_expect.html">Ppx_expect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/tezt.html">Tezt: OCaml Tezos Test Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/long-tezts.html">Tezt: Long Tests and Performance Regression Test Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/alcotezt.html">Alcotezt: An Alcotest Compatibility Wrapper for Tezt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/unit_testing_legacy_code.html">Making legacy code unit-testable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/proposal_testing.html">How to Test a Protocol Proposal</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer/maintaining.html">Maintaining</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/entering_alpha.html">How to start reading protocol Alpha</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/michelson_instructions.html">Adding a new instruction to Michelson language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/protocol_release_checklist.html">Protocol Release Checklist</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/howto-freeze-protocols.html">How to Freeze Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/protocol_environment_upgrade.html">Adding a new protocol environment</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Documenting</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer/tools.html">Platform Development tools</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/profiling.html">Profiling the Octez node</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../developer/snoop.html">Benchmarking with Snoop</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/snoop_arch.html">Architecture of <code class="docutils literal notranslate"><span class="pre">octez-snoop</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/snoop_tutorial.html">Snoop usage tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/snoop_example.html">In-depth usage example: more control over your benchmark</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/tezos_micheline_rewriting.html">Rewriting Micheline with <code class="docutils literal notranslate"><span class="pre">tezos-micheline-rewriting</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/snoop_interpreter.html">Snoop and the Michelson Interpreter</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/time_measurement_ppx.html">Time measurement PPX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/python_environment.html">Python Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/pre_commit_hook.html">Pre-Commit Hook</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/encodings.html">Encodings</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer/merkle-proof-encoding-formats.html">Merkle Proof Encoding Formats</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/merkle-proof-formats/v1-tree32.html">V1 for Tree32</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/merkle-proof-formats/v1-tree2.html">V1 for Tree2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/merkle-proof-formats/v2-tree32.html">V2 for Tree32</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/merkle-proof-formats/v2-tree2.html">V2 for Tree2</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api-inline.html">OCaml APIs - Reference</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-gitlab"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://gitlab.com/tezos/tezos" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-gitlab"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://gitlab.com/tezos/tezos/-/issues/new?issue[title]=Issue%20on%20page%20%2Fuser/multisig.html&issue[description]=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Built-in multisig contracts</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interacting-with-a-multisig-contract-using-octez-client">Interacting with a multisig contract using <code class="docutils literal notranslate"><span class="pre">octez-client</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#originating-a-new-multisig-contract">Originating a new multisig contract</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#preparing-a-transaction">Preparing a transaction</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#signing-an-action">Signing an action</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#acting-on-the-multisig-contract">Acting on the multisig contract</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#supported-versions-of-the-multisig-contract">Supported versions of the multisig contract</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-generic-multisig-contract">The generic multisig contract</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-legacy-multisig-contract">The legacy multisig contract</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#listing-supported-hashes">Listing supported hashes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interacting-with-a-multisig-contract-directly">Interacting with a multisig contract directly</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#anti-replay-protection">Anti-replay protection</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multisig-contract-storage">Multisig contract storage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multisig-contract-actions">Multisig contract actions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multisig-contract-sign-data">Multisig contract sign data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multisig-contract-parameter">Multisig contract parameter</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#formal-verification">Formal verification</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="built-in-multisig-contracts">
<h1>Built-in multisig contracts<a class="headerlink" href="#built-in-multisig-contracts" title="Link to this heading">#</a></h1>
<p>A multi-signed account, or <em>multisig</em> for short, is a way to share the
ownership of an account (and its associated balance) between
several participants.</p>
<p>To act on a multisig, a fraction of the participants must agree on the
action by signing it with their private keys. The minimal number of
participants that need to agree for the action to be approved is
called the multisig <em>threshold</em>.</p>
<p>Tezos supports developing and deploying multisig smart contracts. Such a
multisig contract has built-in support in the <code class="docutils literal notranslate"><span class="pre">octez-client</span></code> and has
been formally verified using the <a class="reference external" href="https://gitlab.com/nomadic-labs/mi-cho-coq/">Mi-Cho-Coq</a> framework.</p>
<section id="interacting-with-a-multisig-contract-using-octez-client">
<h2>Interacting with a multisig contract using <code class="docutils literal notranslate"><span class="pre">octez-client</span></code><a class="headerlink" href="#interacting-with-a-multisig-contract-using-octez-client" title="Link to this heading">#</a></h2>
<p>The recommended way to create and use a multisig contract is via
the <code class="docutils literal notranslate"><span class="pre">octez-client</span></code> built-in commands for the multisig contract. The command
<code class="docutils literal notranslate"><span class="pre">octez-client</span> <span class="pre">man</span> <span class="pre">multisig</span></code> gives a complete list of
multisig-related commands with details about the syntax of each
command.</p>
<section id="originating-a-new-multisig-contract">
<h3>Originating a new multisig contract<a class="headerlink" href="#originating-a-new-multisig-contract" title="Link to this heading">#</a></h3>
<p>To originate a new generic multisig contract, use the <code class="docutils literal notranslate"><span class="pre">octez-client</span>
<span class="pre">deploy</span> <span class="pre">multisig</span></code> command. It is similar to <code class="docutils literal notranslate"><span class="pre">octez-client</span> <span class="pre">originate</span>
<span class="pre">contract</span></code> with the following differences:</p>
<ul class="simple">
<li><p>no script is given because the script of the generic multisig
contract is fixed</p></li>
<li><p>instead of giving the initial storage with the <code class="docutils literal notranslate"><span class="pre">--init</span></code> option,
the threshold and the public keys of the participants are given on
the command line.</p></li>
</ul>
<p>For example, the following commands can be used to generate three pairs
of keys named <code class="docutils literal notranslate"><span class="pre">alice</span></code>, <code class="docutils literal notranslate"><span class="pre">bob</span></code>, and <code class="docutils literal notranslate"><span class="pre">charlie</span></code> and originate a multisig
contract named <code class="docutils literal notranslate"><span class="pre">msig</span></code> that can be actioned by any two of them; the
initial balance of this contract and of each of the signers is ꜩ100 generously offered by the
first bootstrap account:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ octez-client gen keys alice
$ octez-client gen keys bob
$ octez-client gen keys charlie
$ octez-client transfer 100 from bootstrap1 to alice --burn-cap 1
$ octez-client transfer 100 from bootstrap1 to bob --burn-cap 1
$ octez-client transfer 100 from bootstrap1 to charlie --burn-cap 1
$ octez-client deploy multisig msig transferring 100 from bootstrap1 with threshold 2 on public keys alice bob charlie --burn-cap 1
</pre></div>
</div>
</section>
<section id="preparing-a-transaction">
<h3>Preparing a transaction<a class="headerlink" href="#preparing-a-transaction" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">octez-client</span> <span class="pre">prepare</span> <span class="pre">multisig</span> <span class="pre">transaction</span></code> commands are used to
obtain the byte sequence corresponding to a possible action and that
needs to be signed.</p>
<p>To avoid writing Michelson lambdas, special cases for a single
transfer or delegate change have their own commands.</p>
<p>By default the <code class="docutils literal notranslate"><span class="pre">octez-client</span> <span class="pre">prepare</span> <span class="pre">multisig</span> <span class="pre">transaction</span></code> commands
display not only the byte sequence to sign but also a cryptographic
hash (this can be useful when signing with a hardware signer), the
threshold and the participant public keys. To obtain the byte sequence
only, these commands accept a <code class="docutils literal notranslate"><span class="pre">--bytes-only</span></code> option.
For example, if Alice and Charlie want to send ꜩ10 from the
multisig to Bob they will need to sign a transaction. They can call</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ octez-client prepare multisig transaction on msig transferring 10 to bob
</pre></div>
</div>
<p>This command will give them the byte sequence they need to sign, its
cryptographic hash, the threshold (which is 2 in this case), and the
public keys of Alice, Bob, and Charlie.</p>
</section>
<section id="signing-an-action">
<h3>Signing an action<a class="headerlink" href="#signing-an-action" title="Link to this heading">#</a></h3>
<p>There are two equivalent ways to sign an action with <code class="docutils literal notranslate"><span class="pre">octez-client</span></code>:</p>
<ul class="simple">
<li><p>preparing the action with one of the <code class="docutils literal notranslate"><span class="pre">octez-client</span> <span class="pre">prepare</span> <span class="pre">multisig</span>
<span class="pre">transaction</span></code> commands and then signing it using the <code class="docutils literal notranslate"><span class="pre">octez-client</span>
<span class="pre">sign</span> <span class="pre">bytes</span></code> command,</p></li>
<li><p>or directly using one of the <code class="docutils literal notranslate"><span class="pre">octez-client</span> <span class="pre">sign</span> <span class="pre">multisig</span>
<span class="pre">transaction</span></code> commands that combine these two steps.</p></li>
</ul>
<p>For example, Alice can sign the transfer to Bob using</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ TO_SIGN=$(octez-client prepare multisig transaction on msig transferring 10 to bob --bytes-only)
$ ALICE_S_SIGNATURE=$(octez-client sign bytes &quot;$TO_SIGN&quot; for alice | cut -d &#39; &#39; -f 2)
</pre></div>
</div>
<p>and Charlie can sign the same transfer using</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ CHARLIE_S_SIGNATURE=$(octez-client sign multisig transaction on msig transferring 10 to bob using secret key charlie)
</pre></div>
</div>
</section>
<section id="acting-on-the-multisig-contract">
<h3>Acting on the multisig contract<a class="headerlink" href="#acting-on-the-multisig-contract" title="Link to this heading">#</a></h3>
<p>Once a user has gathered enough signatures to act on the multisig
contract, there are again two equivalent ways of sending the
signatures:</p>
<ul class="simple">
<li><p>preparing the action with one of the <code class="docutils literal notranslate"><span class="pre">octez-client</span> <span class="pre">prepare</span> <span class="pre">multisig</span>
<span class="pre">transaction</span></code> commands and then using the produced byte sequence
in the <code class="docutils literal notranslate"><span class="pre">octez-client</span> <span class="pre">run</span> <span class="pre">transaction</span></code> command,</p></li>
<li><p>or directly using one of the following commands depending on the action:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">octez-client</span> <span class="pre">from</span> <span class="pre">multisig</span> <span class="pre">contract</span> <span class="pre">&lt;multisig&gt;</span> <span class="pre">transfer</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">octez-client</span> <span class="pre">from</span> <span class="pre">multisig</span> <span class="pre">contract</span> <span class="pre">&lt;multisig&gt;</span> <span class="pre">run</span> <span class="pre">lambda</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">octez-client</span> <span class="pre">set</span> <span class="pre">delegate</span> <span class="pre">of</span> <span class="pre">multisig</span> <span class="pre">contract</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">octez-client</span> <span class="pre">withdraw</span> <span class="pre">delegate</span> <span class="pre">of</span> <span class="pre">multisig</span> <span class="pre">contract</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">octez-client</span> <span class="pre">set</span> <span class="pre">threshold</span> <span class="pre">of</span> <span class="pre">multisig</span> <span class="pre">contract</span></code></p></li>
</ul>
</li>
</ul>
<p>For example, if Alice sends her signature to Charlie, he can perform
the multi-signed transfer of ꜩ10 to Bob using either:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ octez-client run transaction &quot;$TO_SIGN&quot; on multisig contract msig on behalf of charlie with signatures &quot;$ALICE_S_SIGNATURE&quot; &quot;$CHARLIE_S_SIGNATURE&quot;
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ octez-client from multisig contract msig transfer 10 to bob on behalf of charlie with signatures &quot;$ALICE_S_SIGNATURE&quot; &quot;$CHARLIE_S_SIGNATURE&quot;
</pre></div>
</div>
</section>
</section>
<section id="supported-versions-of-the-multisig-contract">
<h2>Supported versions of the multisig contract<a class="headerlink" href="#supported-versions-of-the-multisig-contract" title="Link to this heading">#</a></h2>
<p>Two main versions of the multisig contract are supported by
<code class="docutils literal notranslate"><span class="pre">octez-client</span></code>. They are called the generic multisig contract and
the legacy multisig contract.</p>
<section id="the-generic-multisig-contract">
<h3>The generic multisig contract<a class="headerlink" href="#the-generic-multisig-contract" title="Link to this heading">#</a></h3>
<p>The <a class="reference external" href="https://gitlab.com/tezos/tezos/-/blob/master/michelson_test_scripts/mini_scenarios/generic_multisig.tz">generic multisig contract</a> is
the multisig contract that is currently recommended. It has the
following features:</p>
<ul class="simple">
<li><p>it can receive tokens from unauthenticated sources on its default
entrypoint of type <code class="docutils literal notranslate"><span class="pre">unit</span></code></p></li>
<li><p>the possible authenticated actions on the contract are:</p>
<ul>
<li><p>atomically execute an arbitrary list of operations (of type
<code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">unit</span> <span class="pre">(list</span> <span class="pre">operation)</span></code> in Michelson)</p></li>
<li><p>update the contract storage to change both the threshold and the
participant public keys</p></li>
</ul>
</li>
</ul>
</section>
<section id="the-legacy-multisig-contract">
<h3>The legacy multisig contract<a class="headerlink" href="#the-legacy-multisig-contract" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">octez-client</span></code> also supports
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/blob/master/michelson_test_scripts/mini_scenarios/legacy_multisig.tz">a legacy version</a> of the multisig contract which has the following
limitations:</p>
<ul class="simple">
<li><p>it cannot receive tokens from unauthenticated sources, sending
tokens to the contract is only possible as a side effect of an
authenticated action</p></li>
<li><p>the possible authenticated actions on the contract are:</p>
<ul>
<li><p>transfer without parameter to a user account or to a smart
contract with an entrypoint of type <code class="docutils literal notranslate"><span class="pre">unit</span></code></p></li>
<li><p>set the delegate of the contract</p></li>
<li><p>remove the delegate of the contract</p></li>
<li><p>update the contract storage to change both the threshold and the
participant public keys</p></li>
</ul>
</li>
</ul>
<p>In particular, the legacy multisig contract does not support executing
several operations atomically, calling smart contracts with
parameters, and originating new contracts. In contrast, all the
features of the legacy multisig contract are supported by the generic
multisig contract.</p>
</section>
<section id="listing-supported-hashes">
<h3>Listing supported hashes<a class="headerlink" href="#listing-supported-hashes" title="Link to this heading">#</a></h3>
<p>For security reasons, <code class="docutils literal notranslate"><span class="pre">octez-client</span></code> will not interact with unknown
scripts even if their interface matches one of the supported
multisig contracts. To check if a script is one of the supported ones,
it stores a list of script hashes that can be printed by
<code class="docutils literal notranslate"><span class="pre">octez-client</span> <span class="pre">show</span> <span class="pre">supported</span> <span class="pre">multisig</span> <span class="pre">hashes</span></code>. The script originated
by the <code class="docutils literal notranslate"><span class="pre">octez-client</span> <span class="pre">deploy</span> <span class="pre">multisig</span></code> command is always one of the
supported multisig contracts.</p>
</section>
</section>
<section id="interacting-with-a-multisig-contract-directly">
<h2>Interacting with a multisig contract directly<a class="headerlink" href="#interacting-with-a-multisig-contract-directly" title="Link to this heading">#</a></h2>
<p>The following subsections describe in detail the low-level API of a
built-in multisig contract, allowing one to originate and use in
situations where <code class="docutils literal notranslate"><span class="pre">octez-client</span></code> cannot be used e.g., when
interacting with the chain from a web browser or in a mobile
application. In particular, this interface is typically useful when
developing multisig support in another Tezos wallet.</p>
<section id="anti-replay-protection">
<h3>Anti-replay protection<a class="headerlink" href="#anti-replay-protection" title="Link to this heading">#</a></h3>
<p>A replay attack consists in authenticating as someone else by reusing
a signature emitted in a different context. Examples of replay attacks
include reusing a signature sent in a previous transaction, to another
multisig contract, or to the same contract on another chain.</p>
<p>To protect against replay attack, signed data of a multisig contract
needs to contain not only the action to perform but also:</p>
<ul class="simple">
<li><p>the address of the multisig contract to avoid replaying signatures
meant for another multisig contract,</p></li>
<li><p>the chain identifier of the current chain to avoid replaying
signatures between the test chain forked during the testing period
of <a class="reference internal" href="../active/voting.html"><span class="doc">the voting procedure</span></a> and the main chain,</p></li>
<li><p>an always-increasing anti-replay counter to avoid replaying past
transactions on the same multisig contract.</p></li>
</ul>
<p>The anti-replay counter is stored in the multisig contract storage and
incremented at each successful call of the multisig contract.</p>
</section>
<section id="multisig-contract-storage">
<h3>Multisig contract storage<a class="headerlink" href="#multisig-contract-storage" title="Link to this heading">#</a></h3>
<p>Both the generic and the legacy multisig contracts have a storage of
type <code class="docutils literal notranslate"><span class="pre">(pair</span> <span class="pre">(nat</span> <span class="pre">%stored_counter)</span> <span class="pre">(pair</span> <span class="pre">(nat</span> <span class="pre">%threshold)</span> <span class="pre">(list</span> <span class="pre">%keys</span>
<span class="pre">key)))</span></code> so the storage of the multisig contract is of the form <code class="docutils literal notranslate"><span class="pre">Pair</span>
<span class="pre">&lt;stored_counter&gt;</span> <span class="pre">(Pair</span> <span class="pre">&lt;threshold&gt;</span> <span class="pre">{</span> <span class="pre">&lt;first_public_key&gt;;</span>
<span class="pre">&lt;second_public_key&gt;;</span> <span class="pre">...;</span> <span class="pre">&lt;last_public_key&gt;</span> <span class="pre">})</span></code> where
<code class="docutils literal notranslate"><span class="pre">&lt;stored_counter&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;threshold&gt;</span></code> are Micheline integers
representing respectively the anti-replay counter and the threshold
and each public key is either a Micheline byte sequence or a Micheline
string depending on the mode used to unparse the storage.</p>
</section>
<section id="multisig-contract-actions">
<h3>Multisig contract actions<a class="headerlink" href="#multisig-contract-actions" title="Link to this heading">#</a></h3>
<p>The type of actions for the generic multisig is <code class="docutils literal notranslate"><span class="pre">(or</span> <span class="pre">:action</span> <span class="pre">(lambda</span>
<span class="pre">%operation</span> <span class="pre">unit</span> <span class="pre">(list</span> <span class="pre">operation))</span> <span class="pre">(pair</span> <span class="pre">%change_keys</span> <span class="pre">(nat</span> <span class="pre">%threshold)</span>
<span class="pre">(list</span> <span class="pre">%keys</span> <span class="pre">key)))</span></code> so a valid action is either of the form <code class="docutils literal notranslate"><span class="pre">Left</span>
<span class="pre">{&lt;code&gt;}</span></code> where <code class="docutils literal notranslate"><span class="pre">code</span></code> is of type <code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">unit</span> <span class="pre">(list</span> <span class="pre">operation)</span></code>
for executing the given lambda and sending the produced operations or
<code class="docutils literal notranslate"><span class="pre">Right</span> <span class="pre">(Pair</span> <span class="pre">&lt;new_threshold&gt;</span> <span class="pre">{&lt;new_first_public_key&gt;;</span> <span class="pre">...;</span>
<span class="pre">&lt;new_last_public_key&gt;})</span></code> for changing the threshold and participant
public keys.</p>
<p>The type of actions for the legacy multisig is <code class="docutils literal notranslate"><span class="pre">(or</span> <span class="pre">:action</span> <span class="pre">(pair</span>
<span class="pre">:transfer</span> <span class="pre">(mutez</span> <span class="pre">%amount)</span> <span class="pre">(contract</span> <span class="pre">%dest</span> <span class="pre">unit))</span> <span class="pre">(or</span> <span class="pre">(option</span> <span class="pre">%delegate</span>
<span class="pre">key_hash)</span> <span class="pre">(pair</span> <span class="pre">%change_keys</span> <span class="pre">(nat</span> <span class="pre">%threshold)</span> <span class="pre">(list</span> <span class="pre">%keys</span> <span class="pre">key))))</span></code> so
a valid action is either of the form <code class="docutils literal notranslate"><span class="pre">Left</span> <span class="pre">(Pair</span> <span class="pre">&lt;amount&gt;</span>
<span class="pre">&lt;destination&gt;)</span></code> for a transfer, <code class="docutils literal notranslate"><span class="pre">Right</span> <span class="pre">(Left</span> <span class="pre">None)</span></code> for withdrawing
the delegate, <code class="docutils literal notranslate"><span class="pre">Right</span> <span class="pre">(Left</span> <span class="pre">(Some</span> <span class="pre">&lt;new_delegate&gt;))</span></code> for changing the
delegate, or <code class="docutils literal notranslate"><span class="pre">Right</span> <span class="pre">(Right</span> <span class="pre">(Pair</span> <span class="pre">&lt;new_threshold&gt;</span>
<span class="pre">{&lt;new_first_public_key&gt;;</span> <span class="pre">...;</span> <span class="pre">&lt;new_last_public_key&gt;}))</span></code> for changing
the threshold and participant public keys.</p>
</section>
<section id="multisig-contract-sign-data">
<h3>Multisig contract sign data<a class="headerlink" href="#multisig-contract-sign-data" title="Link to this heading">#</a></h3>
<p>The data to sign for a given action is the binary serialisation (using
the <code class="docutils literal notranslate"><span class="pre">PACK</span></code> Michelson instruction) of an expression of type <code class="docutils literal notranslate"><span class="pre">pair</span>
<span class="pre">(pair</span> <span class="pre">chain_id</span> <span class="pre">address)</span> <span class="pre">(pair</span> <span class="pre">:payload</span> <span class="pre">(nat</span> <span class="pre">%counter)</span> <span class="pre">&lt;action&gt;)</span></code>
where the <code class="docutils literal notranslate"><span class="pre">&lt;chain_id&gt;</span></code> is the chain id of the current chain as
returned by the <code class="docutils literal notranslate"><span class="pre">CHAIN_ID</span></code> instruction, the address is the one of
the multisig contract as returned by <code class="docutils literal notranslate"><span class="pre">SELF;</span> <span class="pre">ADDRESS</span></code>, the <code class="docutils literal notranslate"><span class="pre">nat</span></code>
counter must match exactly the stored counter.</p>
</section>
<section id="multisig-contract-parameter">
<h3>Multisig contract parameter<a class="headerlink" href="#multisig-contract-parameter" title="Link to this heading">#</a></h3>
<p>The generic contract has two entrypoints:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code> of type <code class="docutils literal notranslate"><span class="pre">unit</span></code> used to receive tokens from
unauthenticated sources</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">main</span></code> of type <code class="docutils literal notranslate"><span class="pre">pair</span> <span class="pre">(pair</span> <span class="pre">:payload</span> <span class="pre">(nat</span> <span class="pre">%counter)</span> <span class="pre">&lt;action&gt;)</span>
<span class="pre">(list</span> <span class="pre">%sigs</span> <span class="pre">(option</span> <span class="pre">signature))</span></code> used to perform a multi-signed
action.</p></li>
</ul>
<p>The legacy contract has only one entrypoint that is unnamed and whose type corresponds to the second above.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">nat</span></code> counter must exactly match the stored counter and the list
of optional signatures must be of the same length and given in the
same order as the stored public keys; <code class="docutils literal notranslate"><span class="pre">None</span></code> can be used to skip a
signature, the number of provided signatures must be greater or equal
to the stored threshold.</p>
</section>
</section>
<section id="formal-verification">
<h2>Formal verification<a class="headerlink" href="#formal-verification" title="Link to this heading">#</a></h2>
<p>See
<a class="reference external" href="https://gitlab.com/nomadic-labs/mi-cho-coq/-/blob/master/src/contracts_coq/generic_multisig.v">here</a>
for a formal specification and a correctness proof of the generic
multisig script written in Coq using the Mi-Cho-Coq framework.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="teztale.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Monitoring the consensus protocol</p>
      </div>
    </a>
    <a class="right-next"
       href="fa12.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">FA1.2 support</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interacting-with-a-multisig-contract-using-octez-client">Interacting with a multisig contract using <code class="docutils literal notranslate"><span class="pre">octez-client</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#originating-a-new-multisig-contract">Originating a new multisig contract</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#preparing-a-transaction">Preparing a transaction</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#signing-an-action">Signing an action</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#acting-on-the-multisig-contract">Acting on the multisig contract</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#supported-versions-of-the-multisig-contract">Supported versions of the multisig contract</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-generic-multisig-contract">The generic multisig contract</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-legacy-multisig-contract">The legacy multisig contract</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#listing-supported-hashes">Listing supported hashes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interacting-with-a-multisig-contract-directly">Interacting with a multisig contract directly</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#anti-replay-protection">Anti-replay protection</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multisig-contract-storage">Multisig contract storage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multisig-contract-actions">Multisig contract actions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multisig-contract-sign-data">Multisig contract sign data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multisig-contract-parameter">Multisig contract parameter</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#formal-verification">Formal verification</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Nomadic Labs <contact@nomadic-labs.com>
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2018-2023, Nomadic Labs &lt;contact@nomadic-labs.com&gt;.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>