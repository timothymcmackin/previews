
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Node Configuration &#8212; Octez &amp; Protocol products documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=1cb20957" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=fcbf31fd"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-KT3Z3X4Y82"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-KT3Z3X4Y82');
            </script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-KT3Z3X4Y82');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user/node-configuration';</script>
    <script src="../_static/js/custom.js?v=e7f469e6"></script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Connecting to a Network" href="multinetwork.html" />
    <link rel="prev" title="Setting up the node" href="setup-node.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.svg" class="logo__image only-light" alt="Octez & Protocol products documentation - Home"/>
    <script>document.write(`<img src="../_static/logo.svg" class="logo__image only-dark" alt="Octez & Protocol products documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../introduction/tezos.html">Octez &amp; Protocol overview</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../introduction/howtoget.html">Installing Octez</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../introduction/cosign-verify.html">Verifying Octez Docker Images with Cosign</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/get_troubleshooting.html">Installation troubleshooting</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/howtouse.html">Getting started with Octez</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/howtorun.html">Running Octez</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/services.html">Setting up Octez Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/versioning.html">Octez &amp; Protocol versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/breaking_changes.html">BREAKING CHANGES</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Octez User manual</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="setup-client.html">Setting up the client</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="client-configuration.html">Client Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="key-management.html">Key Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="sandbox.html">Sandboxed mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="mockup.html">Mockup mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="proxy.html">Proxy mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="light.html">Light mode</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="setup-node.html">Setting up the node</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Node Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="multinetwork.html">Connecting to a Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="history_modes.html">History modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapshots.html">Snapshots</a></li>
<li class="toctree-l2"><a class="reference internal" href="proxy-server.html">Proxy server</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="node-monitoring.html">Monitoring an Octez Node</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/openmetrics.html">Supported Open Metrics</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="teztale.html">Monitoring the consensus protocol</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="multisig.html">Built-in multisig contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="fa12.html">FA1.2 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging features</a></li>
<li class="toctree-l1"><a class="reference internal" href="exits.html">Exit codes and signals</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Octez Reference manual</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../shell/the_big_picture.html">Octez Software Architecture</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../shell/shell.html">The Octez Shell</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../shell/validation.html">The validation subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/prevalidation.html">The Prevalidator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/storage.html">The storage layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/sync.html">Synchronisation heuristic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/p2p.html">The peer-to-peer layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/protocol_environment.html">Protocol Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/micheline.html">Micheline</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../shell/data_availability_committees.html">Data Availability Committees</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../shell/dal.html">Data Availability Layer</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../shell/dal_overview.html">DAL overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/dal_node.html">The DAL node</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/dal_bakers.html">Bakers &amp; the DAL</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../shell/smart_rollup_node.html">Smart rollup node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shell/p2p_api.html">P2P message format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shell/cli-commands.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shell/rpc.html">Shell RPCs - Reference</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Protocol Reference Manuals</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../active/index.html">Paris Protocol Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../active/protocol.html">Economic protocol features</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../active/protocol_overview.html">Overview of the economic protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/proof_of_stake.html">Proof-of-stake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/randomness_generation.html">Randomness generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/consensus.html">The consensus algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/voting.html">The Amendment (and Voting) Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/accounts.html">Accounts and addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/michelson.html">Michelson: the language of Smart Contracts in Tezos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/views.html">On-chain Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/timelock.html">Time-lock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/sapling.html">Sapling support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/liquidity_baking.html">Liquidity Baking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/global_constants.html">Global Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/michelson_anti_patterns.html">Michelson Anti-Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/token_management.html">Token transfers and balance updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/precheck.html">Prechecking of manager operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/smart_rollups.html">Smart Optimistic Rollups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/plugins.html">Protocol Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/event.html">Contract events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/blocks_ops.html">Blocks and Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/validation.html">Validation and Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/tickets.html">Tickets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/adaptive_issuance.html">Adaptive Issuance and Staking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/adaptive_slashing.html">Adaptive Slashing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/dal_support.html">DAL support</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../active/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../active/cli-commands.html">Command Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../active/rpc.html">Paris RPCs - Reference</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../quebeca/index.html">Quebeca Protocol Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../quebeca/protocol.html">Economic protocol features</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/protocol_overview.html">Overview of the economic protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/proof_of_stake.html">Proof-of-stake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/randomness_generation.html">Randomness generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/baking_power.html">Baking Power</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/consensus.html">The consensus algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/voting.html">The Amendment (and Voting) Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/accounts.html">Accounts and addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/michelson.html">Michelson: the language of Smart Contracts in Tezos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/views.html">On-chain Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/timelock.html">Time-lock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/sapling.html">Sapling support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/liquidity_baking.html">Liquidity Baking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/global_constants.html">Global Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/michelson_anti_patterns.html">Michelson Anti-Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/token_management.html">Token transfers and balance updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/precheck.html">Prechecking of manager operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/smart_rollups.html">Smart Optimistic Rollups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/plugins.html">Protocol Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/event.html">Contract events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/blocks_ops.html">Blocks and Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/validation.html">Validation and Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/tickets.html">Tickets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/adaptive_issuance.html">Adaptive Issuance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/staking.html">Staking mechanism</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/adaptive_slashing.html">Adaptive Slashing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quebeca/dal_support.html">DAL support</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../quebeca/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quebeca/cli-commands.html">Command Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quebeca/rpc.html">Quebeca RPCs - Reference</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../alpha/index.html">Alpha Dev Protocol Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../alpha/protocol.html">Economic protocol features</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../alpha/protocol_overview.html">Overview of the economic protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/proof_of_stake.html">Proof-of-stake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/randomness_generation.html">Randomness generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/baking_power.html">Baking Power</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/consensus.html">The consensus algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/voting.html">The Amendment (and Voting) Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/accounts.html">Accounts and addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/michelson.html">Michelson: the language of Smart Contracts in Tezos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/views.html">On-chain Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/timelock.html">Time-lock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/sapling.html">Sapling support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/liquidity_baking.html">Liquidity Baking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/global_constants.html">Global Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/michelson_anti_patterns.html">Michelson Anti-Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/token_management.html">Token transfers and balance updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/precheck.html">Prechecking of manager operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/smart_rollups.html">Smart Optimistic Rollups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/plugins.html">Protocol Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/event.html">Contract events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/blocks_ops.html">Blocks and Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/validation.html">Validation and Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/tickets.html">Tickets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/adaptive_issuance.html">Adaptive Issuance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/staking.html">Staking mechanism</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/adaptive_slashing.html">Adaptive Slashing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/dal_support.html">DAL support</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../alpha/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../alpha/cli-commands.html">Command Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../alpha/rpc.html">Alpha RPCs - Reference</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tezos developer Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../developer/rpc.html">JSON/RPC interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/errors.html">RPC Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/openapi.html">RPCs - OpenAPI reference</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Changes in Octez releases</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../releases/releases.html">Release System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/version-20.html">Version 20.2</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../releases/history.html">Older Versions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-19.html">Version 19.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-18.html">Version 18.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-17.html">Version 17.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-16.html">Version 16.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-15.html">Version 15.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-14.html">Version 14.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-13.html">Version 13.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-12.html">Version 12.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-11.html">Version 11.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-10.html">Version 10.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-9.html">Version 9.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-8.html">Version 8.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-7.html">Version 7.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/january-2020.html">Mainnet January 2020</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/december-2019.html">Mainnet December 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/october-2019.html">Mainnet-Staging October 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/september-2019.html">Mainnet September 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/may-2019.html">Mainnet May 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/april-2019.html">Mainnet April 2019</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Changes in protocol versions</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../protocols/naming.html">Protocol versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocols/019_paris.html">Protocol Paris</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocols/021_quebeca.html">Protocol Quebeca</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocols/alpha.html">Protocol Alpha</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../protocols/history.html">Older Protocols</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../protocols/018_oxford.html">Protocol Oxford</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/017_nairobi.html">Protocol Nairobi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/016_mumbai.html">Protocol Mumbai</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/015_lima.html">Protocol Lima</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/014_kathmandu.html">Protocol Kathmandu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/013_jakarta.html">Protocol Jakarta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/012_ithaca.html">Protocol Ithaca</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/011_hangzhou.html">Protocol Hangzhou</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/010_granada.html">Protocol Granada</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/009_florence.html">Protocol Florence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/008_edo.html">Protocol Edo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/007_delphi.html">Protocol Delphi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/006_carthage.html">Protocol Carthage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/005_babylon.html">Protocol Babylon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/004_Pt24m4xi.html">Protocol Athens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/003_PsddFKi3.html">Protocol 003_PsddFKi3</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer/contributing_index.html">How to contribute</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../developer/contributing.html">How to contribute to Octez</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/contributing-adding-a-new-opam-dependency.html">How to add or update opam dependencies</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/merge_team.html">Octez Merge Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/guidelines.html">Documentation and coding guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/repository_scope.html">Scope of the Octez repository</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer/programming.html">Programming tutorials</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/gadt.html">Generalized Algebraic Data Types (GADTs)</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../developer/error_monad.html">The Error Monad</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/error_monad_p1_result.html">Part 1: <code class="docutils literal notranslate"><span class="pre">result</span></code>, Lwt, and Lwt-<code class="docutils literal notranslate"><span class="pre">result</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/error_monad_p2_tzresult.html">Part 2: <code class="docutils literal notranslate"><span class="pre">tzresult</span></code> and Lwt-<code class="docutils literal notranslate"><span class="pre">tzresult</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/error_monad_p3_advanced.html">Part 3: Advanced topics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/error_monad_p4_appendices.html">Part 4: Appendices</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/clic.html">The <code class="docutils literal notranslate"><span class="pre">clic</span></code> library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/data_encoding.html">The <code class="docutils literal notranslate"><span class="pre">data_encoding</span></code> library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/event_logging_framework.html">Using The Event Logging Framework</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer/testing_index.html">Testing in Octez</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/testing.html">Overview of Testing in Octez</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/ppx_expect.html">Ppx_expect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/tezt.html">Tezt: OCaml Tezos Test Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/long-tezts.html">Tezt: Long Tests and Performance Regression Test Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/alcotezt.html">Alcotezt: An Alcotest Compatibility Wrapper for Tezt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/unit_testing_legacy_code.html">Making legacy code unit-testable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/proposal_testing.html">How to Test a Protocol Proposal</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer/maintaining.html">Maintaining</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/entering_alpha.html">How to start reading protocol Alpha</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/michelson_instructions.html">Adding a new instruction to Michelson language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/protocol_release_checklist.html">Protocol Release Checklist</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/howto-freeze-protocols.html">How to Freeze Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/protocol_environment_upgrade.html">Adding a new protocol environment</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Documenting</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer/tools.html">Platform Development tools</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/profiling.html">Profiling the Octez node</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../developer/snoop.html">Benchmarking with Snoop</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/snoop_arch.html">Architecture of <code class="docutils literal notranslate"><span class="pre">octez-snoop</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/snoop_tutorial.html">Snoop usage tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/snoop_example.html">In-depth usage example: more control over your benchmark</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/tezos_micheline_rewriting.html">Rewriting Micheline with <code class="docutils literal notranslate"><span class="pre">tezos-micheline-rewriting</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/snoop_interpreter.html">Snoop and the Michelson Interpreter</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/time_measurement_ppx.html">Time measurement PPX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/python_environment.html">Python Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/pre_commit_hook.html">Pre-Commit Hook</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/encodings.html">Encodings</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer/merkle-proof-encoding-formats.html">Merkle Proof Encoding Formats</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/merkle-proof-formats/v1-tree32.html">V1 for Tree32</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/merkle-proof-formats/v1-tree2.html">V1 for Tree2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/merkle-proof-formats/v2-tree32.html">V2 for Tree32</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/merkle-proof-formats/v2-tree2.html">V2 for Tree2</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api-inline.html">OCaml APIs - Reference</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-gitlab"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://gitlab.com/tezos/tezos" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-gitlab"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://gitlab.com/tezos/tezos/-/issues/new?issue[title]=Issue%20on%20page%20%2Fuser/node-configuration.html&issue[description]=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Node Configuration</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#node-configuration-file">Node configuration file</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-config-command">The config command</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#editing-the-configuration-file">Editing the configuration file</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rpc-parameters">RPC parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#access-control-lists">Access Control Lists</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">Examples</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#default-acl-for-rpc">Default ACL for RPC</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#http-caching-headers">HTTP Caching Headers</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#p2p-parameters">P2P parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#listening-ports">Listening ports</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#private-node">Private node</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#shell-parameters">Shell parameters</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="node-configuration">
<h1>Node Configuration<a class="headerlink" href="#node-configuration" title="Link to this heading">#</a></h1>
<p>The Octez node can be configured in flexible ways to control various
aspects of its behavior, such as <a class="reference internal" href="#configure-rpc"><span class="std std-ref">RPC</span></a>, <a class="reference internal" href="#configure-p2p"><span class="std std-ref">P2P</span></a>, or <a class="reference internal" href="#configure-shell"><span class="std std-ref">shell</span></a> parameters, the directory
for storing data, <a class="reference internal" href="logging.html"><span class="doc">logging</span></a>, and so on. These aspects
can be customized in two different ways:</p>
<ul class="simple">
<li><p>by supplying <strong>options</strong> on the command line when running the node</p></li>
<li><p>by specifying <strong>parameters</strong> in a configuration file for the node</p></li>
</ul>
<p>When the same parameter is set both in the configuration file and using a command line option, the value on the command line is taken into account (and the configuration file is not updated).</p>
<p>The list of configurable options on the command line interface (CLI) can be
obtained using the following command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>octez-node run --help
</pre></div>
</div>
<section id="node-configuration-file">
<span id="node-conf-file"></span><h2>Node configuration file<a class="headerlink" href="#node-configuration-file" title="Link to this heading">#</a></h2>
<p>Parameters in the configuration file can be specified in two different ways:</p>
<ul>
<li><p>by creating and updating the configuration file using the <code class="docutils literal notranslate"><span class="pre">config</span></code> command of <code class="docutils literal notranslate"><span class="pre">octez-node</span></code>. This covers a subset of the CLI of the <code class="docutils literal notranslate"><span class="pre">run</span></code> command of <code class="docutils literal notranslate"><span class="pre">octez-node</span></code> mentioned above.</p>
<p>The list of parameters configurable via the <code class="docutils literal notranslate"><span class="pre">config</span></code> command can be obtained using the following command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>octez-node config update --help
</pre></div>
</div>
</li>
<li><p>by directly editing the configuration file. This allows to specify all the available configuration parameters, including some that cannot be set using the options of the <code class="docutils literal notranslate"><span class="pre">config</span></code> and <code class="docutils literal notranslate"><span class="pre">run</span></code> commands of <code class="docutils literal notranslate"><span class="pre">octez-node</span></code>, for example network parameters such as connection or authentication timeouts.</p>
<p>The list of configurable parameters in the configuration file can be obtained using the following command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>octez-node config --help
</pre></div>
</div>
<p>This command also explains the role of each option and parameter and the range of possible values.</p>
</li>
</ul>
<section id="the-config-command">
<h3>The config command<a class="headerlink" href="#the-config-command" title="Link to this heading">#</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./octez-node config init
</pre></div>
</div>
<p>This will initialize a configuration file for the node in
<code class="docutils literal notranslate"><span class="pre">$HOME/.tezos-node/config.json</span></code>, using default values. It only
specifies that the node will listen to incoming connections on socket
address <code class="docutils literal notranslate"><span class="pre">[::]:9732</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In most of the cases, the default configuration file is sufficient as is, or slightly adjusted.
The following instructions detail how to adjust the node parameters, but you are advised to only change parameters that you fully understand.
Don’t blindly use the values in the examples below; they are just examples!</p>
</div>
<p>The easiest way to amend this default configuration is to use</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># Update the config file:
octez-node config update &lt;…&gt;
# Check your new values:
octez-node config show
# If you want to restart from an empty cfg file:
octez-node config reset &lt;…&gt;
</pre></div>
</div>
<p>However, note that the <code class="docutils literal notranslate"><span class="pre">network</span></code> configuration parameter, needed to run the node on a network other than the default one (Mainnet), can only be defined when the configuration file is initialized (using <code class="docutils literal notranslate"><span class="pre">init</span></code>), and cannot be updated later (using <code class="docutils literal notranslate"><span class="pre">update</span></code>). See the instructions for <a class="reference internal" href="multinetwork.html"><span class="doc">running the node in test networks</span></a>.</p>
<p>For example, the following script initializes and fills a configuration file using several command-line options:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># [remove config file if exists]</span>
rm<span class="w"> </span>-f<span class="w"> </span>tmp/config.json
<span class="c1"># [initialize config file]</span>
./octez-node<span class="w"> </span>config<span class="w"> </span>init<span class="w"> </span>--config-file<span class="o">=</span>tmp/config.json<span class="w"> </span>--network<span class="o">=</span>sandbox
<span class="c1"># [update config file]</span>
./octez-node<span class="w"> </span>config<span class="w"> </span>update<span class="w"> </span>--config-file<span class="o">=</span>tmp/config.json<span class="w"> </span>--data-dir<span class="o">=</span>tmp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--peer<span class="o">=</span><span class="s2">&quot;[::]:10732&quot;</span><span class="w"> </span>--peer<span class="o">=</span><span class="s2">&quot;192.168.1.3:9733&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--private-mode<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--rpc-addr<span class="o">=</span><span class="s2">&quot;localhost:8733&quot;</span><span class="w"> </span>--net-addr<span class="o">=</span><span class="s2">&quot;1.2.3.4&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--connections<span class="o">=</span><span class="m">25</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--log-output<span class="o">=</span><span class="s2">&quot;octez-node.log&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--history-mode<span class="o">=</span>full
<span class="c1"># [show config file]</span>
./octez-node<span class="w"> </span>config<span class="w"> </span>show<span class="w"> </span>--data-dir<span class="o">=</span>tmp
</pre></div>
</div>
</section>
<section id="editing-the-configuration-file">
<h3>Editing the configuration file<a class="headerlink" href="#editing-the-configuration-file" title="Link to this heading">#</a></h3>
<p>All blockchain data is stored under <code class="docutils literal notranslate"><span class="pre">$HOME/.tezos-node/</span></code> by default.
You can
change this by doing <code class="docutils literal notranslate"><span class="pre">./octez-node</span> <span class="pre">config</span> <span class="pre">update</span> <span class="pre">--data-dir</span> <span class="pre">&lt;/somewhere/in/your/disk&gt;</span></code>.</p>
<p>To run multiple nodes on the same machine, you can duplicate and edit
<code class="docutils literal notranslate"><span class="pre">$HOME/.tezos-node/config.json</span></code> while making sure they don’t share
the same <code class="docutils literal notranslate"><span class="pre">data-dir</span></code>. Then run your node with <code class="docutils literal notranslate"><span class="pre">./octez-node</span> <span class="pre">run</span> <span class="pre">--config-file=&lt;/path/to/alternate_cfg&gt;</span></code>.</p>
<p>Here is an example configuration file with several parameters specified.
Incidentally, it is exactly the one resulting from the command sequence above.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;data-dir&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;tmp&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;rpc&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;listen-addrs&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;localhost:8733&quot;</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="s2">&quot;p2p&quot;</span><span class="o">:</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;bootstrap-peers&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;[::]:10732&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;192.168.1.3:9733&quot;</span><span class="w"> </span><span class="p">],</span>
<span class="w">      </span><span class="s2">&quot;listen-addr&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;1.2.3.4&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;private-mode&quot;</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;limits&quot;</span><span class="o">:</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;connection-timeout&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;min-connections&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">12</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;expected-connections&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;max-connections&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">37</span><span class="p">,</span>
<span class="w">          </span><span class="s2">&quot;max_known_points&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mf">200</span><span class="p">,</span><span class="w"> </span><span class="mf">150</span><span class="w"> </span><span class="p">],</span>
<span class="w">          </span><span class="s2">&quot;max_known_peer_ids&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mf">200</span><span class="p">,</span><span class="w"> </span><span class="mf">150</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="s2">&quot;log&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;output&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;octez-node.log&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="s2">&quot;shell&quot;</span><span class="o">:</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;chain_validator&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">&quot;synchronisation_threshold&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="s2">&quot;history_mode&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;full&quot;</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="s2">&quot;network&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;sandbox&quot;</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p>Thus, you can start with the initial configuration file, and eventually modify it using <code class="docutils literal notranslate"><span class="pre">config</span> <span class="pre">update</span></code> commands and/or using a text editor, to define any set of node parameters that are suitable for you (recall that the former covers a subset of parameters, while the latter covers the full set).</p>
<p>The rest of this page provides more details about the use of some selected
configuration options/parameters.</p>
</section>
</section>
<section id="rpc-parameters">
<span id="configure-rpc"></span><h2>RPC parameters<a class="headerlink" href="#rpc-parameters" title="Link to this heading">#</a></h2>
<p>RPC parameters allow to customize the <a class="reference internal" href="../developer/rpc.html"><span class="doc">JSON/RPC interface</span></a>, by defining for instance network addresses (corresponding
to node’s network interfaces) to listen for RPC requests on, or a
certificate/key file necessary when TLS is used.</p>
<section id="access-control-lists">
<h3>Access Control Lists<a class="headerlink" href="#access-control-lists" title="Link to this heading">#</a></h3>
<p>Access to RPC endpoints can be restricted using an Access Control List. The
default policy grants full access to clients connecting from the local machine,
but only allows <em>safe</em> endpoints if accessed remotely (see <a class="reference internal" href="#default-acl"><span class="std std-ref">Default ACL for RPC</span></a>
for details). One important exception to this rule is when the node listens on
the special address <code class="docutils literal notranslate"><span class="pre">0.0.0.0</span></code>, which means roughly “listen to requests
addressed to any address” and hence all requests coming to such a node are
treated as coming from a remote host. It is worth remembering that it’s
unimportant where the request actually comes from. The policy is defined for an address
on which the node is configured to listen to incoming RPC requests. A custom
list can be put in the configuration file. In the <code class="docutils literal notranslate"><span class="pre">rpc</span></code> object a key <code class="docutils literal notranslate"><span class="pre">acl</span></code>
can be included, containing a list of policies for different listening
addresses:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;rpc&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nt">&quot;acl&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">       </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;localhost:8732&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;blacklist&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;GET /chains/**&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;GET /network/points/*/unban&quot;</span><span class="p">]</span>
<span class="w">       </span><span class="p">}</span>
<span class="w">     </span><span class="p">]</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">address</span></code> field specifies a binding address this rule applies to. Port can be omitted,
in which case the rule applies to any port on that address. Note that this does not automatically
enable RPC on that address, to do that the address must be included in <code class="docutils literal notranslate"><span class="pre">listen-addrs</span></code> or passed
by command-line argument <code class="docutils literal notranslate"><span class="pre">--rpc-addr</span></code> when starting the node.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Both listening addresses and ACL addresses are resolved at the node’s startup
(they’re not re-resolved at any point after that), before matching. This
means that only IP addresses are ever matched, so if e.g. “localhost” is
written in the policy and listening address is set “127.0.0.1”, it <em>does</em> match. The converse is also true.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note that “0.0.0.0” is a specific address, distinct from any other. It is
usually treated specially by operating systems to mean “any address”.
However, the ACL configuration <strong>does not</strong> follow this rule, because
matching addresses to rules would have become difficult and potentially very
confusing. Therefore if a node is configured to listen on address <code class="docutils literal notranslate"><span class="pre">0.0.0.0</span></code>,
a policy may be defined for <code class="docutils literal notranslate"><span class="pre">0.0.0.0</span></code> specifically (otherwise, the default
policy will apply to it). If one wishes
to apply different policies to different addresses, multiple <code class="docutils literal notranslate"><span class="pre">rpc-addr</span></code>
switches can be used to listen on those specific addresses and then separate
policies can be configured for them.</p>
</div>
<p>Additionally either the <code class="docutils literal notranslate"><span class="pre">whitelist</span></code> <strong>or</strong> the <code class="docutils literal notranslate"><span class="pre">blacklist</span></code> field must be specified
(but not both), containing a list of paths which should be black-listed or
white-listed. Each element in the list is an API-endpoint (that can be passed to e.g. the <code class="docutils literal notranslate"><span class="pre">octez-client</span> <span class="pre">rpc</span></code>
command). It may be preceded by a capitalized HTTP method name. In the absence of
the method, the rule applies to all methods. The path can include an <code class="docutils literal notranslate"><span class="pre">*</span></code>
character, which stands for any whole path segment (i.e. it’s not allowed to mix <code class="docutils literal notranslate"><span class="pre">*</span></code>
with other characters in a path segment).
A <code class="docutils literal notranslate"><span class="pre">**</span></code> stands for any possible path suffix.</p>
<p>Additionally <code class="docutils literal notranslate"><span class="pre">--allow-all-rpc</span></code> CLI option to <code class="docutils literal notranslate"><span class="pre">octez-node</span></code> can be used to
simply allow all RPC endpoints on a given address. When passed to
<code class="docutils literal notranslate"><span class="pre">octez-node</span> <span class="pre">config</span></code> command, this option modifies the <code class="docutils literal notranslate"><span class="pre">config.json</span></code> file,
putting an appropriate ACL there. When passed to <code class="docutils literal notranslate"><span class="pre">octez-node</span> <span class="pre">run</span></code>, it
overrides the settings of the <code class="docutils literal notranslate"><span class="pre">config.json</span></code> for this particular run, without
modifying the file.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Exposing all RPCs over the public network is extremely dangerous and
strongly advised against. It opens the door widely to DoS attacks
and allows anyone to manipulate the node’s configuration, inject blocks
and in general harm the node’s state. Even more discouraged is exposing
all RPCs on the special <code class="docutils literal notranslate"><span class="pre">0.0.0.0</span></code> address.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Rules are always searched from the beginning of the list to the end and
the first matching address is returned. Therefore if one wants to put one
rule on a specific port on a given host and another rule for all other ports
on the same host, then more specific rules should always be written <em>first</em>.
Otherwise they’ll be shadowed by the more general rule.</p>
</div>
<section id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Link to this heading">#</a></h4>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ octez-node run --rpc-addr localhost:8732
</pre></div>
</div>
<p>In this case the RPC is only available for requests coming from <code class="docutils literal notranslate"><span class="pre">localhost</span></code>
(i.e. <code class="docutils literal notranslate"><span class="pre">127.0.0.1</span></code>). There’s no need configure the ACL, as an allow-all policy
is applied to the local host by default.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ octez-node run --rpc-addr localhost:8732 --rpc-addr 192.168.0.3:8732
</pre></div>
</div>
<p>In this example the RPC is available to both <code class="docutils literal notranslate"><span class="pre">localhost</span></code> and to the local
network (assuming the node does have address <code class="docutils literal notranslate"><span class="pre">192.168.0.3</span></code> in that network).
However, different policies apply to each address. For <code class="docutils literal notranslate"><span class="pre">localhost</span></code> an allow-all
policy will be selected as before, but requests addressed to <code class="docutils literal notranslate"><span class="pre">192.168.0.3</span></code> will
be filtered by the default ACL (<a class="reference internal" href="#default-acl"><span class="std std-ref">see below</span></a>).</p>
<p>In this last case, to listen on both <code class="docutils literal notranslate"><span class="pre">localhost</span></code> and local network, it might
be tempting to listen on the special <code class="docutils literal notranslate"><span class="pre">0.0.0.0</span></code> address:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ octez-node run --rpc-addr 0.0.0.0:8732
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">0.0.0.0</span></code> is a special address, not attached to any particular networking
interface. Instead it tells the OS to route messages incoming to <strong>all</strong>
interfaces to the node. However, the ACL mechanism does not attach such special
significance to this address. It will apply to this listening address a policy
written for it specifically and in the absence thereof – a default policy for
<strong>remote addresses</strong>. Thus, even if a request is coming through a local
interface, it does not matter, it’ll still be treated as if it came from a
remote address.</p>
<p>A common situation is when one wants to accept only safe RPC requests coming from
remote hosts, but enable all RPCs for localhost (which is for instance necessary
to perform baking and attesting). Since all RPCs are available to localhost by
default, it is sufficient to open another listening address:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ octez-node run --rpc-addr localhost --rpc-addr 0.0.0.0
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--allow-all-rpc</span></code> switch can be used to open all RPCs on a specific address:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ octez-node run --rpc-addr 192.168.0.3 --allow-all-rpc 192.168.0.3
</pre></div>
</div>
<p>Note that the addresses of both <code class="docutils literal notranslate"><span class="pre">--rpc-addr</span></code> and <code class="docutils literal notranslate"><span class="pre">--allow-all-rpc</span></code> switches
should match. In particular remember that <code class="docutils literal notranslate"><span class="pre">0.0.0.0</span></code> is a specific address
and won’t match anything else except for itself, even though the underlying OS
might treat it differently. Also be advised that using this option is discouraged
as dangerous, especially when applied to the special <code class="docutils literal notranslate"><span class="pre">0.0.0.0</span></code> address.</p>
<p>Both <code class="docutils literal notranslate"><span class="pre">--rpc-addr</span></code> and <code class="docutils literal notranslate"><span class="pre">--allow-all-rpc</span></code> switches can be used multiple times
in order to accommodate each specific setup.</p>
</section>
<section id="default-acl-for-rpc">
<span id="default-acl"></span><h4>Default ACL for RPC<a class="headerlink" href="#default-acl-for-rpc" title="Link to this heading">#</a></h4>
<p>The default ACL for RPC depends on the listening address that the node is using.</p>
<p>If the listening address resolves to the loopback network interface, then full
access to all endpoints is granted. Note that it does not matter from which
machine the client is really making a request, but only what the listening
address is. This guarantees that insecure endpoints can only be accessed from
<code class="docutils literal notranslate"><span class="pre">localhost</span></code>.</p>
<p>If the listening address is a network address, then a more restrictive policy
applies. Its main purpose is to protect nodes from attacks. These attacks can
take two main forms:</p>
<ul class="simple">
<li><p>spamming the node with costly requests (denial of service attack)</p></li>
<li><p>breaking the node by forcing it to perform a risky operation</p></li>
</ul>
<p>Thus all costly or risky endpoints are blocked by default. This can be
relaxed or tightened by modifying the configuration file. It’s
worth noting that this default policy among other things disallows baking and
attesting by bakers running on remote servers,
because endpoints such as <code class="docutils literal notranslate"><span class="pre">/injection/block</span></code> are not open remotely.
Rather than opening them remotely, the recommended practice for baking is to run a node locally listening to <code class="docutils literal notranslate"><span class="pre">localhost</span></code>, with the default ACL policy.</p>
<p>The following is the default ACL policy for the node,
hard-coded in <a class="reference external" href="https://gitlab.com/tezos/tezos/-/blob/master/src/lib_rpc_http/RPC_server.ml">src/lib_rpc_http/RPC_server.ml</a> (remember to replace
<code class="docutils literal notranslate"><span class="pre">any.public.address</span></code> with an IP address or a domain name that you’ll be
actually listening on):</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;blacklist&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;any.public.address&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;whitelist&quot;</span><span class="p">:</span>
<span class="w">      </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;GET/chains/*/blocks&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;GET/chains/*/blocks/*&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/chain_id&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;GET/chains/*/checkpoint&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/adaptive_issuance_launch_cycle&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/big_maps/*/*&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/cache/**&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/constants&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/contracts/**&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/delegates/**&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/denunciations&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/issuance&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/issuance/*&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/liquidity_baking/*&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/merkle_tree/**&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/merkle_tree_v2/**&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/nonces/*&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/sapling/**&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/seed_computation&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/selected_snapshot&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/total_frozen_stake&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/context/total_supply&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/hash&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;GET/chains/*/blocks/*/header&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/header/**&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/helpers/current_level&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/live_blocks&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/metadata&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/metadata_hash&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/minimal_valid_time&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/operation_hashes&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/operation_hashes/**&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/operation_metadata_hashes&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/operations&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/operations/**&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/operations_metadata_hash&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/protocols&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/resulting_context_hash&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/blocks/*/votes/**&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;GET/chains/*/invalid_blocks&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/invalid_blocks/*&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;GET/chains/*/is_bootstrapped&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/levels/*&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;GET/chains/*/mempool/filter&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/chains/*/mempool/pending_operations&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;GET/config/history_mode&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/config/network/user_activated_protocol_overrides&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/config/network/user_activated_upgrades&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/config/network/dal&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;GET/network/stat&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;GET/network/version&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/network/versions&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;GET/protocols&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;GET/protocols/*/environment&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;GET/version&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;POST/chains/*/blocks/*/context/contracts/*/big_map_get&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;POST/chains/*/blocks/*/context/seed&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;POST/injection/operation&quot;</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="http-caching-headers">
<h3>HTTP Caching Headers<a class="headerlink" href="#http-caching-headers" title="Link to this heading">#</a></h3>
<p>It is possible to enable http caching headers in the RPC responses with the
<code class="docutils literal notranslate"><span class="pre">--enable-http-cache-headers</span></code> option. This feature is disabled by default.</p>
<p>When enabled, the RPC server will support <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control#response_directives">max-age</a>
header. The header <code class="docutils literal notranslate"><span class="pre">Cache-control:</span> <span class="pre">public,</span> <span class="pre">max-age:</span> <span class="pre">&lt;duration&gt;</span></code> will be included in the response headers of head related
queries (<code class="docutils literal notranslate"><span class="pre">/chains/main/blocks/head*</span></code>) for responses that are cacheable. This also works on paths
that are relative to <code class="docutils literal notranslate"><span class="pre">head</span></code> such as <code class="docutils literal notranslate"><span class="pre">head-n</span></code> and <code class="docutils literal notranslate"><span class="pre">head~n</span></code>. The response is cacheable throughout the <code class="docutils literal notranslate"><span class="pre">&lt;duration&gt;</span></code>
of the head block’s consensus round where <code class="docutils literal notranslate"><span class="pre">&lt;duration&gt;</span></code> is the remaining time until the <a class="reference internal" href="../active/consensus.html#time-between-blocks"><span class="std std-ref">estimated end time</span></a>
of the consensus round. If a response should not be cached, the RPC server will not include any cache control headers.</p>
<p>The RPC server will also support the conditional request header <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-None-Match">If-None-Match</a>
and include the <code class="docutils literal notranslate"><span class="pre">ETag</span></code> field in every head related query. The value of the <code class="docutils literal notranslate"><span class="pre">ETag</span></code> will be set to the block hash that the query
is related to. If the client sends a request with <code class="docutils literal notranslate"><span class="pre">If-None-Match:</span> <span class="pre">&lt;comma-separated</span> <span class="pre">list</span> <span class="pre">of</span> <span class="pre">ETag</span> <span class="pre">values&gt;</span></code> header and the block hash
is included in the list of etag values, the RPC server will respond with a <code class="docutils literal notranslate"><span class="pre">304</span> <span class="pre">Not</span> <span class="pre">Modified</span></code> status code with an empty body.</p>
<p>This feature is useful when running the RPC server behind a reverse proxy that supports automatic
content caching (eg. <a class="reference external" href="https://blog.nginx.org/blog/nginx-caching-guide">NGINX’s proxy_cache setting</a>). Beware that
enabling this feature adds a non-negligible performance overhead (up to 10-15% slower) to every head related query
as the RPC server needs to perform additional checks and calculations. Consequently, it is advised to enable thie feature
only when operating the RPC server behind appropriate caching infrastructure.</p>
</section>
</section>
<section id="p2p-parameters">
<span id="configure-p2p"></span><h2>P2P parameters<a class="headerlink" href="#p2p-parameters" title="Link to this heading">#</a></h2>
<p>P2P parameters allow to customize aspects related to the <a class="reference internal" href="../shell/p2p.html"><span class="doc">peer-to-peer network layer</span></a>, such as:</p>
<ul class="simple">
<li><p>defining the bootstrap peers (and ports),</p></li>
<li><p>defining the ports listening to peers,</p></li>
<li><p>setting the greylist timeout,</p></li>
<li><p>running the node in private mode.</p></li>
</ul>
<section id="listening-ports">
<span id="private-mode"></span><h3>Listening ports<a class="headerlink" href="#listening-ports" title="Link to this heading">#</a></h3>
<p>By default, the node listens to incoming connections from peers on port <code class="docutils literal notranslate"><span class="pre">9732</span></code>,
on any of the available network interfaces on the node’s host.
This behavior can be changed by passing an IP address and optionally a port number
(<code class="docutils literal notranslate"><span class="pre">addr:port</span></code>), using either the <code class="docutils literal notranslate"><span class="pre">--net-addr</span></code> configuration option or the P2P
<code class="docutils literal notranslate"><span class="pre">listen-addr</span></code> configuration parameter.
Note that the IP address is only used for selecting an active network interface
(technically, it is only passed to the <code class="docutils literal notranslate"><span class="pre">bind()</span></code> function of the socket API).
It is also possible to advertise to peers a different port than
the binding port using <code class="docutils literal notranslate"><span class="pre">--advertised-net-port</span></code> configuration option or the P2P
<code class="docutils literal notranslate"><span class="pre">advertised-net-port</span></code> configuration parameter. Currently it is only possible to
specify an advertised port, but not an IP address.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the node is run on a machine <code class="docutils literal notranslate"><span class="pre">M</span></code> not disposing of a public IP address,
subject to NAT, a port forwarding rule has
to be added on the NAT server <code class="docutils literal notranslate"><span class="pre">S</span></code> on the listening port towards
machine <code class="docutils literal notranslate"><span class="pre">M</span></code>: <code class="docutils literal notranslate"><span class="pre">S:p1</span> <span class="pre">-&gt;</span> <span class="pre">M:p2</span></code>, where <code class="docutils literal notranslate"><span class="pre">p1</span></code> is <code class="docutils literal notranslate"><span class="pre">advertised-net-port</span></code> and
<code class="docutils literal notranslate"><span class="pre">p2</span></code> is the port specified by <code class="docutils literal notranslate"><span class="pre">listen-addr</span></code>. Alternatively, if the
<code class="docutils literal notranslate"><span class="pre">advertised-net-port</span></code> is not configured, <code class="docutils literal notranslate"><span class="pre">p1</span></code> must be the same as <code class="docutils literal notranslate"><span class="pre">p2</span></code>.</p>
<p>As a consequence, if a second node has to be run behind the
same server on a machine <code class="docutils literal notranslate"><span class="pre">M'</span></code> (possibly the same as <code class="docutils literal notranslate"><span class="pre">M</span></code>),
it should be configured to listen on a different port <code class="docutils literal notranslate"><span class="pre">p2'</span></code>, to
allow defining another forwarding rule for it: <code class="docutils literal notranslate"><span class="pre">S:p1'</span> <span class="pre">-&gt;</span> <span class="pre">M':p2'</span></code>, where
<code class="docutils literal notranslate"><span class="pre">p1'</span></code> is <code class="docutils literal notranslate"><span class="pre">advertised-net-port</span></code> configured for the second node <code class="docutils literal notranslate"><span class="pre">M'</span></code>.</p>
<p>Many routers can be configured with UPnP to open ports dynamically, so the
port forwarding can be initiated by the internal host without any manual
modification on the router. This is not possible for corporate networks with
UPnP disabled, but is typically handy for home routers, or other networks
where this option is available.</p>
</div>
</section>
<section id="private-node">
<h3>Private node<a class="headerlink" href="#private-node" title="Link to this heading">#</a></h3>
<p>The node can be set in private mode with the option <code class="docutils literal notranslate"><span class="pre">--private-mode</span></code>
so that:</p>
<ul class="simple">
<li><p>it doesn’t connect to any peer other than those provided with
<code class="docutils literal notranslate"><span class="pre">--peer</span></code> or in <code class="docutils literal notranslate"><span class="pre">bootstrap-peers</span></code></p></li>
<li><p>the peers connected to a private node don’t advertise it in the list
of peers sent to their neighborhood</p></li>
</ul>
<p>This feature is especially useful to hide a sensitive node that signs
operations.</p>
<p>For example we could have a set up with two nodes, a private one
connected uniquely with a public one.
The public node runs on a VPS, connects normally to the network and
keeps an up to date state of the network while the private node runs at
your home and is in charge of injecting and signing operations with a
hardware wallet.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>octez-node run --rpc-addr [::] --private-mode \
                               --no-bootstrap-peers \
                               --synchronisation-threshold=1 \
                               --connections 1 \
                               --peer &lt;public-node-ip&gt;
</pre></div>
</div>
</section>
</section>
<section id="shell-parameters">
<span id="configure-shell"></span><h2>Shell parameters<a class="headerlink" href="#shell-parameters" title="Link to this heading">#</a></h2>
<p>Configuration options/parameters for the shell allow tuning the
working of the <a class="reference internal" href="../shell/validation.html"><span class="doc">validation subsystem</span></a>.</p>
<p>In particular, the synchronization heuristics implemented by the chain
validator can be controlled using parameters such as the
synchronization threshold or the latency, described in the
documentation of the <a class="reference internal" href="../shell/sync.html"><span class="doc">synchronization heuristics</span></a>.</p>
<p>Configuration parameters for the context’s storage can also be done
through environment variables, see <a class="reference internal" href="../shell/storage.html#context-component"><span class="std std-ref">Context</span></a>.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="setup-node.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Setting up the node</p>
      </div>
    </a>
    <a class="right-next"
       href="multinetwork.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Connecting to a Network</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#node-configuration-file">Node configuration file</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-config-command">The config command</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#editing-the-configuration-file">Editing the configuration file</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rpc-parameters">RPC parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#access-control-lists">Access Control Lists</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">Examples</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#default-acl-for-rpc">Default ACL for RPC</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#http-caching-headers">HTTP Caching Headers</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#p2p-parameters">P2P parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#listening-ports">Listening ports</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#private-node">Private node</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#shell-parameters">Shell parameters</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Nomadic Labs <contact@nomadic-labs.com>
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2018-2023, Nomadic Labs &lt;contact@nomadic-labs.com&gt;.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>