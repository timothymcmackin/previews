<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Rpc (tezt-etherlink.Tezt_etherlink.Rpc)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezt-etherlink</a> &#x00BB; <a href="../index.html">Tezt_etherlink</a> &#x00BB; Rpc</nav><header class="odoc-preamble"><h1>Module <code><span>Tezt_etherlink.Rpc</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#rpc-calls-wrappers">RPC calls wrappers</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-error"><a href="#type-error" class="anchor"></a><code><span><span class="keyword">type</span> error</span><span> = </span><span>{</span></code><ol><li id="type-error.code" class="def record field anchored"><a href="#type-error.code" class="anchor"></a><code><span>code : int;</span></code></li><li id="type-error.message" class="def record field anchored"><a href="#type-error.message" class="anchor"></a><code><span>message : string;</span></code></li><li id="type-error.data" class="def record field anchored"><a href="#type-error.data" class="anchor"></a><code><span>data : <span>string option</span>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-block_param"><a href="#type-block_param" class="anchor"></a><code><span><span class="keyword">type</span> block_param</span><span> = </span></code><ol><li id="type-block_param.Earliest" class="def variant constructor anchored"><a href="#type-block_param.Earliest" class="anchor"></a><code><span>| </span><span><span class="constructor">Earliest</span></span></code></li><li id="type-block_param.Latest" class="def variant constructor anchored"><a href="#type-block_param.Latest" class="anchor"></a><code><span>| </span><span><span class="constructor">Latest</span></span></code></li><li id="type-block_param.Pending" class="def variant constructor anchored"><a href="#type-block_param.Pending" class="anchor"></a><code><span>| </span><span><span class="constructor">Pending</span></span></code></li><li id="type-block_param.Number" class="def variant constructor anchored"><a href="#type-block_param.Number" class="anchor"></a><code><span>| </span><span><span class="constructor">Number</span> <span class="keyword">of</span> int</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Put directly the value.</p><span class="comment-delim">*)</span></div></li><li id="type-block_param.Block_number" class="def variant constructor anchored"><a href="#type-block_param.Block_number" class="anchor"></a><code><span>| </span><span><span class="constructor">Block_number</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-block_param.number" class="def record field anchored"><a href="#type-block_param.number" class="anchor"></a><code><span>number : int;</span></code></li><li id="type-block_param.require_canonical" class="def record field anchored"><a href="#type-block_param.require_canonical" class="anchor"></a><code><span>require_canonical : bool;</span></code></li></ol><code><span>}</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Instead of <code>Number</code>, it uses a JSON object.</p><span class="comment-delim">*)</span></div></li><li id="type-block_param.Block_hash" class="def variant constructor anchored"><a href="#type-block_param.Block_hash" class="anchor"></a><code><span>| </span><span><span class="constructor">Block_hash</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-block_param.hash" class="def record field anchored"><a href="#type-block_param.hash" class="anchor"></a><code><span>hash : string;</span></code></li><li id="type-block_param.require_canonical" class="def record field anchored"><a href="#type-block_param.require_canonical" class="anchor"></a><code><span>require_canonical : bool;</span></code></li></ol><code><span>}</span></code></li></ol></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Request"><a href="#module-Request" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Request/index.html">Request</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="rpc-calls-wrappers"><a href="#rpc-calls-wrappers" class="anchor"></a>RPC calls wrappers</h3><p>Calls below are made using an HTTP request to the EVM node by default unless a websocket is provided, in which case the communication happens on it.</p><div class="odoc-spec"><div class="spec value anchored" id="val-net_version"><a href="#val-net_version" class="anchor"></a><code><span><span class="keyword">val</span> net_version : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(string, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>net_version evm_node</code> calls <code>net_version</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_chain_id"><a href="#val-get_chain_id" class="anchor"></a><code><span><span class="keyword">val</span> get_chain_id : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(int, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>get_chain_id evm_node</code> calls <code>eth_getChainId</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_transaction_by_hash"><a href="#val-get_transaction_by_hash" class="anchor"></a><code><span><span class="keyword">val</span> get_transaction_by_hash : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">transaction_hash</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><a href="../Transaction/index.html#type-transaction_object">Transaction.transaction_object</a> option</span>, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>get_transaction_by_hash ~transaction_hash evm_node</code> calls <code>eth_getTransactionByHash</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_code"><a href="#val-get_code" class="anchor"></a><code><span><span class="keyword">val</span> get_code : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">address</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(string, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>get_code ~address evm_node</code> calls <code>eth_getCode</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-block_number"><a href="#val-block_number" class="anchor"></a><code><span><span class="keyword">val</span> block_number : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(int32, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>block_number evm_node</code> calls <code>eth_blockNumber</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-block_number_opt"><a href="#val-block_number_opt" class="anchor"></a><code><span><span class="keyword">val</span> block_number_opt : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span>int32 option</span>, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>block_number_opt evm_node</code> calls <code>eth_blockNumber</code>. allows None when no block have been produced yet.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_block_by_number"><a href="#val-get_block_by_number" class="anchor"></a><code><span><span class="keyword">val</span> get_block_by_number : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?full_tx_objects</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">block</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Block/index.html#type-t">Block.t</a>, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>get_block_by_number ?full_tx_objets ~block evm_node</code> calls <code>eth_getBlockByNumber</code>. <code>full_tx_objects</code> is false by default, so the block contains the transaction hashes. <code>block</code> can be <code>&quot;latest&quot;</code> or its number.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_block_by_hash"><a href="#val-get_block_by_hash" class="anchor"></a><code><span><span class="keyword">val</span> get_block_by_hash : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?full_tx_objects</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">block</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Block/index.html#type-t">Block.t</a>, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-get_block_by_number"><code>get_block_by_number</code></a> but uses the hash instead of the number.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_gas_price"><a href="#val-get_gas_price" class="anchor"></a><code><span><span class="keyword">val</span> get_gas_price : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Int32.t <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-subscribe"><a href="#val-subscribe" class="anchor"></a><code><span><span class="keyword">val</span> subscribe : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">kind</span>:<a href="Request/index.html#type-subscription_kind">Request.subscription_kind</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unsubscribe"><a href="#val-unsubscribe" class="anchor"></a><code><span><span class="keyword">val</span> unsubscribe : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">id</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>bool <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Syntax"><a href="#module-Syntax" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Syntax/index.html">Syntax</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-produce_block"><a href="#val-produce_block" class="anchor"></a><code><span><span class="keyword">val</span> produce_block : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?with_delayed_transactions</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?timestamp</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(int, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>produce_block ?with_delayed_transactions ?timestamp evm_node</code> calls the private RPC <code>produceBlock</code>. If provided the block will have timestamp <code>timestamp</code> (in RFC3339) format.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-produce_proposal"><a href="#val-produce_proposal" class="anchor"></a><code><span><span class="keyword">val</span> produce_proposal : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?timestamp</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(unit, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>produce_proposal ?timestamp evm_node</code> calls the private RPC <code>produceProposal</code>. If provided the block will have timestamp <code>timestamp</code> (in RFC3339) format.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-state_value"><a href="#val-state_value" class="anchor"></a><code><span><span class="keyword">val</span> state_value : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?block</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span>string option</span>, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>state_value ?websocket evm_node ?block path</code> calls the private RPC <code>stateValue</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-state_subkeys"><a href="#val-state_subkeys" class="anchor"></a><code><span><span class="keyword">val</span> state_subkeys : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?block</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><span>string list</span> option</span>, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>state_subkeys ?websocket evm_node ?block path</code> calls the private RPC <code>stateSubkeys</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-send_raw_transaction"><a href="#val-send_raw_transaction" class="anchor"></a><code><span><span class="keyword">val</span> send_raw_transaction : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">raw_tx</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(string, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>send_raw_transaction ~raw_tx evm_node</code> calls <code>eth_sendRawTransaction</code> with <code>raw_tx</code> as argument.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_transaction_receipt"><a href="#val-get_transaction_receipt" class="anchor"></a><code><span><span class="keyword">val</span> get_transaction_receipt : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">tx_hash</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><a href="../Transaction/index.html#type-transaction_receipt">Transaction.transaction_receipt</a> option</span>, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>get_transaction_receipt ~tx_hash evm_node</code> calls <code>eth_getTransactionReceipt</code> with <code>tx_hash</code> as argument.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-estimate_gas"><a href="#val-estimate_gas" class="anchor"></a><code><span><span class="keyword">val</span> estimate_gas : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(string * <span class="xref-unresolved">Ezjsonm</span>.value)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(int64, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>estimate_gas eth_call evm_node</code> calls <code>eth_estimateGas</code> with <code>eth_call</code> as payload.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_transaction_count"><a href="#val-get_transaction_count" class="anchor"></a><code><span><span class="keyword">val</span> get_transaction_count : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?block</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">address</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(int64, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>get_transaction_count ?block ~address evm_node</code> calls <code>eth_getTransactionCount</code> with <code>address</code> as argument (on <code>block</code>, default to <code>&quot;latest&quot;</code> if omitted).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tez_kernelVersion"><a href="#val-tez_kernelVersion" class="anchor"></a><code><span><span class="keyword">val</span> tez_kernelVersion : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(string, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>tez_kernelVersion evm_node</code> calls <code>tez_kernelVersion</code>. Returns the kernel commit hash.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tez_kernelRootHash"><a href="#val-tez_kernelRootHash" class="anchor"></a><code><span><span class="keyword">val</span> tez_kernelRootHash : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span>string option</span>, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>tez_kernelRootHash evm_node</code> calls <code>tez_kernelRootHash</code>. Returns the kernel root hash.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-call"><a href="#val-call" class="anchor"></a><code><span><span class="keyword">val</span> call : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">to_</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">data</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?block</span>:<a href="#type-block_param">block_param</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(string, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>call ~to_ ~data ?block evm_node</code> call <code>eth_call</code> with <code>to</code> and <code>data</code> as argument. <code>block</code> defaults to <code>Latest</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_balance"><a href="#val-get_balance" class="anchor"></a><code><span><span class="keyword">val</span> get_balance : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">address</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?block</span>:<a href="#type-block_param">block_param</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Wei/index.html#type-t">Wei.t</a>, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>get_balance ~address ?block evm_node</code> calls <code>eth_getBalance</code>. <code>block</code> defaults to <code>Latest</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_storage_at"><a href="#val-get_storage_at" class="anchor"></a><code><span><span class="keyword">val</span> get_storage_at : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">address</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?block</span>:<a href="#type-block_param">block_param</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">pos</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(string, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>get_balance ~address ?block ~pos evm_node</code> calls <code>eth_getStorageAt</code>. <code>block</code> defaults to <code>Latest</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_max_priority_fee_per_gas"><a href="#val-get_max_priority_fee_per_gas" class="anchor"></a><code><span><span class="keyword">val</span> get_max_priority_fee_per_gas : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Int32.t <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-replay_block"><a href="#val-replay_block" class="anchor"></a><code><span><span class="keyword">val</span> replay_block : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Block/index.html#type-t">Block.t</a>, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>replay_block number evm_node</code> replays the block <code>number</code> and returns its representation.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-txpool_slot"><a href="#type-txpool_slot" class="anchor"></a><code><span><span class="keyword">type</span> txpool_slot</span><span> = </span><span>{</span></code><ol><li id="type-txpool_slot.address" class="def record field anchored"><a href="#type-txpool_slot.address" class="anchor"></a><code><span>address : string;</span></code></li><li id="type-txpool_slot.transactions" class="def record field anchored"><a href="#type-txpool_slot.transactions" class="anchor"></a><code><span>transactions : <span><span>(int64 * <span class="xref-unresolved">Tezt_wrapper</span>.JSON.t)</span> list</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>A slot in the transaction pool associates an address to a mapping of nonces to transactions.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-txpool_content"><a href="#val-txpool_content" class="anchor"></a><code><span><span class="keyword">val</span> txpool_content : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><a href="#type-txpool_slot">txpool_slot</a> list</span> * <span><a href="#type-txpool_slot">txpool_slot</a> list</span>, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>txpool_content evm_node</code> returns the transaction hash and nonce contained in the `pending` and `queued` pools.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-trace_transaction"><a href="#val-trace_transaction" class="anchor"></a><code><span><span class="keyword">val</span> trace_transaction : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">transaction_hash</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?tracer</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?tracer_config</span>:<span><span>(string * <span class="xref-unresolved">Tezt_wrapper</span>.JSON.u)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="xref-unresolved">Tezt_wrapper</span>.JSON.t, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>trace_transaction ~transaction_hash evm_node</code> replays the given transaction in the same execution context. Doesn't return the trace for now.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-trace_call"><a href="#val-trace_call" class="anchor"></a><code><span><span class="keyword">val</span> trace_call : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">block</span>:<a href="#type-block_param">block_param</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">to_</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">data</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?tracer</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?tracer_config</span>:<span><span>(string * <span class="xref-unresolved">Tezt_wrapper</span>.JSON.u)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="xref-unresolved">Tezt_wrapper</span>.JSON.t, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-fee_history"><a href="#type-fee_history" class="anchor"></a><code><span><span class="keyword">type</span> fee_history</span><span> = </span><span>{</span></code><ol><li id="type-fee_history.oldest_block" class="def record field anchored"><a href="#type-fee_history.oldest_block" class="anchor"></a><code><span>oldest_block : int64;</span></code></li><li id="type-fee_history.base_fee_per_gas" class="def record field anchored"><a href="#type-fee_history.base_fee_per_gas" class="anchor"></a><code><span>base_fee_per_gas : <span>int64 list</span>;</span></code></li><li id="type-fee_history.gas_used_ratio" class="def record field anchored"><a href="#type-fee_history.gas_used_ratio" class="anchor"></a><code><span>gas_used_ratio : <span>float list</span>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fee_history"><a href="#val-fee_history" class="anchor"></a><code><span><span class="keyword">val</span> fee_history : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="#type-fee_history">fee_history</a>, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>fee_history block_count newest_block evm_node</code> calls <code>eth_feeHistory</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-coinbase"><a href="#val-coinbase" class="anchor"></a><code><span><span class="keyword">val</span> coinbase : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(string, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>coinbase</code> calls <code>eth_coinbase</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-configuration"><a href="#val-configuration" class="anchor"></a><code><span><span class="keyword">val</span> configuration : <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Tezt_wrapper</span>.JSON.t <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Returns the EVM node configuration.</p></div></div></div></body></html>
