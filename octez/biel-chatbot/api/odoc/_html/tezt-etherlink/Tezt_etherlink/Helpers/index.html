<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Helpers (tezt-etherlink.Tezt_etherlink.Helpers)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezt-etherlink</a> &#x00BB; <a href="../index.html">Tezt_etherlink</a> &#x00BB; Helpers</nav><header class="odoc-preamble"><h1>Module <code><span>Tezt_etherlink.Helpers</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-evm_type"><a href="#val-evm_type" class="anchor"></a><code><span><span class="keyword">val</span> evm_type : string</span></code></div><div class="spec-doc"><p>Michelson type to use when originating the EVM rollup.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-u16_to_bytes"><a href="#val-u16_to_bytes" class="anchor"></a><code><span><span class="keyword">val</span> u16_to_bytes : <span>int <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>u16_to_bytes n</code> translate an int in a binary string of two bytes (little endian). NB: Ints greater than 2 bytes are truncated.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_0x"><a href="#val-add_0x" class="anchor"></a><code><span><span class="keyword">val</span> add_0x : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>add_0x s</code> will add the hexa prefix `0x` before the given string.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_0x"><a href="#val-remove_0x" class="anchor"></a><code><span><span class="keyword">val</span> remove_0x : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>remove_0x s</code> removes the <code>0x</code> prefix in <code>s</code> if it is present.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mapping_position"><a href="#val-mapping_position" class="anchor"></a><code><span><span class="keyword">val</span> mapping_position : <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>mapping_position key map_position</code> computes the storage position for a value in a mapping given its <code>key</code> and the position of the map itself. It computes this position as: <code>keccack(LeftPad32(key, 0), LeftPad32(map_position, 0))</code> as specified in https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_getlogs</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hex_string_to_int"><a href="#val-hex_string_to_int" class="anchor"></a><code><span><span class="keyword">val</span> hex_string_to_int : <span>string <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Transform an hexadecimal string to an integer using <code>Z.of_bits</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hex_256_of_int"><a href="#val-hex_256_of_int" class="anchor"></a><code><span><span class="keyword">val</span> hex_256_of_int : <span>int <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>hex_256_of_int n</code> returns the H256 of <code>n</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hex_256_of_address"><a href="#val-hex_256_of_address" class="anchor"></a><code><span><span class="keyword">val</span> hex_256_of_address : <span><a href="../Eth_account/index.html#type-t">Eth_account.t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>hex_256_of_address address</code> returns the H256 of <code>address</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-next_rollup_node_level"><a href="#val-next_rollup_node_level" class="anchor"></a><code><span><span class="keyword">val</span> next_rollup_node_level : 
  <span><span class="label">sc_rollup_node</span>:<a href="../../../tezt-tezos/Tezt_tezos/Sc_rollup_node/index.html#type-t">Tezt_tezos.Sc_rollup_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">client</span>:<a href="../../../tezt-tezos/Tezt_tezos/Client/index.html#type-t">Tezt_tezos.Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>next_rollup_node_level ~sc_rollup_node ~client</code> moves <code>sc_rollup_node</code> to the next level l1.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-produce_block"><a href="#val-produce_block" class="anchor"></a><code><span><span class="keyword">val</span> produce_block : 
  <span><span class="optlabel">?wait_on_blueprint_applied</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?timestamp</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(int, <a href="../Rpc/index.html#type-error">Rpc.error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>produce_block timestampt ~sc_rollup_node ~client</code> moves <code>evm_node</code> to the next L2 level.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-next_evm_level"><a href="#val-next_evm_level" class="anchor"></a><code><span><span class="keyword">val</span> next_evm_level : 
  <span><span class="label">evm_node</span>:<a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">sc_rollup_node</span>:<a href="../../../tezt-tezos/Tezt_tezos/Sc_rollup_node/index.html#type-t">Tezt_tezos.Sc_rollup_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">client</span>:<a href="../../../tezt-tezos/Tezt_tezos/Client/index.html#type-t">Tezt_tezos.Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>next_evm_level ~evm_node ~sc_rollup_node ~client</code> moves <code>evm_node</code> to the next L2 level.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-kernel_inputs_path"><a href="#val-kernel_inputs_path" class="anchor"></a><code><span><span class="keyword">val</span> kernel_inputs_path : string</span></code></div><div class="spec-doc"><p>Path to the directory containing sample inputs.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read_tx_from_file"><a href="#val-read_tx_from_file" class="anchor"></a><code><span><span class="keyword">val</span> read_tx_from_file : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(string * string)</span> list</span></span></code></div><div class="spec-doc"><p><code>read_tx_from_file ()</code> reads a file containing 100 transactions. The list returned contains pairs of the shape <code>(tx_raw, tx_hash)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-force_kernel_upgrade"><a href="#val-force_kernel_upgrade" class="anchor"></a><code><span><span class="keyword">val</span> force_kernel_upgrade : 
  <span><span class="label">sc_rollup_address</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">sc_rollup_node</span>:<a href="../../../tezt-tezos/Tezt_tezos/Sc_rollup_node/index.html#type-t">Tezt_tezos.Sc_rollup_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">client</span>:<a href="../../../tezt-tezos/Tezt_tezos/Client/index.html#type-t">Tezt_tezos.Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>force_kernel_upgrade ~sc_rollup_address ~sc_rollup_node ~node
    ~client</code> produces the force kernel upgrade and sends it via the client. <code>sc_rollup_address</code> is expected to be the b58 address.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-upgrade"><a href="#val-upgrade" class="anchor"></a><code><span><span class="keyword">val</span> upgrade : 
  <span><span class="label">sc_rollup_node</span>:<a href="../../../tezt-tezos/Tezt_tezos/Sc_rollup_node/index.html#type-t">Tezt_tezos.Sc_rollup_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">sc_rollup_address</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">admin</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">admin_contract</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">client</span>:<a href="../../../tezt-tezos/Tezt_tezos/Client/index.html#type-t">Tezt_tezos.Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">upgrade_to</span>:<a href="../../../octez-libs/Tezt_wrapper/Uses/index.html#type-t">Tezt_wrapper.Uses.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">activation_timestamp</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>upgrade ~sc_rollup_node ~sc_rollup_address ~admin ~admin_contract
    ~client ~upgrade_to ~activation_timestamp </code> prepares the kernel upgrade payload and sends it to the layer 1. Returns the root hash of the kernel preimages.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_block_consistency"><a href="#val-check_block_consistency" class="anchor"></a><code><span><span class="keyword">val</span> check_block_consistency : 
  <span><span class="label">left</span>:<a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">right</span>:<a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?error_msg</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">block</span>:<span>[&lt; `Latest <span><span>| `Level</span> of int32</span> <span>| `Finalized</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>check_block_consistency ~left ~right ?error_msg ~blocks ()</code> checks that the block hash of <code>left</code> and <code>right</code> are equal. Fails if they are not with <code>error_msg</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_head_consistency"><a href="#val-check_head_consistency" class="anchor"></a><code><span><span class="keyword">val</span> check_head_consistency : 
  <span><span class="label">left</span>:<a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">right</span>:<a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?error_msg</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Checks latest block using <a href="#val-check_block_consistency"><code>check_block_consistency</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sequencer_upgrade"><a href="#val-sequencer_upgrade" class="anchor"></a><code><span><span class="keyword">val</span> sequencer_upgrade : 
  <span><span class="label">sc_rollup_address</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">sequencer_admin</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">sequencer_governance_contract</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">client</span>:<a href="../../../tezt-tezos/Tezt_tezos/Client/index.html#type-t">Tezt_tezos.Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">upgrade_to</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">pool_address</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">activation_timestamp</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>sequencer_upgrade ~sc_rollup_address ~sequencer_admin
    ~sequencer_admin_contract ~client ~upgrade_to
    ~activation_timestamp</code> prepares the sequencer upgrade payload and sends it to the layer 1.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bake_until"><a href="#val-bake_until" class="anchor"></a><code><span><span class="keyword">val</span> bake_until : 
  <span><span class="optlabel">?__LOC__</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?timeout_in_blocks</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">bake</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">result_f</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> option</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>bake_until ?__LOC__ ?timeout_in_blocks ?timeout ~bake ~result_f ()</code> bakes using function <code>bake</code> until the function <code>result_f</code> returns a value or fails if:</p><ul><li>it takes more than <code>timeout</code> sec, 30. by default.</li><li>it takes more than <code>timeout_in_blocks</code> blocks to bake, 5 by default.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bake_until_sync"><a href="#val-bake_until_sync" class="anchor"></a><code><span><span class="keyword">val</span> bake_until_sync : 
  <span><span class="optlabel">?__LOC__</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?timeout_in_blocks</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">sc_rollup_node</span>:<a href="../../../tezt-tezos/Tezt_tezos/Sc_rollup_node/index.html#type-t">Tezt_tezos.Sc_rollup_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">proxy</span>:<a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">sequencer</span>:<a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">client</span>:<a href="../../../tezt-tezos/Tezt_tezos/Client/index.html#type-t">Tezt_tezos.Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>bake_until_sync ?timeout_in_blocks ?timeout ~sc_rollup_node ~proxy ~sequencer
    ~client</code> bakes blocks until the rollup node is synced with evm_node. Uses <a href="#val-bake_until"><code>bake_until</code></a></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_transaction_receipt"><a href="#val-wait_for_transaction_receipt" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_transaction_receipt : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?count</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">evm_node</span>:<a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">transaction_hash</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Transaction/index.html#type-transaction_receipt">Transaction.transaction_receipt</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_transaction_receipt ?count ~evm_node ~transaction_hash ()</code> takes a transaction_hash and returns only when the receipt is non null, or <code>count</code> blocks have passed and the receipt is still not available.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_application"><a href="#val-wait_for_application" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_application : 
  <span><span class="label">produce_block</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <a href="../Rpc/index.html#type-error">Rpc.error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_application ~produce_block apply</code> returns only when the `apply` yields, or fails when 10 blocks (produced with <code>produce_block</code> have passed.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-batch_n_transactions"><a href="#val-batch_n_transactions" class="anchor"></a><code><span><span class="keyword">val</span> batch_n_transactions : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">evm_node</span>:<a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="../Evm_node/index.html#type-request">Evm_node.request</a> list</span> * <span>string list</span>)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>batch_n_transactions ~evm_node raw_transactions</code> batches <code>raw_transactions</code> to the <code>evm_node</code> and returns the requests and transaction hashes.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-send_n_transactions"><a href="#val-send_n_transactions" class="anchor"></a><code><span><span class="keyword">val</span> send_n_transactions : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">produce_block</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <a href="../Rpc/index.html#type-error">Rpc.error</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">evm_node</span>:<a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?wait_for_blocks</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="../Evm_node/index.html#type-request">Evm_node.request</a> list</span> * <a href="../Transaction/index.html#type-transaction_receipt">Transaction.transaction_receipt</a> * <span>string list</span>)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>send_n_transactions ~sc_rollup_node ~evm_node ?wait_for_blocks
    raw_transactions</code> batches <code>raw_transactions</code> to the <code>evm_node</code> and waits until the first one is applied in a block and returns, or fails if it isn't applied after <code>wait_for_blocks</code> blocks.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default_bootstrap_account_balance"><a href="#val-default_bootstrap_account_balance" class="anchor"></a><code><span><span class="keyword">val</span> default_bootstrap_account_balance : <a href="../Wei/index.html#type-t">Wei.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-l1_timestamp"><a href="#val-l1_timestamp" class="anchor"></a><code><span><span class="keyword">val</span> l1_timestamp : <span><a href="../../../tezt-tezos/Tezt_tezos/Client/index.html#type-t">Tezt_tezos.Client.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../octez-libs/Tezos_base/Time/Protocol/index.html#type-t">Tezos_base.Time.Protocol.t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Returns the timestamp of the L1 head block.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_and_execute_withdrawal"><a href="#val-find_and_execute_withdrawal" class="anchor"></a><code><span><span class="keyword">val</span> find_and_execute_withdrawal : 
  <span><span class="optlabel">?outbox_lookup_depth</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">withdrawal_level</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">commitment_period</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">challenge_window</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">evm_node</span>:<a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">sc_rollup_node</span>:<a href="../../../tezt-tezos/Tezt_tezos/Sc_rollup_node/index.html#type-t">Tezt_tezos.Sc_rollup_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">sc_rollup_address</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">client</span>:<a href="../../../tezt-tezos/Tezt_tezos/Client/index.html#type-t">Tezt_tezos.Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>find_and_execute_withdrawal ~withdrawal_level ~commitment_period ~challenge_window
    ~evm_node ~sc_rollup_node ~sc_rollup_address ~client</code> bakes enough levels to have a commitment and cement it, then constructs outbox proof and executes the outbox message</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-init_sequencer_sandbox"><a href="#val-init_sequencer_sandbox" class="anchor"></a><code><span><span class="keyword">val</span> init_sequencer_sandbox : 
  <span><span class="optlabel">?maximum_gas_per_transaction</span>:int64 <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?genesis_timestamp</span>:<a href="../../../tezt-tezos/Tezt_tezos/Client/index.html#type-timestamp">Tezt_tezos.Client.timestamp</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?tx_pool_tx_per_addr_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?set_account_code</span>:<span><span>(string * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?da_fee_per_byte</span>:<a href="../Wei/index.html#type-t">Wei.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?minimum_base_fee_per_gas</span>:<a href="../Wei/index.html#type-t">Wei.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?patch_config</span>:<span>(<span><span class="xref-unresolved">Tezt_wrapper</span>.JSON.t <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Tezt_wrapper</span>.JSON.t)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?kernel</span>:<a href="../../../octez-libs/Tezt_wrapper/Uses/index.html#type-t">Tezt_wrapper.Uses.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?bootstrap_accounts</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Runs a sequencer in mode sandbox, with no connection needed to a rollup node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-send_transaction_to_sequencer"><a href="#val-send_transaction_to_sequencer" class="anchor"></a><code><span><span class="keyword">val</span> send_transaction_to_sequencer : 
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>send_transaction_to_sequencer send evm_node</code> sends the transaction using <code>send</code> and produces a block to include it.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-send_transactions_to_sequencer"><a href="#val-send_transactions_to_sequencer" class="anchor"></a><code><span><span class="keyword">val</span> send_transactions_to_sequencer : 
  <span><span class="label">sends</span>:<span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Evm_node/index.html#type-t">Evm_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(int * <span><span class="type-var">'a</span> list</span>)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>send_transactions_to_sequencer sends evm_node</code> sends the transactions using <code>sends</code> and produces a block to include them. Returns the number of transactions included in the block together with the results of <code>sends</code>.</p></div></div></div></body></html>
