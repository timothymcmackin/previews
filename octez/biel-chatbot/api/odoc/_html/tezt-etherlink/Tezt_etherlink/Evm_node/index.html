<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Evm_node (tezt-etherlink.Tezt_etherlink.Evm_node)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezt-etherlink</a> &#x00BB; <a href="../index.html">Tezt_etherlink</a> &#x00BB; Evm_node</nav><header class="odoc-preamble"><h1>Module <code><span>Tezt_etherlink.Evm_node</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>EVM node server state.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-time_between_blocks"><a href="#type-time_between_blocks" class="anchor"></a><code><span><span class="keyword">type</span> time_between_blocks</span><span> = </span></code><ol><li id="type-time_between_blocks.Nothing" class="def variant constructor anchored"><a href="#type-time_between_blocks.Nothing" class="anchor"></a><code><span>| </span><span><span class="constructor">Nothing</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Does not produce any block if not forced by the private RPC</p><span class="comment-delim">*)</span></div></li><li id="type-time_between_blocks.Time_between_blocks" class="def variant constructor anchored"><a href="#type-time_between_blocks.Time_between_blocks" class="anchor"></a><code><span>| </span><span><span class="constructor">Time_between_blocks</span> <span class="keyword">of</span> float</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Interval at which the sequencer creates an empty block by default.</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-mode"><a href="#type-mode" class="anchor"></a><code><span><span class="keyword">type</span> mode</span><span> = </span></code><ol><li id="type-mode.Observer" class="def variant constructor anchored"><a href="#type-mode.Observer" class="anchor"></a><code><span>| </span><span><span class="constructor">Observer</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-mode.initial_kernel" class="def record field anchored"><a href="#type-mode.initial_kernel" class="anchor"></a><code><span>initial_kernel : string;</span></code></li><li id="type-mode.preimages_dir" class="def record field anchored"><a href="#type-mode.preimages_dir" class="anchor"></a><code><span>preimages_dir : <span>string option</span>;</span></code></li><li id="type-mode.private_rpc_port" class="def record field anchored"><a href="#type-mode.private_rpc_port" class="anchor"></a><code><span>private_rpc_port : <span>int option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Port for private RPC server</p><span class="comment-delim">*)</span></div></li><li id="type-mode.rollup_node_endpoint" class="def record field anchored"><a href="#type-mode.rollup_node_endpoint" class="anchor"></a><code><span>rollup_node_endpoint : string;</span></code></li></ol><code><span>}</span></code></li><li id="type-mode.Threshold_encryption_observer" class="def variant constructor anchored"><a href="#type-mode.Threshold_encryption_observer" class="anchor"></a><code><span>| </span><span><span class="constructor">Threshold_encryption_observer</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-mode.initial_kernel" class="def record field anchored"><a href="#type-mode.initial_kernel" class="anchor"></a><code><span>initial_kernel : string;</span></code></li><li id="type-mode.preimages_dir" class="def record field anchored"><a href="#type-mode.preimages_dir" class="anchor"></a><code><span>preimages_dir : string;</span></code></li><li id="type-mode.rollup_node_endpoint" class="def record field anchored"><a href="#type-mode.rollup_node_endpoint" class="anchor"></a><code><span>rollup_node_endpoint : string;</span></code></li><li id="type-mode.bundler_node_endpoint" class="def record field anchored"><a href="#type-mode.bundler_node_endpoint" class="anchor"></a><code><span>bundler_node_endpoint : string;</span></code></li></ol><code><span>}</span></code></li><li id="type-mode.Sequencer" class="def variant constructor anchored"><a href="#type-mode.Sequencer" class="anchor"></a><code><span>| </span><span><span class="constructor">Sequencer</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-mode.initial_kernel" class="def record field anchored"><a href="#type-mode.initial_kernel" class="anchor"></a><code><span>initial_kernel : string;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Path to the initial kernel used by the sequencer.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.preimage_dir" class="def record field anchored"><a href="#type-mode.preimage_dir" class="anchor"></a><code><span>preimage_dir : <span>string option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Path to the directory with the associated preimages.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.private_rpc_port" class="def record field anchored"><a href="#type-mode.private_rpc_port" class="anchor"></a><code><span>private_rpc_port : <span>int option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Port for private RPC server</p><span class="comment-delim">*)</span></div></li><li id="type-mode.time_between_blocks" class="def record field anchored"><a href="#type-mode.time_between_blocks" class="anchor"></a><code><span>time_between_blocks : <span><a href="#type-time_between_blocks">time_between_blocks</a> option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>See <a href="#type-time_between_blocks"><code>time_between_blocks</code></a>, if the value is not provided, the sequencer uses it default value.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.sequencer" class="def record field anchored"><a href="#type-mode.sequencer" class="anchor"></a><code><span>sequencer : string;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Secret key used to sign the blueprints.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.genesis_timestamp" class="def record field anchored"><a href="#type-mode.genesis_timestamp" class="anchor"></a><code><span>genesis_timestamp : <span><a href="../../../tezt-tezos/Tezt_tezos/Client/index.html#type-timestamp">Tezt_tezos.Client.timestamp</a> option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Genesis timestamp</p><span class="comment-delim">*)</span></div></li><li id="type-mode.max_blueprints_lag" class="def record field anchored"><a href="#type-mode.max_blueprints_lag" class="anchor"></a><code><span>max_blueprints_lag : <span>int option</span>;</span></code></li><li id="type-mode.max_blueprints_ahead" class="def record field anchored"><a href="#type-mode.max_blueprints_ahead" class="anchor"></a><code><span>max_blueprints_ahead : <span>int option</span>;</span></code></li><li id="type-mode.max_blueprints_catchup" class="def record field anchored"><a href="#type-mode.max_blueprints_catchup" class="anchor"></a><code><span>max_blueprints_catchup : <span>int option</span>;</span></code></li><li id="type-mode.catchup_cooldown" class="def record field anchored"><a href="#type-mode.catchup_cooldown" class="anchor"></a><code><span>catchup_cooldown : <span>int option</span>;</span></code></li><li id="type-mode.max_number_of_chunks" class="def record field anchored"><a href="#type-mode.max_number_of_chunks" class="anchor"></a><code><span>max_number_of_chunks : <span>int option</span>;</span></code></li><li id="type-mode.wallet_dir" class="def record field anchored"><a href="#type-mode.wallet_dir" class="anchor"></a><code><span>wallet_dir : <span>string option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>--wallet-dir: client directory.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.tx_pool_timeout_limit" class="def record field anchored"><a href="#type-mode.tx_pool_timeout_limit" class="anchor"></a><code><span>tx_pool_timeout_limit : <span>int option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>--tx-pool-timeout-limit: transaction timeout inside the pool.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.tx_pool_addr_limit" class="def record field anchored"><a href="#type-mode.tx_pool_addr_limit" class="anchor"></a><code><span>tx_pool_addr_limit : <span>int option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>--tx-pool-addr-limit: maximum address allowed simultaneously inside the pool.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.tx_pool_tx_per_addr_limit" class="def record field anchored"><a href="#type-mode.tx_pool_tx_per_addr_limit" class="anchor"></a><code><span>tx_pool_tx_per_addr_limit : <span>int option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>--tx-pool-tx-per-addr-limit: maximum transaction per address allowed simultaneously inside the pool.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.dal_slots" class="def record field anchored"><a href="#type-mode.dal_slots" class="anchor"></a><code><span>dal_slots : <span><span>int list</span> option</span>;</span></code></li></ol><code><span>}</span></code></li><li id="type-mode.Sandbox" class="def variant constructor anchored"><a href="#type-mode.Sandbox" class="anchor"></a><code><span>| </span><span><span class="constructor">Sandbox</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-mode.initial_kernel" class="def record field anchored"><a href="#type-mode.initial_kernel" class="anchor"></a><code><span>initial_kernel : string;</span></code></li><li id="type-mode.preimage_dir" class="def record field anchored"><a href="#type-mode.preimage_dir" class="anchor"></a><code><span>preimage_dir : <span>string option</span>;</span></code></li><li id="type-mode.private_rpc_port" class="def record field anchored"><a href="#type-mode.private_rpc_port" class="anchor"></a><code><span>private_rpc_port : <span>int option</span>;</span></code></li><li id="type-mode.time_between_blocks" class="def record field anchored"><a href="#type-mode.time_between_blocks" class="anchor"></a><code><span>time_between_blocks : <span><a href="#type-time_between_blocks">time_between_blocks</a> option</span>;</span></code></li><li id="type-mode.genesis_timestamp" class="def record field anchored"><a href="#type-mode.genesis_timestamp" class="anchor"></a><code><span>genesis_timestamp : <span><a href="../../../tezt-tezos/Tezt_tezos/Client/index.html#type-timestamp">Tezt_tezos.Client.timestamp</a> option</span>;</span></code></li><li id="type-mode.max_number_of_chunks" class="def record field anchored"><a href="#type-mode.max_number_of_chunks" class="anchor"></a><code><span>max_number_of_chunks : <span>int option</span>;</span></code></li><li id="type-mode.wallet_dir" class="def record field anchored"><a href="#type-mode.wallet_dir" class="anchor"></a><code><span>wallet_dir : <span>string option</span>;</span></code></li><li id="type-mode.tx_pool_timeout_limit" class="def record field anchored"><a href="#type-mode.tx_pool_timeout_limit" class="anchor"></a><code><span>tx_pool_timeout_limit : <span>int option</span>;</span></code></li><li id="type-mode.tx_pool_addr_limit" class="def record field anchored"><a href="#type-mode.tx_pool_addr_limit" class="anchor"></a><code><span>tx_pool_addr_limit : <span>int option</span>;</span></code></li><li id="type-mode.tx_pool_tx_per_addr_limit" class="def record field anchored"><a href="#type-mode.tx_pool_tx_per_addr_limit" class="anchor"></a><code><span>tx_pool_tx_per_addr_limit : <span>int option</span>;</span></code></li></ol><code><span>}</span></code></li><li id="type-mode.Threshold_encryption_sequencer" class="def variant constructor anchored"><a href="#type-mode.Threshold_encryption_sequencer" class="anchor"></a><code><span>| </span><span><span class="constructor">Threshold_encryption_sequencer</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-mode.initial_kernel" class="def record field anchored"><a href="#type-mode.initial_kernel" class="anchor"></a><code><span>initial_kernel : string;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Path to the initial kernel used by the sequencer.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.preimage_dir" class="def record field anchored"><a href="#type-mode.preimage_dir" class="anchor"></a><code><span>preimage_dir : <span>string option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Path to the directory with the associated preimages.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.private_rpc_port" class="def record field anchored"><a href="#type-mode.private_rpc_port" class="anchor"></a><code><span>private_rpc_port : <span>int option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Port for private RPC server</p><span class="comment-delim">*)</span></div></li><li id="type-mode.time_between_blocks" class="def record field anchored"><a href="#type-mode.time_between_blocks" class="anchor"></a><code><span>time_between_blocks : <span><a href="#type-time_between_blocks">time_between_blocks</a> option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>See <a href="#type-time_between_blocks"><code>time_between_blocks</code></a>, if the value is not provided, the sequencer uses it default value.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.sequencer" class="def record field anchored"><a href="#type-mode.sequencer" class="anchor"></a><code><span>sequencer : string;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Secret key used to sign the blueprints.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.genesis_timestamp" class="def record field anchored"><a href="#type-mode.genesis_timestamp" class="anchor"></a><code><span>genesis_timestamp : <span><a href="../../../tezt-tezos/Tezt_tezos/Client/index.html#type-timestamp">Tezt_tezos.Client.timestamp</a> option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Genesis timestamp</p><span class="comment-delim">*)</span></div></li><li id="type-mode.max_blueprints_lag" class="def record field anchored"><a href="#type-mode.max_blueprints_lag" class="anchor"></a><code><span>max_blueprints_lag : <span>int option</span>;</span></code></li><li id="type-mode.max_blueprints_ahead" class="def record field anchored"><a href="#type-mode.max_blueprints_ahead" class="anchor"></a><code><span>max_blueprints_ahead : <span>int option</span>;</span></code></li><li id="type-mode.max_blueprints_catchup" class="def record field anchored"><a href="#type-mode.max_blueprints_catchup" class="anchor"></a><code><span>max_blueprints_catchup : <span>int option</span>;</span></code></li><li id="type-mode.catchup_cooldown" class="def record field anchored"><a href="#type-mode.catchup_cooldown" class="anchor"></a><code><span>catchup_cooldown : <span>int option</span>;</span></code></li><li id="type-mode.max_number_of_chunks" class="def record field anchored"><a href="#type-mode.max_number_of_chunks" class="anchor"></a><code><span>max_number_of_chunks : <span>int option</span>;</span></code></li><li id="type-mode.wallet_dir" class="def record field anchored"><a href="#type-mode.wallet_dir" class="anchor"></a><code><span>wallet_dir : <span>string option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>--wallet-dir: client directory.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.tx_pool_timeout_limit" class="def record field anchored"><a href="#type-mode.tx_pool_timeout_limit" class="anchor"></a><code><span>tx_pool_timeout_limit : <span>int option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>--tx-pool-timeout-limit: transaction timeout inside the pool.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.tx_pool_addr_limit" class="def record field anchored"><a href="#type-mode.tx_pool_addr_limit" class="anchor"></a><code><span>tx_pool_addr_limit : <span>int option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>--tx-pool-addr-limit: maximum address allowed simultaneously inside the pool.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.tx_pool_tx_per_addr_limit" class="def record field anchored"><a href="#type-mode.tx_pool_tx_per_addr_limit" class="anchor"></a><code><span>tx_pool_tx_per_addr_limit : <span>int option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>--tx-pool-tx-per-addr-limit: maximum transaction per address allowed simultaneously inside the pool.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.sequencer_sidecar_endpoint" class="def record field anchored"><a href="#type-mode.sequencer_sidecar_endpoint" class="anchor"></a><code><span>sequencer_sidecar_endpoint : string;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>--sequencer-sidecar-endpoint: Uri of the sidecar endpoints to which proposals are forwarded, and from where preblocks are fetched.</p><span class="comment-delim">*)</span></div></li><li id="type-mode.dal_slots" class="def record field anchored"><a href="#type-mode.dal_slots" class="anchor"></a><code><span>dal_slots : <span><span>int list</span> option</span>;</span></code></li></ol><code><span>}</span></code></li><li id="type-mode.Proxy" class="def variant constructor anchored"><a href="#type-mode.Proxy" class="anchor"></a><code><span>| </span><span><span class="constructor">Proxy</span></span></code></li><li id="type-mode.Rpc" class="def variant constructor anchored"><a href="#type-mode.Rpc" class="anchor"></a><code><span>| </span><span><span class="constructor">Rpc</span> <span class="keyword">of</span> <a href="#type-mode">mode</a></span></code></li></ol></div><div class="spec-doc"><p>EVM node mode.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mode"><a href="#val-mode" class="anchor"></a><code><span><span class="keyword">val</span> mode : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-mode">mode</a></span></code></div><div class="spec-doc"><p>Returns the mode of the EVM node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-name"><a href="#val-name" class="anchor"></a><code><span><span class="keyword">val</span> name : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Returns the name of the EVM node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-data_dir"><a href="#val-data_dir" class="anchor"></a><code><span><span class="keyword">val</span> data_dir : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Returns the data_dir of the EVM node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-preimages_dir"><a href="#val-preimages_dir" class="anchor"></a><code><span><span class="keyword">val</span> preimages_dir : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Returns the path to the directory storing the preimages used by the kernel runned by the node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-supports_threshold_encryption"><a href="#val-supports_threshold_encryption" class="anchor"></a><code><span><span class="keyword">val</span> supports_threshold_encryption : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : 
  <span><span class="optlabel">?path</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?name</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?runner</span>:<span class="xref-unresolved">Tezt_wrapper</span>.Runner.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?mode</span>:<a href="#type-mode">mode</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?data_dir</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?rpc_addr</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?rpc_port</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?restricted_rpcs</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?websockets</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>create ?name ?runner ?mode ?data_dir ?rpc_addr ?rpc_port
    rollup_node_endpoint</code> creates an EVM node server.</p><p>The server listens to requests at address <code>rpc_addr</code> and the port <code>rpc_port</code>. <code>rpc_addr</code> defaults to <code>Constant.default_host</code> and a fresh port is chosen if <code>rpc_port</code> is not set. The EVM node starts a websocket server for JSON-RPC communication if <code>websocket</code> is <code>true</code>.</p><p>The server communicates with a rollup-node and sets its endpoint via <code>rollup_node_endpoint</code>.</p><p><code>mode</code> defaults to <code>Proxy</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-initial_kernel"><a href="#val-initial_kernel" class="anchor"></a><code><span><span class="keyword">val</span> initial_kernel : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>initial_kernel node</code> returns the path to the kernel used to initialize the EVM state. Fails if <code>node</code> is a proxy node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : <span><span class="optlabel">?wait</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?extra_arguments</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>run ?wait ?extra_arguments evm_node</code> launches the EVM node server with the arguments given during <a href="#val-create"><code>create</code></a>, additional arguments can be passed via <code>extra_arguments</code>. <code>wait</code> defaults to true, if it is set to false, the evm node is ran but we do not wait for it to be ready.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_event"><a href="#val-wait_for_event" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_event : 
  <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">event</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="xref-unresolved">Tezt_wrapper</span>.JSON.t <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_event ?timeout evm_node ~event f</code> waits for event <code>event</code> until <code>timeout</code> on node <code>evm_node</code>.</p><p>The wait is resolved if an event with name <code>event</code> is seen and <code>f</code> returns <code>Some _</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_ready"><a href="#val-wait_for_ready" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_ready : <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_ready evm_node</code> waits until <code>evm_node</code> is ready.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_blueprint_applied"><a href="#val-wait_for_blueprint_applied" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_blueprint_applied : <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_blueprint_applied ~timeout evm_node level</code> waits until <code>evm_node</code> has applied a blueprint locally for level <code>level</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_blueprint_invalid_applied"><a href="#val-wait_for_blueprint_invalid_applied" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_blueprint_invalid_applied : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_blueprint_invalid_applied</code> waits for the event <code>blueprint_invalid_applied.v0</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_blueprint_finalized"><a href="#val-wait_for_blueprint_finalized" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_blueprint_finalized : <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_predownload_kernel"><a href="#val-wait_for_predownload_kernel" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_predownload_kernel : 
  <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">root_hash</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_predownload_kernel ?timeout evm_node ~root_hash</code> waits until <code>evm_node</code> has download a kernel with <code>root_hash</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_blueprint_invalid"><a href="#val-wait_for_blueprint_invalid" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_blueprint_invalid : <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_blueprint_invalid ~timeout evm_node</code> waits until <code>evm_node</code> has seen an invalid blueprint.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_blueprint_injected"><a href="#val-wait_for_blueprint_injected" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_blueprint_injected : <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_blueprint_injected ~timeout evm_node level</code> waits until <code>evm_node</code> has injected a blueprint for level <code>level</code> to its rollup node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_blueprint_injected_on_dal"><a href="#val-wait_for_blueprint_injected_on_dal" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_blueprint_injected_on_dal : 
  <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(int * int)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_blueprint_injected_on_dal ~timeout evm_node level</code> waits until <code>evm_node</code> has injected a blueprint to the DAL node and returns the L1 level of injection and the number of chunks injected. Can be used with <code>wait_for_blueprint_injected</code> to get the expected level.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_signal_signed"><a href="#val-wait_for_signal_signed" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_signal_signed : 
  <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(string * <span><span>(int * int)</span> list</span>)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_signal_signed ~timeout evm_node</code> waits until (at least) a signal has been signed and returns the smart rollup address for which the signal has been signed together with the slot indices and the published levels that have been signaled.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_pending_upgrade"><a href="#val-wait_for_pending_upgrade" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_pending_upgrade : <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(string * string)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_successful_upgrade"><a href="#val-wait_for_successful_upgrade" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_successful_upgrade : <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(string * int)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_block_producer_locked"><a href="#val-wait_for_block_producer_locked" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_block_producer_locked : <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_block_producer_tx_injected"><a href="#val-wait_for_block_producer_tx_injected" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_block_producer_tx_injected : <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_retrying_connect"><a href="#val-wait_for_retrying_connect" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_retrying_connect : <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_flush_delayed_inbox"><a href="#val-wait_for_flush_delayed_inbox" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_flush_delayed_inbox : 
  <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?level</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_rollup_node_follower_connection_acquired"><a href="#val-wait_for_rollup_node_follower_connection_acquired" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_rollup_node_follower_connection_acquired : 
  <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_rollup_node_follower_disabled"><a href="#val-wait_for_rollup_node_follower_disabled" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_rollup_node_follower_disabled : <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-processed_l1_level"><a href="#type-processed_l1_level" class="anchor"></a><code><span><span class="keyword">type</span> processed_l1_level</span><span> = </span><span>{</span></code><ol><li id="type-processed_l1_level.l1_level" class="def record field anchored"><a href="#type-processed_l1_level.l1_level" class="anchor"></a><code><span>l1_level : int;</span></code></li><li id="type-processed_l1_level.finalized_blueprint" class="def record field anchored"><a href="#type-processed_l1_level.finalized_blueprint" class="anchor"></a><code><span>finalized_blueprint : int;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_processed_l1_level"><a href="#val-wait_for_processed_l1_level" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_processed_l1_level : 
  <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?level</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-processed_l1_level">processed_l1_level</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_processed_l1_level ?timeout ?level evm_node</code> waits until a (finalized) layer1 level has been processed and returns the layer1 level and it's latest corresponding blueprints. If <code>level =
    Some level</code> then it waits until that specific layer1 level is processed. It returns the tuple <code>(layer1_level,
    finalized_blueprint</code>).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_blueprint_catchup"><a href="#val-wait_for_blueprint_catchup" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_blueprint_catchup : <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(int * int)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_blueprint_injection_failure"><a href="#val-wait_for_blueprint_injection_failure" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_blueprint_injection_failure : 
  <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?level</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Config_file"><a href="#module-Config_file" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Config_file/index.html">Config_file</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Node configuration files.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_init_config"><a href="#val-spawn_init_config" class="anchor"></a><code><span><span class="keyword">val</span> spawn_init_config : 
  <span><span class="optlabel">?extra_arguments</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Tezt_wrapper</span>.Process.t</span></code></div><div class="spec-doc"><p><code>spawn_init_config ?extra_arguments evm_node</code> runs &quot;init config&quot; with arguments found in the state.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_init_config_minimal"><a href="#val-spawn_init_config_minimal" class="anchor"></a><code><span><span class="keyword">val</span> spawn_init_config_minimal : 
  <span><span class="label">data_dir</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?path</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?extra_arguments</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Tezt_wrapper</span>.Process.t</span></code></div><div class="spec-doc"><p><code>spawn_init_config_minimal ~data_dir ?path ?extra_arguments ()</code> creates a minimal config with no cli argument populated as <code>spawn_init_config</code>.</p><p>Unlike <code>spawn_init_config</code>, does not require a <code>Evm_node.t</code> instance.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-garbage_collector_parameters"><a href="#type-garbage_collector_parameters" class="anchor"></a><code><span><span class="keyword">type</span> garbage_collector_parameters</span><span> = </span><span>{</span></code><ol><li id="type-garbage_collector_parameters.split_frequency_in_seconds" class="def record field anchored"><a href="#type-garbage_collector_parameters.split_frequency_in_seconds" class="anchor"></a><code><span>split_frequency_in_seconds : int;</span></code></li><li id="type-garbage_collector_parameters.number_of_chunks" class="def record field anchored"><a href="#type-garbage_collector_parameters.number_of_chunks" class="anchor"></a><code><span>number_of_chunks : int;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-history_mode"><a href="#type-history_mode" class="anchor"></a><code><span><span class="keyword">type</span> history_mode</span><span> = </span></code><ol><li id="type-history_mode.Archive" class="def variant constructor anchored"><a href="#type-history_mode.Archive" class="anchor"></a><code><span>| </span><span><span class="constructor">Archive</span></span></code></li><li id="type-history_mode.Rolling" class="def variant constructor anchored"><a href="#type-history_mode.Rolling" class="anchor"></a><code><span>| </span><span><span class="constructor">Rolling</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-rpc_server"><a href="#type-rpc_server" class="anchor"></a><code><span><span class="keyword">type</span> rpc_server</span><span> = </span></code><ol><li id="type-rpc_server.Resto" class="def variant constructor anchored"><a href="#type-rpc_server.Resto" class="anchor"></a><code><span>| </span><span><span class="constructor">Resto</span></span></code></li><li id="type-rpc_server.Dream" class="def variant constructor anchored"><a href="#type-rpc_server.Dream" class="anchor"></a><code><span>| </span><span><span class="constructor">Dream</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-patch_config_with_experimental_feature"><a href="#val-patch_config_with_experimental_feature" class="anchor"></a><code><span><span class="keyword">val</span> patch_config_with_experimental_feature : 
  <span><span class="optlabel">?drop_duplicate_when_injection</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?blueprints_publisher_order_enabled</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?block_storage_sqlite3</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?next_wasm_runtime</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?garbage_collector_parameters</span>:<a href="#type-garbage_collector_parameters">garbage_collector_parameters</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?history_mode</span>:<a href="#type-history_mode">history_mode</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?rpc_server</span>:<a href="#type-rpc_server">rpc_server</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?enable_websocket</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?max_websocket_message_length</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Tezt_wrapper</span>.JSON.t <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Tezt_wrapper</span>.JSON.t</span></code></div><div class="spec-doc"><p><code>patch_config_with_experimental_feature ?drop_duplicate_when_injection
    ?block_storage_sqlite3 ?next_wasm_runtime ?rpc_server ?enable_websocket
    ?max_websocket_message_length json_config</code> patches a config to add experimental feature. Each optional argument add the correspondent experimental feature.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : 
  <span><span class="optlabel">?patch_config</span>:<span>(<span><span class="xref-unresolved">Tezt_wrapper</span>.JSON.t <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Tezt_wrapper</span>.JSON.t)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?name</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?runner</span>:<span class="xref-unresolved">Tezt_wrapper</span>.Runner.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?mode</span>:<a href="#type-mode">mode</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?data_dir</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?rpc_addr</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?rpc_port</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?restricted_rpcs</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?websockets</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>init ?patch_config ?name ?runner ?mode ?data_dir ?rpc_addr
    ?rpc_port rollup_node_endpoint</code> creates an EVM node server with <a href="#val-create"><code>create</code></a>, init the config with <a href="#val-spawn_init_config"><code>spawn_init_config</code></a>, patch it with <code>patch_config</code>, then runs it with <a href="#val-run"><code>run</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rpc_port"><a href="#val-rpc_port" class="anchor"></a><code><span><span class="keyword">val</span> rpc_port : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Get the RPC port given as <code>--rpc-port</code> to a node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_run"><a href="#val-spawn_run" class="anchor"></a><code><span><span class="keyword">val</span> spawn_run : <span><span class="optlabel">?extra_arguments</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Tezt_wrapper</span>.Process.t</span></code></div><div class="spec-doc"><p><code>spawn_run ?extra_arguments evm_node</code> same as <a href="#val-run"><code>run</code></a> but spawns a process.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-terminate"><a href="#val-terminate" class="anchor"></a><code><span><span class="keyword">val</span> terminate : <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Send SIGTERM and wait for the process to terminate.</p><p>Default <code>timeout</code> is 30 seconds, after which SIGKILL is sent.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-resolve_or_timeout"><a href="#val-resolve_or_timeout" class="anchor"></a><code><span><span class="keyword">val</span> resolve_or_timeout : 
  <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">name</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for"><a href="#val-wait_for" class="anchor"></a><code><span><span class="keyword">val</span> wait_for : 
  <span><span class="optlabel">?where</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="xref-unresolved">Tezt_wrapper</span>.JSON.t <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>The same exact behavior as <code>Sc_rollup_node.wait_for</code> but for the EVM node.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-delayed_transaction_kind"><a href="#type-delayed_transaction_kind" class="anchor"></a><code><span><span class="keyword">type</span> delayed_transaction_kind</span><span> = </span></code><ol><li id="type-delayed_transaction_kind.Deposit" class="def variant constructor anchored"><a href="#type-delayed_transaction_kind.Deposit" class="anchor"></a><code><span>| </span><span><span class="constructor">Deposit</span></span></code></li><li id="type-delayed_transaction_kind.Transaction" class="def variant constructor anchored"><a href="#type-delayed_transaction_kind.Transaction" class="anchor"></a><code><span>| </span><span><span class="constructor">Transaction</span></span></code></li><li id="type-delayed_transaction_kind.FaDeposit" class="def variant constructor anchored"><a href="#type-delayed_transaction_kind.FaDeposit" class="anchor"></a><code><span>| </span><span><span class="constructor">FaDeposit</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-evm_event_kind"><a href="#type-evm_event_kind" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a evm_event_kind</span></span><span> = </span></code><ol><li id="type-evm_event_kind.Kernel_upgrade" class="def variant constructor anchored"><a href="#type-evm_event_kind.Kernel_upgrade" class="anchor"></a><code><span>| </span><span><span class="constructor">Kernel_upgrade</span> : <span><span>(string * <a href="../../../octez-libs/Tezos_base/Time/System/index.html#type-t">Tezt_tezos.Client.Time.t</a>)</span> <a href="#type-evm_event_kind">evm_event_kind</a></span></span></code></li><li id="type-evm_event_kind.Sequencer_upgrade" class="def variant constructor anchored"><a href="#type-evm_event_kind.Sequencer_upgrade" class="anchor"></a><code><span>| </span><span><span class="constructor">Sequencer_upgrade</span> : <span><span>(string * <span class="xref-unresolved">Hex</span>.t * <a href="../../../octez-libs/Tezos_base/Time/System/index.html#type-t">Tezt_tezos.Client.Time.t</a>)</span> <a href="#type-evm_event_kind">evm_event_kind</a></span></span></code></li><li id="type-evm_event_kind.Blueprint_applied" class="def variant constructor anchored"><a href="#type-evm_event_kind.Blueprint_applied" class="anchor"></a><code><span>| </span><span><span class="constructor">Blueprint_applied</span> : <span><span>(int * string)</span> <a href="#type-evm_event_kind">evm_event_kind</a></span></span></code></li><li id="type-evm_event_kind.New_delayed_transaction" class="def variant constructor anchored"><a href="#type-evm_event_kind.New_delayed_transaction" class="anchor"></a><code><span>| </span><span><span class="constructor">New_delayed_transaction</span> : <span><span>(<a href="#type-delayed_transaction_kind">delayed_transaction_kind</a> * string)</span> <a href="#type-evm_event_kind">evm_event_kind</a></span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_evm_event"><a href="#val-wait_for_evm_event" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_evm_event : 
  <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-evm_event_kind">evm_event_kind</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?check</span>:<span>(<span><span class="xref-unresolved">Tezt_wrapper</span>.JSON.t <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_evm_event evm_node ~event_kind</code> wait for the event <code>evm_events_new_event.v0</code> using <a href="#val-wait_for"><code>wait_for</code></a> where the event kind is equal to <code>event_kind</code> (e.g. &quot;sequencer_upgrade&quot;).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_diverged"><a href="#val-wait_for_diverged" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_diverged : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(int * string * string)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_diverged evm_node</code> waits for the event <code>evm_events_follower_diverged.v0</code> using <a href="#val-wait_for"><code>wait_for</code></a> and return the diverging blueprint level expected hash, and found hash.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_reset"><a href="#val-wait_for_reset" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_reset : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_reset evm_node</code> waits for the event <code>evm_context_reset_at_level</code> using <a href="#val-wait_for"><code>wait_for</code></a>. It does not wait for a specific level.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_missing_blueprint"><a href="#val-wait_for_missing_blueprint" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_missing_blueprint : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(int * string)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_missing_blueprint evm_node</code> waits for the event <code>evm_events_follower_missing_blueprint.v0</code> using <a href="#val-wait_for"><code>wait_for</code></a> and return the missing blueprint level and block hash.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_rollup_node_ahead"><a href="#val-wait_for_rollup_node_ahead" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_rollup_node_ahead : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_rollup_node_ahead evm_node</code> waits for the event <code>evm_events_follower_rollup_node_ahead.v0</code> using <a href="#val-wait_for"><code>wait_for</code></a> and returns the missing blueprint level.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_tx_pool_add_transaction"><a href="#val-wait_for_tx_pool_add_transaction" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_tx_pool_add_transaction : <span><span class="optlabel">?timeout</span>:float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_tx_pool_add_transaction ?timeout evm_node</code> waits for the event <code>tx_pool_add_transaction.v0</code> using <a href="#val-wait_for"><code>wait_for</code></a> and returns the transaction hash.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_shutdown_event"><a href="#val-wait_for_shutdown_event" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_shutdown_event : <span><span class="optlabel">?can_terminate</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>int option</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_shutdown ?can_terminate evm_node</code> waits until a node terminates and return its status. If the node is not running, make the test fail. If <code>can_terminate</code> is `true` and the node was already terminated, returns `None`.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_split"><a href="#val-wait_for_split" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_split : <span><span class="optlabel">?level</span>:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_split ?level evm_node</code> waits untils the node terminates splitting its irmin context at level <code>level</code> if provided.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_gc_finished"><a href="#val-wait_for_gc_finished" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_gc_finished : 
  <span><span class="optlabel">?gc_level</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?head_level</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(int * int)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_gc_finished ?gc_level ?head_level evm_node</code> waits until the node terminates garbage collecting its context on head <code>head_level</code> at gc level <code>gc_level</code> if provided.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_for_start_history_mode"><a href="#val-wait_for_start_history_mode" class="anchor"></a><code><span><span class="keyword">val</span> wait_for_start_history_mode : <span><span class="optlabel">?history_mode</span>:string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_for_start_history_mode ?history_mode evm_node</code> waits until the start history mode event is emitted with <code>history_mode</code> if provided.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rpc_endpoint"><a href="#val-rpc_endpoint" class="anchor"></a><code><span><span class="keyword">val</span> rpc_endpoint : <span><span class="optlabel">?local</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?private_</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>rpc_endpoint ?local ?private_ evm_node</code> returns the endpoint to communicate with the <code>evm_node</code>. If <code>private_</code> is true, the endpoint for the private RPC server is returned.</p><p>If <code>local</code> is given (<code>false</code> by default), then <code>Constant.default_host</code> is used (it overrides <code>rpc-addr</code> or the <code>runner</code> argument).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-endpoint"><a href="#val-endpoint" class="anchor"></a><code><span><span class="keyword">val</span> endpoint : <span><span class="optlabel">?private_</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>A deprecated alias for <code>rpc_endpoint</code> where <code>local</code> optional parameter is not given.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-request"><a href="#type-request" class="anchor"></a><code><span><span class="keyword">type</span> request</span><span> = </span><span>{</span></code><ol><li id="type-request.method_" class="def record field anchored"><a href="#type-request.method_" class="anchor"></a><code><span>method_ : string;</span></code></li><li id="type-request.parameters" class="def record field anchored"><a href="#type-request.parameters" class="anchor"></a><code><span>parameters : <span class="xref-unresolved">Tezt_wrapper</span>.JSON.u;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>JSON-RPC request.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-call_evm_rpc"><a href="#val-call_evm_rpc" class="anchor"></a><code><span><span class="keyword">val</span> call_evm_rpc : <span><span class="optlabel">?private_</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-request">request</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Tezt_wrapper</span>.JSON.t <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>call_evm_rpc ?private_ evm_node request</code> sends a JSON-RPC request to the <code>evm_node</code>, for the given <code>request</code>. If <code>private_</code> is true, the request is sent to the private RPC server.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-batch_evm_rpc"><a href="#val-batch_evm_rpc" class="anchor"></a><code><span><span class="keyword">val</span> batch_evm_rpc : 
  <span><span class="optlabel">?private_</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="#type-request">request</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="xref-unresolved">Tezt_wrapper</span>.JSON.t list</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>batch_evm_rpc ?private_ evm_node requests</code> sends multiple JSON-RPC requests to the <code>evm_node</code>, for the given <code>requests</code>. If <code>private_</code> is true, the requests are sent to the private RPC server.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-open_websocket"><a href="#val-open_websocket" class="anchor"></a><code><span><span class="keyword">val</span> open_websocket : <span><span class="optlabel">?private_</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Open a websocket connection with the EVM node. If <code>private_</code> is true, a connection is created with the private websocket endpoint of the node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-call_evm_websocket"><a href="#val-call_evm_websocket" class="anchor"></a><code><span><span class="keyword">val</span> call_evm_websocket : 
  <span><a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-request">request</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Tezt_wrapper</span>.JSON.t <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>call_evm_websocket ws request</code> sends a JSON-RPC request on the websocket connection <code>ws</code> and waits for the response.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-batch_evm_websocket"><a href="#val-batch_evm_websocket" class="anchor"></a><code><span><span class="keyword">val</span> batch_evm_websocket : 
  <span><a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="#type-request">request</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="xref-unresolved">Tezt_wrapper</span>.JSON.t list</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>batch_evm_websocket ws requests</code> sends multiple JSON-RPC requests on the websocket connection <code>ws</code> without waiting for the responses, then receive all responses at the end.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-jsonrpc"><a href="#val-jsonrpc" class="anchor"></a><code><span><span class="keyword">val</span> jsonrpc : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?private_</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-request">request</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Tezt_wrapper</span>.JSON.t <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>jsonrpc</code> uses the <code>websocket</code> to make a JSON-RPC call if provided or falls back to using HTTP RPC request on the EVM node otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-batch_jsonrpc"><a href="#val-batch_jsonrpc" class="anchor"></a><code><span><span class="keyword">val</span> batch_jsonrpc : 
  <span><span class="optlabel">?websocket</span>:<a href="../../../tezt-tezos/Tezt_tezos/Websocket/index.html#type-t">Tezt_tezos.Websocket.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?private_</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="#type-request">request</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="xref-unresolved">Tezt_wrapper</span>.JSON.t list</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>batch_jsonrpc</code> uses the <code>websocket</code> to make a JSON-RPC calls if provided or falls back to using an HTTP RPC batch request on the EVM node otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extract_result"><a href="#val-extract_result" class="anchor"></a><code><span><span class="keyword">val</span> extract_result : <span><span class="xref-unresolved">Tezt_wrapper</span>.JSON.t <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Tezt_wrapper</span>.JSON.t</span></code></div><div class="spec-doc"><p><code>extract_result json</code> expects a JSON-RPC `result` and returns the value.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extract_error_message"><a href="#val-extract_error_message" class="anchor"></a><code><span><span class="keyword">val</span> extract_error_message : <span><span class="xref-unresolved">Tezt_wrapper</span>.JSON.t <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Tezt_wrapper</span>.JSON.t</span></code></div><div class="spec-doc"><p><code>extract_error_message json</code> expects a JSON-RPC `error.message` and returns the value.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fetch_contract_code"><a href="#val-fetch_contract_code" class="anchor"></a><code><span><span class="keyword">val</span> fetch_contract_code : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>fetch_contract_code evm_node contract</code> returns the code associated to the given contract in the rollup.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-upgrade_payload"><a href="#val-upgrade_payload" class="anchor"></a><code><span><span class="keyword">val</span> upgrade_payload : 
  <span><span class="label">root_hash</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">activation_timestamp</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>upgrade_payload ~root_hash ~activation_timestamp</code> gives the upgrade payload to put in a upgrade message, it will upgrade to <code>root_hash</code> at the first block after <code>activation_timestamp</code> (in RFC3399 format).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sequencer_upgrade_payload"><a href="#val-sequencer_upgrade_payload" class="anchor"></a><code><span><span class="keyword">val</span> sequencer_upgrade_payload : 
  <span><span class="optlabel">?client</span>:<a href="../../../tezt-tezos/Tezt_tezos/Client/index.html#type-t">Tezt_tezos.Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">public_key</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">pool_address</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">activation_timestamp</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>sequencer_upgrade_payload ?client ~public_key  ~pool_address
    ~activation_timestamp ()</code> gives the sequencer upgrade payload to put in a upgrade message, it will upgrade the sequencer to <code>public_key</code> at the first l1 block after <code>activation_timestamp</code> (in RFC3399 format).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-init_from_rollup_node_data_dir"><a href="#val-init_from_rollup_node_data_dir" class="anchor"></a><code><span><span class="keyword">val</span> init_from_rollup_node_data_dir : 
  <span><span class="optlabel">?omit_delayed_tx_events</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../tezt-tezos/Tezt_tezos/Sc_rollup_node/index.html#type-t">Tezt_tezos.Sc_rollup_node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>init_from_rollup_node_data_dir ?omit_delayed_tx_events evm_node
    rollup_node</code> initialises the data dir of the evm node by importing the evm state from a rollup node data dir.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-transform_dump"><a href="#val-transform_dump" class="anchor"></a><code><span><span class="keyword">val</span> transform_dump : <span><span class="label">dump_json</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="label">dump_rlp</span>:string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>transform_dump ~dump_json ~dump_rlp</code> transforms a JSON list of instructions stored in <code>dump_json</code> to an RLP list, which is stored in <code>dump_rlp</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reset"><a href="#val-reset" class="anchor"></a><code><span><span class="keyword">val</span> reset : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">l2_level</span>:int <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>reset evm_node ~l2_level</code> reset the store of the <code>evm_node</code> to l2_level.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-chunk_data"><a href="#val-chunk_data" class="anchor"></a><code><span><span class="keyword">val</span> chunk_data : 
  <span><span class="label">rollup_address</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?sequencer_key</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?timestamp</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?parent_hash</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?number</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?client</span>:<a href="../../../tezt-tezos/Tezt_tezos/Client/index.html#type-t">Tezt_tezos.Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>chunk data ~rollup_address ?sequencer_key ?timestamp ?parent_hash
    ?number ?client data</code> generates the valid inputs for the rollup at <code>rollup_address</code> from the given <code>data</code>. If <code>sequencer_key</code> is given, the data produced is for the sequencer mode.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-patch_kernel"><a href="#val-patch_kernel" class="anchor"></a><code><span><span class="keyword">val</span> patch_kernel : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>patch_kernel evm_node path</code> modifies the kernel used by <code>evm_node</code> with the kernel stored in the file <code>path</code>. This will fail if the node is running.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-patch_state"><a href="#val-patch_state" class="anchor"></a><code><span><span class="keyword">val</span> patch_state : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">key</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="label">value</span>:string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>patch_kernel evm_node ~key ~value</code> modifies the state of the <code>evm_node</code> by writing <code>value</code> at <code>key</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-export_snapshot"><a href="#val-export_snapshot" class="anchor"></a><code><span><span class="keyword">val</span> export_snapshot : 
  <span><span class="optlabel">?compress_on_the_fly</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="xref-unresolved">Tezt_wrapper</span>.Process.t, string)</span> <a href="../../../tezt-tezos/Tezt_tezos/Runnable/Syntax/index.html#type-runnable">Tezt_tezos.Runnable.Syntax.runnable</a></span></span></code></div><div class="spec-doc"><p><code>export_snapshot evm_node</code> exports a snapshot of the evm node in a temporary directory. It returns the path for the produced snapshot file.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-import_snapshot"><a href="#val-import_snapshot" class="anchor"></a><code><span><span class="keyword">val</span> import_snapshot : 
  <span><span class="optlabel">?force</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">snapshot_file</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="xref-unresolved">Tezt_wrapper</span>.Process.t, unit)</span> <a href="../../../tezt-tezos/Tezt_tezos/Runnable/Syntax/index.html#type-runnable">Tezt_tezos.Runnable.Syntax.runnable</a></span></span></code></div><div class="spec-doc"><p><code>import_snapshot ?force evm_node ~snapshot_file</code> imports the snapshot <code>snapshot_file</code> in the evm node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_termination"><a href="#val-wait_termination" class="anchor"></a><code><span><span class="keyword">val</span> wait_termination : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_kernel_installer_config"><a href="#val-make_kernel_installer_config" class="anchor"></a><code><span><span class="keyword">val</span> make_kernel_installer_config : 
  <span><span class="optlabel">?max_delayed_inbox_blueprint_length</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?mainnet_compat</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?remove_whitelist</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?kernel_root_hash</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?chain_id</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?bootstrap_balance</span>:<a href="../Wei/index.html#type-t">Wei.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?bootstrap_accounts</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?sequencer</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?delayed_bridge</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?ticketer</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?administrator</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?sequencer_governance</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?kernel_governance</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?kernel_security_governance</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?minimum_base_fee_per_gas</span>:<a href="../Wei/index.html#type-t">Wei.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?da_fee_per_byte</span>:<a href="../Wei/index.html#type-t">Wei.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?delayed_inbox_timeout</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?delayed_inbox_min_levels</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?sequencer_pool_address</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?maximum_allowed_ticks</span>:int64 <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?maximum_gas_per_transaction</span>:int64 <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?max_blueprint_lookahead_in_seconds</span>:int64 <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?set_account_code</span>:<span><span>(string * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?enable_fa_bridge</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?enable_dal</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?dal_slots</span>:<span>int list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">output</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="xref-unresolved">Tezt_wrapper</span>.Process.t, unit)</span> <a href="../../../tezt-tezos/Tezt_tezos/Runnable/index.html#type-t">Tezt_tezos.Runnable.t</a></span></span></code></div><div class="spec-doc"><p><code>make_kernel_installer_config ~output ()</code> create the config needed for the evm kernel used by the installer</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-debug_print_store_schemas"><a href="#val-debug_print_store_schemas" class="anchor"></a><code><span><span class="keyword">val</span> debug_print_store_schemas : 
  <span><span class="optlabel">?path</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?hooks</span>:<span class="xref-unresolved">Tezt_wrapper</span>.Process_hooks.t <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-man"><a href="#val-man" class="anchor"></a><code><span><span class="keyword">val</span> man : 
  <span><span class="optlabel">?path</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?hooks</span>:<span class="xref-unresolved">Tezt_wrapper</span>.Process_hooks.t <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-describe_config"><a href="#val-describe_config" class="anchor"></a><code><span><span class="keyword">val</span> describe_config : 
  <span><span class="optlabel">?path</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?hooks</span>:<span class="xref-unresolved">Tezt_wrapper</span>.Process_hooks.t <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mode_with_new_private_rpc"><a href="#val-mode_with_new_private_rpc" class="anchor"></a><code><span><span class="keyword">val</span> mode_with_new_private_rpc : <span><a href="#type-mode">mode</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-mode">mode</a></span></code></div><div class="spec-doc"><p>Returns the <code>mode</code> with a fresh private RPC port if one was present.</p></div></div></div></body></html>
