<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dal_pages_request (octez-smart-rollup-node-Proxford.Octez_smart_rollup_node_Proxford.Dal_pages_request)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-smart-rollup-node-Proxford</a> &#x00BB; <a href="../index.html">Octez_smart_rollup_node_Proxford</a> &#x00BB; Dal_pages_request</nav><header class="odoc-preamble"><h1>Module <code><span>Octez_smart_rollup_node_Proxford.Dal_pages_request</span></code></h1><p>Access DAL slots and pages content.</p><p>This module is a wrapper on top of <code>Store.Dal_slot_pages</code> module to access DAL slots and pages' data that have been previously fetched by the rollup node.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Dal_slot_not_found_in_store"><a href="#extension-decl-Dal_slot_not_found_in_store" class="anchor"></a><code><span><span class="keyword">type</span> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-error">Tezos_base.TzPervasives.error</a> += </span></code><ol><li id="extension-Dal_slot_not_found_in_store" class="def variant extension anchored"><a href="#extension-Dal_slot_not_found_in_store" class="anchor"></a><code><span>| </span><span><span class="extension">Dal_slot_not_found_in_store</span> <span class="keyword">of</span> <a href="../../../tezos-protocol-018-Proxford/Tezos_raw_protocol_018_Proxford/Alpha_context/Dal/Slot/Header/index.html#type-id">Tezos_protocol_018_Proxford.Protocol.Alpha_context.Dal.Slot.Header.id</a></span></code></li></ol></div><div class="spec-doc"><p>This error is returned when a slot, identified by its ID, is not found in the store.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-slot_pages"><a href="#val-slot_pages" class="anchor"></a><code><span><span class="keyword">val</span> slot_pages : 
  <span><span class="label">dal_attestation_lag</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">inbox_level</span>:int32 <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">_</span> <a href="../../../octez-smart-rollup-node-lib/Octez_smart_rollup_node/Node_context/index.html#type-t">Octez_smart_rollup_node.Node_context.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../tezos-protocol-018-Proxford/Tezos_raw_protocol_018_Proxford/Alpha_context/Dal/index.html#type-slot_id">Tezos_protocol_018_Proxford.Protocol.Alpha_context.Dal.slot_id</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span><a href="../../../tezos-protocol-018-Proxford/Tezos_raw_protocol_018_Proxford/Alpha_context/Dal/Page/index.html#type-content">Tezos_protocol_018_Proxford.Protocol.Alpha_context.Dal.Page.content</a> list</span>
    option</span>
    <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Retrieve the pages' content of the given slot ID's from the store.</p><p>The function returns <code>Dal_slot_not_found_in_store</code> if no entry is found in the store for the given ID (i.e. no page is registered with or without content).</p><p>If the returned value is <code>Some pages</code>, the slot whose ID is given is supposed to be confirmed and <code>pages</code> correspond to the pages of the slot. Otherwise <code>None</code> is returned.</p><p>The function relies on <code>Store.Dal_slot_pages</code>'s invariants to guarantee that:</p><ul><li>the pages are returned in increasing order w.r.t. their indexes in the slot;</li><li>the size of the list, in case it is not empty, is equal to the expected number of pages in a slot.</li></ul><p><code>dal_attestation_lag</code> is used to retrieve the correct entry in <code>store</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-page_content"><a href="#val-page_content" class="anchor"></a><code><span><span class="keyword">val</span> page_content : 
  <span><span class="label">dal_attestation_lag</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">inbox_level</span>:int32 <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">_</span> <a href="../../../octez-smart-rollup-node-lib/Octez_smart_rollup_node/Node_context/index.html#type-t">Octez_smart_rollup_node.Node_context.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../tezos-protocol-018-Proxford/Tezos_raw_protocol_018_Proxford/Alpha_context/Dal/Page/index.html#type-t">Tezos_protocol_018_Proxford.Protocol.Alpha_context.Dal.Page.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="../../../tezos-protocol-018-Proxford/Tezos_raw_protocol_018_Proxford/Alpha_context/Dal/Page/index.html#type-content">Tezos_protocol_018_Proxford.Protocol.Alpha_context.Dal.Page.content</a> option</span>
    <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Retrieve the content of the page identified by the given ID from the store.</p><p>The function returns <code>Dal_slot_not_found_in_store</code> if no entry is found in the store for the given ID. It returns <code>None</code> in case the level of the requested page is out of bounds (e.g. in the future). Said otherwise, some content is only returned for confirmed pages (slots) for which the content has already been downloaded and saved to the store.</p><p><code>dal_attestation_lag</code> is used to retrieve the correct entry in <code>store</code>.</p></div></div></div></body></html>
