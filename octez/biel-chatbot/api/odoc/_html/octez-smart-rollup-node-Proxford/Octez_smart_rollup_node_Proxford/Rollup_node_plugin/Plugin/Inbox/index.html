<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Inbox (octez-smart-rollup-node-Proxford.Octez_smart_rollup_node_Proxford.Rollup_node_plugin.Plugin.Inbox)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">octez-smart-rollup-node-Proxford</a> &#x00BB; <a href="../../../index.html">Octez_smart_rollup_node_Proxford</a> &#x00BB; <a href="../../index.html">Rollup_node_plugin</a> &#x00BB; <a href="../index.html">Plugin</a> &#x00BB; Inbox</nav><header class="odoc-preamble"><h1>Module <code><span>Plugin.Inbox</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-process_head"><a href="#val-process_head" class="anchor"></a><code><span><span class="keyword">val</span> process_head : 
  <span><a href="../../../../../octez-smart-rollup-node-lib/Octez_smart_rollup_node/Node_context/index.html#type-rw">Octez_smart_rollup_node.Node_context.rw</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">predecessor</span>:<a href="../../../../../octez-smart-rollup-node-lib/Octez_smart_rollup_node/Layer1/index.html#type-header">Octez_smart_rollup_node.Layer1.header</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../../../octez-smart-rollup-node-lib/Octez_smart_rollup_node/Layer1/index.html#type-header">Octez_smart_rollup_node.Layer1.header</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../../../../../octez-l2-libs/Octez_smart_rollup/Inbox_hash/index.html#type-t">Octez_smart_rollup.Inbox.Hash.t</a>
   * <a href="../../../../../octez-l2-libs/Octez_smart_rollup/Inbox/index.html#type-t">Octez_smart_rollup.Inbox.t</a>
   * <a href="../../../../../octez-l2-libs/Octez_smart_rollup/Merkelized_payload_hashes_hash/index.html#type-t">Octez_smart_rollup.Merkelized_payload_hashes_hash.t</a>
   * <span>string list</span>)</span>
    <a href="../../../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>process_head node_ctxt ~predecessor head</code> changes the state of the inbox on disk to react to the operations contained in the block <code>head</code> (where <code>predecessor</code> is the predecessor of <code>head</code> in the L1 chain). It returns a tuple <code>(inbox_hash, inbox, payload_hash, messages)</code> where <code>inbox</code> is the new inbox and <code>inbox_hash</code> its hash, <code>payload_hash</code> is the hash of the merkelized payload for this inbox and <code>messages</code> are the serialized messages present in the block (with the internal messages added by the protocol).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-same_as_layer_1"><a href="#val-same_as_layer_1" class="anchor"></a><code><span><span class="keyword">val</span> same_as_layer_1 : 
  <span><span><span class="type-var">_</span> <a href="../../../../../octez-smart-rollup-node-lib/Octez_smart_rollup_node/Node_context/index.html#type-t">Octez_smart_rollup_node.Node_context.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../../../octez-libs/Tezos_crypto/Hashed/Block_hash/index.html#type-t">Tezos_base.TzPervasives.Block_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../../../octez-l2-libs/Octez_smart_rollup/Inbox/index.html#type-t">Octez_smart_rollup.Inbox.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>same_as_layer_1 node_ctxt block node_inbox</code> ensures that the rollup node agrees with the L1 node that inbox for <code>block</code> is <code>node_inbox</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-serialize_external_message"><a href="#val-serialize_external_message" class="anchor"></a><code><span><span class="keyword">val</span> serialize_external_message : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>string <a href="../../../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span></span></code></div><div class="spec-doc"><p>Serialize an external messages to the protocol representation. NOTE: so far, in all available protocols, this adds a tag <code>'\001'</code> at the beginning.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : 
  <span><span class="label">predecessor_timestamp</span>:<a href="../../../../../octez-libs/Tezos_base/Time/Protocol/index.html#type-t">Tezos_base.Time.Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">predecessor</span>:<a href="../../../../../octez-libs/Tezos_crypto/Hashed/Block_hash/index.html#type-t">Tezos_base.TzPervasives.Block_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">level</span>:int32 <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../../../octez-l2-libs/Octez_smart_rollup/Inbox/index.html#type-t">Octez_smart_rollup.Inbox.t</a></span></code></div><div class="spec-doc"><p>Returns the initial global inbox where <code>level</code> is the first level of the protocol with smart rollups.</p></div></div></div></body></html>
