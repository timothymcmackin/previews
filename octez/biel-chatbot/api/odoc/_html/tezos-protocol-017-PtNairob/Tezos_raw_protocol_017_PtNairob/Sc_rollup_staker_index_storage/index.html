<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sc_rollup_staker_index_storage (tezos-protocol-017-PtNairob.Tezos_raw_protocol_017_PtNairob.Sc_rollup_staker_index_storage)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-protocol-017-PtNairob</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_017_PtNairob</a> &#x00BB; Sc_rollup_staker_index_storage</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_017_PtNairob.Sc_rollup_staker_index_storage</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>init ctxt rollup</code> initialize a staker index counter for <code>rollup</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fresh_staker_index"><a href="#val-fresh_staker_index" class="anchor"></a><code><span><span class="keyword">val</span> fresh_staker_index : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_protocol_environment_017_PtNairob/Signature/index.html#type-public_key_hash">Tezos_protocol_environment_017_PtNairob.Signature.public_key_hash</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a> * <a href="../Sc_rollup_staker_index_repr/index.html#type-t">Sc_rollup_staker_index_repr.t</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>fresh_staker_index ctxt rollup staker</code> creates a new index for <code>staker</code> and store it in <code>Storage.Sc_rollup.Staker_index</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_staker_index_unsafe"><a href="#val-find_staker_index_unsafe" class="anchor"></a><code><span><span class="keyword">val</span> find_staker_index_unsafe : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_protocol_environment_017_PtNairob/Signature/index.html#type-public_key_hash">Tezos_protocol_environment_017_PtNairob.Signature.public_key_hash</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a> * <span><a href="../Sc_rollup_staker_index_repr/index.html#type-t">Sc_rollup_staker_index_repr.t</a> option</span>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>find_staker_index_unsafe ctxt rollup staker</code> returns the index for the <code>rollup</code>'s <code>staker</code>. This function *must* be called only after they have checked for the existence of the rollup, and therefore it is not necessary for it to check for the existence of the rollup again. Otherwise, use the safe function <code>find_staker_index</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_staker_index_unsafe"><a href="#val-get_staker_index_unsafe" class="anchor"></a><code><span><span class="keyword">val</span> get_staker_index_unsafe : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_protocol_environment_017_PtNairob/Signature/index.html#type-public_key_hash">Tezos_protocol_environment_017_PtNairob.Signature.public_key_hash</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a> * <a href="../Sc_rollup_staker_index_repr/index.html#type-t">Sc_rollup_staker_index_repr.t</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-find_staker_index_unsafe"><code>find_staker_index_unsafe</code></a> but fails if the value is absent.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_staker"><a href="#val-remove_staker" class="anchor"></a><code><span><span class="keyword">val</span> remove_staker : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_protocol_environment_017_PtNairob/Signature/index.html#type-public_key_hash">Tezos_protocol_environment_017_PtNairob.Signature.public_key_hash</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>remove_staker ctxt rollup staker</code> cleans every storage associated to <code>staker</code> and it's index. The staker will be no longer considered active until a new index is given to it, through a new call to <a href="#val-fresh_staker_index"><code>fresh_staker_index</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_stakers_uncarbonated"><a href="#val-list_stakers_uncarbonated" class="anchor"></a><code><span><span class="keyword">val</span> list_stakers_uncarbonated : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../Tezos_protocol_environment_017_PtNairob/Signature/index.html#type-public_key_hash">Tezos_protocol_environment_017_PtNairob.Signature.public_key_hash</a> list</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>list_stakers_uncarbonated ctxt rollup</code> lists the active stakers on <code>rollup</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_active"><a href="#val-is_active" class="anchor"></a><code><span><span class="keyword">val</span> is_active : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_staker_index_repr/index.html#type-t">Sc_rollup_staker_index_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a> * bool)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>is_active ctxt rollup staker_index</code> returns true iff <code>staker_index</code> is an active staker.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_staker"><a href="#val-is_staker" class="anchor"></a><code><span><span class="keyword">val</span> is_staker : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/Staker/index.html#type-t">Sc_rollup_repr.Staker.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a> * bool)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>is_staker context rollup staker</code> returns <code>true</code> iff <code>staker</code> has a deposit on the given <code>rollup</code>.</p></div></div></div></body></html>
