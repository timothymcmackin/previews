<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Script_ir_translator (tezos-protocol-017-PtNairob.Tezos_raw_protocol_017_PtNairob.Script_ir_translator)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-protocol-017-PtNairob</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_017_PtNairob</a> &#x00BB; Script_ir_translator</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_017_PtNairob.Script_ir_translator</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#michelson-existential-witness-types">Michelson Existential Witness types</a></li></ul></nav><div class="odoc-content"><h2 id="michelson-existential-witness-types"><a href="#michelson-existential-witness-types" class="anchor"></a>Michelson Existential Witness types</h2><div class="odoc-spec"><div class="spec type anchored" id="type-eq"><a href="#type-eq" class="anchor"></a><code><span><span class="keyword">type</span> <span>('ta, 'tb) eq</span></span><span> = </span></code><ol><li id="type-eq.Eq" class="def variant constructor anchored"><a href="#type-eq.Eq" class="anchor"></a><code><span>| </span><span><span class="constructor">Eq</span> : <span><span>(<span class="type-var">'same</span>, <span class="type-var">'same</span>)</span> <a href="#type-eq">eq</a></span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ex_comparable_ty"><a href="#type-ex_comparable_ty" class="anchor"></a><code><span><span class="keyword">type</span> ex_comparable_ty</span><span> = </span></code><ol><li id="type-ex_comparable_ty.Ex_comparable_ty" class="def variant constructor anchored"><a href="#type-ex_comparable_ty.Ex_comparable_ty" class="anchor"></a><code><span>| </span><span><span class="constructor">Ex_comparable_ty</span> : <span><span class="type-var">'a</span> <a href="../Script_typed_ir/index.html#type-comparable_ty">Script_typed_ir.comparable_ty</a></span> <span class="arrow">&#45;&gt;</span> <a href="#type-ex_comparable_ty">ex_comparable_ty</a></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ex_parameter_ty_and_entrypoints"><a href="#type-ex_parameter_ty_and_entrypoints" class="anchor"></a><code><span><span class="keyword">type</span> ex_parameter_ty_and_entrypoints</span><span> = </span></code><ol><li id="type-ex_parameter_ty_and_entrypoints.Ex_parameter_ty_and_entrypoints" class="def variant constructor anchored"><a href="#type-ex_parameter_ty_and_entrypoints.Ex_parameter_ty_and_entrypoints" class="anchor"></a><code><span>| </span><span><span class="constructor">Ex_parameter_ty_and_entrypoints</span> : </span><span>{</span></code><ol><li id="type-ex_parameter_ty_and_entrypoints.arg_type" class="def record field anchored"><a href="#type-ex_parameter_ty_and_entrypoints.arg_type" class="anchor"></a><code><span>arg_type : <span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span>;</span></code></li><li id="type-ex_parameter_ty_and_entrypoints.entrypoints" class="def record field anchored"><a href="#type-ex_parameter_ty_and_entrypoints.entrypoints" class="anchor"></a><code><span>entrypoints : <span><span class="type-var">'a</span> <a href="../Script_typed_ir/index.html#type-entrypoints">Script_typed_ir.entrypoints</a></span>;</span></code></li></ol><code><span>}</span><span> <span class="arrow">&#45;&gt;</span> <a href="#type-ex_parameter_ty_and_entrypoints">ex_parameter_ty_and_entrypoints</a></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ex_stack_ty"><a href="#type-ex_stack_ty" class="anchor"></a><code><span><span class="keyword">type</span> ex_stack_ty</span><span> = </span></code><ol><li id="type-ex_stack_ty.Ex_stack_ty" class="def variant constructor anchored"><a href="#type-ex_stack_ty.Ex_stack_ty" class="anchor"></a><code><span>| </span><span><span class="constructor">Ex_stack_ty</span> : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'s</span>)</span> <a href="../Script_typed_ir/index.html#type-stack_ty">Script_typed_ir.stack_ty</a></span> <span class="arrow">&#45;&gt;</span> <a href="#type-ex_stack_ty">ex_stack_ty</a></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ex_script"><a href="#type-ex_script" class="anchor"></a><code><span><span class="keyword">type</span> ex_script</span><span> = </span></code><ol><li id="type-ex_script.Ex_script" class="def variant constructor anchored"><a href="#type-ex_script.Ex_script" class="anchor"></a><code><span>| </span><span><span class="constructor">Ex_script</span> : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../Script_typed_ir/index.html#type-script">Script_typed_ir.script</a></span> <span class="arrow">&#45;&gt;</span> <a href="#type-ex_script">ex_script</a></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-toplevel"><a href="#type-toplevel" class="anchor"></a><code><span><span class="keyword">type</span> toplevel</span><span> = </span><span>{</span></code><ol><li id="type-toplevel.code_field" class="def record field anchored"><a href="#type-toplevel.code_field" class="anchor"></a><code><span>code_field : <a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a>;</span></code></li><li id="type-toplevel.arg_type" class="def record field anchored"><a href="#type-toplevel.arg_type" class="anchor"></a><code><span>arg_type : <a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a>;</span></code></li><li id="type-toplevel.storage_type" class="def record field anchored"><a href="#type-toplevel.storage_type" class="anchor"></a><code><span>storage_type : <a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a>;</span></code></li><li id="type-toplevel.views" class="def record field anchored"><a href="#type-toplevel.views" class="anchor"></a><code><span>views : <a href="../Script_typed_ir/index.html#type-view_map">Script_typed_ir.view_map</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-code"><a href="#type-code" class="anchor"></a><code><span><span class="keyword">type</span> <span>('arg, 'storage) code</span></span><span> = </span></code><ol><li id="type-code.Code" class="def variant constructor anchored"><a href="#type-code.Code" class="anchor"></a><code><span>| </span><span><span class="constructor">Code</span> : </span><span>{</span></code><ol><li id="type-code.code" class="def record field anchored"><a href="#type-code.code" class="anchor"></a><code><span>code : <span><span>(<span><span>(<span class="type-var">'arg</span>, <span class="type-var">'storage</span>)</span> <a href="../Script_typed_ir/index.html#type-pair">Script_typed_ir.pair</a></span>,
         <span><span>(<span><a href="../Script_typed_ir/index.html#type-operation">Script_typed_ir.operation</a> <a href="../Script_list/index.html#type-t">Script_list.t</a></span>, <span class="type-var">'storage</span>)</span>
           <a href="../Script_typed_ir/index.html#type-pair">Script_typed_ir.pair</a></span>)</span>
         <a href="../Script_typed_ir/index.html#type-lambda">Script_typed_ir.lambda</a></span>;</span></code></li><li id="type-code.arg_type" class="def record field anchored"><a href="#type-code.arg_type" class="anchor"></a><code><span>arg_type : <span><span>(<span class="type-var">'arg</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span>;</span></code></li><li id="type-code.storage_type" class="def record field anchored"><a href="#type-code.storage_type" class="anchor"></a><code><span>storage_type : <span><span>(<span class="type-var">'storage</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span>;</span></code></li><li id="type-code.views" class="def record field anchored"><a href="#type-code.views" class="anchor"></a><code><span>views : <a href="../Script_typed_ir/index.html#type-view_map">Script_typed_ir.view_map</a>;</span></code></li><li id="type-code.entrypoints" class="def record field anchored"><a href="#type-code.entrypoints" class="anchor"></a><code><span>entrypoints : <span><span class="type-var">'arg</span> <a href="../Script_typed_ir/index.html#type-entrypoints">Script_typed_ir.entrypoints</a></span>;</span></code></li><li id="type-code.code_size" class="def record field anchored"><a href="#type-code.code_size" class="anchor"></a><code><span>code_size : <a href="../Cache_memory_helpers/index.html#type-sint">Cache_memory_helpers.sint</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>This is an over-approximation of the value size in memory, in bytes, of the contract's static part, that is its source code. This includes the code of the contract as well as the code of the views. The storage size is not taken into account by this field as it has a dynamic size.</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span><span> <span class="arrow">&#45;&gt;</span> <span><span>(<span class="type-var">'arg</span>, <span class="type-var">'storage</span>)</span> <a href="#type-code">code</a></span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ex_code"><a href="#type-ex_code" class="anchor"></a><code><span><span class="keyword">type</span> ex_code</span><span> = </span></code><ol><li id="type-ex_code.Ex_code" class="def variant constructor anchored"><a href="#type-ex_code.Ex_code" class="anchor"></a><code><span>| </span><span><span class="constructor">Ex_code</span> : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>)</span> <a href="#type-code">code</a></span> <span class="arrow">&#45;&gt;</span> <a href="#type-ex_code">ex_code</a></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-typed_view"><a href="#type-typed_view" class="anchor"></a><code><span><span class="keyword">type</span> <span>'storage typed_view</span></span><span> = </span></code><ol><li id="type-typed_view.Typed_view" class="def variant constructor anchored"><a href="#type-typed_view.Typed_view" class="anchor"></a><code><span>| </span><span><span class="constructor">Typed_view</span> : </span><span>{</span></code><ol><li id="type-typed_view.input_ty" class="def record field anchored"><a href="#type-typed_view.input_ty" class="anchor"></a><code><span>input_ty : <span><span>(<span class="type-var">'input</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span>;</span></code></li><li id="type-typed_view.output_ty" class="def record field anchored"><a href="#type-typed_view.output_ty" class="anchor"></a><code><span>output_ty : <span><span>(<span class="type-var">'output</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span>;</span></code></li><li id="type-typed_view.kinstr" class="def record field anchored"><a href="#type-typed_view.kinstr" class="anchor"></a><code><span>kinstr : <span><span>(<span class="type-var">'input</span> * <span class="type-var">'storage</span>,
           <a href="../Script_typed_ir/index.html#type-end_of_stack">Script_typed_ir.end_of_stack</a>,
           <span class="type-var">'output</span>,
           <a href="../Script_typed_ir/index.html#type-end_of_stack">Script_typed_ir.end_of_stack</a>)</span>
           <a href="../Script_typed_ir/index.html#type-kinstr">Script_typed_ir.kinstr</a></span>;</span></code></li><li id="type-typed_view.original_code_expr" class="def record field anchored"><a href="#type-typed_view.original_code_expr" class="anchor"></a><code><span>original_code_expr : <a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a>;</span></code></li></ol><code><span>}</span><span> <span class="arrow">&#45;&gt;</span> <span><span class="type-var">'storage</span> <a href="#type-typed_view">typed_view</a></span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-typed_view_map"><a href="#type-typed_view_map" class="anchor"></a><code><span><span class="keyword">type</span> <span>'storage typed_view_map</span></span><span> =
  <span><span>(<a href="../Script_string/index.html#type-t">Script_string.t</a>, <span><span class="type-var">'storage</span> <a href="#type-typed_view">typed_view</a></span>)</span> <a href="../Script_typed_ir/index.html#type-map">Script_typed_ir.map</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-cinstr"><a href="#type-cinstr" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 's, 'b, 'u) cinstr</span></span><span> = </span><span>{</span></code><ol><li id="type-cinstr.apply" class="def record field anchored"><a href="#type-cinstr.apply" class="anchor"></a><code><span>apply : 'r 'f. <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'u</span>, <span class="type-var">'r</span>, <span class="type-var">'f</span>)</span> <a href="../Script_typed_ir/index.html#type-kinstr">Script_typed_ir.kinstr</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span>, <span class="type-var">'s</span>, <span class="type-var">'r</span>, <span class="type-var">'f</span>)</span> <a href="../Script_typed_ir/index.html#type-kinstr">Script_typed_ir.kinstr</a></span>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-descr"><a href="#type-descr" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 's, 'b, 'u) descr</span></span><span> = </span><span>{</span></code><ol><li id="type-descr.loc" class="def record field anchored"><a href="#type-descr.loc" class="anchor"></a><code><span>loc : <a href="../Alpha_context/Script/index.html#type-location">Alpha_context.Script.location</a>;</span></code></li><li id="type-descr.bef" class="def record field anchored"><a href="#type-descr.bef" class="anchor"></a><code><span>bef : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'s</span>)</span> <a href="../Script_typed_ir/index.html#type-stack_ty">Script_typed_ir.stack_ty</a></span>;</span></code></li><li id="type-descr.aft" class="def record field anchored"><a href="#type-descr.aft" class="anchor"></a><code><span>aft : <span><span>(<span class="type-var">'b</span>, <span class="type-var">'u</span>)</span> <a href="../Script_typed_ir/index.html#type-stack_ty">Script_typed_ir.stack_ty</a></span>;</span></code></li><li id="type-descr.instr" class="def record field anchored"><a href="#type-descr.instr" class="anchor"></a><code><span>instr : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'s</span>, <span class="type-var">'b</span>, <span class="type-var">'u</span>)</span> <a href="#type-cinstr">cinstr</a></span>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-tc_context"><a href="#type-tc_context" class="anchor"></a><code><span><span class="keyword">type</span> tc_context</span><span> = <a href="../Script_tc_context/index.html#type-t">Script_tc_context.t</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-judgement"><a href="#type-judgement" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 's) judgement</span></span><span> = </span></code><ol><li id="type-judgement.Typed" class="def variant constructor anchored"><a href="#type-judgement.Typed" class="anchor"></a><code><span>| </span><span><span class="constructor">Typed</span> : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'s</span>, <span class="type-var">'b</span>, <span class="type-var">'u</span>)</span> <a href="#type-descr">descr</a></span> <span class="arrow">&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'s</span>)</span> <a href="#type-judgement">judgement</a></span></span></code></li><li id="type-judgement.Failed" class="def variant constructor anchored"><a href="#type-judgement.Failed" class="anchor"></a><code><span>| </span><span><span class="constructor">Failed</span> : </span><span>{</span></code><ol><li id="type-judgement.descr" class="def record field anchored"><a href="#type-judgement.descr" class="anchor"></a><code><span>descr : 'b 'u. <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'u</span>)</span> <a href="../Script_typed_ir/index.html#type-stack_ty">Script_typed_ir.stack_ty</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'s</span>, <span class="type-var">'b</span>, <span class="type-var">'u</span>)</span> <a href="#type-descr">descr</a></span>;</span></code></li></ol><code><span>}</span><span> <span class="arrow">&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'s</span>)</span> <a href="#type-judgement">judgement</a></span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-close_descr"><a href="#val-close_descr" class="anchor"></a><code><span><span class="keyword">val</span> close_descr : 
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>, <span class="type-var">'d</span>)</span> <a href="#type-descr">descr</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>, <span class="type-var">'d</span>)</span> <a href="../Script_typed_ir/index.html#type-kdescr">Script_typed_ir.kdescr</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ty_eq"><a href="#val-ty_eq" class="anchor"></a><code><span><span class="keyword">val</span> ty_eq : 
  <span><span class="label">error_details</span>:
    <span><span>(<a href="../Alpha_context/Script/index.html#type-location">Alpha_context.Script.location</a>, <span class="type-var">'error_trace</span>)</span>
      <a href="../Script_tc_errors/index.html#type-error_details">Script_tc_errors.error_details</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'ac</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'bc</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span>(<span><span>(<span class="type-var">'a</span>, <span class="type-var">'ac</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span>, <span><span>(<span class="type-var">'b</span>, <span class="type-var">'bc</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span>)</span> <a href="#type-eq">eq</a></span>,
    <span class="type-var">'error_trace</span>)</span>
    <a href="../Gas_monad/index.html#type-t">Gas_monad.t</a></span></span></code></div><div class="spec-doc"><p>High-level Michelson Data Types</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_comparable_data"><a href="#val-parse_comparable_data" class="anchor"></a><code><span><span class="keyword">val</span> parse_comparable_data : 
  <span><span class="optlabel">?type_logger</span>:<a href="../Script_ir_translator_config/index.html#type-type_logger">Script_ir_translator_config.type_logger</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../Script_typed_ir/index.html#type-comparable_ty">Script_typed_ir.comparable_ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Parsing and Typechecking Michelson</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_data"><a href="#val-parse_data" class="anchor"></a><code><span><span class="keyword">val</span> parse_data : 
  <span><span class="label">elab_conf</span>:<a href="../Script_ir_translator_config/index.html#type-elab_config">Script_ir_translator_config.elab_config</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">allow_forged</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unparse_data"><a href="#val-unparse_data" class="anchor"></a><code><span><span class="keyword">val</span> unparse_data : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Script_ir_unparser/index.html#type-unparsing_mode">Script_ir_unparser.unparsing_mode</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Alpha_context/Script/index.html#type-expr">Alpha_context.Script.expr</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unparse_code"><a href="#val-unparse_code" class="anchor"></a><code><span><span class="keyword">val</span> unparse_code : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Script_ir_unparser/index.html#type-unparsing_mode">Script_ir_unparser.unparsing_mode</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Alpha_context/Script/index.html#type-expr">Alpha_context.Script.expr</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Internal_for_benchmarking"><a href="#module-Internal_for_benchmarking" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Internal_for_benchmarking/index.html">Internal_for_benchmarking</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>For benchmarking purpose, we also export versions of the unparsing functions which don't call location stripping. These functions are not carbonated and should not be called directly from the protocol.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_instr"><a href="#val-parse_instr" class="anchor"></a><code><span><span class="keyword">val</span> parse_instr : 
  <span><span class="label">elab_conf</span>:<a href="../Script_ir_translator_config/index.html#type-elab_config">Script_ir_translator_config.elab_config</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-tc_context">tc_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'s</span>)</span> <a href="../Script_typed_ir/index.html#type-stack_ty">Script_typed_ir.stack_ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><span>(<span class="type-var">'a</span>, <span class="type-var">'s</span>)</span> <a href="#type-judgement">judgement</a></span> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_big_map_value_ty"><a href="#val-parse_big_map_value_ty" class="anchor"></a><code><span><span class="keyword">val</span> parse_big_map_value_ty : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">legacy</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Script_typed_ir/index.html#type-ex_ty">Script_typed_ir.ex_ty</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p><code>parse_ty</code> specialized for the right-hand side part of a big map type, i.e. the `value` in `big_map key value`.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_packable_ty"><a href="#val-parse_packable_ty" class="anchor"></a><code><span><span class="keyword">val</span> parse_packable_ty : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">legacy</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Script_typed_ir/index.html#type-ex_ty">Script_typed_ir.ex_ty</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_passable_ty"><a href="#val-parse_passable_ty" class="anchor"></a><code><span><span class="keyword">val</span> parse_passable_ty : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">legacy</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Script_typed_ir/index.html#type-ex_ty">Script_typed_ir.ex_ty</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_comparable_ty"><a href="#val-parse_comparable_ty" class="anchor"></a><code><span><span class="keyword">val</span> parse_comparable_ty : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="#type-ex_comparable_ty">ex_comparable_ty</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_parameter_ty_and_entrypoints"><a href="#val-parse_parameter_ty_and_entrypoints" class="anchor"></a><code><span><span class="keyword">val</span> parse_parameter_ty_and_entrypoints : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">legacy</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="#type-ex_parameter_ty_and_entrypoints">ex_parameter_ty_and_entrypoints</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_view_input_ty"><a href="#val-parse_view_input_ty" class="anchor"></a><code><span><span class="keyword">val</span> parse_view_input_ty : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">stack_depth</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">legacy</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Script_typed_ir/index.html#type-ex_ty">Script_typed_ir.ex_ty</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_view_output_ty"><a href="#val-parse_view_output_ty" class="anchor"></a><code><span><span class="keyword">val</span> parse_view_output_ty : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">stack_depth</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">legacy</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Script_typed_ir/index.html#type-ex_ty">Script_typed_ir.ex_ty</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_view"><a href="#val-parse_view" class="anchor"></a><code><span><span class="keyword">val</span> parse_view : 
  <span><span class="label">elab_conf</span>:<a href="../Script_ir_translator_config/index.html#type-elab_config">Script_ir_translator_config.elab_config</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'storage</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Script_typed_ir/index.html#type-view">Script_typed_ir.view</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><span class="type-var">'storage</span> <a href="#type-typed_view">typed_view</a></span> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_views"><a href="#val-parse_views" class="anchor"></a><code><span><span class="keyword">val</span> parse_views : 
  <span><span class="label">elab_conf</span>:<a href="../Script_ir_translator_config/index.html#type-elab_config">Script_ir_translator_config.elab_config</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'storage</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Script_typed_ir/index.html#type-view_map">Script_typed_ir.view_map</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><span class="type-var">'storage</span> <a href="#type-typed_view_map">typed_view_map</a></span> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_any_ty"><a href="#val-parse_any_ty" class="anchor"></a><code><span><span class="keyword">val</span> parse_any_ty : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">legacy</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Script_typed_ir/index.html#type-ex_ty">Script_typed_ir.ex_ty</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p><code>parse_ty</code> allowing big_map values, operations, contract and tickets.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_ty"><a href="#val-parse_ty" class="anchor"></a><code><span><span class="keyword">val</span> parse_ty : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">legacy</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">allow_lazy_storage</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">allow_operation</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">allow_contract</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">allow_ticket</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Script_typed_ir/index.html#type-ex_ty">Script_typed_ir.ex_ty</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p>We expose <code>parse_ty</code> for convenience to external tools. Please use specialized versions such as <code>parse_packable_ty</code>, <code>parse_passable_ty</code>, <code>parse_comparable_ty</code>, or <code>parse_big_map_value_ty</code> if possible.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_toplevel"><a href="#val-parse_toplevel" class="anchor"></a><code><span><span class="keyword">val</span> parse_toplevel : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">legacy</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-expr">Alpha_context.Script.expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="#type-toplevel">toplevel</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-typecheck_code"><a href="#val-typecheck_code" class="anchor"></a><code><span><span class="keyword">val</span> typecheck_code : 
  <span><span class="label">legacy</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">show_types</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-expr">Alpha_context.Script.expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Script_tc_errors/index.html#type-type_map">Script_tc_errors.type_map</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p>High-level function to typecheck a Michelson script. This function is not used for validating operations but only for the <code>typecheck_code</code> RPC.</p><p>If <code>show_types</code> is set to <code>true</code>, details of the typechecking are returned in the <code>type_map</code>, otherwise the returned <code>type_map</code> is empty.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_code"><a href="#val-parse_code" class="anchor"></a><code><span><span class="keyword">val</span> parse_code : 
  <span><span class="label">elab_conf</span>:<a href="../Script_ir_translator_config/index.html#type-elab_config">Script_ir_translator_config.elab_config</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">code</span>:<a href="../Alpha_context/Script/index.html#type-lazy_expr">Alpha_context.Script.lazy_expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="#type-ex_code">ex_code</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_storage"><a href="#val-parse_storage" class="anchor"></a><code><span><span class="keyword">val</span> parse_storage : 
  <span><span class="label">elab_conf</span>:<a href="../Script_ir_translator_config/index.html#type-elab_config">Script_ir_translator_config.elab_config</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">allow_forged</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'storage</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">storage</span>:<a href="../Alpha_context/Script/index.html#type-lazy_expr">Alpha_context.Script.lazy_expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'storage</span> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_script"><a href="#val-parse_script" class="anchor"></a><code><span><span class="keyword">val</span> parse_script : 
  <span><span class="label">elab_conf</span>:<a href="../Script_ir_translator_config/index.html#type-elab_config">Script_ir_translator_config.elab_config</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">allow_forged_in_storage</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-t">Alpha_context.Script.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="#type-ex_script">ex_script</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Combines <code>parse_code</code> and <code>parse_storage</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_and_unparse_script_unaccounted"><a href="#val-parse_and_unparse_script_unaccounted" class="anchor"></a><code><span><span class="keyword">val</span> parse_and_unparse_script_unaccounted : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">legacy</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">allow_forged_in_storage</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Script_ir_unparser/index.html#type-unparsing_mode">Script_ir_unparser.unparsing_mode</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">normalize_types</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-t">Alpha_context.Script.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Alpha_context/Script/index.html#type-t">Alpha_context.Script.t</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_contract_data"><a href="#val-parse_contract_data" class="anchor"></a><code><span><span class="keyword">val</span> parse_contract_data : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-location">Alpha_context.Script.location</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Destination/index.html#type-t">Alpha_context.Destination.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">entrypoint</span>:<a href="../Alpha_context/Entrypoint/index.html#type-t">Alpha_context.Entrypoint.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> * <span><span class="type-var">'a</span> <a href="../Script_typed_ir/index.html#type-typed_contract">Script_typed_ir.typed_contract</a></span>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_contract_for_script"><a href="#val-parse_contract_for_script" class="anchor"></a><code><span><span class="keyword">val</span> parse_contract_for_script : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-location">Alpha_context.Script.location</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Destination/index.html#type-t">Alpha_context.Destination.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">entrypoint</span>:<a href="../Alpha_context/Entrypoint/index.html#type-t">Alpha_context.Entrypoint.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> * <span><span><span class="type-var">'a</span> <a href="../Script_typed_ir/index.html#type-typed_contract">Script_typed_ir.typed_contract</a></span> option</span>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ex_ty_cstr"><a href="#type-ex_ty_cstr" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a ex_ty_cstr</span></span><span> = </span></code><ol><li id="type-ex_ty_cstr.Ex_ty_cstr" class="def variant constructor anchored"><a href="#type-ex_ty_cstr.Ex_ty_cstr" class="anchor"></a><code><span>| </span><span><span class="constructor">Ex_ty_cstr</span> : </span><span>{</span></code><ol><li id="type-ex_ty_cstr.ty" class="def record field anchored"><a href="#type-ex_ty_cstr.ty" class="anchor"></a><code><span>ty : <span><span>(<span class="type-var">'b</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span>;</span></code></li><li id="type-ex_ty_cstr.construct" class="def record field anchored"><a href="#type-ex_ty_cstr.construct" class="anchor"></a><code><span>construct : <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>;</span></code></li><li id="type-ex_ty_cstr.original_type_expr" class="def record field anchored"><a href="#type-ex_ty_cstr.original_type_expr" class="anchor"></a><code><span>original_type_expr : <a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a>;</span></code></li></ol><code><span>}</span><span> <span class="arrow">&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="#type-ex_ty_cstr">ex_ty_cstr</a></span></span></code></li></ol></div><div class="spec-doc"><p><code>'a ex_ty_cstr</code> is like <code>ex_ty</code>, but also adds to the existential a function used to reconstruct a value of type <code>'a</code> from the internal type of the existential. Typically, it will be used to go from the type of an entry-point to the full type of a contract.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_entrypoint"><a href="#val-find_entrypoint" class="anchor"></a><code><span><span class="keyword">val</span> find_entrypoint : 
  <span><span class="label">error_details</span>:<span><span>(<span class="type-var">_</span>, <span class="type-var">'error_trace</span>)</span> <a href="../Script_tc_errors/index.html#type-error_details">Script_tc_errors.error_details</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'t</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'t</span> <a href="../Script_typed_ir/index.html#type-entrypoints">Script_typed_ir.entrypoints</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Entrypoint/index.html#type-t">Alpha_context.Entrypoint.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'t</span> <a href="#type-ex_ty_cstr">ex_ty_cstr</a></span>, <span class="type-var">'error_trace</span>)</span> <a href="../Gas_monad/index.html#type-t">Gas_monad.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_entrypoints_uncarbonated"><a href="#val-list_entrypoints_uncarbonated" class="anchor"></a><code><span><span class="keyword">val</span> list_entrypoints_uncarbonated : 
  <span><span><span>(<span class="type-var">'t</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'t</span> <a href="../Script_typed_ir/index.html#type-entrypoints">Script_typed_ir.entrypoints</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Michelson_v1_primitives/index.html#type-prim">Michelson_v1_primitives.prim</a> list</span> list</span>
  * <span><span>(<a href="../Script_typed_ir/index.html#type-ex_ty">Script_typed_ir.ex_ty</a> * <a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a>)</span>
      <a href="../Alpha_context/Entrypoint/Map/index.html#type-t">Alpha_context.Entrypoint.Map.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pack_data"><a href="#val-pack_data" class="anchor"></a><code><span><span class="keyword">val</span> pack_data : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(bytes * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hash_comparable_data"><a href="#val-hash_comparable_data" class="anchor"></a><code><span><span class="keyword">val</span> hash_comparable_data : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../Script_typed_ir/index.html#type-comparable_ty">Script_typed_ir.comparable_ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Script_expr_hash/index.html#type-t">Script_expr_hash.t</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hash_data"><a href="#val-hash_data" class="anchor"></a><code><span><span class="keyword">val</span> hash_data : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Script_expr_hash/index.html#type-t">Script_expr_hash.t</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-lazy_storage_ids"><a href="#type-lazy_storage_ids" class="anchor"></a><code><span><span class="keyword">type</span> lazy_storage_ids</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-no_lazy_storage_id"><a href="#val-no_lazy_storage_id" class="anchor"></a><code><span><span class="keyword">val</span> no_lazy_storage_id : <a href="#type-lazy_storage_ids">lazy_storage_ids</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-collect_lazy_storage"><a href="#val-collect_lazy_storage" class="anchor"></a><code><span><span class="keyword">val</span> collect_lazy_storage : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="#type-lazy_storage_ids">lazy_storage_ids</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p>Traverse the given type, producing a <a href="#type-lazy_storage_ids"><code>lazy_storage_ids</code></a> for use with <a href="#val-extract_lazy_storage_diff"><code>extract_lazy_storage_diff</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_of_big_map_ids"><a href="#val-list_of_big_map_ids" class="anchor"></a><code><span><span class="keyword">val</span> list_of_big_map_ids : <span><a href="#type-lazy_storage_ids">lazy_storage_ids</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Alpha_context/Big_map/Id/index.html#type-t">Alpha_context.Big_map.Id.t</a> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extract_lazy_storage_diff"><a href="#val-extract_lazy_storage_diff" class="anchor"></a><code><span><span class="keyword">val</span> extract_lazy_storage_diff : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Script_ir_unparser/index.html#type-unparsing_mode">Script_ir_unparser.unparsing_mode</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">temporary</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">to_duplicate</span>:<a href="#type-lazy_storage_ids">lazy_storage_ids</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">to_update</span>:<a href="#type-lazy_storage_ids">lazy_storage_ids</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span> * <span><a href="../Alpha_context/Lazy_storage/index.html#type-diffs">Alpha_context.Lazy_storage.diffs</a> option</span> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Produce a lazy storage diff, containing in-memory writes to lazy data structures such as big_maps yet to be committed.</p><p>The resulting diff can be committed to the underlying storage (context) using <code>Lazy_storage_diff.apply</code>.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">to_duplicate</span> <p>Lazy data structure reference produced via <a href="#val-collect_lazy_storage"><code>collect_lazy_storage</code></a> that can not be reused. Typically collected via traversing the parameters to a smart contract.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">to_update</span> <p>Lazy data structure reference produced via <a href="#val-collect_lazy_storage"><code>collect_lazy_storage</code></a> that can be reused. Typically collected via traversing the previous storage of a smart contract.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_single_sapling_state"><a href="#val-get_single_sapling_state" class="anchor"></a><code><span><span class="keyword">val</span> get_single_sapling_state : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="../Alpha_context/Sapling/Id/index.html#type-t">Alpha_context.Sapling.Id.t</a> option</span> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-code_size"><a href="#val-code_size" class="anchor"></a><code><span><span class="keyword">val</span> code_size : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../Script_typed_ir/index.html#type-lambda">Script_typed_ir.lambda</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Script_typed_ir/index.html#type-view_map">Script_typed_ir.view_map</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Cache_memory_helpers/index.html#type-sint">Cache_memory_helpers.sint</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p><code>code_size ctxt code views</code> returns an overapproximation of the size of the in-memory representation of <code>code</code> and <code>views</code> in bytes in the context <code>ctxt</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-script_size"><a href="#val-script_size" class="anchor"></a><code><span><span class="keyword">val</span> script_size : <span><a href="#type-ex_script">ex_script</a> <span class="arrow">&#45;&gt;</span></span> int * <a href="../Gas_limit_repr/index.html#type-cost">Gas_limit_repr.cost</a></span></code></div><div class="spec-doc"><p><code>script_size script</code> returns an overapproximation of the size of the in-memory representation of <code>script</code> in bytes as well as the cost associated to computing that overapproximation.</p></div></div></div></body></html>
