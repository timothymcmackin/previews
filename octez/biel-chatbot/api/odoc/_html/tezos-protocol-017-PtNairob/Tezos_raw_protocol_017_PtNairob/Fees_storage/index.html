<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Fees_storage (tezos-protocol-017-PtNairob.Tezos_raw_protocol_017_PtNairob.Fees_storage)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-protocol-017-PtNairob</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_017_PtNairob</a> &#x00BB; Fees_storage</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_017_PtNairob.Fees_storage</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Cannot_pay_storage_fee"><a href="#extension-decl-Cannot_pay_storage_fee" class="anchor"></a><code><span><span class="keyword">type</span> <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-error">Tezos_protocol_environment_017_PtNairob.Error_monad.error</a> += </span></code><ol><li id="extension-Cannot_pay_storage_fee" class="def variant extension anchored"><a href="#extension-Cannot_pay_storage_fee" class="anchor"></a><code><span>| </span><span><span class="extension">Cannot_pay_storage_fee</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Negative_storage_input"><a href="#extension-decl-Negative_storage_input" class="anchor"></a><code><span><span class="keyword">type</span> <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-error">Tezos_protocol_environment_017_PtNairob.Error_monad.error</a> += </span></code><ol><li id="extension-Negative_storage_input" class="def variant extension anchored"><a href="#extension-Negative_storage_input" class="anchor"></a><code><span>| </span><span><span class="extension">Negative_storage_input</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Operation_quota_exceeded"><a href="#extension-decl-Operation_quota_exceeded" class="anchor"></a><code><span><span class="keyword">type</span> <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-error">Tezos_protocol_environment_017_PtNairob.Error_monad.error</a> += </span></code><ol><li id="extension-Operation_quota_exceeded" class="def variant extension anchored"><a href="#extension-Operation_quota_exceeded" class="anchor"></a><code><span>| </span><span><span class="extension">Operation_quota_exceeded</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Storage_limit_too_high"><a href="#extension-decl-Storage_limit_too_high" class="anchor"></a><code><span><span class="keyword">type</span> <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-error">Tezos_protocol_environment_017_PtNairob.Error_monad.error</a> += </span></code><ol><li id="extension-Storage_limit_too_high" class="def variant extension anchored"><a href="#extension-Storage_limit_too_high" class="anchor"></a><code><span>| </span><span><span class="extension">Storage_limit_too_high</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-record_global_constant_storage_space"><a href="#val-record_global_constant_storage_space" class="anchor"></a><code><span><span class="keyword">val</span> record_global_constant_storage_space : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../Raw_context/index.html#type-t">Raw_context.t</a> * <a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a></span></code></div><div class="spec-doc"><p><code>record_global_constant_storage_space ctxt size</code> records paid storage space for registering a new global constant. Cost is &lt;size&gt; in bytes + 65 additional bytes for the key hash of the expression. Returns new context and the cost.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-record_paid_storage_space"><a href="#val-record_paid_storage_space" class="anchor"></a><code><span><span class="keyword">val</span> record_paid_storage_space : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Contract_hash/index.html#type-t">Contract_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a>
   * <a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a>
   * <a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>record_paid_storage_space ctxt contract</code> updates the amount of storage consumed by the <code>contract</code>. This total size is considered as accounted for as far as future payment is concerned.</p><p>Returns a new context, the total space consumed by the <code>contract</code>, and the additional (and unpaid) space consumed since the last call of this function on this <code>contract</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_storage_limit"><a href="#val-check_storage_limit" class="anchor"></a><code><span><span class="keyword">val</span> check_storage_limit : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">storage_limit</span>:<a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p><code>check_storage_limit ctxt ~storage_limit</code> raises the <code>Storage_limit_too_high</code> error iff <code>storage_limit</code> is negative or greater the constant <code>hard_storage_limit_per_operation</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-burn_storage_fees"><a href="#val-burn_storage_fees" class="anchor"></a><code><span><span class="keyword">val</span> burn_storage_fees : 
  <span><span class="optlabel">?origin</span>:<a href="../Receipt_repr/index.html#type-update_origin">Receipt_repr.update_origin</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">storage_limit</span>:<a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">payer</span>:<a href="../Token/index.html#type-giver">Token.giver</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a>
   * <a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a>
   * <a href="../Receipt_repr/index.html#type-balance_updates">Receipt_repr.balance_updates</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>burn_storage_fees ctxt ~storage_limit ~payer consumed</code> takes funds from the <code>payer</code> to pay the cost of the <code>consumed</code> storage. This function has an optional parameter <code>~origin</code> that allows to set the origin of returned balance updates (by default the parameter is set to <code>Block_application</code>). Returns an updated context, an updated storage limit equal to <code>storage_limit - consumed</code>, and the relevant balance updates. Raises the <code>Operation_quota_exceeded</code> error if <code>storage_limit &lt; consumed</code>. Raises the <code>Cannot_pay_storage_fee</code> error if the funds from the <code>payer</code> are not sufficient to pay the storage fees.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-burn_storage_increase_fees"><a href="#val-burn_storage_increase_fees" class="anchor"></a><code><span><span class="keyword">val</span> burn_storage_increase_fees : 
  <span><span class="optlabel">?origin</span>:<a href="../Receipt_repr/index.html#type-update_origin">Receipt_repr.update_origin</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">payer</span>:<a href="../Token/index.html#type-giver">Token.giver</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a> * <a href="../Receipt_repr/index.html#type-balance_updates">Receipt_repr.balance_updates</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>burn_storage_increase_fees ctxt ~payer amount_in_bytes</code> takes funds from the <code>payer</code> to pay the cost of the <code>amount_in_bytes</code> storage. This function has an optional parameter <code>~origin</code> that allows to set the origin of returned balance updates (by default the parameter is set to <code>Block_application</code>). Returns an updated context and the relevant balance updates. Raises the <code>Negative_storage_input</code> error if the amount_in_bytes is null or negative. Raises the <code>Cannot_pay_storage_fee</code> error if the funds from the <code>payer</code> are not sufficient to pay the storage fees.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-burn_origination_fees"><a href="#val-burn_origination_fees" class="anchor"></a><code><span><span class="keyword">val</span> burn_origination_fees : 
  <span><span class="optlabel">?origin</span>:<a href="../Receipt_repr/index.html#type-update_origin">Receipt_repr.update_origin</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">storage_limit</span>:<a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">payer</span>:<a href="../Token/index.html#type-giver">Token.giver</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a>
   * <a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a>
   * <a href="../Receipt_repr/index.html#type-balance_updates">Receipt_repr.balance_updates</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Calls <code>burn_storage_fees</code> with the parameter <code>consumed</code> mapped to the constant <code>origination_size</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-burn_tx_rollup_origination_fees"><a href="#val-burn_tx_rollup_origination_fees" class="anchor"></a><code><span><span class="keyword">val</span> burn_tx_rollup_origination_fees : 
  <span><span class="optlabel">?origin</span>:<a href="../Receipt_repr/index.html#type-update_origin">Receipt_repr.update_origin</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">storage_limit</span>:<a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">payer</span>:<a href="../Token/index.html#type-giver">Token.giver</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a>
   * <a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a>
   * <a href="../Receipt_repr/index.html#type-balance_updates">Receipt_repr.balance_updates</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Calls <code>burn_storage_fees</code> with the parameter <code>consumed</code> mapped to the constant <code>tx_rollup_origination_size</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-burn_sc_rollup_origination_fees"><a href="#val-burn_sc_rollup_origination_fees" class="anchor"></a><code><span><span class="keyword">val</span> burn_sc_rollup_origination_fees : 
  <span><span class="optlabel">?origin</span>:<a href="../Receipt_repr/index.html#type-update_origin">Receipt_repr.update_origin</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">storage_limit</span>:<a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">payer</span>:<a href="../Token/index.html#type-giver">Token.giver</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a>
   * <a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a>
   * <a href="../Receipt_repr/index.html#type-balance_updates">Receipt_repr.balance_updates</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>burn_sc_rollup_origination_fees ~origin ctxt ~storage_limit ~payer consumed</code> burns the storage fees for smart contract rollup creation fees.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-burn_zk_rollup_origination_fees"><a href="#val-burn_zk_rollup_origination_fees" class="anchor"></a><code><span><span class="keyword">val</span> burn_zk_rollup_origination_fees : 
  <span><span class="optlabel">?origin</span>:<a href="../Receipt_repr/index.html#type-update_origin">Receipt_repr.update_origin</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">storage_limit</span>:<a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">payer</span>:<a href="../Token/index.html#type-giver">Token.giver</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a>
   * <a href="../../Tezos_protocol_environment_017_PtNairob/Z/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Z.t</a>
   * <a href="../Receipt_repr/index.html#type-balance_updates">Receipt_repr.balance_updates</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>burn_zk_rollup_origination_fees ~origin ctxt ~storage_limit ~payer consumed</code> burns the storage fees for ZK rollup origination fees.</p></div></div></div></body></html>
