<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tx_rollup_state_storage (tezos-protocol-017-PtNairob.Tezos_raw_protocol_017_PtNairob.Tx_rollup_state_storage)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">tezos-protocol-017-PtNairob</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_017_PtNairob</a> &#x00BB; Tx_rollup_state_storage</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_017_PtNairob.Tx_rollup_state_storage</span></code></h1><p>A collection of functions to manipulate the state of a transaction rollup.</p><p>Except if the contrary is explicitly stated, the functions of this module are carbonated.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Tx_rollup_repr/index.html#type-t">Tx_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>init ctxt tx_rollup</code> initializes the state of <code>tx_rollup</code>.</p><p>Returns the error <code>Tx_rollup_already_exists</code> iff this function has already been called for <code>tx_rollup</code>, which is definitely something that should not happen, because the protocol is expected to pick fresh addresses when it originates new transaction rollups (and does so by relying on the “origination nonce” derived from the hash of the operation responsible for the origination, using the same procedure as smart contracts).</p><p>Raising this error would therefore indicate a bug in the protocol.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find"><a href="#val-find" class="anchor"></a><code><span><span class="keyword">val</span> find : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Tx_rollup_repr/index.html#type-t">Tx_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a> * <span><a href="../Tx_rollup_state_repr/index.html#type-t">Tx_rollup_state_repr.t</a> option</span>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>find ctxt tx_rollup</code> returns the current state of <code>tx_rollup</code>. If <code>tx_rollup</code> is not the address of an existing transaction rollup, <code>None</code> is returned instead.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Tx_rollup_repr/index.html#type-t">Tx_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a> * <a href="../Tx_rollup_state_repr/index.html#type-t">Tx_rollup_state_repr.t</a>)</span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>get ctxt tx_rollup</code> returns the current state of <code>tx_rollup</code> in the context.</p><p>Returns the <code>Tx_rollup_does_not_exist</code> error iff <code>tx_rollup</code> is not the address of an existing transaction rollup.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update"><a href="#val-update" class="anchor"></a><code><span><span class="keyword">val</span> update : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Tx_rollup_repr/index.html#type-t">Tx_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Tx_rollup_state_repr/index.html#type-t">Tx_rollup_state_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>update ctxt tx_rollup new_state</code> replaces the stored state of <code>tx_rollup</code> with <code>new_state</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-assert_exist"><a href="#val-assert_exist" class="anchor"></a><code><span><span class="keyword">val</span> assert_exist : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Tx_rollup_repr/index.html#type-t">Tx_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <a href="../../Tezos_protocol_environment_017_PtNairob/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_017_PtNairob.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_017_PtNairob/Lwt/index.html#type-t">Tezos_protocol_environment_017_PtNairob.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>assert_exist ctxt tx_rollup</code> fails with <code>Tx_rollup_does_not_exist</code> when <code>tx_rollup</code> is not a valid transaction rollup address.</p></div></div></div></body></html>
