<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Plompiler (octez-libs.Plompiler)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">octez-libs</a> &#x00BB; Plompiler</nav><header class="odoc-preamble"><h1>Module <code><span>Plompiler</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-S"><a href="#module-S" class="anchor"></a><code><span><span class="keyword">module</span> S</span><span> = <a href="Csir/Scalar/index.html">Csir.Scalar</a></span></code></div></div><p>Plompiler core language.</p><p>The <a href="module-type-COMMON/index.html"><code>COMMON</code></a> module type defines the set of primitives needed to interpret a Plompiler program. This module type provides the monadic interface needed to deal with Plompier computations, and a number of sub-modules to handle inputs and basic types.</p><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-NUM"><a href="#module-type-NUM" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-NUM/index.html">NUM</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Numeric operations over the native field.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-BOOL"><a href="#module-type-BOOL" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-BOOL/index.html">BOOL</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-COMMON"><a href="#module-type-COMMON" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-COMMON/index.html">COMMON</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-Limb_list"><a href="#module-type-Limb_list" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Limb_list/index.html">Limb_list</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-LIB"><a href="#module-type-LIB" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-LIB/index.html">LIB</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The <a href="module-type-LIB/index.html"><code>LIB</code></a> module type extends the core language defined in <code>Lang_core.COMMON</code> by adding functions that build upon those primitives.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Lib"><a href="#module-Lib" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Lib/index.html">Lib</a></span><span> (<a href="Lib/argument-1-C/index.html">C</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><p>Plompiler is an OCaml eDSL for writing PlonK arithmetic circuits (see <code>Lib_plonk.Main_protocol</code> for an introduction to PlonK circuits).</p><p>The eDSL is implemented following a tagless-final approach and is split into a core language and a standard library, each described as a module type. The core is defined by <code>Lang_core.COMMON</code> while the standard library is defined by <code>Lang_stdlib.LIB</code>.</p><p>The Plompiler library is defined around three main parameterized types. First, <code>'a t</code> is a monadic type that represents a Plompiler computation returning a value of type <code>'a</code>. Second, <code>'a repr</code> is the Plompiler representation of a value of type <code>'a</code>. Finally, <code>'a input</code> represents an input to a circuit of type <code>'a</code>. These two final types are related: an <code>'a input</code> will become an <code>'a repr</code> once inputted into a circuit.</p><p>A Plompiler program, then, will be a functor over <code>LIB</code>. The general structure of of a Plompiler program is:</p><pre class="language-ocaml"><code>module Program (L : LIB) = struct
  open L

  let logic : 'a repr -&gt; 'b repr -&gt; unit repr t = ...

  let prog : 'a input -&gt; 'b input -&gt; unit repr t =
    fun a b -&gt;
      let* a = input ~kind:'Public a in
      let* b = input b in
      logic a b
end</code></pre><p>Here, the first function defines the <code>logic</code> of the program, while <code>prog</code> declares the inputs, the first of which is public.</p><p>A module implementing the `LIB` signature can be seen as an interpreter of the language. Concretely, two such interpreters are defined: <a href="LibResult/index.html"><code>LibResult</code></a> and <a href="LibCircuit/index.html"><code>LibCircuit</code></a>. The first runs a Plompiler program with pure values, i.e. without generating a circuit. This means that, for this interpreter, <code>'a repr</code> is essentially <code>'a</code>. The second, <a href="LibCircuit/index.html"><code>LibCircuit</code></a>, is the actual circuit backend. Here, <code>'a repr</code> will represent a PlonK wire carrying a value of type <code>'a</code>.</p><p>The rest of the library is implemented through the following modules:</p><ul><li><a href="Csir/index.html"><code>Csir</code></a>: defines the Constraint System intermediate representation, which is an abstract representation for PlonK constraint systems. This is the target of the <a href="LibCircuit/index.html"><code>LibCircuit</code></a> interpreter, and can be converted into a PlonK circuit.</li><li><code>Encoding</code>: encoders/decoders for usage of structured data types in circuits. Simplifies data manipulation and the definition of inputs.</li><li><a href="Optimizer/index.html"><code>Optimizer</code></a>: low-level generic optimizer of <code>Csir</code> constraint systems.</li><li><a href="Solver/index.html"><code>Solver</code></a>: description and interpretation of the programs needed to populate the PlonK witness for a Plompiler circuit given the initial inputs.</li><li><code>Gadget_X</code>: building blocks for circuits, mainly implementing cryptographic primitives.</li></ul><div class="odoc-spec"><div class="spec module anchored" id="module-LibResult"><a href="#module-LibResult" class="anchor"></a><code><span><span class="keyword">module</span> <a href="LibResult/index.html">LibResult</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Pure-value backend. Used to check the semantics of <a href="LibCircuit/index.html"><code>LibCircuit</code></a> in the tests.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-LibCircuit"><a href="#module-LibCircuit" class="anchor"></a><code><span><span class="keyword">module</span> <a href="LibCircuit/index.html">LibCircuit</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Circuit producing backend.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Gadget"><a href="#module-Gadget" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Gadget/index.html">Gadget</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">struct</span> <span class="keyword">include</span> <a href="Gadget/index.html">Gadget</a> <span class="keyword">end</span></span></code></summary><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-HASH"><a href="#module-type-HASH" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> HASH</span><span> = <a href="Gadget/module-type-HASH/index.html">Gadget.HASH</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Anemoi128"><a href="#module-Anemoi128" class="anchor"></a><code><span><span class="keyword">module</span> Anemoi128</span><span> = <a href="Gadget/Anemoi128/index.html">Gadget.Anemoi128</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-AnemoiJive_128_1"><a href="#module-AnemoiJive_128_1" class="anchor"></a><code><span><span class="keyword">module</span> AnemoiJive_128_1</span><span> = <a href="Gadget/AnemoiJive_128_1/index.html">Gadget.AnemoiJive_128_1</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Poseidon128"><a href="#module-Poseidon128" class="anchor"></a><code><span><span class="keyword">module</span> Poseidon128</span><span> = <a href="Gadget/Poseidon128/index.html">Gadget.Poseidon128</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Poseidon252"><a href="#module-Poseidon252" class="anchor"></a><code><span><span class="keyword">module</span> Poseidon252</span><span> = <a href="Gadget/Poseidon252/index.html">Gadget.Poseidon252</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-PoseidonFull"><a href="#module-PoseidonFull" class="anchor"></a><code><span><span class="keyword">module</span> PoseidonFull</span><span> = <a href="Gadget/PoseidonFull/index.html">Gadget.PoseidonFull</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Merkle"><a href="#module-Merkle" class="anchor"></a><code><span><span class="keyword">module</span> Merkle</span><span> = <a href="Gadget/Merkle/index.html">Gadget.Merkle</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Merkle_narity"><a href="#module-Merkle_narity" class="anchor"></a><code><span><span class="keyword">module</span> Merkle_narity</span><span> = <a href="Gadget/Merkle_narity/index.html">Gadget.Merkle_narity</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-JubjubEdwards"><a href="#module-JubjubEdwards" class="anchor"></a><code><span><span class="keyword">module</span> JubjubEdwards</span><span> = <a href="Gadget/JubjubEdwards/index.html">Gadget.JubjubEdwards</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-JubjubWeierstrass"><a href="#module-JubjubWeierstrass" class="anchor"></a><code><span><span class="keyword">module</span> JubjubWeierstrass</span><span> = <a href="Gadget/JubjubWeierstrass/index.html">Gadget.JubjubWeierstrass</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Schnorr"><a href="#module-Schnorr" class="anchor"></a><code><span><span class="keyword">module</span> Schnorr</span><span> = <a href="Gadget/Schnorr/index.html">Gadget.Schnorr</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Edwards25519"><a href="#module-Edwards25519" class="anchor"></a><code><span><span class="keyword">module</span> Edwards25519</span><span> = <a href="Gadget/Edwards25519/index.html">Gadget.Edwards25519</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Ed25519"><a href="#module-Ed25519" class="anchor"></a><code><span><span class="keyword">module</span> Ed25519</span><span> = <a href="Gadget/Ed25519/index.html">Gadget.Ed25519</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Blake2s"><a href="#module-Blake2s" class="anchor"></a><code><span><span class="keyword">module</span> Blake2s</span><span> = <a href="Gadget/Blake2s/index.html">Gadget.Blake2s</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-ArithMod25519"><a href="#module-ArithMod25519" class="anchor"></a><code><span><span class="keyword">module</span> ArithMod25519</span><span> = <a href="Gadget/ArithMod25519/index.html">Gadget.ArithMod25519</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-ArithMod64"><a href="#module-ArithMod64" class="anchor"></a><code><span><span class="keyword">module</span> ArithMod64</span><span> = <a href="Gadget/ArithMod64/index.html">Gadget.ArithMod64</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Sha256"><a href="#module-Sha256" class="anchor"></a><code><span><span class="keyword">module</span> Sha256</span><span> = <a href="Gadget/Sha256/index.html">Gadget.Sha256</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Sha512"><a href="#module-Sha512" class="anchor"></a><code><span><span class="keyword">module</span> Sha512</span><span> = <a href="Gadget/Sha512/index.html">Gadget.Sha512</a></span></code></div></div></details></div><div class="odoc-spec"><div class="spec module anchored" id="module-Utils"><a href="#module-Utils" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Utils/index.html">Utils</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Linear_algebra"><a href="#module-Linear_algebra" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Linear_algebra/index.html">Linear_algebra</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Optimizer"><a href="#module-Optimizer" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Optimizer/index.html">Optimizer</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Solver"><a href="#module-Solver" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Solver/index.html">Solver</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>This module defines a description format and interpretation of the programs needed to populate the PlonK witness for a Plompiler circuit given the initial inputs.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Bounded"><a href="#module-Bounded" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Bounded/index.html">Bounded</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Csir"><a href="#module-Csir" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Csir/index.html">Csir</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
