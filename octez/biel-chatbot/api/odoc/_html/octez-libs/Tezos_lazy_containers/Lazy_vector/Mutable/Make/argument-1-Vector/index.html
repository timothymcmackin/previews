<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Vector (octez-libs.Tezos_lazy_containers.Lazy_vector.Mutable.Make.Vector)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../index.html">octez-libs</a> &#x00BB; <a href="../../../../index.html">Tezos_lazy_containers</a> &#x00BB; <a href="../../../index.html">Lazy_vector</a> &#x00BB; <a href="../../index.html">Mutable</a> &#x00BB; <a href="../index.html">Make</a> &#x00BB; Vector</nav><header class="odoc-preamble"><h1>Parameter <code><span>Make.Vector</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-key"><a href="#type-key" class="anchor"></a><code><span><span class="keyword">type</span> key</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-producer"><a href="#type-producer" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a producer</span></span><span> = <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Map"><a href="#module-Map" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Map/index.html">Map</a></span><span> : <a href="../../../../Lazy_map/module-type-S/index.html">Lazy_map.S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../../Lazy_map/module-type-S/index.html#type-key">key</a> = <a href="#type-key">key</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : 
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>pp pp_value</code> gives you a pretty-printer. This function is a witness of internal mutation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span><span class="keyword">val</span> to_string : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>to_string show vector</code> generates a string representation of <code>vector</code> by using <code>show</code> for its values. Like <code>pp</code> this function is witness of internal mutation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_key"><a href="#val-string_of_key" class="anchor"></a><code><span><span class="keyword">val</span> string_of_key : <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>string_of_key key</code> turns the given <code>key</code> into a string.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-num_elements"><a href="#val-num_elements" class="anchor"></a><code><span><span class="keyword">val</span> num_elements : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-key">key</a></span></code></div><div class="spec-doc"><p><code>num_elements vector</code> returns the maximum number of elements in the lazy vector.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : 
  <span><span class="optlabel">?first_key</span>:<a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?values</span>:<span><span class="type-var">'a</span> <span class="xref-unresolved">Map</span>.Map.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?produce_value</span>:<span><span class="type-var">'a</span> <a href="#type-producer">producer</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?origin</span>:<a href="../../../../../Tezos_tree_encoding/index.html#type-wrapped_tree">Tezos_tree_encoding.wrapped_tree</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>create ?first_key ?values ?produce_value ?origin num_elements</code> produces a lazy vector with <code>num_elements</code> entries where each is created using <code>produce_value</code>. <code>values</code> may be provided to supply an initial set of entries. <code>first_key</code> specifies the first index of the vector if given and defaults to zero.</p><p><b>Note:</b> The <code>produce_value</code> and <code>origin</code> arguments are expected to be used by the 'tree-encoding' library. If you want to pre-fill your vector, creates an empty vector and use <code>grow</code> or <code>set</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-origin"><a href="#val-origin" class="anchor"></a><code><span><span class="keyword">val</span> origin : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../../../Tezos_tree_encoding/index.html#type-wrapped_tree">Tezos_tree_encoding.wrapped_tree</a> option</span></span></code></div><div class="spec-doc"><p><code>origin vec</code> returns the tree of origin of the vector, if it exists.</p><p><b>Note:</b> The sole consumer of this function is expected to be the tree-encoding library.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>empty ()</code> creates a vector of size zero. This is used in conjunction with <a href="#val-cons"><code>cons</code></a> to model list-like structure.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-singleton"><a href="#val-singleton" class="anchor"></a><code><span><span class="keyword">val</span> singleton : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>singleton v</code> creates a vector of size one containing only <code>v</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_list"><a href="#val-of_list" class="anchor"></a><code><span><span class="keyword">val</span> of_list : <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>of_list values</code> creates a vector where each association is the index in the list to its value. The first item's key is <code>zero</code>, the second is <code>succ zero</code> and so on.</p><p><b>Note:</b> This function may be dangerous to use in a tick, if the size of <code>of_list</code> is unbounded.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>get key vector</code> retrieves the element at <code>key</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Exn.Bounds</code> <p>when trying to access an invalid key</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set"><a href="#val-set" class="anchor"></a><code><span><span class="keyword">val</span> set : <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>set key value vector</code> sets the element at <code>key</code> to <code>value</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Exn.Bounds</code> <p>when trying to set an invalid key</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cons"><a href="#val-cons" class="anchor"></a><code><span><span class="keyword">val</span> cons : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>cons value vector</code> prepends a value to the front and grows the vector by one. That value can then be accessed using the <code>zero</code> key.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-split"><a href="#val-split" class="anchor"></a><code><span><span class="keyword">val</span> split : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span> * <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>split vec at</code> splits <code>vec</code> into two sub vectors at element <code>at</code>. The first vector has <code>at</code> elements, the second <code>length vec
      - at</code> elements.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../index.html#exception-Bounds"><code>Bounds</code></a> <p>when <code>at &lt; 0</code></p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../index.html#exception-Bounds"><code>Bounds</code></a> <p>when <code>at &gt; num_elements vec</code></p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-grow"><a href="#val-grow" class="anchor"></a><code><span><span class="keyword">val</span> grow : <span><span class="optlabel">?default</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>grow delta ?default vector</code> creates a new lazy vector that has <code>delta</code> more items than <code>vector</code>. This also retains all values that have previously been created. New values will be created with <code>default</code> if provided.</p><p><b>Note:</b> This function may be dangerous to use in a tick, if <code>delta</code> is unbounded, or if the result of <code>default</code> is large.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-drop"><a href="#val-drop" class="anchor"></a><code><span><span class="keyword">val</span> drop : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>drop vector</code> removes the head from <code>vector</code> without returning it. It doesn't read the value before removing it.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../index.html#exception-Bounds"><code>Bounds</code></a> <p>when applied on an empty vector.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pop"><a href="#val-pop" class="anchor"></a><code><span><span class="keyword">val</span> pop : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span><span class="type-var">'a</span> <a href="#type-t">t</a></span>)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>pop vector</code> removes the head from <code>vector</code>, and returns it.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../../index.html#exception-Bounds"><code>Bounds</code></a> <p>when applied on an empty vector.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-prepend_list"><a href="#val-prepend_list" class="anchor"></a><code><span><span class="keyword">val</span> prepend_list : <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>prepend_list l vec</code> adds the elements of <code>l</code> at the front of <code>vec</code>.</p><p><b>Note:</b> This function may be dangerous to use in a tick, if <code>List.length l</code> is significant.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-append"><a href="#val-append" class="anchor"></a><code><span><span class="keyword">val</span> append : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span> * <a href="#type-key">key</a></span></code></div><div class="spec-doc"><p><code>append elt vector</code> creates a new lazy vector that has one more item than <code>vector</code> whose value is <code>elt</code>. This is a shortcut for <code>vector |&gt; grow Key.(succ zero) |&gt; set (num_elements vector) elt</code>. Also returns the key of the added element.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-concat"><a href="#val-concat" class="anchor"></a><code><span><span class="keyword">val</span> concat : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>concat lhs rhs</code> concatenates two lazy vectors.</p><p><b>Note:</b> This function maybe dangerous to use in a tick because <i>every</i> entries of both <code>lhs</code> and <code>rhs</code> will be loaded in memory.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unsafe_concat"><a href="#val-unsafe_concat" class="anchor"></a><code><span><span class="keyword">val</span> unsafe_concat : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>unsafe_concat</code> concatenates two lazy vectors, <b>assuming every entries of both vectors are already loaded in memory</b>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_list"><a href="#val-to_list" class="anchor"></a><code><span><span class="keyword">val</span> to_list : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>to_list vector</code> extracts all values of the given <code>vector</code> and collects them in a list.</p><p><b>Note:</b> This function may be dangerous to use in a tick because all entries of the vector are loaded in memory.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-loaded_bindings"><a href="#val-loaded_bindings" class="anchor"></a><code><span><span class="keyword">val</span> loaded_bindings : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-key">key</a> * <span><span class="type-var">'a</span> option</span>)</span> list</span></span></code></div><div class="spec-doc"><p><code>loaded_bindings vector</code> returns the <code>(key * 'a) list</code> representation of the vector <code>vector</code> containing only the loaded values, in order of increasing keys. This function is a witness of internal mutations.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-first_key"><a href="#val-first_key" class="anchor"></a><code><span><span class="keyword">val</span> first_key : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-key">key</a></span></code></div><div class="spec-doc"><p><code>first_key v</code> returns the first key of the given vector <code>v</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-encoding"><a href="#val-encoding" class="anchor"></a><code><span><span class="keyword">val</span> encoding : 
  <span><span><a href="#type-key">key</a> <a href="../../../../../Tezos_tree_encoding/index.html#type-t">Tezos_tree_encoding.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../../../../../Tezos_tree_encoding/index.html#type-t">Tezos_tree_encoding.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <a href="../../../../../Tezos_tree_encoding/index.html#type-t">Tezos_tree_encoding.t</a></span></span></code></div><div class="spec-doc"><p><code>encoding len_encoding elem_encoding</code> returns <code>Tezos_tree_encoding</code> for the vector</p></div></div></div></body></html>
