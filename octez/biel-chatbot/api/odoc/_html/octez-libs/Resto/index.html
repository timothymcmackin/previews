<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Resto (octez-libs.Resto)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">octez-libs</a> &#x00BB; Resto</nav><header class="odoc-preamble"><h1>Module <code><span>Resto</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#resto">Resto</a><ul><li><a href="#overview-of-resto">Overview of Resto</a></li><li><a href="#intended-use-of-resto">Intended use of Resto</a></li></ul></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-Utils"><a href="#module-Utils" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Utils/index.html">Utils</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h2 id="resto"><a href="#resto" class="anchor"></a>Resto</h2><p>Resto is a library for defining, serving, and querying a REST directory of RPC services.</p><h3 id="overview-of-resto"><a href="#overview-of-resto" class="anchor"></a>Overview of Resto</h3><p>Resto is a library for describing *services*. A service is the entry-point in an API: a URI/URL with some path parameters (some of the slash-separated segments are actually decoded as parameters), some additional query parameters (the part that looks like <code>?utm_parameter=from_email</code> in the links of marketing emails) and other attributes depending on the method of the service.</p><p>For example, you can use Resto to describe the directory of services that, as a whole, forms the API for a web-service. You can then use one of the other resto packages to implement a server that answers requests made to this API. Alternatively, you can use one of the other resto packages to make your program query such an API.</p><h3 id="intended-use-of-resto"><a href="#intended-use-of-resto" class="anchor"></a>Intended use of Resto</h3><p>The intended use of <code>Resto</code> is as follows:</p><ul><li>Define arguments, paths, query fields, and queries as required by the API you describe.</li><li>Define services using the previously defined arguments, paths, query fields and queries.</li><li>Use <a href="../Resto_directory/index.html"><code>Resto_directory</code></a> to register those services.</li></ul><p>If you are writing a server, you can then:</p><ul><li>Use <code>Resto_cohttp_server.</code><code>Server</code> to spin up a server that answers requests to these services.</li></ul><p>Alternatively, if you are writing a client, you can then:</p><ul><li>Use <code>Resto_cohttp_client.</code><code>Client</code> to make requests to these services.</li></ul><p>And of course you can do both if you are writing both the server and the client.</p><div class="odoc-spec"><div class="spec type anchored" id="type-meth"><a href="#type-meth" class="anchor"></a><code><span><span class="keyword">type</span> meth</span><span> = </span><span>[ </span></code><ol><li id="type-meth.GET" class="def variant constructor anchored"><a href="#type-meth.GET" class="anchor"></a><code><span>| </span><span>`GET</span></code></li><li id="type-meth.POST" class="def variant constructor anchored"><a href="#type-meth.POST" class="anchor"></a><code><span>| </span><span>`POST</span></code></li><li id="type-meth.DELETE" class="def variant constructor anchored"><a href="#type-meth.DELETE" class="anchor"></a><code><span>| </span><span>`DELETE</span></code></li><li id="type-meth.PUT" class="def variant constructor anchored"><a href="#type-meth.PUT" class="anchor"></a><code><span>| </span><span>`PUT</span></code></li><li id="type-meth.PATCH" class="def variant constructor anchored"><a href="#type-meth.PATCH" class="anchor"></a><code><span>| </span><span>`PATCH</span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>The different methods that a service can be used by a service.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_meth"><a href="#val-string_of_meth" class="anchor"></a><code><span><span class="keyword">val</span> string_of_meth : <span><span>[&lt; <a href="#type-meth">meth</a> ]</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-meth_of_string"><a href="#val-meth_of_string" class="anchor"></a><code><span><span class="keyword">val</span> meth_of_string : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>[&gt; <a href="#type-meth">meth</a> ]</span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-MethMap"><a href="#module-MethMap" class="anchor"></a><code><span><span class="keyword">module</span> MethMap</span><span> : <span class="xref-unresolved">Stdlib</span>.Map.S <span class="keyword">with</span> <span><span class="keyword">type</span> <span class="xref-unresolved">key</span> = <span class="xref-unresolved">meth</span></span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-StringMap"><a href="#module-StringMap" class="anchor"></a><code><span><span class="keyword">module</span> StringMap</span><span> : <span class="xref-unresolved">Stdlib</span>.Map.S <span class="keyword">with</span> <span><span class="keyword">type</span> <span class="xref-unresolved">key</span> = <span class="xref-unresolved">string</span></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-eq"><a href="#type-eq" class="anchor"></a><code><span><span class="keyword">type</span> <span>(_, _) eq</span></span><span> = </span></code><ol><li id="type-eq.Eq" class="def variant constructor anchored"><a href="#type-eq.Eq" class="anchor"></a><code><span>| </span><span><span class="constructor">Eq</span> : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'a</span>)</span> <a href="#type-eq">eq</a></span></span></code></li></ol></div><div class="spec-doc"><p><code>eq</code> is an equality witness type. It is returned by some non-trivial equality-testing functions in the rest of this module. In general, it is intended to be used as follows:</p><p><code>match are_equal foo bar with
     | None -&gt; (* values are not equal *) ..
     | Some Eq -&gt; (* values are equal *) ..</code></p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Arg"><a href="#module-Arg" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Arg/index.html">Arg</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Arguments are documented serializers-deserializers for parameters.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Path"><a href="#module-Path" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Path/index.html">Path</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Paths describe URIs/URLs: segments separated by slashes (/).</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Description"><a href="#module-Description" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Description/index.html">Description</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Service directory description</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Query"><a href="#module-Query" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Query/index.html">Query</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Query parameters are the key-value pairs that appear as <code>?key0=value0&amp;key1=value1&amp;..</code> at the end of the path in URIs/URLs.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-ENCODING"><a href="#module-type-ENCODING" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-ENCODING/index.html">ENCODING</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>An <code>ENCODING</code> is a generic interface for modules that provide conversion from values to a different representation and back. This is used to abstract resto over specific representations of values.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-MakeService"><a href="#module-MakeService" class="anchor"></a><code><span><span class="keyword">module</span> <a href="MakeService/index.html">MakeService</a></span><span> (<a href="MakeService/argument-1-Encoding/index.html">Encoding</a> : <a href="module-type-ENCODING/index.html">ENCODING</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Services.</p></div></div></div></body></html>
