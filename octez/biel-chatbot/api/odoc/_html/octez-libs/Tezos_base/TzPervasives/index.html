<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>TzPervasives (octez-libs.Tezos_base.TzPervasives)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">octez-libs</a> &#x00BB; <a href="../index.html">Tezos_base</a> &#x00BB; TzPervasives</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_base.TzPervasives</span></code></h1></header><div class="odoc-content"><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">struct</span> <span class="keyword">include</span> <a href="../../Tezos_stdlib/index.html">Tezos_stdlib</a> <span class="keyword">end</span></span></code></summary><div class="odoc-spec"><div class="spec module anchored" id="module-Bits"><a href="#module-Bits" class="anchor"></a><code><span><span class="keyword">module</span> Bits</span><span> = <a href="../../Tezos_stdlib/Bits/index.html">Tezos_stdlib.Bits</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Bloomer"><a href="#module-Bloomer" class="anchor"></a><code><span><span class="keyword">module</span> Bloomer</span><span> = <a href="../../Tezos_stdlib/Bloomer/index.html">Tezos_stdlib.Bloomer</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Bounded_heap"><a href="#module-Bounded_heap" class="anchor"></a><code><span><span class="keyword">module</span> Bounded_heap</span><span> = <a href="../../Tezos_stdlib/Bounded_heap/index.html">Tezos_stdlib.Bounded_heap</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Bounded_min_heap"><a href="#module-Bounded_min_heap" class="anchor"></a><code><span><span class="keyword">module</span> Bounded_min_heap</span><span> = <a href="../../Tezos_stdlib/Bounded_min_heap/index.html">Tezos_stdlib.Bounded_min_heap</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Circular_buffer"><a href="#module-Circular_buffer" class="anchor"></a><code><span><span class="keyword">module</span> Circular_buffer</span><span> = <a href="../../Tezos_stdlib/Circular_buffer/index.html">Tezos_stdlib.Circular_buffer</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Compare"><a href="#module-Compare" class="anchor"></a><code><span><span class="keyword">module</span> Compare</span><span> = <a href="../../Tezos_stdlib/Compare/index.html">Tezos_stdlib.Compare</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-FallbackArray"><a href="#module-FallbackArray" class="anchor"></a><code><span><span class="keyword">module</span> FallbackArray</span><span> = <a href="../../Tezos_stdlib/FallbackArray/index.html">Tezos_stdlib.FallbackArray</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-FunctionalArray"><a href="#module-FunctionalArray" class="anchor"></a><code><span><span class="keyword">module</span> FunctionalArray</span><span> = <a href="../../Tezos_stdlib/FunctionalArray/index.html">Tezos_stdlib.FunctionalArray</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Hash_queue"><a href="#module-Hash_queue" class="anchor"></a><code><span><span class="keyword">module</span> Hash_queue</span><span> = <a href="../../Tezos_stdlib/Hash_queue/index.html">Tezos_stdlib.Hash_queue</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Hex"><a href="#module-Hex" class="anchor"></a><code><span><span class="keyword">module</span> Hex</span><span> = <a href="../../Tezos_stdlib/Hex/index.html">Tezos_stdlib.Hex</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Lwt_dropbox"><a href="#module-Lwt_dropbox" class="anchor"></a><code><span><span class="keyword">module</span> Lwt_dropbox</span><span> = <a href="../../Tezos_stdlib/Lwt_dropbox/index.html">Tezos_stdlib.Lwt_dropbox</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Lwt_idle_waiter"><a href="#module-Lwt_idle_waiter" class="anchor"></a><code><span><span class="keyword">module</span> Lwt_idle_waiter</span><span> = <a href="../../Tezos_stdlib/Lwt_idle_waiter/index.html">Tezos_stdlib.Lwt_idle_waiter</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Lwt_pipe"><a href="#module-Lwt_pipe" class="anchor"></a><code><span><span class="keyword">module</span> Lwt_pipe</span><span> = <a href="../../Tezos_stdlib/Lwt_pipe/index.html">Tezos_stdlib.Lwt_pipe</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Lwt_utils"><a href="#module-Lwt_utils" class="anchor"></a><code><span><span class="keyword">module</span> Lwt_utils</span><span> = <a href="../../Tezos_stdlib/Lwt_utils/index.html">Tezos_stdlib.Lwt_utils</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Memory"><a href="#module-Memory" class="anchor"></a><code><span><span class="keyword">module</span> Memory</span><span> = <a href="../../Tezos_stdlib/Memory/index.html">Tezos_stdlib.Memory</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Pretty_printing"><a href="#module-Pretty_printing" class="anchor"></a><code><span><span class="keyword">module</span> Pretty_printing</span><span> = <a href="../../Tezos_stdlib/Pretty_printing/index.html">Tezos_stdlib.Pretty_printing</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Tag"><a href="#module-Tag" class="anchor"></a><code><span><span class="keyword">module</span> Tag</span><span> = <a href="../../Tezos_stdlib/Tag/index.html">Tezos_stdlib.Tag</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-TzBytes"><a href="#module-TzBytes" class="anchor"></a><code><span><span class="keyword">module</span> TzBytes</span><span> = <a href="../../Tezos_stdlib/TzBytes/index.html">Tezos_stdlib.TzBytes</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-TzEndian"><a href="#module-TzEndian" class="anchor"></a><code><span><span class="keyword">module</span> TzEndian</span><span> = <a href="../../Tezos_stdlib/TzEndian/index.html">Tezos_stdlib.TzEndian</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-TzFilename"><a href="#module-TzFilename" class="anchor"></a><code><span><span class="keyword">module</span> TzFilename</span><span> = <a href="../../Tezos_stdlib/TzFilename/index.html">Tezos_stdlib.TzFilename</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-TzList"><a href="#module-TzList" class="anchor"></a><code><span><span class="keyword">module</span> TzList</span><span> = <a href="../../Tezos_stdlib/TzList/index.html">Tezos_stdlib.TzList</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-TzString"><a href="#module-TzString" class="anchor"></a><code><span><span class="keyword">module</span> TzString</span><span> = <a href="../../Tezos_stdlib/TzString/index.html">Tezos_stdlib.TzString</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Utils"><a href="#module-Utils" class="anchor"></a><code><span><span class="keyword">module</span> Utils</span><span> = <a href="../../Tezos_stdlib/Utils/index.html">Tezos_stdlib.Utils</a></span></code></div></div></details></div><div class="odoc-spec"><div class="spec module anchored" id="module-Error_monad"><a href="#module-Error_monad" class="anchor"></a><code><span><span class="keyword">module</span> Error_monad</span><span> = <a href="../../Tezos_error_monad/Error_monad/index.html">Tezos_error_monad.Error_monad</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Error_monad_legacy"><a href="#module-Error_monad_legacy" class="anchor"></a><code><span><span class="keyword">module</span> Error_monad_legacy</span><span> = <a href="../../Tezos_error_monad_legacy/Error_monad/index.html">Tezos_error_monad_legacy.Error_monad</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Data_encoding"><a href="#module-Data_encoding" class="anchor"></a><code><span><span class="keyword">module</span> Data_encoding</span><span> = <a href="../../Data_encoding/index.html">Data_encoding</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Hashtbl"><a href="#module-Hashtbl" class="anchor"></a><code><span><span class="keyword">module</span> Hashtbl</span><span> = <a href="../../Tezos_error_monad/TzLwtreslib/Hashtbl/index.html">Tezos_error_monad.TzLwtreslib.Hashtbl</a></span></code></div><div class="spec-doc"><p>The following modules are part of <code>TzLwtreslib</code>. We just remove</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Map"><a href="#module-Map" class="anchor"></a><code><span><span class="keyword">module</span> Map</span><span> = <a href="../../Tezos_error_monad/TzLwtreslib/Map/index.html">Tezos_error_monad.TzLwtreslib.Map</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Option"><a href="#module-Option" class="anchor"></a><code><span><span class="keyword">module</span> Option</span><span> = <a href="../../Tezos_error_monad/TzLwtreslib/Option/index.html">Tezos_error_monad.TzLwtreslib.Option</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Result"><a href="#module-Result" class="anchor"></a><code><span><span class="keyword">module</span> Result</span><span> = <a href="../../Tezos_error_monad/TzLwtreslib/Result/index.html">Tezos_error_monad.TzLwtreslib.Result</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Seq"><a href="#module-Seq" class="anchor"></a><code><span><span class="keyword">module</span> Seq</span><span> = <a href="../../Tezos_error_monad/TzLwtreslib/Seq/index.html">Tezos_error_monad.TzLwtreslib.Seq</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Seq_e"><a href="#module-Seq_e" class="anchor"></a><code><span><span class="keyword">module</span> Seq_e</span><span> = <a href="../../Tezos_error_monad/TzLwtreslib/Seq_e/index.html">Tezos_error_monad.TzLwtreslib.Seq_e</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Seq_s"><a href="#module-Seq_s" class="anchor"></a><code><span><span class="keyword">module</span> Seq_s</span><span> = <a href="../../Tezos_error_monad/TzLwtreslib/Seq_s/index.html">Tezos_error_monad.TzLwtreslib.Seq_s</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Seq_es"><a href="#module-Seq_es" class="anchor"></a><code><span><span class="keyword">module</span> Seq_es</span><span> = <a href="../../Tezos_error_monad/TzLwtreslib/Seq_es/index.html">Tezos_error_monad.TzLwtreslib.Seq_es</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Set"><a href="#module-Set" class="anchor"></a><code><span><span class="keyword">module</span> Set</span><span> = <a href="../../Tezos_error_monad/TzLwtreslib/Set/index.html">Tezos_error_monad.TzLwtreslib.Set</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Unit"><a href="#module-Unit" class="anchor"></a><code><span><span class="keyword">module</span> Unit</span><span> = <a href="../../Tezos_error_monad/TzLwtreslib/Unit/index.html">Tezos_error_monad.TzLwtreslib.Unit</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-WithExceptions"><a href="#module-WithExceptions" class="anchor"></a><code><span><span class="keyword">module</span> WithExceptions</span><span> = <a href="../../Tezos_error_monad/TzLwtreslib/WithExceptions/index.html">Tezos_error_monad.TzLwtreslib.WithExceptions</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-List"><a href="#module-List" class="anchor"></a><code><span><span class="keyword">module</span> <a href="List/index.html">List</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-String"><a href="#module-String" class="anchor"></a><code><span><span class="keyword">module</span> <a href="String/index.html">String</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Bytes"><a href="#module-Bytes" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Bytes/index.html">Bytes</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Time"><a href="#module-Time" class="anchor"></a><code><span><span class="keyword">module</span> Time</span><span> = <a href="../Time/index.html">Time</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Fitness"><a href="#module-Fitness" class="anchor"></a><code><span><span class="keyword">module</span> Fitness</span><span> = <a href="../Fitness/index.html">Fitness</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-User_activated"><a href="#module-User_activated" class="anchor"></a><code><span><span class="keyword">module</span> User_activated</span><span> = <a href="../User_activated/index.html">User_activated</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Block_header"><a href="#module-Block_header" class="anchor"></a><code><span><span class="keyword">module</span> Block_header</span><span> = <a href="../Block_header/index.html">Block_header</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Genesis"><a href="#module-Genesis" class="anchor"></a><code><span><span class="keyword">module</span> Genesis</span><span> = <a href="../Genesis/index.html">Genesis</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Operation"><a href="#module-Operation" class="anchor"></a><code><span><span class="keyword">module</span> Operation</span><span> = <a href="../Operation/index.html">Operation</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Protocol"><a href="#module-Protocol" class="anchor"></a><code><span><span class="keyword">module</span> Protocol</span><span> = <a href="../Protocol/index.html">Protocol</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Test_chain_status"><a href="#module-Test_chain_status" class="anchor"></a><code><span><span class="keyword">module</span> Test_chain_status</span><span> = <a href="../Test_chain_status/index.html">Test_chain_status</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Block_locator"><a href="#module-Block_locator" class="anchor"></a><code><span><span class="keyword">module</span> Block_locator</span><span> = <a href="../Block_locator/index.html">Block_locator</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Mempool"><a href="#module-Mempool" class="anchor"></a><code><span><span class="keyword">module</span> Mempool</span><span> = <a href="../Mempool/index.html">Mempool</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-P2p_addr"><a href="#module-P2p_addr" class="anchor"></a><code><span><span class="keyword">module</span> P2p_addr</span><span> = <a href="../P2p_addr/index.html">P2p_addr</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-P2p_identity"><a href="#module-P2p_identity" class="anchor"></a><code><span><span class="keyword">module</span> P2p_identity</span><span> = <a href="../P2p_identity/index.html">P2p_identity</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-P2p_peer"><a href="#module-P2p_peer" class="anchor"></a><code><span><span class="keyword">module</span> P2p_peer</span><span> = <a href="../P2p_peer/index.html">P2p_peer</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-P2p_point"><a href="#module-P2p_point" class="anchor"></a><code><span><span class="keyword">module</span> P2p_point</span><span> = <a href="../P2p_point/index.html">P2p_point</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-P2p_connection"><a href="#module-P2p_connection" class="anchor"></a><code><span><span class="keyword">module</span> P2p_connection</span><span> = <a href="../P2p_connection/index.html">P2p_connection</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-P2p_stat"><a href="#module-P2p_stat" class="anchor"></a><code><span><span class="keyword">module</span> P2p_stat</span><span> = <a href="../P2p_stat/index.html">P2p_stat</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-P2p_version"><a href="#module-P2p_version" class="anchor"></a><code><span><span class="keyword">module</span> P2p_version</span><span> = <a href="../../Tezos_version/P2p_version/index.html">Tezos_version.P2p_version</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-P2p_rejection"><a href="#module-P2p_rejection" class="anchor"></a><code><span><span class="keyword">module</span> P2p_rejection</span><span> = <a href="../P2p_rejection/index.html">P2p_rejection</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-P2p_params"><a href="#module-P2p_params" class="anchor"></a><code><span><span class="keyword">module</span> P2p_params</span><span> = <a href="../P2p_params/index.html">P2p_params</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Distributed_db_version"><a href="#module-Distributed_db_version" class="anchor"></a><code><span><span class="keyword">module</span> Distributed_db_version</span><span> = <a href="../../Tezos_version/Distributed_db_version/index.html">Tezos_version.Distributed_db_version</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Network_version"><a href="#module-Network_version" class="anchor"></a><code><span><span class="keyword">module</span> Network_version</span><span> = <a href="../../Tezos_version/Network_version/index.html">Tezos_version.Network_version</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Block_hash"><a href="#module-Block_hash" class="anchor"></a><code><span><span class="keyword">module</span> Block_hash</span><span> = <a href="../../Tezos_crypto/Hashed/Block_hash/index.html">Tezos_crypto.Hashed.Block_hash</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Block_metadata_hash"><a href="#module-Block_metadata_hash" class="anchor"></a><code><span><span class="keyword">module</span> Block_metadata_hash</span><span> = <a href="../../Tezos_crypto/Hashed/Block_metadata_hash/index.html">Tezos_crypto.Hashed.Block_metadata_hash</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Chain_id"><a href="#module-Chain_id" class="anchor"></a><code><span><span class="keyword">module</span> Chain_id</span><span> = <a href="../../Tezos_crypto/Hashed/Chain_id/index.html">Tezos_crypto.Hashed.Chain_id</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Context_hash"><a href="#module-Context_hash" class="anchor"></a><code><span><span class="keyword">module</span> Context_hash</span><span> = <a href="../../Tezos_crypto/Hashed/Context_hash/index.html">Tezos_crypto.Hashed.Context_hash</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Operation_hash"><a href="#module-Operation_hash" class="anchor"></a><code><span><span class="keyword">module</span> Operation_hash</span><span> = <a href="../../Tezos_crypto/Hashed/Operation_hash/index.html">Tezos_crypto.Hashed.Operation_hash</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Operation_list_hash"><a href="#module-Operation_list_hash" class="anchor"></a><code><span><span class="keyword">module</span> Operation_list_hash</span><span> = <a href="../../Tezos_crypto/Hashed/Operation_list_hash/index.html">Tezos_crypto.Hashed.Operation_list_hash</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Operation_list_list_hash"><a href="#module-Operation_list_list_hash" class="anchor"></a><code><span><span class="keyword">module</span> Operation_list_list_hash</span><span> = <a href="../../Tezos_crypto/Hashed/Operation_list_list_hash/index.html">Tezos_crypto.Hashed.Operation_list_list_hash</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Operation_metadata_hash"><a href="#module-Operation_metadata_hash" class="anchor"></a><code><span><span class="keyword">module</span> Operation_metadata_hash</span><span> = <a href="../../Tezos_crypto/Hashed/Operation_metadata_hash/index.html">Tezos_crypto.Hashed.Operation_metadata_hash</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Operation_metadata_list_hash"><a href="#module-Operation_metadata_list_hash" class="anchor"></a><code><span><span class="keyword">module</span> Operation_metadata_list_hash</span><span> =
  <a href="../../Tezos_crypto/Hashed/Operation_metadata_list_hash/index.html">Tezos_crypto.Hashed.Operation_metadata_list_hash</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Operation_metadata_list_list_hash"><a href="#module-Operation_metadata_list_list_hash" class="anchor"></a><code><span><span class="keyword">module</span> Operation_metadata_list_list_hash</span><span> =
  <a href="../../Tezos_crypto/Hashed/Operation_metadata_list_list_hash/index.html">Tezos_crypto.Hashed.Operation_metadata_list_list_hash</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Protocol_hash"><a href="#module-Protocol_hash" class="anchor"></a><code><span><span class="keyword">module</span> Protocol_hash</span><span> = <a href="../../Tezos_crypto/Hashed/Protocol_hash/index.html">Tezos_crypto.Hashed.Protocol_hash</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Signature"><a href="#module-Signature" class="anchor"></a><code><span><span class="keyword">module</span> Signature</span><span> = <a href="../../Tezos_crypto/Signature/index.html">Tezos_crypto.Signature</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Skip_list"><a href="#module-Skip_list" class="anchor"></a><code><span><span class="keyword">module</span> Skip_list</span><span> = <a href="../Skip_list/index.html">Skip_list</a></span></code></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="../../Tezos_stdlib/Utils/Infix/index.html">Utils.Infix</a></span></code></summary><div class="odoc-spec"><div class="spec value anchored" id="val-(--)"><a href="#val-(--)" class="anchor"></a><code><span><span class="keyword">val</span> (--) : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int list</span></span></code></div><div class="spec-doc"><p>Sequence: <code>i--j</code> is the sequence <code>i;i+1;...;j-1;j</code></p></div></div></details></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="../../Tezos_error_monad/Error_monad/index.html">Tezos_error_monad.Error_monad</a></span></code></summary><div class="odoc-spec"><div class="spec type anchored" id="type-error_category"><a href="#type-error_category" class="anchor"></a><code><span><span class="keyword">type</span> error_category</span><span> = </span><span>[ </span></code><ol><li id="type-error_category.Branch" class="def variant constructor anchored"><a href="#type-error_category.Branch" class="anchor"></a><code><span>| </span><span>`Branch</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Errors that may not happen in another context</p><span class="comment-delim">*)</span></div></li><li id="type-error_category.Temporary" class="def variant constructor anchored"><a href="#type-error_category.Temporary" class="anchor"></a><code><span>| </span><span>`Temporary</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Errors that may not happen in a later context</p><span class="comment-delim">*)</span></div></li><li id="type-error_category.Permanent" class="def variant constructor anchored"><a href="#type-error_category.Permanent" class="anchor"></a><code><span>| </span><span>`Permanent</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Errors that will happen no matter the context</p><span class="comment-delim">*)</span></div></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>Categories of error</p><p>Note: this is only meaningful within the protocol. It may be removed from the error monad and pushed to the protocol environment in the future. See https://gitlab.com/tezos/tezos/-/issues/1576</p></div></div><h2 id="assembling-the-different-components-of-the-error-monad."><a href="#assembling-the-different-components-of-the-error-monad." class="anchor"></a>Assembling the different components of the error monad.</h2><div class="odoc-spec"><div class="spec type anchored" id="type-error"><a href="#type-error" class="anchor"></a><code><span><span class="keyword">type</span> error</span><span> = <a href="../../Tezos_error_monad/TzCore/index.html#type-error">Tezos_error_monad.TzCore.error</a></span><span> = </span><span>..</span></code></div><div class="spec-doc"><p>The main error type.</p><p>Whenever you add a variant to this type (with <code>type Error_monad.error += …</code>) you must also register the error with <a href="#val-register_error_kind"><code>register_error_kind</code></a>.</p><p>These errors are not meant to be inspected in general. Meaning that they should not be matched upon. Consequently it is acceptable to register an error in an implementation file and not mention it in the corresponding interface file.</p></div></div><div class="odoc-include"><div class="spec-doc"><p><code>CORE</code>: encoding and pretty-printing for errors</p></div><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../../Tezos_error_monad/Sig/module-type-CORE/index.html">Tezos_error_monad.Sig.CORE</a>
  <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../Tezos_error_monad/Sig/module-type-CORE/index.html#type-error">error</a> := <a href="#type-error">error</a></span>
   <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="../../Tezos_error_monad/Sig/module-type-CORE/index.html#type-error_category">error_category</a> := <a href="#type-error_category">error_category</a></span></span></code></summary><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_category"><a href="#val-string_of_category" class="anchor"></a><code><span><span class="keyword">val</span> string_of_category : <span><a href="#type-error_category">error_category</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-error_encoding"><a href="#val-error_encoding" class="anchor"></a><code><span><span class="keyword">val</span> error_encoding : <span><a href="#type-error">error</a> <a href="../../Data_encoding/index.html#type-t">Data_encoding.t</a></span></span></code></div><div class="spec-doc"><p>The encoding for errors.</p><p>Note that this encoding has a few peculiarities, some of which may impact your code. These peculiarities are due to the type <code>error</code> being an extensible variant.</p><p>Because the <code>error</code> type is an extensible variant, you must register an encoding for each error constructor you add to <code>error</code>. This is done via <a href="#val-register_error_kind"><code>register_error_kind</code></a>.</p><p>Because the <code>error</code> type is an extensible variant, with dynamically registered errors (see peculiarity above), there are no tags associated with each error. This does not affect the JSON encoding, but it does impose restrictions on the binary encoding. The chosen workaround is to encode errors as JSON and to encode the JSON to binary form. As a result, errors can be somewhat large in binary: they include field names and such.</p><p>Because the <code>error</code> type is an extensible variant, with dynamically registered errors (see peculiarity above), the encoding must be recomputed when a new error is registered. This is achieved by the means of a <a href="../../Data_encoding/index.html#val-delayed"><code>Data_encoding.delayed</code></a> combinator: the encoding is recomputed on-demand. There is a caching mechanism so that, in the case where no new errors have been registered since the last use, the last result is used.</p><p>This last peculiarity imposes a limit on the use of <code>error_encoding</code> itself. Specifically, it is invalid to use <code>error_encoding</code> inside the <code>~json</code> argument of a <a href="../../Data_encoding/index.html#val-splitted"><code>Data_encoding.splitted</code></a>. This is because <code>splitted</code> evaluates the <code>delayed</code> combinator once-and-for-all to produce a json encoding. (Note that the following data-encoding combinators use <code>splitted</code> internally: <a href="../../Data_encoding/V1/Encoding/Compact/index.html#val-make"><code>Data_encoding.Compact.make</code></a>, <a href="../../Data_encoding/index.html#val-assoc"><code>Data_encoding.assoc</code></a>, and <a href="../../Data_encoding/index.html#val-lazy_encoding"><code>Data_encoding.lazy_encoding</code></a>. As a result, it is invalid to use <code>error_encoding</code> within the arguments of these combinators as well.)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-error">error</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-register_error_kind"><a href="#val-register_error_kind" class="anchor"></a><code><span><span class="keyword">val</span> register_error_kind : 
  <span><a href="#type-error_category">error_category</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">id</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">title</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">description</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?pp</span>:<span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'err</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'err</span> <a href="../../Data_encoding/index.html#type-t">Data_encoding.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="#type-error">error</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'err</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'err</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-error">error</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>The error data type is extensible. Each module can register specialized error serializers <code>id</code> unique name of this error. Ex.: overflow_time_counter <code>title</code> more readable name. Ex.: Overflow of time counter <code>description</code> human readable description. Ex.: The time counter overflowed while computing delta increase <code>pp</code> formatter used to pretty print additional arguments. Ex.: The time counter overflowed while computing delta increase. Previous value %d. Delta: %d <code>encoder</code> <code>decoder</code> data encoding for this error. If the error has no value, specify Data_encoding.empty</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-classify_error"><a href="#val-classify_error" class="anchor"></a><code><span><span class="keyword">val</span> classify_error : <span><a href="#type-error">error</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Tezos_error_monad/Error_classification/index.html#type-t">Tezos_error_monad.Error_classification.t</a></span></code></div><div class="spec-doc"><p>Classify an error using the registered kinds</p></div></div><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Unclassified"><a href="#extension-decl-Unclassified" class="anchor"></a><code><span><span class="keyword">type</span> <a href="#type-error">error</a> += <span class="keyword">private</span> </span></code><ol><li id="extension-Unclassified" class="def variant extension anchored"><a href="#extension-Unclassified" class="anchor"></a><code><span>| </span><span><span class="extension">Unclassified</span> <span class="keyword">of</span> string</span></code></li></ol></div><div class="spec-doc"><p>Catch all error when 'serializing' an error.</p></div></div><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Unregistered_error"><a href="#extension-decl-Unregistered_error" class="anchor"></a><code><span><span class="keyword">type</span> <a href="#type-error">error</a> += <span class="keyword">private</span> </span></code><ol><li id="extension-Unregistered_error" class="def variant extension anchored"><a href="#extension-Unregistered_error" class="anchor"></a><code><span>| </span><span><span class="extension">Unregistered_error</span> <span class="keyword">of</span> <a href="../../Data_encoding/index.html#type-json">Data_encoding.json</a></span></code></li></ol></div><div class="spec-doc"><p>Catch all error when 'deserializing' an error.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-json_of_error"><a href="#val-json_of_error" class="anchor"></a><code><span><span class="keyword">val</span> json_of_error : <span><a href="#type-error">error</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Data_encoding/index.html#type-json">Data_encoding.json</a></span></code></div><div class="spec-doc"><p>An error serializer</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-error_of_json"><a href="#val-error_of_json" class="anchor"></a><code><span><span class="keyword">val</span> error_of_json : <span><a href="../../Data_encoding/index.html#type-json">Data_encoding.json</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-error">error</a></span></code></div></div><h3 id="error-documentation"><a href="#error-documentation" class="anchor"></a>Error documentation</h3><div class="odoc-spec"><div class="spec type anchored" id="type-error_info"><a href="#type-error_info" class="anchor"></a><code><span><span class="keyword">type</span> error_info</span><span> = </span><span>{</span></code><ol><li id="type-error_info.category" class="def record field anchored"><a href="#type-error_info.category" class="anchor"></a><code><span>category : <a href="#type-error_category">error_category</a>;</span></code></li><li id="type-error_info.id" class="def record field anchored"><a href="#type-error_info.id" class="anchor"></a><code><span>id : string;</span></code></li><li id="type-error_info.title" class="def record field anchored"><a href="#type-error_info.title" class="anchor"></a><code><span>title : string;</span></code></li><li id="type-error_info.description" class="def record field anchored"><a href="#type-error_info.description" class="anchor"></a><code><span>description : string;</span></code></li><li id="type-error_info.schema" class="def record field anchored"><a href="#type-error_info.schema" class="anchor"></a><code><span>schema : <a href="../../Data_encoding/index.html#type-json_schema">Data_encoding.json_schema</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Error information</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_info"><a href="#val-pp_info" class="anchor"></a><code><span><span class="keyword">val</span> pp_info : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-error_info">error_info</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_info_of_error"><a href="#val-find_info_of_error" class="anchor"></a><code><span><span class="keyword">val</span> find_info_of_error : <span><a href="#type-error">error</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-error_info">error_info</a></span></code></div><div class="spec-doc"><p><code>find_info_of_error e</code> retrieves the `error_info` associated with the given error `e`.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Invalid_argument</code> <p>if the error is a wrapped error from another monad</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Not_found</code> <p>if the error's constructor has not been registered</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_registered_errors"><a href="#val-get_registered_errors" class="anchor"></a><code><span><span class="keyword">val</span> get_registered_errors : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-error_info">error_info</a> list</span></span></code></div><div class="spec-doc"><p>Retrieves information of registered errors</p></div></div></details></div><div class="odoc-include"><div class="spec-doc"><p><code>WITH_WRAPPED</code>: wrapping of errors from other instantiations within this one. Specifically, this is used to wrap errors of the economic protocol (e.g., operation is invalid) within the errors of the shell (e.g., failed to validate protocol data).</p><p>Functions from this module should only be used within the environment.</p></div><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../../Tezos_error_monad/Sig/module-type-WITH_WRAPPED/index.html">Tezos_error_monad.Sig.WITH_WRAPPED</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../Tezos_error_monad/Sig/module-type-WITH_WRAPPED/index.html#type-error">error</a> := <a href="#type-error">error</a></span></span></code></summary><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-Wrapped_error_monad"><a href="#module-type-Wrapped_error_monad" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Wrapped_error_monad/index.html">Wrapped_error_monad</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The purpose of this module is to wrap a specific error monad <code>E</code> into a more general error monad <code>Eg</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-register_wrapped_error_kind"><a href="#val-register_wrapped_error_kind" class="anchor"></a><code><span><span class="keyword">val</span> register_wrapped_error_kind : 
  <span><span>(<span class="keyword">module</span> <a href="module-type-Wrapped_error_monad/index.html">Wrapped_error_monad</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">id</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">title</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">description</span>:string <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Same as <code>register_error_kind</code> but for a wrapped error monad. The codec is defined in the module parameter. It makes the category of the error <code>Wrapped</code> instead of <code>Main</code>.</p></div></div></details></div><div class="odoc-spec"><div class="spec module anchored" id="module-TzTrace"><a href="#module-TzTrace" class="anchor"></a><code><span><span class="keyword">module</span> <a href="TzTrace/index.html">TzTrace</a></span><span> : 
  <a href="../../Tezos_error_monad/Sig/module-type-TRACE/index.html">Tezos_error_monad.Sig.TRACE</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'error <a href="../../Tezos_error_monad/Sig/module-type-TRACE/index.html#type-trace">trace</a></span> = <span><span class="type-var">'error</span> list</span></span></span></code></div><div class="spec-doc"><p><code>TzTrace</code>: trace module specific to the Tezos Error monad. The <code>trace</code> type of this module is meant to become abstract in the medium-term (see https://gitlab.com/tezos/tezos/-/issues/1577).</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-trace"><a href="#type-trace" class="anchor"></a><code><span><span class="keyword">type</span> <span>'error trace</span></span><span> = <span><span class="type-var">'error</span> <a href="TzTrace/index.html#type-trace">TzTrace.trace</a></span></span></code></div></div><div class="odoc-include"><div class="spec-doc"><p><code>TzMonad</code>: the Tezos-specific monad part of the <code>Error_monad</code>. It includes</p><ul><li>syntax modules</li><li>consistent defaults,</li><li>some tracing helpers,</li><li>some other misc helpers.</li></ul></div><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../../Tezos_error_monad/Monad_maker/module-type-S/index.html">Tezos_error_monad.Monad_maker.S</a>
  <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../Tezos_error_monad/Monad_maker/module-type-S/index.html#type-error">error</a> := <a href="../../Tezos_error_monad/TzCore/index.html#type-error">Tezos_error_monad.TzCore.error</a></span>
   <span class="keyword">and</span> <span><span class="keyword">type</span> <span>'error <a href="../../Tezos_error_monad/Monad_maker/module-type-S/index.html#type-trace">trace</a></span> := <span><span class="type-var">'error</span> <a href="TzTrace/index.html#type-trace">TzTrace.trace</a></span></span></span></code></summary><div class="odoc-spec"><div class="spec type anchored" id="type-tztrace"><a href="#type-tztrace" class="anchor"></a><code><span><span class="keyword">type</span> tztrace</span><span> = <span><a href="../../Tezos_error_monad/TzCore/index.html#type-error">Tezos_error_monad.TzCore.error</a> <a href="TzTrace/index.html#type-trace">TzTrace.trace</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-tzresult"><a href="#type-tzresult" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a tzresult</span></span><span> = <span><span>(<span class="type-var">'a</span>, <a href="#type-tztrace">tztrace</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Lwt_syntax"><a href="#module-Lwt_syntax" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Lwt_syntax/index.html">Lwt_syntax</a></span><span> : 
  <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="../../Tezos_error_monad/TzLwtreslib/Monad/Lwt_syntax/index.html">Tezos_error_monad.TzLwtreslib.Monad.Lwt_syntax</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Result_syntax"><a href="#module-Result_syntax" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Result_syntax/index.html">Result_syntax</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Lwt_result_syntax"><a href="#module-Lwt_result_syntax" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Lwt_result_syntax/index.html">Lwt_result_syntax</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-classify_trace"><a href="#val-classify_trace" class="anchor"></a><code><span><span class="keyword">val</span> classify_trace : <span><a href="#type-tztrace">tztrace</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Tezos_error_monad/Error_classification/index.html#type-t">Tezos_error_monad.Error_classification.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_print_trace"><a href="#val-pp_print_trace" class="anchor"></a><code><span><span class="keyword">val</span> pp_print_trace : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-tztrace">tztrace</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_print_top_error_of_trace"><a href="#val-pp_print_top_error_of_trace" class="anchor"></a><code><span><span class="keyword">val</span> pp_print_top_error_of_trace : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-tztrace">tztrace</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Pretty-prints the top error of a trace</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-trace_encoding"><a href="#val-trace_encoding" class="anchor"></a><code><span><span class="keyword">val</span> trace_encoding : <span><a href="#type-tztrace">tztrace</a> <a href="../../Data_encoding/index.html#type-t">Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-result_encoding"><a href="#val-result_encoding" class="anchor"></a><code><span><span class="keyword">val</span> result_encoding : <span><span><span class="type-var">'a</span> <a href="../../Data_encoding/index.html#type-t">Data_encoding.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-tzresult">tzresult</a></span> <a href="../../Data_encoding/index.html#type-t">Data_encoding.t</a></span></span></code></div><div class="spec-doc"><p>A serializer for result of a given type</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-record_trace"><a href="#val-record_trace" class="anchor"></a><code><span><span class="keyword">val</span> record_trace : 
  <span><span class="type-var">'err</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'err</span> <a href="TzTrace/index.html#type-trace">TzTrace.trace</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'err</span> <a href="TzTrace/index.html#type-trace">TzTrace.trace</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>record_trace err res</code> is either <code>res</code> if <code>res</code> is <code>Ok _</code>, or it is <code>Error (Trace.cons err tr)</code> if <code>res</code> is <code>Error tr</code>.</p><p>In other words, <code>record_trace err res</code> enriches the trace that is carried by <code>res</code> (if it is carrying a trace) with the error <code>err</code>. It leaves <code>res</code> untouched if <code>res</code> is not carrying a trace.</p><p>You can use this to add high-level information to potential low-level errors. E.g.,</p><pre class="language-ocaml"><code>record_trace
   Failure_to_load_config
   (load_data_from_file config_encoding config_file_name)</code></pre><p>Note that <code>record_trace</code> takes a <em>fully evaluated</em> error <code>err</code> as argument. It means that, whatever the value of the result <code>res</code>, the error <code>err</code> is evaluated. This is not an issue if the error is a simple expression (a literal or a constructor with simple parameters). However, for any expression that is more complex (e.g., one that calls a function) you should prefer <code>record_trace_eval</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-trace"><a href="#val-trace" class="anchor"></a><code><span><span class="keyword">val</span> trace : 
  <span><span class="type-var">'err</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span>(<span class="type-var">'b</span>, <span><span class="type-var">'err</span> <a href="TzTrace/index.html#type-trace">TzTrace.trace</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'b</span>, <span><span class="type-var">'err</span> <a href="TzTrace/index.html#type-trace">TzTrace.trace</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>trace</code> is identical to <code>record_trace</code> but applies to a promise. More formally, <code>trace err p</code> is a promise that resolves to <code>Ok v</code> if <code>p</code> resolves to <code>Ok v</code>, or it resolves to <code>Error (Trace.cons err tr)</code> if <code>res</code> resolves to <code>Error tr</code>.</p><p>In other words, <code>trace err p</code> enriches the trace that <code>p</code> resolves to (if it does resolve to a trace) with the error <code>err</code>. It leaves the value that <code>p</code> resolves to untouched if it is not a trace.</p><p>You can use this to add high-level information to potential low-level errors.</p><p>Note that, like <a href="#val-record_trace"><code>record_trace</code></a>, <code>trace</code> takes a fully evaluated error as argument. For a similar reason as explained there, you should only use <code>trace</code> with simple expressions (literal or constructor with simple parameters) and prefer <code>trace_eval</code> for any other expression (such as ones that include functions calls).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-record_trace_eval"><a href="#val-record_trace_eval" class="anchor"></a><code><span><span class="keyword">val</span> record_trace_eval : 
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'err</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'err</span> <a href="TzTrace/index.html#type-trace">TzTrace.trace</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'err</span> <a href="TzTrace/index.html#type-trace">TzTrace.trace</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>record_trace_eval</code> is identical to <code>record_trace</code> except that the error that enriches the trace is wrapped in a function that is evaluated only if it is needed. More formally <code>record_trace_eval mkerr res</code> is <code>res</code> if <code>res</code> is <code>Ok _</code>, or it is <code>Error (Trace.cons (mkerr ()) tr)</code> if <code>res</code> is <code>Error tr</code>.</p><p>You can achieve the same effect by hand with</p><pre class="language-ocaml"><code>match res with
| Ok _ -&gt; res
| Error tr -&gt; Error (Trace.cons (mkerr ()) tr)</code></pre><p>Prefer <code>record_trace_eval</code> over <code>record_trace</code> when the enriching error is expensive to compute or heavy to allocate.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-trace_eval"><a href="#val-trace_eval" class="anchor"></a><code><span><span class="keyword">val</span> trace_eval : 
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'err</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span>(<span class="type-var">'b</span>, <span><span class="type-var">'err</span> <a href="TzTrace/index.html#type-trace">TzTrace.trace</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'b</span>, <span><span class="type-var">'err</span> <a href="TzTrace/index.html#type-trace">TzTrace.trace</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>trace_eval</code> is identical to <code>trace</code> except that the error that enriches the trace is wrapped in a function that is evaluated only if <em>and when</em> it is needed. More formally <code>trace_eval mkerr p</code> is a promise that resolves to <code>Ok v</code> if <code>p</code> resolves to <code>Ok v</code>, or it resolves to <code>Error (Trace.cons err tr)</code> if <code>p</code> resolves to <code>Error tr</code> and then <code>mkerr
      ()</code> resolves to <code>err</code>.</p><p>You can achieve the same effect by hand with</p><pre class="language-ocaml"><code>p &gt;&gt;= function
| Ok _ -&gt; p
| Error tr -&gt;
   mkerr () &gt;&gt;= fun err -&gt;
   Lwt.return (Error (Trace.cons err tr))</code></pre><p>Note that the evaluation of the error can be arbitrarily delayed. Avoid using references and other mutable values in the function <code>mkerr</code>.</p><p>Prefer <code>trace_eval</code> over <code>trace</code> when the enriching error is expensive to compute or heavy to allocate or when evaluating it requires the use of Lwt.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-error_unless"><a href="#val-error_unless" class="anchor"></a><code><span><span class="keyword">val</span> error_unless : <span>bool <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'err</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(unit, <span><span class="type-var">'err</span> <a href="TzTrace/index.html#type-trace">TzTrace.trace</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>error_unless flag err</code> is <code>Ok ()</code> if <code>b</code> is <code>true</code>, it is <code>Error (Trace.make err)</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-error_when"><a href="#val-error_when" class="anchor"></a><code><span><span class="keyword">val</span> error_when : <span>bool <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'err</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(unit, <span><span class="type-var">'err</span> <a href="TzTrace/index.html#type-trace">TzTrace.trace</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>error_when flag err</code> is <code>Error (Trace.make err)</code> if <code>b</code> is <code>true</code>, it is <code>Ok ()</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fail_unless"><a href="#val-fail_unless" class="anchor"></a><code><span><span class="keyword">val</span> fail_unless : 
  <span>bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'err</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(unit, <span><span class="type-var">'err</span> <a href="TzTrace/index.html#type-trace">TzTrace.trace</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>fail_unless flag err</code> is <code>Lwt.return @@ Ok ()</code> if <code>b</code> is <code>true</code>, it is <code>Lwt.return @@ Error (Trace.make err)</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fail_when"><a href="#val-fail_when" class="anchor"></a><code><span><span class="keyword">val</span> fail_when : <span>bool <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'err</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(unit, <span><span class="type-var">'err</span> <a href="TzTrace/index.html#type-trace">TzTrace.trace</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>fail_when flag err</code> is <code>Lwt.return @@ Error (Trace.make err)</code> if <code>b</code> is <code>true</code>, it is <code>Lwt.return @@ Ok ()</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unless"><a href="#val-unless" class="anchor"></a><code><span><span class="keyword">val</span> unless : 
  <span>bool <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span><span>(unit, <span class="type-var">'trace</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(unit, <span class="type-var">'trace</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>unless b f</code> is <code>f ()</code> if <code>b</code> is <code>false</code> and it is a promise already resolved to <code>Ok ()</code> otherwise.</p><p>You can use <code>unless</code> to avoid having to write an <code>if</code> statement that you then need to populate entirely to satisfy the type-checker. E.g, you can write <code>unless b f</code> instead of <code>if not b then f () else return_unit</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-when_"><a href="#val-when_" class="anchor"></a><code><span><span class="keyword">val</span> when_ : 
  <span>bool <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span><span>(unit, <span class="type-var">'trace</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(unit, <span class="type-var">'trace</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>when_ b f</code> is <code>f ()</code> if <code>b</code> is <code>true</code> and it is a promise already resolved to <code>Ok ()</code> otherwise.</p><p>You can use <code>when_</code> to avoid having to write an <code>if</code> statement that you then need to populate entirely to satisfy the type-checker. E.g, you can write <code>when_ b f</code> instead of <code>if b then f () else return_unit</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dont_wait"><a href="#val-dont_wait" class="anchor"></a><code><span><span class="keyword">val</span> dont_wait : 
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span><span>(unit, <span class="type-var">'trace</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'trace</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>exn <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Wrapper around <code>Lwt_utils.dont_wait</code></p></div></div></details></div><h2 id="exception-error-bridge"><a href="#exception-error-bridge" class="anchor"></a>Exception-Error bridge</h2><p>This part of the interface groups functions that are used to interact with code that raises exceptions. Typically, you should be using these functions when calling into a library that raises exceptions.</p><p>Remember that the keyword <code>error</code> is for failure within the <code>Result</code> monad (or, more specifically, the <code>TracedResult</code> monad) whilst <code>fail</code> is for failure within the <code>LwtResult</code> monad (or, more specifically, the <code>LwtTracedResult</code> monad).</p><h3 id="failing:-to-error-out-and-to-fail"><a href="#failing:-to-error-out-and-to-fail" class="anchor"></a>Failing: to error out and to fail</h3><p>This sub-part of the interface groups functions that fail (either in the <code>TracedResult</code> monad or the <code>LwtTracedResult</code> monad) whilst carrying information provided as argument. When reading this sub-part you should read <code>error</code> and <code>fail</code> as verbs. E.g., <a href="#val-error_with_exn"><code>error_with_exn</code></a> errors out and carries a provided exception. The next sub-part will group noun-like, declarative functions.</p><div class="odoc-spec"><div class="spec value anchored" id="val-error_with"><a href="#val-error_with" class="anchor"></a><code><span><span class="keyword">val</span> error_with : 
  <span><span><span>(<span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit, <span><span class="type-var">'b</span> <a href="#type-tzresult">tzresult</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>error_with fmt …</code> errors out: it fails within the <code>TracedResult</code> monad. The payload of the <code>Error</code> constructor is unspecified beyond the fact that it includes the string formatted by <code>fmt …</code>. E.g.,</p><pre class="language-ocaml"><code>if n &lt; 0 then
   error_with &quot;Index (%d) is negative&quot; n
else if n &gt;= Array.length a then
   error_with &quot;Index (%d) is beyond maximum index (%d)&quot; n (Array.length a - 1)
else
   Ok a.(n)</code></pre><p>Note: this is somewhat equivalent to <code>Stdlib.failwith</code> in that it is a generic failure mechanism with a simple error message. Like <code>Stdlib.failwith</code> it should be replaced by a more specific error mechanism in most cases.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-failwith"><a href="#val-failwith" class="anchor"></a><code><span><span class="keyword">val</span> failwith : 
  <span><span><span>(<span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit, <span><span><span class="type-var">'b</span> <a href="#type-tzresult">tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>failwith fmt …</code> fails: it fails within the <code>LwtTracedResult</code> monad. The payload of the <code>Error</code> constructor is unspecified beyond the fact that it includes the string formatted by <code>fmt …</code>. E.g.,</p><pre class="language-ocaml"><code>match find key store with
| None -&gt;
   failwith &quot;Key %a not found in store&quot; pp_key key
| Some value -&gt;
   LwtResult.return value</code></pre><p>Note: this is somewhat equivalent to <code>Stdlib.failwith</code> in that it is a generic failure mechanism with a simple error message. Like <code>Stdlib.failwith</code> it should be replaced by a more specific error mechanism in most cases.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-error_with_exn"><a href="#val-error_with_exn" class="anchor"></a><code><span><span class="keyword">val</span> error_with_exn : <span>exn <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-tzresult">tzresult</a></span></span></code></div><div class="spec-doc"><p><code>error_with_exn exc</code> errors out: it fails within the <code>TracedResult</code> monad. The payload of the <code>Error</code> constructor is unspecified but it includes the exception.</p><p>It is meant as a way to switch from exception-based error management to tzresult-based error management, e.g., when calling external libraries that use exceptions.</p><pre class="language-ocaml"><code>try Ok (parse_input s) with Lex_error | Parse_error as exc -&gt; error_with_exn exc</code></pre><p>Whilst it is useful in specific places, it is generally better to use a dedicated error.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fail_with_exn"><a href="#val-fail_with_exn" class="anchor"></a><code><span><span class="keyword">val</span> fail_with_exn : <span>exn <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-tzresult">tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>fail_with_exn exc</code> fails: it fails within the <code>LwtTracedResult</code> monad. The payload of the <code>Error</code> constructor is unspecified but it includes the info from the exception.</p><p>It is meant as a way to switch, inside of Lwt code, from exception-based error management to tzresult-based error management, e.g., when calling external libraries that use exceptions.</p><pre class="language-ocaml"><code>Lwt.catch
   (fun () -&gt; parse_input s)
   (function
      | Lex_error | Parse_error as exc -&gt; fail_with_exn exc
      | exn -&gt; Lwt.reraise exn (* re-raise by default *))</code></pre><p>Whilst it is useful in specific places, it is generally better to use a dedicated error.</p></div></div><h3 id="conversions:-an-exception,-an-error,-a-trace,-a-result"><a href="#conversions:-an-exception,-an-error,-a-trace,-a-result" class="anchor"></a>Conversions: an exception, an error, a trace, a result</h3><p>This sub-part of the interface groups declarative functions that convert between different styles of error (exceptions, errors, traces, results). By themselves these functions have no effect within the Result or LwtResult monad, and they are generally used along with constructors or combinators.</p><div class="odoc-spec"><div class="spec value anchored" id="val-error_of_exn"><a href="#val-error_of_exn" class="anchor"></a><code><span><span class="keyword">val</span> error_of_exn : <span>exn <span class="arrow">&#45;&gt;</span></span> <a href="#type-error">error</a></span></code></div><div class="spec-doc"><p><code>error_of_exn e</code> is an error that carries the exception <code>e</code>. This function is intended to be used when interacting with a part of the code (most likely an external library) which uses exceptions.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-error_of_fmt"><a href="#val-error_of_fmt" class="anchor"></a><code><span><span class="keyword">val</span> error_of_fmt : 
  <span><span><span>(<span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, unit, <a href="#type-error">error</a>)</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>error_of_fmt …</code> is like <code>error_with …</code> but the error isn't wrapped in a trace in a <code>result</code>. Instead, an error is returned and the caller is expected to pass it to whichever error-combinator is appropriate to the situation. E.g.,</p><pre class="language-ocaml"><code>fail_unless (check_valid input) (error_of_fmt &quot;Invalid_input: %a&quot; pp input)</code></pre></div></div><h3 id="standard-errors"><a href="#standard-errors" class="anchor"></a>Standard errors</h3><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Exn"><a href="#extension-decl-Exn" class="anchor"></a><code><span><span class="keyword">type</span> <a href="#type-error">error</a> += </span></code><ol><li id="extension-Exn" class="def variant extension anchored"><a href="#extension-Exn" class="anchor"></a><code><span>| </span><span><span class="extension">Exn</span> <span class="keyword">of</span> exn</span></code></li></ol></div><div class="spec-doc"><p>Wrapped OCaml/Lwt exception</p></div></div><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Canceled"><a href="#extension-decl-Canceled" class="anchor"></a><code><span><span class="keyword">type</span> <a href="#type-error">error</a> += </span></code><ol><li id="extension-Canceled" class="def variant extension anchored"><a href="#extension-Canceled" class="anchor"></a><code><span>| </span><span><span class="extension">Canceled</span></span></code></li></ol></div><div class="spec-doc"><p>Cancelation</p></div></div><h3 id="catching-exceptions"><a href="#catching-exceptions" class="anchor"></a>Catching exceptions</h3><div class="odoc-spec"><div class="spec value anchored" id="val-protect"><a href="#val-protect" class="anchor"></a><code><span><span class="keyword">val</span> protect : 
  <span><span class="optlabel">?on_error</span>:<span>(<span><span><a href="#type-error">error</a> <a href="#type-trace">trace</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-tzresult">tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?canceler</span>:<span class="xref-unresolved">Lwt_canceler</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-tzresult">tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-tzresult">tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>protect</code> is a wrapper around <code>Lwt.catch</code> where the error handler operates over <code>trace</code> instead of <code>exn</code>. Besides, <code>protect ~on_error ~canceler ~f</code> may *cancel* <code>f</code> via a <code>Lwt_canceler.t</code>.</p><p>More precisely, <code>protect ~on_error ~canceler f</code> runs <code>f ()</code>. An Lwt failure triggered by <code>f ()</code> is wrapped into an <code>Exn</code>. If a <code>canceler</code> is given and <code>Lwt_canceler.cancellation canceler</code> is determined before <code>f ()</code>, a <code>Canceled</code> error is returned.</p><p>Errors are caught by <code>~on_error</code> (if given), otherwise the previous value is returned. An Lwt failure triggered by <code>~on_error</code> is wrapped into an <code>Exn</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-catch"><a href="#val-catch" class="anchor"></a><code><span><span class="keyword">val</span> catch : <span><span class="optlabel">?catch_only</span>:<span>(<span>exn <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-tzresult">tzresult</a></span></span></code></div><div class="spec-doc"><p><code>catch f</code> executes <code>f</code> within a try-with block and wraps exceptions within a <code>tzresult</code>. <code>catch f</code> is equivalent to <code>try Ok (f ()) with e -&gt; Error (error_of_exn e)</code>.</p><p>If <code>catch_only</code> is set, then only exceptions <code>e</code> such that <code>catch_only e</code> is <code>true</code> are caught.</p><p>Whether <code>catch_only</code> is set or not, this function never catches non-deterministic runtime exceptions of OCaml such as <code>Stack_overflow</code> and <code>Out_of_memory</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-catch_e"><a href="#val-catch_e" class="anchor"></a><code><span><span class="keyword">val</span> catch_e : <span><span class="optlabel">?catch_only</span>:<span>(<span>exn <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-tzresult">tzresult</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-tzresult">tzresult</a></span></span></code></div><div class="spec-doc"><p><code>catch_e</code> is like <a href="#val-catch"><code>catch</code></a> but when <code>f</code> returns a <code>tzresult</code>. I.e., <code>catch_e f</code> is equivalent to <code>try f () with e -&gt; Error (error_of_exn e)</code>.</p><p><code>catch_only</code> has the same use as with <a href="#val-catch"><code>catch</code></a>. The same restriction on catching non-deterministic runtime exceptions applies.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-catch_f"><a href="#val-catch_f" class="anchor"></a><code><span><span class="keyword">val</span> catch_f : 
  <span><span class="optlabel">?catch_only</span>:<span>(<span>exn <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>exn <span class="arrow">&#45;&gt;</span></span> <a href="#type-error">error</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-tzresult">tzresult</a></span></span></code></div><div class="spec-doc"><p><code>catch_f f handler</code> is equivalent to <code>map_error (catch f) handler</code>. In other words, it catches exceptions in <code>f ()</code> and either returns the value in an <code>Ok</code> or passes the exception to <code>handler</code> for the <code>Error</code>.</p><p>No attempt is made to catch the exceptions raised by <code>handler</code>.</p><p><code>catch_only</code> has the same use as with <a href="#val-catch"><code>catch</code></a>. The same restriction on catching non-deterministic runtime exceptions applies.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-catch_s"><a href="#val-catch_s" class="anchor"></a><code><span><span class="keyword">val</span> catch_s : 
  <span><span class="optlabel">?catch_only</span>:<span>(<span>exn <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-tzresult">tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>catch_s</code> is like <a href="#val-catch"><code>catch</code></a> but when <code>f</code> returns a promise. It is equivalent to</p><pre class="language-ocaml"><code>Lwt.try_bind f
  (fun v -&gt; Lwt.return (Ok v))
  (fun e -&gt; Lwt.return (Error (error_of_exn e)))</code></pre><p><code>catch_only</code> has the same use as with <a href="#val-catch"><code>catch</code></a>. The same restriction on catching non-deterministic runtime exceptions applies.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-catch_es"><a href="#val-catch_es" class="anchor"></a><code><span><span class="keyword">val</span> catch_es : 
  <span><span class="optlabel">?catch_only</span>:<span>(<span>exn <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-tzresult">tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-tzresult">tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>catch_es</code> is like <a href="#val-catch_s"><code>catch_s</code></a> but when <code>f</code> returns a promise of a <code>tzresult</code>. I.e., <code>catch_es f</code> is equivalent to <code>Lwt.catch f (fun e -&gt; Lwt.return_error (error_of_exn e))</code>.</p><p><code>catch_only</code> has the same use as with <a href="#val-catch"><code>catch</code></a>. The same restriction on catching non-deterministic runtime exceptions applies.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-protect_result"><a href="#val-protect_result" class="anchor"></a><code><span><span class="keyword">val</span> protect_result : 
  <span><span class="optlabel">?canceler</span>:<span class="xref-unresolved">Lwt_canceler</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, exn)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>protect_result</code> is similar to <a href="#val-protect"><code>protect</code></a> except that any non runtime exception raised by <code>Lwt.catch</code> is wrapped under an <code>Error</code> value.</p></div></div><h2 id="misc"><a href="#misc" class="anchor"></a>Misc</h2><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Timeout"><a href="#extension-decl-Timeout" class="anchor"></a><code><span><span class="keyword">type</span> <a href="#type-error">error</a> += </span></code><ol><li id="extension-Timeout" class="def variant extension anchored"><a href="#extension-Timeout" class="anchor"></a><code><span>| </span><span><span class="extension">Timeout</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_timeout"><a href="#val-with_timeout" class="anchor"></a><code><span><span class="keyword">val</span> with_timeout : 
  <span><span class="optlabel">?canceler</span>:<span class="xref-unresolved">Lwt_canceler</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <span class="xref-unresolved">Lwt</span>.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="xref-unresolved">Lwt_canceler</span>.t <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-tzresult">tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-tzresult">tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div></details></div><div class="odoc-spec"><div class="spec module anchored" id="module-Option_syntax"><a href="#module-Option_syntax" class="anchor"></a><code><span><span class="keyword">module</span> Option_syntax</span><span> =
  <a href="../../Tezos_lwt_result_stdlib/Lwtreslib/Bare/Monad/Option_syntax/index.html">Tezos_lwt_result_stdlib.Lwtreslib.Bare.Monad.Option_syntax</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Lwt_option_syntax"><a href="#module-Lwt_option_syntax" class="anchor"></a><code><span><span class="keyword">module</span> Lwt_option_syntax</span><span> =
  <a href="../../Tezos_lwt_result_stdlib/Lwtreslib/Bare/Monad/Lwt_option_syntax/index.html">Tezos_lwt_result_stdlib.Lwtreslib.Bare.Monad.Lwt_option_syntax</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Internal_event"><a href="#module-Internal_event" class="anchor"></a><code><span><span class="keyword">module</span> Internal_event</span><span> = <a href="../../Tezos_event_logging/Internal_event/index.html">Tezos_event_logging.Internal_event</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Filename"><a href="#module-Filename" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Filename/index.html">Filename</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Bounded"><a href="#module-Bounded" class="anchor"></a><code><span><span class="keyword">module</span> Bounded</span><span> = <a href="../Bounded/index.html">Bounded</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Empty"><a href="#module-Empty" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Empty/index.html">Empty</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The main purpose of this module is to be used with parametric types such as <code>('a, Empty.t) result</code>. Such type is actually isomorphic to <code>'a</code> (see <code>get_ok</code> function). This is useful if a module signature expects a generic <code>('a,'b) result</code> type, but for some instantiation, <code>'b</code> is actually empty. Here is a small example how such module can be used:</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Profiler"><a href="#module-Profiler" class="anchor"></a><code><span><span class="keyword">module</span> Profiler</span><span> = <a href="../Profiler/index.html">Profiler</a></span></code></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-PRINTABLE"><a href="#module-type-PRINTABLE" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-PRINTABLE/index.html">PRINTABLE</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-COMPARABLE"><a href="#module-type-COMPARABLE" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> COMPARABLE</span><span> = <a href="../../Tezos_stdlib/Compare/module-type-S/index.html">Compare.S</a></span></code></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-ENCODABLE"><a href="#module-type-ENCODABLE" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-ENCODABLE/index.html">ENCODABLE</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
