<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Host_funcs (octez-libs.Tezos_webassembly_interpreter.Host_funcs)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-libs</a> &#x00BB; <a href="../index.html">Tezos_webassembly_interpreter</a> &#x00BB; Host_funcs</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_webassembly_interpreter.Host_funcs</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-available_memories"><a href="#type-available_memories" class="anchor"></a><code><span><span class="keyword">type</span> available_memories</span><span> = </span></code><ol><li id="type-available_memories.No_memories_during_init" class="def variant constructor anchored"><a href="#type-available_memories.No_memories_during_init" class="anchor"></a><code><span>| </span><span><span class="constructor">No_memories_during_init</span></span></code></li><li id="type-available_memories.Available_memories" class="def variant constructor anchored"><a href="#type-available_memories.Available_memories" class="anchor"></a><code><span>| </span><span><span class="constructor">Available_memories</span> <span class="keyword">of</span> <span><a href="../Instance/index.html#type-memory_inst">Instance.memory_inst</a>
                        <a href="../../Tezos_lazy_containers/Lazy_vector/Int32Vector/index.html#type-t">Tezos_webassembly_interpreter.Instance.Vector.t</a></span></span></code></li></ol></div><div class="spec-doc"><p>Description of what memories are currently available.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-reveal_destination"><a href="#type-reveal_destination" class="anchor"></a><code><span><span class="keyword">type</span> reveal_destination</span><span> = </span><span>{</span></code><ol><li id="type-reveal_destination.base" class="def record field anchored"><a href="#type-reveal_destination.base" class="anchor"></a><code><span>base : int32;</span></code></li><li id="type-reveal_destination.max_bytes" class="def record field anchored"><a href="#type-reveal_destination.max_bytes" class="anchor"></a><code><span>max_bytes : int32;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-reveal"><a href="#type-reveal" class="anchor"></a><code><span><span class="keyword">type</span> reveal</span><span> = </span></code><ol><li id="type-reveal.Reveal_raw" class="def variant constructor anchored"><a href="#type-reveal.Reveal_raw" class="anchor"></a><code><span>| </span><span><span class="constructor">Reveal_raw</span> <span class="keyword">of</span> string</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The interpretation of the payload of <code>Reveal_raw</code> is delegated to the consumer of the interpreter. In the context of the WASM PVM, the contents is expected to be compatible with <code>Sc_rollup_reveal_hash.encoding</code>.</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ticks"><a href="#type-ticks" class="anchor"></a><code><span><span class="keyword">type</span> ticks</span><span> = <span class="xref-unresolved">Z</span>.t</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-reveal_func"><a href="#type-reveal_func" class="anchor"></a><code><span><span class="keyword">type</span> reveal_func</span><span> =
  <span><a href="#type-available_memories">available_memories</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Values/index.html#type-value">Values.value</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="#type-reveal">reveal</a> * <a href="#type-reveal_destination">reveal_destination</a>, int32)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-host_func"><a href="#type-host_func" class="anchor"></a><code><span><span class="keyword">type</span> host_func</span><span> = </span></code><ol><li id="type-host_func.Host_func" class="def variant constructor anchored"><a href="#type-host_func.Host_func" class="anchor"></a><code><span>| </span><span><span class="constructor">Host_func</span> <span class="keyword">of</span> <span><a href="../Input_buffer/index.html#type-t">Input_buffer.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Output_buffer/index.html#type-t">Output_buffer.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Durable_storage/index.html#type-t">Durable_storage.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-available_memories">available_memories</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Values/index.html#type-value">Values.value</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Durable_storage/index.html#type-t">Durable_storage.t</a> * <span><a href="../Values/index.html#type-value">Values.value</a> list</span> * <a href="#type-ticks">ticks</a>)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></li><li id="type-host_func.Reveal_func" class="def variant constructor anchored"><a href="#type-host_func.Reveal_func" class="anchor"></a><code><span>| </span><span><span class="constructor">Reveal_func</span> <span class="keyword">of</span> <a href="#type-reveal_func">reveal_func</a></span></code></li></ol></div><div class="spec-doc"><p>The type of a Host function implementation</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-builder"><a href="#type-builder" class="anchor"></a><code><span><span class="keyword">type</span> builder</span></code></div><div class="spec-doc"><p>An (immutable) host function registry builder that can be turned into a registry using <a href="#val-construct"><code>construct</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty_builder"><a href="#val-empty_builder" class="anchor"></a><code><span><span class="keyword">val</span> empty_builder : <a href="#type-builder">builder</a></span></code></div><div class="spec-doc"><p>A registry builder without any host functions.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_host_function"><a href="#val-with_host_function" class="anchor"></a><code><span><span class="keyword">val</span> with_host_function : 
  <span><span class="label">global_name</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">implem</span>:<a href="#type-host_func">host_func</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-builder">builder</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-builder">builder</a></span></code></div><div class="spec-doc"><p><code>with_host_function ~global_name ~implem</code> adds the implementation of a named host function in the builder. Will erase a previous implementation for the given name.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-registry"><a href="#type-registry" class="anchor"></a><code><span><span class="keyword">type</span> registry</span></code></div><div class="spec-doc"><p>A (mutable) host function registry</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-registry">registry</a></span></code></div><div class="spec-doc"><p><code>empty ()</code> creates a new empty registry</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-register"><a href="#val-register" class="anchor"></a><code><span><span class="keyword">val</span> register : <span><span class="label">global_name</span>:string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-host_func">host_func</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-registry">registry</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>register ~func_name implem</code> registers the implementation of a named host function in the global symbol table. Will erase a previous implementation for the given name.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lookup"><a href="#val-lookup" class="anchor"></a><code><span><span class="keyword">val</span> lookup : <span><span class="label">global_name</span>:string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-registry">registry</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-host_func">host_func</a></span></code></div><div class="spec-doc"><p><code>lookup ~func_name</code> looks for the implementation of a named host function in the global symbol table. May raise <code>Not_found</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-construct"><a href="#val-construct" class="anchor"></a><code><span><span class="keyword">val</span> construct : <span><a href="#type-builder">builder</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-registry">registry</a></span></code></div><div class="spec-doc"><p><code>construct builder</code> creates a new registry from the blueprint encoded in <code>builder</code>.</p></div></div></div></body></html>
