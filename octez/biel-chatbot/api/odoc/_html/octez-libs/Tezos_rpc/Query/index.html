<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Query (octez-libs.Tezos_rpc.Query)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-libs</a> &#x00BB; <a href="../index.html">Tezos_rpc</a> &#x00BB; Query</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_rpc.Query</span></code></h1></header><div class="odoc-content"><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">struct</span> <span class="keyword">include</span> <a href="../../Resto/Query/index.html">Resto.Query</a> <span class="keyword">end</span></span></code></summary><p>Query parameters are the key-value pairs that appear as <code>?key0=value0&amp;key1=value1&amp;..</code> at the end of the path in URIs/URLs.</p><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span><span> = <span><span class="type-var">'a</span> <a href="../../Resto/Query/index.html#type-t">Resto.Query.t</a></span></span></code></div><div class="spec-doc"><p>A type for representing query parameters.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-query"><a href="#type-query" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a query</span></span><span> = <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <span>unit <a href="#type-query">query</a></span></span></code></div><div class="spec-doc"><p><code>empty</code> is for services that expects no query parameters.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-field"><a href="#type-field" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 'b) field</span></span><span> = <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../../Resto/Query/index.html#type-field">Resto.Query.field</a></span></span></code></div><div class="spec-doc"><p>The type for key-value pairs that constitute a query. The first type parameter is for whole-query store and the second is for the type of value carried by the field.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-field"><a href="#val-field" class="anchor"></a><code><span><span class="keyword">val</span> field : 
  <span><span class="optlabel">?descr</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../../Resto/Arg/index.html#type-t">Resto.Arg.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'b</span>, <span class="type-var">'a</span>)</span> <a href="#type-field">field</a></span></span></code></div><div class="spec-doc"><p><code>field ?descr key arg default get</code> is a field for the query parameters, i.e., it describes one key-value pair.</p><p>The key is given by <code>key</code> and the value is parsed as specified in <code>arg</code> or, if absent from the URI suffix, <code>default</code>.</p><p>Finally, <code>get</code> is for retrieving the value from the whole-query store. More on the whole-query store below.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-opt_field"><a href="#val-opt_field" class="anchor"></a><code><span><span class="keyword">val</span> opt_field : 
  <span><span class="optlabel">?descr</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../../Resto/Arg/index.html#type-t">Resto.Arg.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'b</span>, <span><span class="type-var">'a</span> option</span>)</span> <a href="#type-field">field</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-flag"><a href="#val-flag" class="anchor"></a><code><span><span class="keyword">val</span> flag : <span><span class="optlabel">?descr</span>:string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'b</span>, bool)</span> <a href="#type-field">field</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-multi_field"><a href="#val-multi_field" class="anchor"></a><code><span><span class="keyword">val</span> multi_field : 
  <span><span class="optlabel">?descr</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../../Resto/Arg/index.html#type-t">Resto.Arg.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> list</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'b</span>, <span><span class="type-var">'a</span> list</span>)</span> <a href="#type-field">field</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-open_query"><a href="#type-open_query" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 'b, 'c) open_query</span></span><span> = <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>)</span> <a href="../../Resto/Query/index.html#type-open_query">Resto.Query.open_query</a></span></span></code></div><div class="spec-doc"><p>Queries are constructed by adding fields to an open query and sealing it into a query. This is done using the functions below. Typically, it is done as follow: <code>query c |+ field1 |+ field2 |&gt; seal</code></p><p>As the types require, you must provide the correct argument to the successive building steps. Here is an example: <code>
         query (fun timeout shade -&gt; (timeout, shade))
         |+ field &quot;timeout&quot; Arg.float 10. (fun (timeout, _) -&gt; timeout)
         |+ field &quot;shade&quot; Arg.string &quot;fuchsia&quot; (fun (_, shade) -&gt; shade)
         |&gt; seal
      </code></p><p>The initial <code>query</code> function takes a whole-query store builder (a function that assemble all the fields into a single store of values), and each field takes a function to recover the value from the whole-query store.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-query"><a href="#val-query" class="anchor"></a><code><span><span class="keyword">val</span> query : <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'b</span>)</span> <a href="#type-open_query">open_query</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(|+)"><a href="#val-(|+)" class="anchor"></a><code><span><span class="keyword">val</span> (|+) : 
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span><span class="type-var">'c</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'d</span>)</span> <a href="#type-open_query">open_query</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>)</span> <a href="#type-field">field</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'d</span>)</span> <a href="#type-open_query">open_query</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-seal"><a href="#val-seal" class="anchor"></a><code><span><span class="keyword">val</span> seal : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'a</span>)</span> <a href="#type-open_query">open_query</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div></details></div></div></body></html>
