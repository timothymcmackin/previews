<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Wasm_pvm_errors (octez-libs.Tezos_scoru_wasm.Wasm_pvm_errors)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-libs</a> &#x00BB; <a href="../index.html">Tezos_scoru_wasm</a> &#x00BB; Wasm_pvm_errors</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_scoru_wasm.Wasm_pvm_errors</span></code></h1><p>Representation of errors of the WASM PVM.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-messages_maximum_size"><a href="#val-messages_maximum_size" class="anchor"></a><code><span><span class="keyword">val</span> messages_maximum_size : int</span></code></div><div class="spec-doc"><p>Stuck messages are purely informational, but can be arbitrary long since they come from error messages from the interpreter or caught exceptions. To ensure they fit in an L1 operation, we truncate them after <code>messages_maximum_size</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-truncated_string"><a href="#type-truncated_string" class="anchor"></a><code><span><span class="keyword">type</span> truncated_string</span><span> = <span class="keyword">private</span> </span></code><ol><li id="type-truncated_string.Truncated" class="def variant constructor anchored"><a href="#type-truncated_string.Truncated" class="anchor"></a><code><span>| </span><span><span class="constructor">Truncated</span> <span class="keyword">of</span> string</span></code></li></ol></div><div class="spec-doc"><p>Representation of truncated strings of maximum length <code>messages_maximum_size</code>. Can only be built through <code>truncate_message</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-truncate_message"><a href="#val-truncate_message" class="anchor"></a><code><span><span class="keyword">val</span> truncate_message : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-truncated_string">truncated_string</a></span></code></div><div class="spec-doc"><p><code>truncate_message m</code> builds a truncated message out of a given message <code>m</code>.</p></div></div><div class="odoc-spec"><div class="spec type subst anchored" id="type-raw_exception"><a href="#type-raw_exception" class="anchor"></a><code><span><span class="keyword">type</span> raw_exception</span><span> := <a href="#type-truncated_string">truncated_string</a></span></code></div><div class="spec-doc"><p>Raw exception as printed by `Printexc.to_string`, possibly truncated.</p></div></div><div class="odoc-spec"><div class="spec type subst anchored" id="type-explanation"><a href="#type-explanation" class="anchor"></a><code><span><span class="keyword">type</span> explanation</span><span> := <a href="#type-truncated_string">truncated_string</a></span></code></div><div class="spec-doc"><p>Embedded message in the exception, possibly truncated.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-interpreter_error"><a href="#type-interpreter_error" class="anchor"></a><code><span><span class="keyword">type</span> interpreter_error</span><span> = </span><span>{</span></code><ol><li id="type-interpreter_error.raw_exception" class="def record field anchored"><a href="#type-interpreter_error.raw_exception" class="anchor"></a><code><span>raw_exception : <a href="#type-raw_exception">raw_exception</a>;</span></code></li><li id="type-interpreter_error.explanation" class="def record field anchored"><a href="#type-interpreter_error.explanation" class="anchor"></a><code><span>explanation : <span><a href="#type-explanation">explanation</a> option</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Wrapped exceptions from the interpreter. Both labels are truncated after <code>messages_maximum_size</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-fallback_cause"><a href="#type-fallback_cause" class="anchor"></a><code><span><span class="keyword">type</span> fallback_cause</span><span> = </span></code><ol><li id="type-fallback_cause.Decode_cause" class="def variant constructor anchored"><a href="#type-fallback_cause.Decode_cause" class="anchor"></a><code><span>| </span><span><span class="constructor">Decode_cause</span> <span class="keyword">of</span> <a href="#type-interpreter_error">interpreter_error</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Wraps exceptions raised during parsing.</p><span class="comment-delim">*)</span></div></li><li id="type-fallback_cause.Link_cause" class="def variant constructor anchored"><a href="#type-fallback_cause.Link_cause" class="anchor"></a><code><span>| </span><span><span class="constructor">Link_cause</span> <span class="keyword">of</span> <a href="#type-explanation">explanation</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Errors or possible raw exceptions raised during linking.</p><span class="comment-delim">*)</span></div></li><li id="type-fallback_cause.Init_cause" class="def variant constructor anchored"><a href="#type-fallback_cause.Init_cause" class="anchor"></a><code><span>| </span><span><span class="constructor">Init_cause</span> <span class="keyword">of</span> <a href="#type-interpreter_error">interpreter_error</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Wraps exceptions raised during initialization.</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span></code><ol><li id="type-t.Decode_error" class="def variant constructor anchored"><a href="#type-t.Decode_error" class="anchor"></a><code><span>| </span><span><span class="constructor">Decode_error</span> <span class="keyword">of</span> <a href="#type-interpreter_error">interpreter_error</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Wraps exceptions raised during parsing.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Link_error" class="def variant constructor anchored"><a href="#type-t.Link_error" class="anchor"></a><code><span>| </span><span><span class="constructor">Link_error</span> <span class="keyword">of</span> <a href="#type-explanation">explanation</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Errors or possible raw exceptions raised during linking.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Init_error" class="def variant constructor anchored"><a href="#type-t.Init_error" class="anchor"></a><code><span>| </span><span><span class="constructor">Init_error</span> <span class="keyword">of</span> <a href="#type-interpreter_error">interpreter_error</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Wraps exceptions raised during initialization.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Eval_error" class="def variant constructor anchored"><a href="#type-t.Eval_error" class="anchor"></a><code><span>| </span><span><span class="constructor">Eval_error</span> <span class="keyword">of</span> <a href="#type-interpreter_error">interpreter_error</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Wraps exceptions raised during evaluation.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Invalid_state" class="def variant constructor anchored"><a href="#type-t.Invalid_state" class="anchor"></a><code><span>| </span><span><span class="constructor">Invalid_state</span> <span class="keyword">of</span> <a href="#type-explanation">explanation</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Invalid state of the PVM (waiting for input during the parsing for example).</p><span class="comment-delim">*)</span></div></li><li id="type-t.Unknown_error" class="def variant constructor anchored"><a href="#type-t.Unknown_error" class="anchor"></a><code><span>| </span><span><span class="constructor">Unknown_error</span> <span class="keyword">of</span> <a href="#type-raw_exception">raw_exception</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Wraps unexpected exceptions raised by the interpreter.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Too_many_ticks" class="def variant constructor anchored"><a href="#type-t.Too_many_ticks" class="anchor"></a><code><span>| </span><span><span class="constructor">Too_many_ticks</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The maximum number of ticks was reached before the end of current top level call</p><span class="comment-delim">*)</span></div></li><li id="type-t.Too_many_reboots" class="def variant constructor anchored"><a href="#type-t.Too_many_reboots" class="anchor"></a><code><span>| </span><span><span class="constructor">Too_many_reboots</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The maximum number of reboots was reached before the next inputs</p><span class="comment-delim">*)</span></div></li><li id="type-t.No_fallback_kernel" class="def variant constructor anchored"><a href="#type-t.No_fallback_kernel" class="anchor"></a><code><span>| </span><span><span class="constructor">No_fallback_kernel</span> <span class="keyword">of</span> <a href="#type-fallback_cause">fallback_cause</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>No fallback kernel was available - recovering from invalid kernel module not possible.</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-invalid_state"><a href="#val-invalid_state" class="anchor"></a><code><span><span class="keyword">val</span> invalid_state : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-link_error"><a href="#val-link_error" class="anchor"></a><code><span><span class="keyword">val</span> link_error : 
  <span><span>[ `Item <span>| `Module</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">module_name</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">item_name</span>:string <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extract_interpreter_error"><a href="#val-extract_interpreter_error" class="anchor"></a><code><span><span class="keyword">val</span> extract_interpreter_error : 
  <span>exn <span class="arrow">&#45;&gt;</span></span>
  <span>[ <span>`Interpreter of <a href="#type-interpreter_error">interpreter_error</a></span> <span><span>| `Unknown</span> of <a href="#type-raw_exception">raw_exception</a></span> ]</span></span></code></div><div class="spec-doc"><p><code>extract_interpreter_error exn</code> returns the source of the exception (either a known interpreter error or an unknown one) and its encodable representation. <code>raw_exception</code> is truncated after <code>messages_maximum_size</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-encoding"><a href="#val-encoding" class="anchor"></a><code><span><span class="keyword">val</span> encoding : <span><a href="#type-t">t</a> <a href="../../Data_encoding/index.html#type-t">Tezos_base.TzPervasives.Data_encoding.t</a></span></span></code></div></div></div></body></html>
