<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Generic (octez-libs.Tezos_scoru_wasm.Wasm_vm_sig.Generic)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">octez-libs</a> &#x00BB; <a href="../../index.html">Tezos_scoru_wasm</a> &#x00BB; <a href="../index.html">Wasm_vm_sig</a> &#x00BB; Generic</nav><header class="odoc-preamble"><h1>Module type <code><span>Wasm_vm_sig.Generic</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-state"><a href="#type-state" class="anchor"></a><code><span><span class="keyword">type</span> state</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compute_step_many"><a href="#val-compute_step_many" class="anchor"></a><code><span><span class="keyword">val</span> compute_step_many : 
  <span><span class="optlabel">?reveal_builtins</span>:<a href="../../Builtins/index.html#type-reveals">Builtins.reveals</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?hooks</span>:<a href="../../Hooks/index.html#type-t">Hooks.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?write_debug</span>:<a href="../../Builtins/index.html#type-write_debug">Builtins.write_debug</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?stop_at_snapshot</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">wasm_entrypoint</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">max_steps</span>:int64 <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="#type-state">state</a> * int64)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>compute_step_many ~wasm_entrypoint ~max_steps pvm_state</code> forwards the VM by at most <code>max_step</code> compute tick, yielding if it reaches the maximum number of ticks for executing <code>wasm_entrypoint</code>.</p><p>If the VM is expecting input, it gets stuck. If the VM is already stuck, this function may raise an exception. It is more efficient than <code>compute_step</code> if it has to be called for more than one tick, but its resulting pvm_state will be stricly equivalent. Returns a tuple containing the number of executed ticks and the new pvm_state.</p><p>The <code>hooks</code> optional argument can be used to execute arbitrary code (hooks) to react to some execution events (see <a href="../../Hooks/index.html#type-t"><code>Hooks.t</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compute_step"><a href="#val-compute_step" class="anchor"></a><code><span><span class="keyword">val</span> compute_step : <span><span class="label">wasm_entrypoint</span>:string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-state">state</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>compute_step ~wasm_entrypoint pvm_state</code> forwards the VM by one compute tick. If the VM is expecting input, it gets stuck. If the VM is already stuck, this function may raise an exception.</p><p>It is strictly equivalent to <code>compute_step_many ~wasm_entrypoint ~max_step:1 pvm_state</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compute_step_with_debug"><a href="#val-compute_step_with_debug" class="anchor"></a><code><span><span class="keyword">val</span> compute_step_with_debug : 
  <span><span class="label">wasm_entrypoint</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">write_debug</span>:<a href="../../Builtins/index.html#type-write_debug">Builtins.write_debug</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-state">state</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>compute_step_with_debug ~wasm_entrypoint ~debug_flag pvm_state</code> is exactly <code>compute_step ~wasm_entrypoint</code> but it has the ability to enable the debugging host functions.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_input_step"><a href="#val-set_input_step" class="anchor"></a><code><span><span class="keyword">val</span> set_input_step : 
  <span><a href="../../Wasm_pvm_state/index.html#type-input_info">Wasm_pvm_state.input_info</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-state">state</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>set_input_step input_info message pvm_state</code> forwards the VM by one input tick. If the VM is not expecting input, it gets stuck. If the VM is already stuck, this function may raise an exception. Note at this point the function raises an exception if the VM is not expecting input.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reveal_step"><a href="#val-reveal_step" class="anchor"></a><code><span><span class="keyword">val</span> reveal_step : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-state">state</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>reveal_step reveal_data pvm_state</code> loads the <code>reveal_data</code> in the memory of module of the currently executed function.</p><p>If the VM does not expect any reveal data, this function raises an exception.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_info"><a href="#val-get_info" class="anchor"></a><code><span><span class="keyword">val</span> get_info : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Wasm_pvm_state/index.html#type-info">Wasm_pvm_state.info</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>get_info pvm_state</code> provides a typed view of the current machine state. Should not raise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_wasm_version"><a href="#val-get_wasm_version" class="anchor"></a><code><span><span class="keyword">val</span> get_wasm_version : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Wasm_pvm_state/index.html#type-version">Wasm_pvm_state.version</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>get_wasm_version pvm_state</code> returns the current version at which the WASM PVM operates.</p></div></div></div></body></html>
