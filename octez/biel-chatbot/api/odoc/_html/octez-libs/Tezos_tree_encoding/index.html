<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tezos_tree_encoding (octez-libs.Tezos_tree_encoding)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">octez-libs</a> &#x00BB; Tezos_tree_encoding</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_tree_encoding</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#types">Types</a></li><li><a href="#functions">Functions</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec exception anchored" id="exception-Incorrect_tree_type"><a href="#exception-Incorrect_tree_type" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Incorrect_tree_type</span></span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Uninitialized_self_ref"><a href="#exception-Uninitialized_self_ref" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Uninitialized_self_ref</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-key"><a href="#type-key" class="anchor"></a><code><span><span class="keyword">type</span> key</span><span> = <span>string <a href="../Tezos_base/TzPervasives/index.html#type-trace">Tezos_base.TzPervasives.trace</a></span></span></code></div><div class="spec-doc"><p>A key in the tree is a list of string.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Key_not_found"><a href="#exception-Key_not_found" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Key_not_found</span> <span class="keyword">of</span> <a href="#type-key">key</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-tree_instance"><a href="#type-tree_instance" class="anchor"></a><code><span><span class="keyword">type</span> tree_instance</span><span> = </span><span>..</span></code></div></div><h3 id="types"><a href="#types" class="anchor"></a>Types</h3><div class="odoc-spec"><div class="spec type anchored" id="type-case"><a href="#type-case" class="anchor"></a><code><span><span class="keyword">type</span> <span>('tag, 'a) case</span></span></code></div><div class="spec-doc"><p>Represents a partial encoder for a specific constructor of a sum-type.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div><div class="spec-doc"><p>Represents an encoder and a decoder.</p></div></div><h3 id="functions"><a href="#functions" class="anchor"></a>Functions</h3><div class="odoc-spec"><div class="spec value anchored" id="val-return"><a href="#val-return" class="anchor"></a><code><span><span class="keyword">val</span> return : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>return x</code> is an encoder that does nothing on encoding. On decoding it ignores the tree and returns <code>x</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-conv"><a href="#val-conv" class="anchor"></a><code><span><span class="keyword">val</span> conv : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>conv f g enc</code> transforms from one encoding to a different one using <code>f</code> for mapping the results decoded using <code>enc</code>, and <code>g</code> for mapping from the input.</p><p>It is the user's responsibility to ensure that <code>f</code> and <code>g</code> are inverses, that is, that <code>f (g x) = g (f x)</code> for all <code>x</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-conv_lwt"><a href="#val-conv_lwt" class="anchor"></a><code><span><span class="keyword">val</span> conv_lwt : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>conv_lwt f g enc</code> is the same as <code>conv</code> but where <code>f</code> and <code>g</code> are effectful (produce lwt promises).</p><p>It is the user's responsibility to ensure that <code>f</code> and <code>g</code> are inverses, that is, that <code>f (g x) = g (f x)</code> for all <code>x</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tup2"><a href="#val-tup2" class="anchor"></a><code><span><span class="keyword">val</span> tup2 : <span><span class="label">flatten</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>tup2 ~flatten e1 e2</code> combines <code>e1</code> and <code>e2</code> into an encoder for pairs. If <code>flatten</code> is true, the elements are encoded directly under the given tree, otherwise each element is wrapped under an index node to avoid colliding keys.</p><p>Example: <code>encode
        (tup2
          ~flatten:false
           (value [] Data_encoding.string)
           (value [] Data_encoding.string))
        ((&quot;A&quot;, &quot;B&quot;))</code></p><p>Gives a tree: &quot;A&quot; &quot;B&quot;</p><p>While <code>encode
          (tup2
              ~flatten:true
              (value [] Data_encoding.string)
              (value [] Data_encoding.string))
          ((&quot;A&quot;, &quot;B&quot;))</code></p><p>Gives a tree: <code>1</code> -&gt; &quot;A&quot; <code>2</code> -&gt; &quot;B&quot;</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tup3"><a href="#val-tup3" class="anchor"></a><code><span><span class="keyword">val</span> tup3 : <span><span class="label">flatten</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'c</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>tup3 ?flatten e1 e2 e3</code> combines the given encoders <code>e1 .. e3</code> into an encoder for a tuple of three elements.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tup4"><a href="#val-tup4" class="anchor"></a><code><span><span class="keyword">val</span> tup4 : 
  <span><span class="label">flatten</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'c</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'d</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span> * <span class="type-var">'d</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>tup4 ?flatten  e1 e2 e3 e4</code> combines the given encoders <code>e1 .. e4</code> into an encoder for a tuple of four elements.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tup5"><a href="#val-tup5" class="anchor"></a><code><span><span class="keyword">val</span> tup5 : 
  <span><span class="label">flatten</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'c</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'d</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'e</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span> * <span class="type-var">'d</span> * <span class="type-var">'e</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>tup5 ?flatten e1 e2 e3 e4 e5</code> combines the given encoders <code>e1 .. e5</code> into an encoder for a tuple of five elements.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tup6"><a href="#val-tup6" class="anchor"></a><code><span><span class="keyword">val</span> tup6 : 
  <span><span class="label">flatten</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'c</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'d</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'e</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span> * <span class="type-var">'d</span> * <span class="type-var">'e</span> * <span class="type-var">'f</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>tup6 ?flatten e1 e2 e3 e4 e5 e6</code> combines the given encoders <code>e1 .. e6</code> into an encoder for a tuple of six elements.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tup7"><a href="#val-tup7" class="anchor"></a><code><span><span class="keyword">val</span> tup7 : 
  <span><span class="label">flatten</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'c</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'d</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'e</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'g</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span> * <span class="type-var">'d</span> * <span class="type-var">'e</span> * <span class="type-var">'f</span> * <span class="type-var">'g</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>tup7 ?flatten e1 e2 e3 e4 e5 e6 e7</code> combines the given encoders <code>e1 .. e7</code> into an encoder for a tuple of seven elements.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tup8"><a href="#val-tup8" class="anchor"></a><code><span><span class="keyword">val</span> tup8 : 
  <span><span class="label">flatten</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'c</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'d</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'e</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'g</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'h</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span> * <span class="type-var">'d</span> * <span class="type-var">'e</span> * <span class="type-var">'f</span> * <span class="type-var">'g</span> * <span class="type-var">'h</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>tup8 ?flatten e1 e2 e3 e4 e5 e6 e7 e8</code> combines the given encoders <code>e1 .. e8</code> into an encoder for a tuple of eight elements.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tup9"><a href="#val-tup9" class="anchor"></a><code><span><span class="keyword">val</span> tup9 : 
  <span><span class="label">flatten</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'c</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'d</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'e</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'g</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'h</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'i</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span> * <span class="type-var">'d</span> * <span class="type-var">'e</span> * <span class="type-var">'f</span> * <span class="type-var">'g</span> * <span class="type-var">'h</span> * <span class="type-var">'i</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>tup9 ~flatten e1 e2 e3 e4 e5 e6 e7 e8 e9</code> combines the given encoders <code>e1 .. e9</code> into an encoder for a tuple of nine elements.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tup10"><a href="#val-tup10" class="anchor"></a><code><span><span class="keyword">val</span> tup10 : 
  <span><span class="label">flatten</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'c</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'d</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'e</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'g</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'h</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'i</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'j</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span> * <span class="type-var">'d</span> * <span class="type-var">'e</span> * <span class="type-var">'f</span> * <span class="type-var">'g</span> * <span class="type-var">'h</span> * <span class="type-var">'i</span> * <span class="type-var">'j</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>tup10 ~flatten e1 e2 e3 e4 e5 e6 e7 e8 e9 e10</code> combines the given encoders <code>e1 .. e10</code> into an encoder for a tuple of ten elements.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-raw"><a href="#val-raw" class="anchor"></a><code><span><span class="keyword">val</span> raw : <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span> <span>bytes <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>raw key</code> is an encoder for bytes under the given <code>key</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-value_option"><a href="#val-value_option" class="anchor"></a><code><span><span class="keyword">val</span> value_option : 
  <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../Data_encoding/index.html#type-t">Tezos_base.TzPervasives.Data_encoding.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> option</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>value_option key encoding</code> returns an encoder that uses <code>encoding</code> for encoding values, but does not fail if the <code>key</code> is absent.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-value"><a href="#val-value" class="anchor"></a><code><span><span class="keyword">val</span> value : 
  <span><span class="optlabel">?default</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../Data_encoding/index.html#type-t">Tezos_base.TzPervasives.Data_encoding.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>value ?default key enc</code> creates an encoder under the given <code>key</code> using the provided data-encoding <code>enc</code> for encoding/decoding values, and using <code>default</code> as a fallback when decoding in case the <code>key</code> is absent from the tree.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-scope"><a href="#val-scope" class="anchor"></a><code><span><span class="keyword">val</span> scope : <span><a href="#type-key">key</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>scope key enc</code> moves the given encoder <code>enc</code> to encode values under a branch <code>key</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-case"><a href="#val-case" class="anchor"></a><code><span><span class="keyword">val</span> case : <span><span class="type-var">'tag</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'tag</span>, <span class="type-var">'a</span>)</span> <a href="#type-case">case</a></span></span></code></div><div class="spec-doc"><p><code>case tag enc inj proj</code> returns a partial encoder that represents a case in a sum-type. The encoder hides the (existentially bound) type of the parameter to the specific case, provided converter functions <code>inj</code> and <code>proj</code> for the base encoder <code>enc</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-case_lwt"><a href="#val-case_lwt" class="anchor"></a><code><span><span class="keyword">val</span> case_lwt : 
  <span><span class="type-var">'tag</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <span class="xref-unresolved">Lwt</span>.t</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'tag</span>, <span class="type-var">'a</span>)</span> <a href="#type-case">case</a></span></span></code></div><div class="spec-doc"><p><code>case_lwt tag enc inj proj</code> same as <code>case tag enc inj proj</code> but where <code>inj</code> and <code>proj</code> returns in lwt values.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tagged_union"><a href="#val-tagged_union" class="anchor"></a><code><span><span class="keyword">val</span> tagged_union : 
  <span><span class="optlabel">?default</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'tag</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span>(<span class="type-var">'tag</span>, <span class="type-var">'a</span>)</span> <a href="#type-case">case</a></span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>tagged_union tag_enc cases</code> returns an encoder that use <code>tag_enc</code> for encoding the value of a field <code>tag</code>. The encoder searches through the list of cases for a matching branch. When a matching branch is found, it uses its embedded encoder for the value. This function is used for constructing encoders for sum-types.</p><p>The <code>default</code> labeled argument can be provided to have a fallback in case the value is missing from the tree.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-option"><a href="#val-option" class="anchor"></a><code><span><span class="keyword">val</span> option : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> option</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>option enc</code> lifts the given encoding <code>enc</code> to one that can encode optional values.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-delayed"><a href="#val-delayed" class="anchor"></a><code><span><span class="keyword">val</span> delayed : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>delayed f</code> produces a tree encoder/decoder that delays evaluation of <code>f ()</code> until the encoder or decoder is actually needed. This is required to allow for directly recursive encoders/decoders.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-either"><a href="#val-either" class="anchor"></a><code><span><span class="keyword">val</span> either : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <span class="xref-unresolved">Stdlib</span>.Either.t</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>either enc_a enc_b</code> returns an encoder where <code>enc_a</code> is used for the left case of <code>Either.t</code>, and <code>enc_b</code> for the <code>Right</code> case.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-TREE"><a href="#module-type-TREE" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-TREE/index.html">TREE</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-wrapped_tree"><a href="#type-wrapped_tree" class="anchor"></a><code><span><span class="keyword">type</span> wrapped_tree</span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Wrapped"><a href="#module-Wrapped" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Wrapped/index.html">Wrapped</a></span><span> : <a href="module-type-TREE/index.html">TREE</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="module-type-TREE/index.html#type-tree">tree</a> = <a href="#type-wrapped_tree">wrapped_tree</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wrapped_tree"><a href="#val-wrapped_tree" class="anchor"></a><code><span><span class="keyword">val</span> wrapped_tree : <span><a href="#type-wrapped_tree">wrapped_tree</a> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>wrapped_tree</code> is a tree encoding for wrapped tree.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Runner"><a href="#module-Runner" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Runner/index.html">Runner</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Encodings_util"><a href="#module-Encodings_util" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Encodings_util/index.html">Encodings_util</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Lazy_map_encoding"><a href="#module-Lazy_map_encoding" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Lazy_map_encoding/index.html">Lazy_map_encoding</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Lazy_vector_encoding"><a href="#module-Lazy_vector_encoding" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Lazy_vector_encoding/index.html">Lazy_vector_encoding</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-CBV_encoding"><a href="#module-CBV_encoding" class="anchor"></a><code><span><span class="keyword">module</span> <a href="CBV_encoding/index.html">CBV_encoding</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
