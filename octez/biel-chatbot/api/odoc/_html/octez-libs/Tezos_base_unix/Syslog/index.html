<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Syslog (octez-libs.Tezos_base_unix.Syslog)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-libs</a> &#x00BB; <a href="../index.html">Tezos_base_unix</a> &#x00BB; Syslog</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_base_unix.Syslog</span></code></h1><p>Syslog primitives based on the <code>syslog(3)</code> function.</p><p>See <a href="https://www.rfc-editor.org/rfc/rfc3164">RFC 3164</a> for more information.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-facility"><a href="#type-facility" class="anchor"></a><code><span><span class="keyword">type</span> facility</span><span> = </span></code><ol><li id="type-facility.Auth" class="def variant constructor anchored"><a href="#type-facility.Auth" class="anchor"></a><code><span>| </span><span><span class="constructor">Auth</span></span></code></li><li id="type-facility.Authpriv" class="def variant constructor anchored"><a href="#type-facility.Authpriv" class="anchor"></a><code><span>| </span><span><span class="constructor">Authpriv</span></span></code></li><li id="type-facility.Cron" class="def variant constructor anchored"><a href="#type-facility.Cron" class="anchor"></a><code><span>| </span><span><span class="constructor">Cron</span></span></code></li><li id="type-facility.Daemon" class="def variant constructor anchored"><a href="#type-facility.Daemon" class="anchor"></a><code><span>| </span><span><span class="constructor">Daemon</span></span></code></li><li id="type-facility.FTP" class="def variant constructor anchored"><a href="#type-facility.FTP" class="anchor"></a><code><span>| </span><span><span class="constructor">FTP</span></span></code></li><li id="type-facility.Kernel" class="def variant constructor anchored"><a href="#type-facility.Kernel" class="anchor"></a><code><span>| </span><span><span class="constructor">Kernel</span></span></code></li><li id="type-facility.Local0" class="def variant constructor anchored"><a href="#type-facility.Local0" class="anchor"></a><code><span>| </span><span><span class="constructor">Local0</span></span></code></li><li id="type-facility.Local1" class="def variant constructor anchored"><a href="#type-facility.Local1" class="anchor"></a><code><span>| </span><span><span class="constructor">Local1</span></span></code></li><li id="type-facility.Local2" class="def variant constructor anchored"><a href="#type-facility.Local2" class="anchor"></a><code><span>| </span><span><span class="constructor">Local2</span></span></code></li><li id="type-facility.Local3" class="def variant constructor anchored"><a href="#type-facility.Local3" class="anchor"></a><code><span>| </span><span><span class="constructor">Local3</span></span></code></li><li id="type-facility.Local4" class="def variant constructor anchored"><a href="#type-facility.Local4" class="anchor"></a><code><span>| </span><span><span class="constructor">Local4</span></span></code></li><li id="type-facility.Local5" class="def variant constructor anchored"><a href="#type-facility.Local5" class="anchor"></a><code><span>| </span><span><span class="constructor">Local5</span></span></code></li><li id="type-facility.Local6" class="def variant constructor anchored"><a href="#type-facility.Local6" class="anchor"></a><code><span>| </span><span><span class="constructor">Local6</span></span></code></li><li id="type-facility.Local7" class="def variant constructor anchored"><a href="#type-facility.Local7" class="anchor"></a><code><span>| </span><span><span class="constructor">Local7</span></span></code></li><li id="type-facility.LPR" class="def variant constructor anchored"><a href="#type-facility.LPR" class="anchor"></a><code><span>| </span><span><span class="constructor">LPR</span></span></code></li><li id="type-facility.Mail" class="def variant constructor anchored"><a href="#type-facility.Mail" class="anchor"></a><code><span>| </span><span><span class="constructor">Mail</span></span></code></li><li id="type-facility.News" class="def variant constructor anchored"><a href="#type-facility.News" class="anchor"></a><code><span>| </span><span><span class="constructor">News</span></span></code></li><li id="type-facility.Syslog" class="def variant constructor anchored"><a href="#type-facility.Syslog" class="anchor"></a><code><span>| </span><span><span class="constructor">Syslog</span></span></code></li><li id="type-facility.User" class="def variant constructor anchored"><a href="#type-facility.User" class="anchor"></a><code><span>| </span><span><span class="constructor">User</span></span></code></li><li id="type-facility.UUCP" class="def variant constructor anchored"><a href="#type-facility.UUCP" class="anchor"></a><code><span>| </span><span><span class="constructor">UUCP</span></span></code></li><li id="type-facility.NTP" class="def variant constructor anchored"><a href="#type-facility.NTP" class="anchor"></a><code><span>| </span><span><span class="constructor">NTP</span></span></code></li><li id="type-facility.Security" class="def variant constructor anchored"><a href="#type-facility.Security" class="anchor"></a><code><span>| </span><span><span class="constructor">Security</span></span></code></li><li id="type-facility.Console" class="def variant constructor anchored"><a href="#type-facility.Console" class="anchor"></a><code><span>| </span><span><span class="constructor">Console</span></span></code></li></ol></div><div class="spec-doc"><p>The various kinds of syslog output.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-facility_to_string"><a href="#val-facility_to_string" class="anchor"></a><code><span><span class="keyword">val</span> facility_to_string : <span><a href="#type-facility">facility</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-facility_of_string_opt"><a href="#val-facility_of_string_opt" class="anchor"></a><code><span><span class="keyword">val</span> facility_of_string_opt : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-facility">facility</a> option</span></span></code></div><div class="spec-doc"><p>Converts from string. Possible string values are: <code>&quot;auth&quot;, &quot;authpriv&quot;, &quot;cron&quot;, &quot;daemon&quot;, &quot;ftp&quot;, &quot;kernel&quot;, &quot;local0&quot;, &quot;local1&quot;,
    &quot;local2&quot;, &quot;local3&quot;, &quot;local4&quot;, &quot;local5&quot;, &quot;local6&quot;, &quot;local7&quot;, &quot;lpr&quot;, &quot;mail&quot;,
    &quot;news&quot;, &quot;syslog&quot;, &quot;user&quot;, &quot;uucp&quot;, &quot;ntp&quot;, &quot;security&quot;, &quot;console&quot;</code></p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Syslog_error"><a href="#exception-Syslog_error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Syslog_error</span> <span class="keyword">of</span> string</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>{</span></code><ol><li id="type-t.fd" class="def record field anchored"><a href="#type-t.fd" class="anchor"></a><code><span><span class="keyword">mutable</span> fd : <span class="xref-unresolved">Lwt_unix</span>.file_descr;</span></code></li><li id="type-t.tag" class="def record field anchored"><a href="#type-t.tag" class="anchor"></a><code><span>tag : string;</span></code></li><li id="type-t.facility" class="def record field anchored"><a href="#type-t.facility" class="anchor"></a><code><span>facility : <a href="#type-facility">facility</a>;</span></code></li><li id="type-t.with_pid" class="def record field anchored"><a href="#type-t.with_pid" class="anchor"></a><code><span>with_pid : bool;</span></code></li><li id="type-t.path" class="def record field anchored"><a href="#type-t.path" class="anchor"></a><code><span>path : string;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>A syslog logger</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : 
  <span><span class="label">tag</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?path</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?with_pid</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-facility">facility</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Creates a syslog logger.</p><p><code>create tag ?path ?with_pid facility</code> opens the socket or the file <code>path</code> and returns a syslog logger. Messages logged through this logger with <a href="#val-syslog"><code>syslog</code></a> are prepended with <code>tag</code> and send to <code>facility</code>.</p><ul><li><code>path</code> default value is, if exists, in this order: <code>&quot;dev/log&quot;</code>, <code>&quot;/var/run/syslog&quot;</code>, <code>&quot;&quot;</code></li></ul><ul><li>If <code>with_pid</code> is <code>true</code> (the default <code>false</code>), include the caller's PID in each message.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-format_message"><a href="#val-format_message" class="anchor"></a><code><span><span class="keyword">val</span> format_message : 
  <span><span class="optlabel">?max_buflen</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?timestamp</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">tag</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">facility</span>:<a href="#type-facility">facility</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">with_pid</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_event_logging/Internal_event/index.html#type-level">Tezos_event_logging.Internal_event.level</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  string</span></code></div><div class="spec-doc"><p><code>format_message ?max_buflen logger level message</code> formats the given <code>message</code> depending on <code>logger</code> and <code>level</code></p><ul><li><code>max_buflen</code> is the maximum length of the complete message after which text is replaced by <code>...</code>. Default to <code>1024</code> due to original standard.</li><li><code>timestamp</code> is the timestamp to display. Uses <code>Unix.time</code> if not provided.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-syslog"><a href="#val-syslog" class="anchor"></a><code><span><span class="keyword">val</span> syslog : 
  <span><span class="optlabel">?max_buflen</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?timestamp</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_event_logging/Internal_event/index.html#type-level">Tezos_event_logging.Internal_event.level</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>syslog ?max_buflen logger level message</code> formats <code>message</code> (using <code>format_msg</code>) and sends the result to the <code>logger</code> file descriptor with the appropriate <code>level</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-close"><a href="#val-close" class="anchor"></a><code><span><span class="keyword">val</span> close : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>close logger</code> closes the logger's file-descriptor. The logger cannot be used after a call to this function. A call to <code>syslog logger ...</code> would result in a raised exception of kind <code>Unix.Unix_error</code>.</p></div></div></div></body></html>
