<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Block_header_repr (tezos-protocol-019-PtParisB.Tezos_raw_protocol_019_PtParisB.Block_header_repr)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-protocol-019-PtParisB</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_019_PtParisB</a> &#x00BB; Block_header_repr</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_019_PtParisB.Block_header_repr</span></code></h1><p>Representation of block headers.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-contents"><a href="#type-contents" class="anchor"></a><code><span><span class="keyword">type</span> contents</span><span> = </span><span>{</span></code><ol><li id="type-contents.payload_hash" class="def record field anchored"><a href="#type-contents.payload_hash" class="anchor"></a><code><span>payload_hash : <a href="../Block_payload_hash/index.html#type-t">Block_payload_hash.t</a>;</span></code></li><li id="type-contents.payload_round" class="def record field anchored"><a href="#type-contents.payload_round" class="anchor"></a><code><span>payload_round : <a href="../Round_repr/index.html#type-t">Round_repr.t</a>;</span></code></li><li id="type-contents.seed_nonce_hash" class="def record field anchored"><a href="#type-contents.seed_nonce_hash" class="anchor"></a><code><span>seed_nonce_hash : <span><a href="../Nonce_hash/index.html#type-t">Nonce_hash.t</a> option</span>;</span></code></li><li id="type-contents.proof_of_work_nonce" class="def record field anchored"><a href="#type-contents.proof_of_work_nonce" class="anchor"></a><code><span>proof_of_work_nonce : bytes;</span></code></li><li id="type-contents.per_block_votes" class="def record field anchored"><a href="#type-contents.per_block_votes" class="anchor"></a><code><span>per_block_votes : <a href="../Per_block_votes_repr/index.html#type-per_block_votes">Per_block_votes_repr.per_block_votes</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-protocol_data"><a href="#type-protocol_data" class="anchor"></a><code><span><span class="keyword">type</span> protocol_data</span><span> = </span><span>{</span></code><ol><li id="type-protocol_data.contents" class="def record field anchored"><a href="#type-protocol_data.contents" class="anchor"></a><code><span>contents : <a href="#type-contents">contents</a>;</span></code></li><li id="type-protocol_data.signature" class="def record field anchored"><a href="#type-protocol_data.signature" class="anchor"></a><code><span>signature : <a href="../../Tezos_protocol_environment_019_PtParisB/Signature/index.html#type-t">Tezos_protocol_environment_019_PtParisB.Signature.t</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>{</span></code><ol><li id="type-t.shell" class="def record field anchored"><a href="#type-t.shell" class="anchor"></a><code><span>shell : <a href="../../Tezos_protocol_environment_019_PtParisB/Block_header/index.html#type-shell_header">Tezos_protocol_environment_019_PtParisB.Block_header.shell_header</a>;</span></code></li><li id="type-t.protocol_data" class="def record field anchored"><a href="#type-t.protocol_data" class="anchor"></a><code><span>protocol_data : <a href="#type-protocol_data">protocol_data</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-block_header"><a href="#type-block_header" class="anchor"></a><code><span><span class="keyword">type</span> block_header</span><span> = <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-raw"><a href="#type-raw" class="anchor"></a><code><span><span class="keyword">type</span> raw</span><span> = <a href="../../Tezos_protocol_environment_019_PtParisB/Block_header/index.html#type-t">Tezos_protocol_environment_019_PtParisB.Block_header.t</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-shell_header"><a href="#type-shell_header" class="anchor"></a><code><span><span class="keyword">type</span> shell_header</span><span> =
  <a href="../../Tezos_protocol_environment_019_PtParisB/Block_header/index.html#type-shell_header">Tezos_protocol_environment_019_PtParisB.Block_header.shell_header</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-raw"><a href="#val-raw" class="anchor"></a><code><span><span class="keyword">val</span> raw : <span><a href="#type-block_header">block_header</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-raw">raw</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-encoding"><a href="#val-encoding" class="anchor"></a><code><span><span class="keyword">val</span> encoding : 
  <span><a href="#type-block_header">block_header</a> <a href="../../Tezos_protocol_environment_019_PtParisB/Data_encoding/index.html#type-encoding">Tezos_protocol_environment_019_PtParisB.Data_encoding.encoding</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-raw_encoding"><a href="#val-raw_encoding" class="anchor"></a><code><span><span class="keyword">val</span> raw_encoding : <span><a href="#type-raw">raw</a> <a href="../../Tezos_protocol_environment_019_PtParisB/Data_encoding/index.html#type-t">Tezos_protocol_environment_019_PtParisB.Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-contents_encoding"><a href="#val-contents_encoding" class="anchor"></a><code><span><span class="keyword">val</span> contents_encoding : 
  <span><a href="#type-contents">contents</a> <a href="../../Tezos_protocol_environment_019_PtParisB/Data_encoding/index.html#type-t">Tezos_protocol_environment_019_PtParisB.Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unsigned_encoding"><a href="#val-unsigned_encoding" class="anchor"></a><code><span><span class="keyword">val</span> unsigned_encoding : 
  <span><span>(<a href="../../Tezos_protocol_environment_019_PtParisB/Block_header/index.html#type-shell_header">Tezos_protocol_environment_019_PtParisB.Block_header.shell_header</a> * <a href="#type-contents">contents</a>)</span>
    <a href="../../Tezos_protocol_environment_019_PtParisB/Data_encoding/index.html#type-t">Tezos_protocol_environment_019_PtParisB.Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-protocol_data_encoding"><a href="#val-protocol_data_encoding" class="anchor"></a><code><span><span class="keyword">val</span> protocol_data_encoding : 
  <span><a href="#type-protocol_data">protocol_data</a> <a href="../../Tezos_protocol_environment_019_PtParisB/Data_encoding/index.html#type-encoding">Tezos_protocol_environment_019_PtParisB.Data_encoding.encoding</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-shell_header_encoding"><a href="#val-shell_header_encoding" class="anchor"></a><code><span><span class="keyword">val</span> shell_header_encoding : 
  <span><a href="#type-shell_header">shell_header</a> <a href="../../Tezos_protocol_environment_019_PtParisB/Data_encoding/index.html#type-encoding">Tezos_protocol_environment_019_PtParisB.Data_encoding.encoding</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-block_watermark"><a href="#type-block_watermark" class="anchor"></a><code><span><span class="keyword">type</span> block_watermark</span><span> = </span></code><ol><li id="type-block_watermark.Block_header" class="def variant constructor anchored"><a href="#type-block_watermark.Block_header" class="anchor"></a><code><span>| </span><span><span class="constructor">Block_header</span> <span class="keyword">of</span> <a href="../../Tezos_protocol_environment_019_PtParisB/Chain_id/index.html#type-t">Tezos_protocol_environment_019_PtParisB.Chain_id.t</a></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_watermark"><a href="#val-to_watermark" class="anchor"></a><code><span><span class="keyword">val</span> to_watermark : 
  <span><a href="#type-block_watermark">block_watermark</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../Tezos_protocol_environment_019_PtParisB/Signature/index.html#type-watermark">Tezos_protocol_environment_019_PtParisB.Signature.watermark</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_watermark"><a href="#val-of_watermark" class="anchor"></a><code><span><span class="keyword">val</span> of_watermark : 
  <span><a href="../../Tezos_protocol_environment_019_PtParisB/Signature/index.html#type-watermark">Tezos_protocol_environment_019_PtParisB.Signature.watermark</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-block_watermark">block_watermark</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_header_length"><a href="#val-max_header_length" class="anchor"></a><code><span><span class="keyword">val</span> max_header_length : int</span></code></div><div class="spec-doc"><p>The maximum size of block headers in bytes</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hash"><a href="#val-hash" class="anchor"></a><code><span><span class="keyword">val</span> hash : <span><a href="#type-block_header">block_header</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Tezos_protocol_environment_019_PtParisB/Block_hash/index.html#type-t">Tezos_protocol_environment_019_PtParisB.Block_hash.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hash_raw"><a href="#val-hash_raw" class="anchor"></a><code><span><span class="keyword">val</span> hash_raw : <span><a href="#type-raw">raw</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Tezos_protocol_environment_019_PtParisB/Block_hash/index.html#type-t">Tezos_protocol_environment_019_PtParisB.Block_hash.t</a></span></code></div></div><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Invalid_stamp"><a href="#extension-decl-Invalid_stamp" class="anchor"></a><code><span><span class="keyword">type</span> <a href="../../Tezos_protocol_environment_019_PtParisB/Error_monad/index.html#type-error">Tezos_protocol_environment_019_PtParisB.Error_monad.error</a> += </span></code><ol><li id="extension-Invalid_stamp" class="def variant extension anchored"><a href="#extension-Invalid_stamp" class="anchor"></a><code><span>| </span><span><span class="extension">Invalid_stamp</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Proof_of_work"><a href="#module-Proof_of_work" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Proof_of_work/index.html">Proof_of_work</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Checks if the header that would be built from the given components is valid for the given difficulty. The signature is not passed as it is does not impact the proof-of-work stamp. The stamp is checked on the hash of a block header whose signature has been zeroed-out.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_timestamp"><a href="#val-check_timestamp" class="anchor"></a><code><span><span class="keyword">val</span> check_timestamp : 
  <span><a href="../Round_repr/Durations/index.html#type-t">Round_repr.Durations.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">timestamp</span>:<a href="../../Tezos_protocol_environment_019_PtParisB/Time/index.html#type-t">Tezos_protocol_environment_019_PtParisB.Time.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">round</span>:<a href="../Round_repr/index.html#type-t">Round_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">predecessor_timestamp</span>:<a href="../../Tezos_protocol_environment_019_PtParisB/Time/index.html#type-t">Tezos_protocol_environment_019_PtParisB.Time.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">predecessor_round</span>:<a href="../Round_repr/index.html#type-t">Round_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../../Tezos_protocol_environment_019_PtParisB/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_019_PtParisB.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p><code>check_timestamp ctxt timestamp round predecessor_timestamp
   predecessor_round</code> verifies that the block's timestamp and round are coherent with the predecessor block's timestamp and round. Fails with an error if that is not the case.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_signature"><a href="#val-check_signature" class="anchor"></a><code><span><span class="keyword">val</span> check_signature : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_protocol_environment_019_PtParisB/Chain_id/index.html#type-t">Tezos_protocol_environment_019_PtParisB.Chain_id.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_protocol_environment_019_PtParisB/Signature/Public_key/index.html#type-t">Tezos_protocol_environment_019_PtParisB.Signature.Public_key.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../../Tezos_protocol_environment_019_PtParisB/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_019_PtParisB.Error_monad.tzresult</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-begin_validate_block_header"><a href="#val-begin_validate_block_header" class="anchor"></a><code><span><span class="keyword">val</span> begin_validate_block_header : 
  <span><span class="label">block_header</span>:<a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">chain_id</span>:<a href="../../Tezos_protocol_environment_019_PtParisB/Chain_id/index.html#type-t">Tezos_protocol_environment_019_PtParisB.Chain_id.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">predecessor_timestamp</span>:<a href="../../Tezos_protocol_environment_019_PtParisB/Time/index.html#type-t">Tezos_protocol_environment_019_PtParisB.Time.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">predecessor_round</span>:<a href="../Round_repr/index.html#type-t">Round_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">fitness</span>:<a href="../Fitness_repr/index.html#type-t">Fitness_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">timestamp</span>:<a href="../../Tezos_protocol_environment_019_PtParisB/Time/index.html#type-t">Tezos_protocol_environment_019_PtParisB.Time.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">delegate_pk</span>:<a href="../../Tezos_protocol_environment_019_PtParisB/Signature/index.html#type-public_key">Tezos_protocol_environment_019_PtParisB.Signature.public_key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">round_durations</span>:<a href="../Round_repr/Durations/index.html#type-t">Round_repr.Durations.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">proof_of_work_threshold</span>:int64 <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">expected_commitment</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../../Tezos_protocol_environment_019_PtParisB/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_019_PtParisB.Error_monad.tzresult</a></span></span></code></div></div></div></body></html>
