<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Benchmark (tezos-benchmark.Tezos_benchmark.Benchmark)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-benchmark</a> &#x00BB; <a href="../index.html">Tezos_benchmark</a> &#x00BB; Benchmark</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_benchmark.Benchmark</span></code></h1><p>This module defines several signatures to create a benchmark. * The most generic is <code>S</code>; it provides a rather complete control on benchmark creation. * <code>Simple</code> and <code>Simple_with_num</code> can be used to ease benchmark creation, with simpler parameters. Registration functions in <a href="../Registration/index.html"><code>Registration</code></a> will convert these simple interfaces back to <code>S</code>. * All the common parameters for these signatures are declared in <code>Benchmark_base</code>.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-group"><a href="#type-group" class="anchor"></a><code><span><span class="keyword">type</span> group</span><span> = </span></code><ol><li id="type-group.Standalone" class="def variant constructor anchored"><a href="#type-group.Standalone" class="anchor"></a><code><span>| </span><span><span class="constructor">Standalone</span></span></code></li><li id="type-group.Group" class="def variant constructor anchored"><a href="#type-group.Group" class="anchor"></a><code><span>| </span><span><span class="constructor">Group</span> <span class="keyword">of</span> string</span></code></li><li id="type-group.Generic" class="def variant constructor anchored"><a href="#type-group.Generic" class="anchor"></a><code><span>| </span><span><span class="constructor">Generic</span></span></code></li></ol></div><div class="spec-doc"><p>Some benchmarks depend on others, and some are for generic parameters that most benchmarks depend on. We need this information in order to correctly infer the values of parameters after a benchmark run; the user provides it with a group.</p><p>* <code>Standalone</code>: benchmarks that don't depend on others (except generic ones). This is the value to use if you're not sure whether you should group your benchmark. * <code>Group</code>: benchmarks that belong to the given inference group. Note that setting a benchmark with a group that is referenced only in this benchmark will produce the same inference results as with <code>Standalone</code>. * <code>Generic</code>: for generic parameters only.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-purpose"><a href="#type-purpose" class="anchor"></a><code><span><span class="keyword">type</span> purpose</span><span> = </span></code><ol><li id="type-purpose.Other_purpose" class="def variant constructor anchored"><a href="#type-purpose.Other_purpose" class="anchor"></a><code><span>| </span><span><span class="constructor">Other_purpose</span> <span class="keyword">of</span> string</span></code></li><li id="type-purpose.Generate_code" class="def variant constructor anchored"><a href="#type-purpose.Generate_code" class="anchor"></a><code><span>| </span><span><span class="constructor">Generate_code</span> <span class="keyword">of</span> string</span></code></li></ol></div><div class="spec-doc"><p>Describes the purpose of the benchmark. * <code>Generate_code of destination</code>: generates code at the given <code>destination</code> file, prefixed by &quot;src/proto_alpha/lib_protocol/&quot; and suffixed by &quot;_costs_generated.ml&quot;. * <code>Other_purpose of purpose</code>: any other purpose. The goal is to explain why the function is benchmarked since it does not produce a cost function.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-parameters"><a href="#type-parameters" class="anchor"></a><code><span><span class="keyword">type</span> <span>'config parameters</span></span><span> = </span><span>{</span></code><ol><li id="type-parameters.bench_number" class="def record field anchored"><a href="#type-parameters.bench_number" class="anchor"></a><code><span>bench_number : int;</span></code></li><li id="type-parameters.config" class="def record field anchored"><a href="#type-parameters.config" class="anchor"></a><code><span>config : <span class="type-var">'config</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Benchmark parameters.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-Benchmark_base"><a href="#module-type-Benchmark_base" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Benchmark_base/index.html">Benchmark_base</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Common declarations used by the different module types of benchmarks</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-Simple"><a href="#module-type-Simple" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Simple/index.html">Simple</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A simplification of <code>S</code> below, when only one model is defined and no particular process is needed to generate benchmarks.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-Simple_with_num"><a href="#module-type-Simple_with_num" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Simple_with_num/index.html">Simple_with_num</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A simplification of <code>S</code> below, when only one model is defined.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-S"><a href="#module-type-S" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S/index.html">S</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The module type of benchmarks</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <span>(<span class="keyword">module</span> <a href="module-type-S/index.html">S</a>)</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-simple"><a href="#type-simple" class="anchor"></a><code><span><span class="keyword">type</span> simple</span><span> = <span>(<span class="keyword">module</span> <a href="module-type-Simple/index.html">Simple</a>)</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-simple_with_num"><a href="#type-simple_with_num" class="anchor"></a><code><span><span class="keyword">type</span> simple_with_num</span><span> = <span>(<span class="keyword">module</span> <a href="module-type-Simple_with_num/index.html">Simple_with_num</a>)</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-poly"><a href="#type-poly" class="anchor"></a><code><span><span class="keyword">type</span> <span>('cfg, 'workload) poly</span></span><span> =
  <span>(<span class="keyword">module</span> <a href="module-type-S/index.html">S</a>
  <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-S/index.html#type-config">config</a> = <span class="type-var">'cfg</span>
   <span class="keyword">and</span> <span class="keyword">type</span> <a href="module-type-S/index.html#type-workload">workload</a> = <span class="type-var">'workload</span>)</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-packed"><a href="#type-packed" class="anchor"></a><code><span><span class="keyword">type</span> packed</span><span> = </span></code><ol><li id="type-packed.Ex" class="def variant constructor anchored"><a href="#type-packed.Ex" class="anchor"></a><code><span>| </span><span><span class="constructor">Ex</span> : <span><span>(<span class="type-var">'cfg</span>, <span class="type-var">'workload</span>)</span> <a href="#type-poly">poly</a></span> <span class="arrow">&#45;&gt;</span> <a href="#type-packed">packed</a></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ex_unpack"><a href="#val-ex_unpack" class="anchor"></a><code><span><span class="keyword">val</span> ex_unpack : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-packed">packed</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-name"><a href="#val-name" class="anchor"></a><code><span><span class="keyword">val</span> name : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Namespace/index.html#type-t">Namespace.t</a></span></code></div><div class="spec-doc"><p>Get the name of a benchmark</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-info"><a href="#val-info" class="anchor"></a><code><span><span class="keyword">val</span> info : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Get the description of a benchmark</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tags"><a href="#val-tags" class="anchor"></a><code><span><span class="keyword">val</span> tags : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p>Get the tags of a benchmark</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_free_variable_set"><a href="#val-get_free_variable_set" class="anchor"></a><code><span><span class="keyword">val</span> get_free_variable_set : <span><span>(<span class="keyword">module</span> <a href="module-type-S/index.html">S</a>)</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Free_variable/Set/index.html#type-t">Free_variable.Set.t</a></span></code></div><div class="spec-doc"><p>Returns the free variables occur in the models of the benchmark.</p></div></div></div></body></html>
