<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Config (tezos-benchmark.Tezos_benchmark.Config)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-benchmark</a> &#x00BB; <a href="../index.html">Tezos_benchmark</a> &#x00BB; Config</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_benchmark.Config</span></code></h1><p>This module implements a schema for a json file that contains the configuration for all the benchmarks registered in Snoop. This configuration file has a tree-like structure that follows the Namespace hierarchy of the benchmarks. Its root element is always &quot;.&quot;.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>The type of the configuration file</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-encoding"><a href="#val-encoding" class="anchor"></a><code><span><span class="keyword">val</span> encoding : <span><a href="#type-t">t</a> <a href="../../../octez-libs/Data_encoding/index.html#type-t">Tezos_base.TzPervasives.Data_encoding.t</a></span></span></code></div><div class="spec-doc"><p>Its encoding</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Print <code>t</code> in JSON</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>The minimal config file</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-build"><a href="#val-build" class="anchor"></a><code><span><span class="keyword">val</span> build : 
  <span><span><span>(<a href="../Namespace/index.html#type-t">Namespace.t</a> * <a href="../../../octez-libs/Data_encoding/index.html#type-json">Tezos_base.TzPervasives.Data_encoding.json</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Build <code>t</code> from the given bindings</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_config"><a href="#val-get_config" class="anchor"></a><code><span><span class="keyword">val</span> get_config : <span><a href="../Benchmark/index.html#type-t">Benchmark.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../octez-libs/Data_encoding/index.html#type-json">Tezos_base.TzPervasives.Data_encoding.json</a></span></code></div><div class="spec-doc"><p>Given a benchmark <code>b</code> and a config <code>c</code>, <code>get_config b c</code> returns the configuration for the benchmark <code>b</code> stored in <code>c</code>, in json form.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_config"><a href="#val-parse_config" class="anchor"></a><code><span><span class="keyword">val</span> parse_config : 
  <span><span class="optlabel">?print</span>:<span class="xref-unresolved">Stdlib</span>.out_channel <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'c</span>, <span class="type-var">'t</span>)</span> <a href="../Benchmark/index.html#type-poly">Benchmark.poly</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'c</span></span></code></div><div class="spec-doc"><p>Given a benchmark <code>b</code> and a file path <code>p</code>, <code>parse_config b (Some p)</code> returns the configuration for the benchmark <code>b</code> stored in the configuration file located in path <code>p</code>. And <code>parse_config b None</code> returns the default configuration for <code>b</code> instead. If <code>print</code> is specified, the configuration is printed out in <code>print</code>. Otherwise nothing is printed</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-save_config"><a href="#val-save_config" class="anchor"></a><code><span><span class="keyword">val</span> save_config : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Save the given config to a file</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-generate_default"><a href="#val-generate_default" class="anchor"></a><code><span><span class="keyword">val</span> generate_default : <span><span><a href="../Benchmark/index.html#type-t">Benchmark.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Given a list of benchmarks <code>l</code>, <code>generate_default l</code> generates a default configuration containing all the given benchmarks, and filled with the default configuration for each benchmark</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-merge_config_files"><a href="#val-merge_config_files" class="anchor"></a><code><span><span class="keyword">val</span> merge_config_files : 
  <span><span class="optlabel">?delete_src</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">dst</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">src</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>merge_config_files dst src ()</code> merges the configuration files found at paths <code>dst</code> and <code>src</code>, in <code>dst</code>. If case of conflict, <code>src</code> overwrites <code>dst</code>. If <code>delete_src</code> (default <code>false</code>) is set to <code>true</code>, then the file <code>src</code> is deleted after merging.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-edit_config"><a href="#val-edit_config" class="anchor"></a><code><span><span class="keyword">val</span> edit_config : 
  <span><span class="optlabel">?input</span>:
    <span>[&lt; `Stdin
    <span><span>| `String</span> of string</span>
    <span><span>| `File</span> of string</span>
    <span><span>| `Edit</span> of string</span> Edit Stdin ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Namespace/index.html#type-t">Namespace.t</a> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>edit_config path namespace</code> edits the config file found at <code>path</code>, at the location <code>namespace</code> in the file. <code>input</code> is the method the json file is edited, which can be either</p><ul><li><code>`Stdin</code>, reading from the standard input (default)</li><li><code>`String s</code>, parsing a string as a Json document</li><li><code>`File f</code>, using a Json file at path <code>f</code></li><li><code>`Edit e</code>, using the given text editor <code>e</code></li></ul></div></div></div></body></html>
