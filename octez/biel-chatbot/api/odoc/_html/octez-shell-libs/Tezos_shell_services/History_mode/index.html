<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>History_mode (octez-shell-libs.Tezos_shell_services.History_mode)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-shell-libs</a> &#x00BB; <a href="../index.html">Tezos_shell_services</a> &#x00BB; History_mode</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_shell_services.History_mode</span></code></h1><p>History modes for the chain history storage</p><p>History modes allow a node to require less disk storage. Indeed, depending on the chosen history mode, some parts of the complete chain history can be deleted as they are not required anymore. Three history modes are provided:</p><ul><li>Full: The node stores the minimal data since the genesis required to reconstruct (or 'replay') the complete chain's ledger state.</li></ul><ul><li>Rolling (default mode): This is the lightest mode as it only maintains a minimal rolling fragment of the chain data so the node can still validate new blocks and synchronize with the head.</li></ul><ul><li>Archive: This is the heaviest mode as it keeps the whole chain data to be able to query any information stored on the chain since the genesis. It is particularly suitable for indexers or block explorers.</li></ul></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-additional_cycles"><a href="#type-additional_cycles" class="anchor"></a><code><span><span class="keyword">type</span> additional_cycles</span><span> = </span><span>{</span></code><ol><li id="type-additional_cycles.offset" class="def record field anchored"><a href="#type-additional_cycles.offset" class="anchor"></a><code><span>offset : int;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>The type for defining the number of additional cycles to preserve.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span></code><ol><li id="type-t.Archive" class="def variant constructor anchored"><a href="#type-t.Archive" class="anchor"></a><code><span>| </span><span><span class="constructor">Archive</span></span></code></li><li id="type-t.Full" class="def variant constructor anchored"><a href="#type-t.Full" class="anchor"></a><code><span>| </span><span><span class="constructor">Full</span> <span class="keyword">of</span> <span><a href="#type-additional_cycles">additional_cycles</a> option</span></span></code></li><li id="type-t.Rolling" class="def variant constructor anchored"><a href="#type-t.Rolling" class="anchor"></a><code><span>| </span><span><span class="constructor">Rolling</span> <span class="keyword">of</span> <span><a href="#type-additional_cycles">additional_cycles</a> option</span></span></code></li></ol></div><div class="spec-doc"><p>The type for defining an history mode.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default_additional_cycles"><a href="#val-default_additional_cycles" class="anchor"></a><code><span><span class="keyword">val</span> default_additional_cycles : <a href="#type-additional_cycles">additional_cycles</a></span></code></div><div class="spec-doc"><p>The default value for the number of additional cycles to preserve.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default_full"><a href="#val-default_full" class="anchor"></a><code><span><span class="keyword">val</span> default_full : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>The default full history mode value. Based on <code>default_additional_cycles</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default_rolling"><a href="#val-default_rolling" class="anchor"></a><code><span><span class="keyword">val</span> default_rolling : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>The default rolling history mode value. Based on <code>default_additional_cycles</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default"><a href="#val-default" class="anchor"></a><code><span><span class="keyword">val</span> default : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>The default history mode value.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-encoding"><a href="#val-encoding" class="anchor"></a><code><span><span class="keyword">val</span> encoding : <span><a href="#type-t">t</a> <a href="../../../octez-libs/Data_encoding/index.html#type-t">Tezos_base.TzPervasives.Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns true if the modes and the number of additional cycles are equal.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mode_equality"><a href="#val-mode_equality" class="anchor"></a><code><span><span class="keyword">val</span> mode_equality : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns true if the modes are equal. The number of additional cycles are not checked.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_short"><a href="#val-pp_short" class="anchor"></a><code><span><span class="keyword">val</span> pp_short : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tag"><a href="#val-tag" class="anchor"></a><code><span><span class="keyword">val</span> tag : <span><a href="#type-t">t</a> <a href="../../../octez-libs/Tezos_stdlib/Tag/index.html#type-def">Tezos_base.TzPervasives.Tag.def</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Legacy"><a href="#module-Legacy" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Legacy/index.html">Legacy</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The module for handling legacy history modes. It is only used for legacy support, see <code>Tezos_store.Legacy</code> and <code>Tezos_store.Snapshots</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-convert"><a href="#val-convert" class="anchor"></a><code><span><span class="keyword">val</span> convert : <span><a href="Legacy/index.html#type-t">Legacy.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>convert legacy</code> returns the history mode of a given <code>legacy</code> history mode, using the default offset values.</p></div></div></div></body></html>
