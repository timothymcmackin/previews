<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Proxy_services (octez-shell-libs.Tezos_proxy.Proxy_services)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-shell-libs</a> &#x00BB; <a href="../index.html">Tezos_proxy</a> &#x00BB; Proxy_services</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_proxy.Proxy_services</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec exception anchored" id="exception-Rpc_dir_creation_failure"><a href="#exception-Rpc_dir_creation_failure" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Rpc_dir_creation_failure</span> <span class="keyword">of</span> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a></span></code></div><div class="spec-doc"><p>Exception used by the proxy mode when creation of the input environment (of the RPC handler) fails. This exception is used to temporarily escape from the monad, because at the point of throwing, the code is NOT in <code>tzresult Lwt.t</code>. As it's dealing with resto APIs it's in an <code>Lwt.t</code>-only monad. This exception is injected back in the tzresult <code>Lwt.t</code> monad at the point where it is caught (with <code>Lwt.catch</code>).</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-mode"><a href="#type-mode" class="anchor"></a><code><span><span class="keyword">type</span> mode</span><span> = </span></code><ol><li id="type-mode.Light_client" class="def variant constructor anchored"><a href="#type-mode.Light_client" class="anchor"></a><code><span>| </span><span><span class="constructor">Light_client</span> <span class="keyword">of</span> <a href="../Light/index.html#type-sources">Light.sources</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p><code>octez-client --mode light</code> is running</p><span class="comment-delim">*)</span></div></li><li id="type-mode.Proxy_client" class="def variant constructor anchored"><a href="#type-mode.Proxy_client" class="anchor"></a><code><span>| </span><span><span class="constructor">Proxy_client</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p><code>octez-client --mode proxy</code> is running</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>Whether using the light mode or the proxy mode (remember that the light mode is a different instance of the proxy mode (see srcs/lib_proxy/README_LIGHT.md for documentation) and whether <code>octez-client</code> is running.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-build_directory"><a href="#val-build_directory" class="anchor"></a><code><span><span class="keyword">val</span> build_directory : 
  <span><a href="../../Tezos_client_base/Client_context/class-type-printer/index.html">Tezos_client_base.Client_context.printer</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_rpc/Context/class-type-generic/index.html">Tezos_rpc.Context.generic</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-mode">mode</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../octez-libs/Tezos_crypto/Hashed/Protocol_hash/index.html#type-t">Tezos_base.TzPervasives.Protocol_hash.t</a> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../../../octez-libs/Tezos_rpc/Directory/index.html#type-t">Tezos_rpc.Directory.t</a></span></span></code></div><div class="spec-doc"><p><code>build_directory printer rpc_context env mode</code> returns the directory of RPCs that is served locally by the client's light and proxy modes. Parameters are:</p><ul><li><code>printer</code> is used for logging.</li><li><code>rpc_context</code> is used to perform RPCs to distant endpoints.</li><li><code>mode</code> specifies whether <code>octez-client</code> (light or proxy mode) is running.</li><li><code>env</code> is a protocol-specific module used to create the context passed when executing a RPC.</li></ul></div></div></div></body></html>
