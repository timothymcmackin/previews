<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Proxy_getter (octez-shell-libs.Tezos_proxy.Proxy_getter)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-shell-libs</a> &#x00BB; <a href="../index.html">Tezos_proxy</a> &#x00BB; Proxy_getter</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_proxy.Proxy_getter</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module-substitution anchored" id="module-Local"><a href="#module-Local" class="anchor"></a><code><span><span class="keyword">module</span> Local := <a href="../../../octez-libs/Tezos_context_memory/Context/index.html">Tezos_context_memory.Context</a></span></code></div></div><div class="odoc-spec"><div class="spec module-substitution anchored" id="module-Proof"><a href="#module-Proof" class="anchor"></a><code><span><span class="keyword">module</span> Proof := <a href="../../../octez-libs/Tezos_context_sigs/Context/Proof_types/index.html">Tezos_context_sigs.Context.Proof_types</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-raw_context_size"><a href="#val-raw_context_size" class="anchor"></a><code><span><span class="keyword">val</span> raw_context_size : <span><a href="../../../octez-libs/Tezos_context_sigs/Context/Proof_types/index.html#type-raw_context">Proof.raw_context</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>The size of a tree, for logging</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-StringMap"><a href="#module-StringMap" class="anchor"></a><code><span><span class="keyword">module</span> StringMap</span><span> = <a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html">Tezos_base.TzPervasives.String.Map</a></span></code></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-REQUESTS_TREE"><a href="#module-type-REQUESTS_TREE" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-REQUESTS_TREE/index.html">REQUESTS_TREE</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The point of this data structure is as follows:</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-RequestsTree"><a href="#module-RequestsTree" class="anchor"></a><code><span><span class="keyword">module</span> <a href="RequestsTree/index.html">RequestsTree</a></span><span> : <a href="module-type-REQUESTS_TREE/index.html">REQUESTS_TREE</a></span></code></div><div class="spec-doc"><p>The point of this data structure is as follows:</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-M"><a href="#module-type-M" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-M/index.html">M</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-proxy_m"><a href="#type-proxy_m" class="anchor"></a><code><span><span class="keyword">type</span> proxy_m</span><span> = <span>(<span class="keyword">module</span> <a href="module-type-M/index.html">M</a>)</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-proxy_builder"><a href="#type-proxy_builder" class="anchor"></a><code><span><span class="keyword">type</span> proxy_builder</span><span> = </span></code><ol><li id="type-proxy_builder.Of_rpc" class="def variant constructor anchored"><a href="#type-proxy_builder.Of_rpc" class="anchor"></a><code><span>| </span><span><span class="constructor">Of_rpc</span> <span class="keyword">of</span> <span><a href="../Proxy_proto/index.html#type-proto_rpc">Proxy_proto.proto_rpc</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-proxy_m">proxy_m</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Build a proxy that uses network requests for all data.</p><span class="comment-delim">*)</span></div></li><li id="type-proxy_builder.Of_data_dir" class="def variant constructor anchored"><a href="#type-proxy_builder.Of_data_dir" class="anchor"></a><code><span>| </span><span><span class="constructor">Of_data_dir</span> <span class="keyword">of</span> <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_base.TzPervasives.Context_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../octez-proto-libs/Tezos_protocol_environment/Proxy_delegate/index.html#type-t">Tezos_protocol_environment.Proxy_delegate.t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Build a proxy that looks up data in a running node's data dir.</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>The different ways to obtain data from the node. The two functions being wrapped are ultimately used to build <code>Proxy_delegate.t</code> values, that are passed to <code>Proxy_context.empty</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-rpc_context_args"><a href="#type-rpc_context_args" class="anchor"></a><code><span><span class="keyword">type</span> rpc_context_args</span><span> = </span><span>{</span></code><ol><li id="type-rpc_context_args.printer" class="def record field anchored"><a href="#type-rpc_context_args.printer" class="anchor"></a><code><span>printer : <span><a href="../../Tezos_client_base/Client_context/class-type-printer/index.html">Tezos_client_base.Client_context.printer</a> option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Optional printer to display information in some custom format.</p><span class="comment-delim">*)</span></div></li><li id="type-rpc_context_args.proxy_builder" class="def record field anchored"><a href="#type-rpc_context_args.proxy_builder" class="anchor"></a><code><span>proxy_builder : <a href="#type-proxy_builder">proxy_builder</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Given the protocol implementation of the RPCs required by the proxy mode, how to build an instance of <a href="#type-proxy_m"><code>proxy_m</code></a> that will then make it possible to build a <a href="../../../octez-proto-libs/Tezos_protocol_environment/Proxy_context/index.html"><code>Tezos_protocol_environment.Proxy_context</code></a>.</p><span class="comment-delim">*)</span></div></li><li id="type-rpc_context_args.rpc_context" class="def record field anchored"><a href="#type-rpc_context_args.rpc_context" class="anchor"></a><code><span>rpc_context : <a href="../../../octez-libs/Tezos_rpc/Context/class-type-generic/index.html">Tezos_rpc.Context.generic</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>How to perform RPC calls. We need such a value, because the proxy mode performs RPCs to initialize itself (by requesting the header) and also to fill <a href="../../../octez-proto-libs/Tezos_protocol_environment/Proxy_context/index.html"><code>Tezos_protocol_environment.Proxy_context</code></a> on-demand.</p><span class="comment-delim">*)</span></div></li><li id="type-rpc_context_args.chain" class="def record field anchored"><a href="#type-rpc_context_args.chain" class="anchor"></a><code><span>chain : <a href="../../Tezos_shell_services/Block_services/index.html#type-chain">Tezos_shell_services.Block_services.chain</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The chain to provide RPC calls for.</p><span class="comment-delim">*)</span></div></li><li id="type-rpc_context_args.block" class="def record field anchored"><a href="#type-rpc_context_args.block" class="anchor"></a><code><span>block : <a href="../../Tezos_shell_services/Block_services/index.html#type-block">Tezos_shell_services.Block_services.block</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The block to provide RPC calls for.</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Input data required by the proxy mode to build a <a href="../../../octez-proto-libs/Tezos_protocol_environment/index.html#type-rpc_context"><code>Tezos_protocol_environment.rpc_context</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_delegate"><a href="#val-make_delegate" class="anchor"></a><code><span><span class="keyword">val</span> make_delegate : 
  <span><a href="#type-rpc_context_args">rpc_context_args</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="keyword">module</span> <a href="../Proxy_proto/module-type-PROTO_RPC/index.html">Proxy_proto.PROTO_RPC</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_base.TzPervasives.Context_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../octez-proto-libs/Tezos_protocol_environment/Proxy_delegate/index.html#type-t">Tezos_protocol_environment.Proxy_delegate.t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Builds a proxy delegate in the way specified by the proxy_builder field of the <a href="#type-rpc_context_args"><code>rpc_context_args</code></a> argument.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-MakeProxy"><a href="#module-MakeProxy" class="anchor"></a><code><span><span class="keyword">module</span> <a href="MakeProxy/index.html">MakeProxy</a></span><span> (<a href="MakeProxy/argument-1-X/index.html">X</a> : <a href="../Proxy_proto/module-type-PROTO_RPC/index.html">Proxy_proto.PROTO_RPC</a>) : <a href="module-type-M/index.html">M</a></span></code></div><div class="spec-doc"><p>Functor to obtain the implementation of <code>M</code> for the proxy mode (as opposed to the light mode implementation)</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Make"><a href="#module-Make" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Make/index.html">Make</a></span><span> (<a href="Make/argument-1-C/index.html">C</a> : <a href="../Proxy/module-type-CORE/index.html">Proxy.CORE</a>) (<a href="Make/argument-2-X/index.html">X</a> : <a href="../Proxy_proto/module-type-PROTO_RPC/index.html">Proxy_proto.PROTO_RPC</a>) : <a href="module-type-M/index.html">M</a></span></code></div><div class="spec-doc"><p>Functor to obtain a generic implementation. Used by the light mode</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Internal"><a href="#module-Internal" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Internal/index.html">Internal</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Exposed for testing purpose only, you should not use it directly</p></div></div></div></body></html>
