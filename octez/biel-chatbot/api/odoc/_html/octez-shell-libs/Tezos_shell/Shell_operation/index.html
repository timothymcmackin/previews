<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Shell_operation (octez-shell-libs.Tezos_shell.Shell_operation)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-shell-libs</a> &#x00BB; <a href="../index.html">Tezos_shell</a> &#x00BB; Shell_operation</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_shell.Shell_operation</span></code></h1><p>This module provides the operation representation used by the prevalidator and its dependencies. It also contains tools for parsing an operation into this representation, and updating the latter.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-operation"><a href="#type-operation" class="anchor"></a><code><span><span class="keyword">type</span> <span>'protocol_operation operation</span></span><span> = <span class="keyword">private</span> </span><span>{</span></code><ol><li id="type-operation.hash" class="def record field anchored"><a href="#type-operation.hash" class="anchor"></a><code><span>hash : <a href="../../../octez-libs/Tezos_crypto/Hashed/Operation_hash/index.html#type-t">Tezos_base.TzPervasives.Operation_hash.t</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Hash of an operation.</p><span class="comment-delim">*)</span></div></li><li id="type-operation.raw" class="def record field anchored"><a href="#type-operation.raw" class="anchor"></a><code><span>raw : <a href="../../../octez-libs/Tezos_base/Operation/index.html#type-t">Tezos_base.Operation.t</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Raw representation of an operation (from the point view of the shell).</p><span class="comment-delim">*)</span></div></li><li id="type-operation.protocol" class="def record field anchored"><a href="#type-operation.protocol" class="anchor"></a><code><span>protocol : <span class="type-var">'protocol_operation</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Economic protocol specific data of an operation. It is the unserialized representation of <code>raw.protocol_data</code>. For convenience, the type associated to this type may be <code>unit</code> if we do not have deserialized the operation yet.</p><span class="comment-delim">*)</span></div></li><li id="type-operation.signature_checked" class="def record field anchored"><a href="#type-operation.signature_checked" class="anchor"></a><code><span>signature_checked : bool;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>This field is initially <code>false</code>. It is set to <code>true</code> when the operation is successfully validated in any context. While this does not guarantee that the operation will still be valid in another validation context, it notably means that the signature is correct. Therefore, when this field is <code>true</code>, we can tell the protocol to skip signature checks.</p><span class="comment-delim">*)</span></div></li><li id="type-operation.size" class="def record field anchored"><a href="#type-operation.size" class="anchor"></a><code><span>size : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Size of the operation in bytes.</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Representation of a parsed operation, used only in the shell.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-record_successful_signature_check"><a href="#val-record_successful_signature_check" class="anchor"></a><code><span><span class="keyword">val</span> record_successful_signature_check : 
  <span><span><span class="type-var">'protocol_operation</span> <a href="#type-operation">operation</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'protocol_operation</span> <a href="#type-operation">operation</a></span></span></code></div><div class="spec-doc"><p>Return the operation with the <a href="#type-operation.signature_checked"><code>signature_checked</code></a> field set to <code>true</code>.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-PARSER"><a href="#module-type-PARSER" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-PARSER/index.html">PARSER</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The purpose of this module type is to provide the <code>parse</code> function, whose return type depends on the protocol.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-MakeParser"><a href="#module-MakeParser" class="anchor"></a><code><span><span class="keyword">module</span> <a href="MakeParser/index.html">MakeParser</a></span><span>
  (<a href="MakeParser/argument-1-Proto/index.html">Proto</a> : <a href="../../../octez-proto-libs/Tezos_protocol_environment/module-type-PROTOCOL/index.html">Tezos_protocol_environment.PROTOCOL</a>) : 
  <a href="module-type-PARSER/index.html">PARSER</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="module-type-PARSER/index.html#type-protocol_operation">protocol_operation</a> = <a href="MakeParser/argument-1-Proto/index.html#type-operation">Proto.operation</a></span></span></code></div><div class="spec-doc"><p>Create a <a href="module-type-PARSER/index.html"><code>PARSER</code></a> tailored to a given protocol.</p></div></div></div></body></html>
