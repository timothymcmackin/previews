<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Validator (octez-shell-libs.Tezos_shell.Validator)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-shell-libs</a> &#x00BB; <a href="../index.html">Tezos_shell</a> &#x00BB; Validator</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_shell.Validator</span></code></h1><p>Tezos Shell - Main entry point of the validation scheduler.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : 
  <span><a href="../../Tezos_store/Store/index.html#type-t">Tezos_store.Store.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Distributed_db/index.html#type-t">Distributed_db.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_shell_services/Shell_limits/index.html#type-peer_validator_limits">Tezos_shell_services.Shell_limits.peer_validator_limits</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_shell_services/Shell_limits/index.html#type-block_validator_limits">Tezos_shell_services.Shell_limits.block_validator_limits</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Block_validator_process/index.html#type-t">Block_validator_process.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_shell_services/Shell_limits/index.html#type-prevalidator_limits">Tezos_shell_services.Shell_limits.prevalidator_limits</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_shell_services/Shell_limits/index.html#type-chain_validator_limits">Tezos_shell_services.Shell_limits.chain_validator_limits</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">start_testchain</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="#type-t">t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-shutdown"><a href="#val-shutdown" class="anchor"></a><code><span><span class="keyword">val</span> shutdown : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-activate"><a href="#val-activate" class="anchor"></a><code><span><span class="keyword">val</span> activate : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">start_prevalidator</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">validator_process</span>:<a href="../Block_validator_process/index.html#type-t">Block_validator_process.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_store/Store/index.html#type-chain_store">Tezos_store.Store.chain_store</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Chain_validator/index.html#type-t">Chain_validator.t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Start the validation scheduler of a given chain.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Chain_id/index.html#type-t">Tezos_base.TzPervasives.Chain_id.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Chain_validator/index.html#type-t">Chain_validator.t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_active_chains"><a href="#val-get_active_chains" class="anchor"></a><code><span><span class="keyword">val</span> get_active_chains : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Chain_id/index.html#type-t">Tezos_base.TzPervasives.Chain_id.t</a> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-validate_block"><a href="#val-validate_block" class="anchor"></a><code><span><span class="keyword">val</span> validate_block : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?force</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?chain_id</span>:<a href="../../../octez-libs/Tezos_crypto/Hashed/Chain_id/index.html#type-t">Tezos_base.TzPervasives.Chain_id.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/Bytes/index.html#type-t">Tezos_base.TzPervasives.Bytes.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="../../../octez-libs/Tezos_base/Operation/index.html#type-t">Tezos_base.Operation.t</a> list</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../../../octez-libs/Tezos_crypto/Hashed/Block_hash/index.html#type-t">Tezos_base.TzPervasives.Block_hash.t</a>
   * <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span>)</span>
    <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Force the validation of a block.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-watcher"><a href="#val-watcher" class="anchor"></a><code><span><span class="keyword">val</span> watcher : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Tezos_store/Store/Block/index.html#type-t">Tezos_store.Store.Block.t</a> <span class="xref-unresolved">Lwt_stream</span>.t</span> * <span class="xref-unresolved">Lwt_watcher</span>.stopper</span></code></div><div class="spec-doc"><p>Monitor all the valid block (for all activate chains).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-chains_watcher"><a href="#val-chains_watcher" class="anchor"></a><code><span><span class="keyword">val</span> chains_watcher : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../../../octez-libs/Tezos_crypto/Hashed/Chain_id/index.html#type-t">Tezos_base.TzPervasives.Chain_id.t</a> * bool)</span> <span class="xref-unresolved">Lwt_stream</span>.t</span>
  * <span class="xref-unresolved">Lwt_watcher</span>.stopper</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-inject_operation"><a href="#val-inject_operation" class="anchor"></a><code><span><span class="keyword">val</span> inject_operation : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?chain_id</span>:<a href="../../../octez-libs/Tezos_crypto/Hashed/Chain_id/index.html#type-t">Tezos_base.TzPervasives.Chain_id.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">force</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_base/Operation/index.html#type-t">Tezos_base.Operation.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>inject_operation t ?chain_id ~force op</code> notifies the prevalidator worker associated with the <code>chain_id</code> of a new injected operation. Fails if the branch in <code>op</code> is not known in the given <code>chain_id</code> or if no prevalidator is associated with the <code>chain_id</code>. If no <code>chain_id</code> is provided, try to recover a chain_id from the branch in the operation data. Fails if no chain_id can be recovered unless <code>force</code> is set. If force is set, notify all the known prevalidator workers.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-distributed_db"><a href="#val-distributed_db" class="anchor"></a><code><span><span class="keyword">val</span> distributed_db : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Distributed_db/index.html#type-t">Distributed_db.t</a></span></code></div></div></div></body></html>
