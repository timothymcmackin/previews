<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Advertise (octez-shell-libs.Tezos_shell.Distributed_db.Advertise)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">octez-shell-libs</a> &#x00BB; <a href="../../index.html">Tezos_shell</a> &#x00BB; <a href="../index.html">Distributed_db</a> &#x00BB; Advertise</nav><header class="odoc-preamble"><h1>Module <code><span>Distributed_db.Advertise</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-current_head"><a href="#val-current_head" class="anchor"></a><code><span><span class="keyword">val</span> current_head : 
  <span><a href="../index.html#type-chain_db">chain_db</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?mempool</span>:<a href="../../../../octez-libs/Tezos_base/Mempool/index.html#type-t">Tezos_base.Mempool.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Tezos_store/Store/Block/index.html#type-t">Tezos_store.Store.Block.t</a> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>current_head chain_db ?mempool head</code> sends a <code>Current_head (chain_id, head_header, mempool)</code> message to all known active peers for this chain. If <code>mempool</code> isn't specified, or if remote peer has disabled its mempool, <code>mempool</code> is empty. <code>chain_id</code> is the identifier for this <code>chain_db</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-validated_head"><a href="#val-validated_head" class="anchor"></a><code><span><span class="keyword">val</span> validated_head : 
  <span><a href="../index.html#type-chain_db">chain_db</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?mempool</span>:<a href="../../../../octez-libs/Tezos_base/Mempool/index.html#type-t">Tezos_base.Mempool.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../../octez-libs/Tezos_base/Block_header/index.html#type-t">Tezos_base.Block_header.t</a> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>validated_head chain_db ?mempool head</code> sends a <code>Current_head
     (chain_id, head_header, mempool)</code> message to all known active peers for this chain. If <code>mempool</code> isn't specified, or if remote peer has disabled its mempool, <code>mempool</code> is empty. <code>chain_id</code> is the identifier for this <code>chain_db</code>.</p><p>The message is only sent when the peer's network version is at least 2. For former protocol versions, we could get kicked kicked for having send an invalid block that passes the validation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-current_branch"><a href="#val-current_branch" class="anchor"></a><code><span><span class="keyword">val</span> current_branch : <span><a href="../index.html#type-chain_db">chain_db</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>current_branch chain_db</code> sends a <code>Current_branch (chain_id, locator)</code> message to all known active peers for this chain. <code>locator</code> is constructed based on the seed <code>(remote_peer_id, this_peer_id)</code>.</p></div></div></div></body></html>
