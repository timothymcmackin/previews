<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>External_validation (octez-shell-libs.Tezos_validation.External_validation)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-shell-libs</a> &#x00BB; <a href="../index.html">Tezos_validation</a> &#x00BB; External_validation</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_validation.External_validation</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-parameters"><a href="#type-parameters" class="anchor"></a><code><span><span class="keyword">type</span> parameters</span><span> = </span><span>{</span></code><ol><li id="type-parameters.context_root_dir" class="def record field anchored"><a href="#type-parameters.context_root_dir" class="anchor"></a><code><span>context_root_dir : string;</span></code></li><li id="type-parameters.protocol_root" class="def record field anchored"><a href="#type-parameters.protocol_root" class="anchor"></a><code><span>protocol_root : string;</span></code></li><li id="type-parameters.genesis" class="def record field anchored"><a href="#type-parameters.genesis" class="anchor"></a><code><span>genesis : <a href="../../../octez-libs/Tezos_base/Genesis/index.html#type-t">Tezos_base.TzPervasives.Genesis.t</a>;</span></code></li><li id="type-parameters.readonly" class="def record field anchored"><a href="#type-parameters.readonly" class="anchor"></a><code><span>readonly : bool;</span></code></li><li id="type-parameters.data_dir" class="def record field anchored"><a href="#type-parameters.data_dir" class="anchor"></a><code><span>data_dir : string;</span></code></li><li id="type-parameters.sandbox_parameters" class="def record field anchored"><a href="#type-parameters.sandbox_parameters" class="anchor"></a><code><span>sandbox_parameters : <span><a href="../../../octez-libs/Data_encoding/index.html#type-json">Tezos_base.TzPervasives.Data_encoding.json</a> option</span>;</span></code></li><li id="type-parameters.user_activated_upgrades" class="def record field anchored"><a href="#type-parameters.user_activated_upgrades" class="anchor"></a><code><span>user_activated_upgrades : <a href="../../../octez-libs/Tezos_base/User_activated/index.html#type-upgrades">Tezos_base.TzPervasives.User_activated.upgrades</a>;</span></code></li><li id="type-parameters.user_activated_protocol_overrides" class="def record field anchored"><a href="#type-parameters.user_activated_protocol_overrides" class="anchor"></a><code><span>user_activated_protocol_overrides : <a href="../../../octez-libs/Tezos_base/User_activated/index.html#type-protocol_overrides">Tezos_base.TzPervasives.User_activated.protocol_overrides</a>;</span></code></li><li id="type-parameters.operation_metadata_size_limit" class="def record field anchored"><a href="#type-parameters.operation_metadata_size_limit" class="anchor"></a><code><span>operation_metadata_size_limit : <a href="../../Tezos_shell_services/Shell_limits/index.html#type-operation_metadata_size_limit">Tezos_shell_services.Shell_limits.operation_metadata_size_limit</a>;</span></code></li><li id="type-parameters.internal_events" class="def record field anchored"><a href="#type-parameters.internal_events" class="anchor"></a><code><span>internal_events : <a href="../../../octez-libs/Tezos_base/Internal_event_config/index.html#type-t">Tezos_base.Internal_event_config.t</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-request"><a href="#type-request" class="anchor"></a><code><span><span class="keyword">type</span> <span>_ request</span></span><span> = </span></code><ol><li id="type-request.Apply" class="def variant constructor anchored"><a href="#type-request.Apply" class="anchor"></a><code><span>| </span><span><span class="constructor">Apply</span> : </span><span>{</span></code><ol><li id="type-request.chain_id" class="def record field anchored"><a href="#type-request.chain_id" class="anchor"></a><code><span>chain_id : <a href="../../../octez-libs/Tezos_crypto/Hashed/Chain_id/index.html#type-t">Tezos_base.TzPervasives.Chain_id.t</a>;</span></code></li><li id="type-request.block_header" class="def record field anchored"><a href="#type-request.block_header" class="anchor"></a><code><span>block_header : <a href="../../../octez-libs/Tezos_base/Block_header/index.html#type-t">Tezos_base.TzPervasives.Block_header.t</a>;</span></code></li><li id="type-request.predecessor_block_header" class="def record field anchored"><a href="#type-request.predecessor_block_header" class="anchor"></a><code><span>predecessor_block_header : <a href="../../../octez-libs/Tezos_base/Block_header/index.html#type-t">Tezos_base.TzPervasives.Block_header.t</a>;</span></code></li><li id="type-request.predecessor_block_metadata_hash" class="def record field anchored"><a href="#type-request.predecessor_block_metadata_hash" class="anchor"></a><code><span>predecessor_block_metadata_hash : <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Block_metadata_hash/index.html#type-t">Tezos_base.TzPervasives.Block_metadata_hash.t</a>
                                    option</span>;</span></code></li><li id="type-request.predecessor_ops_metadata_hash" class="def record field anchored"><a href="#type-request.predecessor_ops_metadata_hash" class="anchor"></a><code><span>predecessor_ops_metadata_hash : <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Operation_metadata_list_list_hash/index.html#type-t">Tezos_base.TzPervasives.Operation_metadata_list_list_hash.t</a>
                                  option</span>;</span></code></li><li id="type-request.predecessor_resulting_context_hash" class="def record field anchored"><a href="#type-request.predecessor_resulting_context_hash" class="anchor"></a><code><span>predecessor_resulting_context_hash : <a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_base.TzPervasives.Context_hash.t</a>;</span></code></li><li id="type-request.operations" class="def record field anchored"><a href="#type-request.operations" class="anchor"></a><code><span>operations : <span><span><a href="../Block_validation/index.html#type-operation">Block_validation.operation</a> list</span> list</span>;</span></code></li><li id="type-request.max_operations_ttl" class="def record field anchored"><a href="#type-request.max_operations_ttl" class="anchor"></a><code><span>max_operations_ttl : int;</span></code></li><li id="type-request.should_validate" class="def record field anchored"><a href="#type-request.should_validate" class="anchor"></a><code><span>should_validate : bool;</span></code></li><li id="type-request.simulate" class="def record field anchored"><a href="#type-request.simulate" class="anchor"></a><code><span>simulate : bool;</span></code></li></ol><code><span>}</span><span> <span class="arrow">&#45;&gt;</span> <span><a href="../Block_validation/index.html#type-result">Block_validation.result</a> <a href="#type-request">request</a></span></span></code></li><li id="type-request.Preapply" class="def variant constructor anchored"><a href="#type-request.Preapply" class="anchor"></a><code><span>| </span><span><span class="constructor">Preapply</span> : </span><span>{</span></code><ol><li id="type-request.chain_id" class="def record field anchored"><a href="#type-request.chain_id" class="anchor"></a><code><span>chain_id : <a href="../../../octez-libs/Tezos_crypto/Hashed/Chain_id/index.html#type-t">Tezos_base.TzPervasives.Chain_id.t</a>;</span></code></li><li id="type-request.timestamp" class="def record field anchored"><a href="#type-request.timestamp" class="anchor"></a><code><span>timestamp : <a href="../../../octez-libs/Tezos_base/Time/Protocol/index.html#type-t">Tezos_base.TzPervasives.Time.Protocol.t</a>;</span></code></li><li id="type-request.protocol_data" class="def record field anchored"><a href="#type-request.protocol_data" class="anchor"></a><code><span>protocol_data : bytes;</span></code></li><li id="type-request.live_blocks" class="def record field anchored"><a href="#type-request.live_blocks" class="anchor"></a><code><span>live_blocks : <a href="../../../octez-libs/Tezos_crypto/Hashed/Block_hash/Set/index.html#type-t">Tezos_base.TzPervasives.Block_hash.Set.t</a>;</span></code></li><li id="type-request.live_operations" class="def record field anchored"><a href="#type-request.live_operations" class="anchor"></a><code><span>live_operations : <a href="../../../octez-libs/Tezos_crypto/Hashed/Operation_hash/Set/index.html#type-t">Tezos_base.TzPervasives.Operation_hash.Set.t</a>;</span></code></li><li id="type-request.predecessor_shell_header" class="def record field anchored"><a href="#type-request.predecessor_shell_header" class="anchor"></a><code><span>predecessor_shell_header : <a href="../../../octez-libs/Tezos_base/Block_header/index.html#type-shell_header">Tezos_base.TzPervasives.Block_header.shell_header</a>;</span></code></li><li id="type-request.predecessor_hash" class="def record field anchored"><a href="#type-request.predecessor_hash" class="anchor"></a><code><span>predecessor_hash : <a href="../../../octez-libs/Tezos_crypto/Hashed/Block_hash/index.html#type-t">Tezos_base.TzPervasives.Block_hash.t</a>;</span></code></li><li id="type-request.predecessor_max_operations_ttl" class="def record field anchored"><a href="#type-request.predecessor_max_operations_ttl" class="anchor"></a><code><span>predecessor_max_operations_ttl : int;</span></code></li><li id="type-request.predecessor_block_metadata_hash" class="def record field anchored"><a href="#type-request.predecessor_block_metadata_hash" class="anchor"></a><code><span>predecessor_block_metadata_hash : <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Block_metadata_hash/index.html#type-t">Tezos_base.TzPervasives.Block_metadata_hash.t</a>
                                    option</span>;</span></code></li><li id="type-request.predecessor_ops_metadata_hash" class="def record field anchored"><a href="#type-request.predecessor_ops_metadata_hash" class="anchor"></a><code><span>predecessor_ops_metadata_hash : <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Operation_metadata_list_list_hash/index.html#type-t">Tezos_base.TzPervasives.Operation_metadata_list_list_hash.t</a>
                                  option</span>;</span></code></li><li id="type-request.predecessor_resulting_context_hash" class="def record field anchored"><a href="#type-request.predecessor_resulting_context_hash" class="anchor"></a><code><span>predecessor_resulting_context_hash : <a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_base.TzPervasives.Context_hash.t</a>;</span></code></li><li id="type-request.operations" class="def record field anchored"><a href="#type-request.operations" class="anchor"></a><code><span>operations : <span><span><a href="../Block_validation/index.html#type-operation">Block_validation.operation</a> list</span> list</span>;</span></code></li></ol><code><span>}</span><span> <span class="arrow">&#45;&gt;</span> <span><span>(<a href="../../../octez-libs/Tezos_base/Block_header/index.html#type-shell_header">Tezos_base.TzPervasives.Block_header.shell_header</a>
     * <span><span><a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-error">Tezos_base.TzPervasives.error</a> <a href="../../Tezos_shell_services/Preapply_result/index.html#type-t">Tezos_shell_services.Preapply_result.t</a></span>
         list</span>)</span>
      <a href="#type-request">request</a></span></span></code></li><li id="type-request.Validate" class="def variant constructor anchored"><a href="#type-request.Validate" class="anchor"></a><code><span>| </span><span><span class="constructor">Validate</span> : </span><span>{</span></code><ol><li id="type-request.chain_id" class="def record field anchored"><a href="#type-request.chain_id" class="anchor"></a><code><span>chain_id : <a href="../../../octez-libs/Tezos_crypto/Hashed/Chain_id/index.html#type-t">Tezos_base.TzPervasives.Chain_id.t</a>;</span></code></li><li id="type-request.predecessor_block_header" class="def record field anchored"><a href="#type-request.predecessor_block_header" class="anchor"></a><code><span>predecessor_block_header : <a href="../../../octez-libs/Tezos_base/Block_header/index.html#type-t">Tezos_base.TzPervasives.Block_header.t</a>;</span></code></li><li id="type-request.predecessor_block_hash" class="def record field anchored"><a href="#type-request.predecessor_block_hash" class="anchor"></a><code><span>predecessor_block_hash : <a href="../../../octez-libs/Tezos_crypto/Hashed/Block_hash/index.html#type-t">Tezos_base.TzPervasives.Block_hash.t</a>;</span></code></li><li id="type-request.predecessor_resulting_context_hash" class="def record field anchored"><a href="#type-request.predecessor_resulting_context_hash" class="anchor"></a><code><span>predecessor_resulting_context_hash : <a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_base.TzPervasives.Context_hash.t</a>;</span></code></li><li id="type-request.header" class="def record field anchored"><a href="#type-request.header" class="anchor"></a><code><span>header : <a href="../../../octez-libs/Tezos_base/Block_header/index.html#type-t">Tezos_base.TzPervasives.Block_header.t</a>;</span></code></li><li id="type-request.operations" class="def record field anchored"><a href="#type-request.operations" class="anchor"></a><code><span>operations : <span><span><a href="../Block_validation/index.html#type-operation">Block_validation.operation</a> list</span> list</span>;</span></code></li><li id="type-request.hash" class="def record field anchored"><a href="#type-request.hash" class="anchor"></a><code><span>hash : <a href="../../../octez-libs/Tezos_crypto/Hashed/Block_hash/index.html#type-t">Tezos_base.TzPervasives.Block_hash.t</a>;</span></code></li></ol><code><span>}</span><span> <span class="arrow">&#45;&gt;</span> <span>unit <a href="#type-request">request</a></span></span></code></li><li id="type-request.Commit_genesis" class="def variant constructor anchored"><a href="#type-request.Commit_genesis" class="anchor"></a><code><span>| </span><span><span class="constructor">Commit_genesis</span> : </span><span>{</span></code><ol><li id="type-request.chain_id" class="def record field anchored"><a href="#type-request.chain_id" class="anchor"></a><code><span>chain_id : <a href="../../../octez-libs/Tezos_crypto/Hashed/Chain_id/index.html#type-t">Tezos_base.TzPervasives.Chain_id.t</a>;</span></code></li></ol><code><span>}</span><span> <span class="arrow">&#45;&gt;</span> <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_base.TzPervasives.Context_hash.t</a> <a href="#type-request">request</a></span></span></code></li><li id="type-request.Fork_test_chain" class="def variant constructor anchored"><a href="#type-request.Fork_test_chain" class="anchor"></a><code><span>| </span><span><span class="constructor">Fork_test_chain</span> : </span><span>{</span></code><ol><li id="type-request.chain_id" class="def record field anchored"><a href="#type-request.chain_id" class="anchor"></a><code><span>chain_id : <a href="../../../octez-libs/Tezos_crypto/Hashed/Chain_id/index.html#type-t">Tezos_base.TzPervasives.Chain_id.t</a>;</span></code></li><li id="type-request.context_hash" class="def record field anchored"><a href="#type-request.context_hash" class="anchor"></a><code><span>context_hash : <a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_base.TzPervasives.Context_hash.t</a>;</span></code></li><li id="type-request.forked_header" class="def record field anchored"><a href="#type-request.forked_header" class="anchor"></a><code><span>forked_header : <a href="../../../octez-libs/Tezos_base/Block_header/index.html#type-t">Tezos_base.TzPervasives.Block_header.t</a>;</span></code></li></ol><code><span>}</span><span> <span class="arrow">&#45;&gt;</span> <span><a href="../../../octez-libs/Tezos_base/Block_header/index.html#type-t">Tezos_base.TzPervasives.Block_header.t</a> <a href="#type-request">request</a></span></span></code></li><li id="type-request.Context_garbage_collection" class="def variant constructor anchored"><a href="#type-request.Context_garbage_collection" class="anchor"></a><code><span>| </span><span><span class="constructor">Context_garbage_collection</span> : </span><span>{</span></code><ol><li id="type-request.context_hash" class="def record field anchored"><a href="#type-request.context_hash" class="anchor"></a><code><span>context_hash : <a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_base.TzPervasives.Context_hash.t</a>;</span></code></li><li id="type-request.gc_lockfile_path" class="def record field anchored"><a href="#type-request.gc_lockfile_path" class="anchor"></a><code><span>gc_lockfile_path : string;</span></code></li></ol><code><span>}</span><span> <span class="arrow">&#45;&gt;</span> <span>unit <a href="#type-request">request</a></span></span></code></li><li id="type-request.Context_split" class="def variant constructor anchored"><a href="#type-request.Context_split" class="anchor"></a><code><span>| </span><span><span class="constructor">Context_split</span> : <span>unit <a href="#type-request">request</a></span></span></code></li><li id="type-request.Terminate" class="def variant constructor anchored"><a href="#type-request.Terminate" class="anchor"></a><code><span>| </span><span><span class="constructor">Terminate</span> : <span>unit <a href="#type-request">request</a></span></span></code></li><li id="type-request.Reconfigure_event_logging" class="def variant constructor anchored"><a href="#type-request.Reconfigure_event_logging" class="anchor"></a><code><span>| </span><span><span class="constructor">Reconfigure_event_logging</span> : <a href="../../../octez-libs/Tezos_base_unix/Internal_event_unix/Configuration/index.html#type-t">Tezos_base_unix.Internal_event_unix.Configuration.t</a> <span class="arrow">&#45;&gt;</span> 
  <span>unit
    <a href="#type-request">request</a></span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-name"><a href="#val-name" class="anchor"></a><code><span><span class="keyword">val</span> name : string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-request_pp"><a href="#val-request_pp" class="anchor"></a><code><span><span class="keyword">val</span> request_pp : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-request">request</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-magic"><a href="#val-magic" class="anchor"></a><code><span><span class="keyword">val</span> magic : <a href="../../../octez-libs/Tezos_base/TzPervasives/Bytes/index.html#type-t">Tezos_base.TzPervasives.Bytes.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parameters_encoding"><a href="#val-parameters_encoding" class="anchor"></a><code><span><span class="keyword">val</span> parameters_encoding : <span><a href="#type-parameters">parameters</a> <a href="../../../octez-libs/Data_encoding/index.html#type-t">Tezos_base.TzPervasives.Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-packed_request"><a href="#type-packed_request" class="anchor"></a><code><span><span class="keyword">type</span> packed_request</span><span> = </span></code><ol><li id="type-packed_request.Erequest" class="def variant constructor anchored"><a href="#type-packed_request.Erequest" class="anchor"></a><code><span>| </span><span><span class="constructor">Erequest</span> : <span><span class="type-var">_</span> <a href="#type-request">request</a></span> <span class="arrow">&#45;&gt;</span> <a href="#type-packed_request">packed_request</a></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-request_encoding"><a href="#val-request_encoding" class="anchor"></a><code><span><span class="keyword">val</span> request_encoding : <span><a href="#type-packed_request">packed_request</a> <a href="../../../octez-libs/Data_encoding/index.html#type-t">Tezos_base.TzPervasives.Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-result_encoding"><a href="#val-result_encoding" class="anchor"></a><code><span><span class="keyword">val</span> result_encoding : <span><span><span class="type-var">'a</span> <a href="#type-request">request</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../../../octez-libs/Data_encoding/index.html#type-t">Tezos_base.TzPervasives.Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reconfigure_event_logging_request"><a href="#val-reconfigure_event_logging_request" class="anchor"></a><code><span><span class="keyword">val</span> reconfigure_event_logging_request : 
  <span><a href="../../../octez-libs/Tezos_base/Internal_event_config/index.html#type-t">Tezos_base.Internal_event_config.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="#type-request">request</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-internal_events"><a href="#val-internal_events" class="anchor"></a><code><span><span class="keyword">val</span> internal_events : <span><a href="#type-parameters">parameters</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../octez-libs/Tezos_base/Internal_event_config/index.html#type-t">Tezos_base.Internal_event_config.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-terminate_request"><a href="#val-terminate_request" class="anchor"></a><code><span><span class="keyword">val</span> terminate_request : <a href="#type-packed_request">packed_request</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-socket_path_prefix"><a href="#val-socket_path_prefix" class="anchor"></a><code><span><span class="keyword">val</span> socket_path_prefix : string</span></code></div><div class="spec-doc"><p>The prefix for the validation socket filename.</p><p>Do not use it directly except for documentation purposes; use <code>socket_path</code> instead.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-socket_path"><a href="#val-socket_path" class="anchor"></a><code><span><span class="keyword">val</span> socket_path : <span><span class="label">socket_dir</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="label">pid</span>:int <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Get the validation socket path.</p><p><code>socket_dir</code> is the directory where the file should be put. <code>pid</code> is the process ID of the validator process.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-command_line_args"><a href="#val-command_line_args" class="anchor"></a><code><span><span class="keyword">val</span> command_line_args : 
  <span><a href="#type-parameters">parameters</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">socket_dir</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>string option</span> * <span>string list</span></span></code></div></div></div></body></html>
