<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Proxy_delegate_maker (octez-shell-libs.Tezos_shell_context.Proxy_delegate_maker)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-shell-libs</a> &#x00BB; <a href="../index.html">Tezos_shell_context</a> &#x00BB; Proxy_delegate_maker</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_shell_context.Proxy_delegate_maker</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-of_memory_tree"><a href="#val-of_memory_tree" class="anchor"></a><code><span><span class="keyword">val</span> of_memory_tree : 
  <span><a href="../../../octez-libs/Tezos_context_memory/Context/index.html#type-tree">Tezos_context_memory.Context.tree</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../octez-proto-libs/Tezos_protocol_environment/Proxy_delegate/index.html#type-t">Tezos_protocol_environment.Proxy_delegate.t</a></span></code></div><div class="spec-doc"><p><code>of_memory_tree t</code> creates a delegate that is backed by the tree <code>t</code>. This is an alternative to delegating to a distant endpoint by doing RPCs (as done in the client, see e.g. <code>proto_alpha/lib_client/proxy.ml</code>). As delegates created by <code>of_memory_tree</code> are backed by an in-memory tree, they are as fast as they can be.</p><p>This constructor is easier to use than <a href="#val-of_memory_context"><code>of_memory_context</code></a>, because it requires only a tree of data; not a context. This constructor is typically useful for tests.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_memory_context"><a href="#val-of_memory_context" class="anchor"></a><code><span><span class="keyword">val</span> of_memory_context : 
  <span><a href="../../../octez-libs/Tezos_context_memory/Context/index.html#type-t">Tezos_context_memory.Context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../octez-proto-libs/Tezos_protocol_environment/Proxy_delegate/index.html#type-t">Tezos_protocol_environment.Proxy_delegate.t</a></span></code></div><div class="spec-doc"><p><code>of_memory_context m</code> creates a delegate that is backed by the tree underlying <code>m</code>. This is an alternative to delegating to a distant endpoint by doing RPCs (as done in the client, see e.g. <code>proto_alpha/lib_client/proxy.ml</code>). As delegates created by <code>of_memory_context</code> are backed by an in-memory tree, they are as fast as they can be.</p><p>This constructor is slightly harder to use than <a href="#val-of_memory_tree"><code>of_memory_tree</code></a>, because it requires a full-fledged context instead of a tree (a context contains a tree, so a context is harder to obtain).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_index"><a href="#val-make_index" class="anchor"></a><code><span><span class="keyword">val</span> make_index : <span><span class="label">context_path</span>:string <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../octez-libs/Tezos_context_disk/Context/index.html#type-index">Tezos_context.Context.index</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>make_index context_path</code> creates an index that is suitable for being passed to <a href="#val-of_index"><code>of_index</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_index"><a href="#val-of_index" class="anchor"></a><code><span><span class="keyword">val</span> of_index : 
  <span><span class="label">index</span>:<a href="../../../octez-libs/Tezos_context_disk/Context/index.html#type-index">Tezos_context.Context.index</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_crypto.Hashed.Context_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../octez-proto-libs/Tezos_protocol_environment/Proxy_delegate/index.html#type-t">Tezos_protocol_environment.Proxy_delegate.t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>of_index index ctxt_hash</code> creates a delegate that checkouts the given index at the given <code>ctxt_hash</code>. It fails in the error monad if the hash is unknown. Otherwise it returns a delegate that queries the tree of data at this hash.</p><p>This constructor is the hardest to use of all of this file, because to obtain an <code>index</code>, you need a full-fledged context on disk.</p></div></div></div></body></html>
