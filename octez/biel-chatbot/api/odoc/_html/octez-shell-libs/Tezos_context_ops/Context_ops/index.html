<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Context_ops (octez-shell-libs.Tezos_context_ops.Context_ops)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-shell-libs</a> &#x00BB; <a href="../index.html">Tezos_context_ops</a> &#x00BB; Context_ops</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_context_ops.Context_ops</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-Environment_context"><a href="#module-Environment_context" class="anchor"></a><code><span><span class="keyword">module</span> Environment_context</span><span> = <a href="../../../octez-proto-libs/Tezos_protocol_environment/Context/index.html">Tezos_protocol_environment.Context</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-err_implementation_mismatch"><a href="#val-err_implementation_mismatch" class="anchor"></a><code><span><span class="keyword">val</span> err_implementation_mismatch : <span><span class="label">expected</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="label">got</span>:string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <a href="../../../octez-proto-libs/Tezos_protocol_environment/Context/index.html#type-t">Environment_context.t</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-index"><a href="#type-index" class="anchor"></a><code><span><span class="keyword">type</span> index</span></code></div><div class="spec-doc"><p>Values of type <code>index</code> are used to <code>checkout</code> contexts specified by their hash.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-do_not_use__is_duo"><a href="#val-do_not_use__is_duo" class="anchor"></a><code><span><span class="keyword">val</span> do_not_use__is_duo : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>do_not_use__is_duo index</code> returns <code>true</code> if the index is in duo mode</p><p>This function should not be used in &quot;normal&quot; code as it is used when the duo mode is enabled. The duo mode is a debug mode used to compare Irmin and Brassaia.</p><p>Making any assumption about the internals of context_ops is a unforgivable mistake</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-backend_variable"><a href="#val-backend_variable" class="anchor"></a><code><span><span class="keyword">val</span> backend_variable : string</span></code></div><div class="spec-doc"><p>Environment variable allowing to chose the context provider (Irmin/Brassaia/Duo)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-context_dir"><a href="#val-context_dir" class="anchor"></a><code><span><span class="keyword">val</span> context_dir : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>context_dir ?envvar root</code> returns the context's directory concatenated to <code>root</code> depending on the backend that was chosen with TEZOS_CONTEXT_BACKEND</p><p>Example:</p><ul><li><code>context_dir &quot;/tmp/&quot;</code> returns <code>&quot;/tmp/context&quot;</code> if Irmin or Duo was chosen</li><li><code>context_dir &quot;/tmp/&quot;</code> returns <code>&quot;/tmp/brassaia_context&quot;</code> if Brassaia was chosen</li></ul><p>This function should always be used when doing operations on the context directory.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-do_not_use__brassaia_dir"><a href="#val-do_not_use__brassaia_dir" class="anchor"></a><code><span><span class="keyword">val</span> do_not_use__brassaia_dir : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>do_not_use__brassaia_dir root</code> will return &quot;&lt;root&gt;/brassaia_context&quot;</p><p>This function should not be used in &quot;normal&quot; code as it is used when importing to copy the imported &quot;context&quot; to &quot;brassaia_context&quot; in duo mode</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : 
  <span><span class="label">kind</span>:<span>[&lt; `Brassaia <span>| `Brassaia_memory</span> <span>| `Disk</span> <span>| `Memory</span> Disk Memory ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?patch_context</span>:
    <span>(<span><a href="../../../octez-proto-libs/Tezos_protocol_environment/Context/index.html#type-t">Tezos_protocol_environment.Context.t</a> <span class="arrow">&#45;&gt;</span></span>
      <span><span><span>(<a href="../../../octez-proto-libs/Tezos_protocol_environment/Context/index.html#type-t">Tezos_protocol_environment.Context.t</a>, <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span>
        <span class="xref-unresolved">Stdlib</span>.result</span>
        <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?readonly</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?index_log_size</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-index">index</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>init</code> uses an environment variable ('TEZOS_CONTEXT_BACKEND') to select the `Disk backend between `Shell and `Brassaia</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-index"><a href="#val-index" class="anchor"></a><code><span><span class="keyword">val</span> index : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-index">index</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mem"><a href="#val-mem" class="anchor"></a><code><span><span class="keyword">val</span> mem : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../octez-libs/Tezos_context_disk/Context/index.html#type-key">Tezos_context.Context.key</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>mem t k</code> is an Lwt promise that resolves to <code>true</code> iff <code>k</code> is bound to a value in <code>t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mem_tree"><a href="#val-mem_tree" class="anchor"></a><code><span><span class="keyword">val</span> mem_tree : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../octez-libs/Tezos_context_disk/Context/index.html#type-key">Tezos_context.Context.key</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>mem_tree t k</code> is like <a href="#val-mem"><code>mem</code></a> but for trees.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find"><a href="#val-find" class="anchor"></a><code><span><span class="keyword">val</span> find : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_context_disk/Context/index.html#type-key">Tezos_context.Context.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../octez-libs/Tezos_context_disk/Context/index.html#type-value">Tezos_context.Context.value</a> option</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>find t k</code> is an Lwt promise that resolves to <code>Some v</code> if <code>k</code> is bound to the value <code>v</code> in <code>t</code> and <code>None</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add"><a href="#val-add" class="anchor"></a><code><span><span class="keyword">val</span> add : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_context_disk/Context/index.html#type-key">Tezos_context.Context.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_context_disk/Context/index.html#type-value">Tezos_context.Context.value</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-proto-libs/Tezos_protocol_environment/Context/index.html#type-t">Tezos_protocol_environment.Context.t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>add t k v</code> is an Lwt promise that resolves to <code>c</code> such that:</p><ul><li><code>k</code> is bound to <code>v</code> in <code>c</code>;</li><li>and <code>c</code> is similar to <code>t</code> otherwise.</li></ul><p>If <code>k</code> was already bound in <code>t</code> to a value that is physically equal to <code>v</code>, the result of the function is a promise that resolves to <code>t</code>. Otherwise, the previous binding of <code>k</code> in <code>t</code> disappears.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_value"><a href="#val-fold_value" class="anchor"></a><code><span><span class="keyword">val</span> fold_value : 
  <span><span class="optlabel">?depth</span>:<span>[ <span>`Eq of int</span> <span><span>| `Le</span> of int</span> <span><span>| `Lt</span> of int</span> <span><span>| `Ge</span> of int</span> <span><span>| `Gt</span> of int</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_context_disk/Context/index.html#type-key">Tezos_context.Context.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">order</span>:<span>[ `Sorted <span>| `Undefined</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">init</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:
    <span>(<span><a href="../../../octez-libs/Tezos_context_disk/Context/index.html#type-key">Tezos_context.Context.key</a> <span class="arrow">&#45;&gt;</span></span>
      <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../../../octez-libs/Tezos_context_disk/Context/index.html#type-value">Tezos_context.Context.value</a> option</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
      <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>fold ?depth t root ~order ~init ~f</code> recursively folds over the trees and values of <code>t</code>. The <code>f</code> callbacks are called with a key relative to <code>root</code>. <code>f</code> is never called with an empty key for values; i.e., folding over a value is a no-op.</p><p>The depth is 0-indexed. If <code>depth</code> is set (by default it is not), then <code>f</code> is only called when the conditions described by the parameter is true:</p><ul><li><code>Eq d</code> folds over nodes and values of depth exactly <code>d</code>.</li><li><code>Lt d</code> folds over nodes and values of depth strictly less than <code>d</code>.</li><li><code>Le d</code> folds over nodes and values of depth less than or equal to <code>d</code>.</li><li><code>Gt d</code> folds over nodes and values of depth strictly more than <code>d</code>.</li><li><code>Ge d</code> folds over nodes and values of depth more than or equal to <code>d</code>.</li></ul><p>If <code>order</code> is <code>`Sorted</code> (the default), the elements are traversed in lexicographic order of their keys. For large nodes, it is memory-consuming, use <code>`Undefined</code> for a more memory efficient <code>fold</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_protocol"><a href="#val-add_protocol" class="anchor"></a><code><span><span class="keyword">val</span> add_protocol : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Protocol_hash/index.html#type-t">Tezos_base.TzPervasives.Protocol_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-proto-libs/Tezos_protocol_environment/Context/index.html#type-t">Tezos_protocol_environment.Context.t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_protocol"><a href="#val-get_protocol" class="anchor"></a><code><span><span class="keyword">val</span> get_protocol : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Protocol_hash/index.html#type-t">Tezos_base.TzPervasives.Protocol_hash.t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_predecessor_block_metadata_hash"><a href="#val-add_predecessor_block_metadata_hash" class="anchor"></a><code><span><span class="keyword">val</span> add_predecessor_block_metadata_hash : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Block_metadata_hash/index.html#type-t">Tezos_base.TzPervasives.Block_metadata_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-proto-libs/Tezos_protocol_environment/Context/index.html#type-t">Tezos_protocol_environment.Context.t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_predecessor_ops_metadata_hash"><a href="#val-add_predecessor_ops_metadata_hash" class="anchor"></a><code><span><span class="keyword">val</span> add_predecessor_ops_metadata_hash : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Operation_metadata_list_list_hash/index.html#type-t">Tezos_base.TzPervasives.Operation_metadata_list_list_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-proto-libs/Tezos_protocol_environment/Context/index.html#type-t">Tezos_protocol_environment.Context.t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hash"><a href="#val-hash" class="anchor"></a><code><span><span class="keyword">val</span> hash : 
  <span><span class="label">time</span>:<a href="../../../octez-libs/Tezos_base/Time/Protocol/index.html#type-t">Tezos_base.TzPervasives.Time.Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?message</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_base.TzPervasives.Context_hash.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_test_chain"><a href="#val-get_test_chain" class="anchor"></a><code><span><span class="keyword">val</span> get_test_chain : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../octez-libs/Tezos_base/Test_chain_status/index.html#type-t">Tezos_base.TzPervasives.Test_chain_status.t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_test_chain"><a href="#val-add_test_chain" class="anchor"></a><code><span><span class="keyword">val</span> add_test_chain : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_base/Test_chain_status/index.html#type-t">Tezos_base.TzPervasives.Test_chain_status.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-proto-libs/Tezos_protocol_environment/Context/index.html#type-t">Tezos_protocol_environment.Context.t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fork_test_chain"><a href="#val-fork_test_chain" class="anchor"></a><code><span><span class="keyword">val</span> fork_test_chain : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">protocol</span>:<a href="../../../octez-libs/Tezos_crypto/Hashed/Protocol_hash/index.html#type-t">Tezos_base.TzPervasives.Protocol_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">expiration</span>:<a href="../../../octez-libs/Tezos_base/Time/Protocol/index.html#type-t">Tezos_base.TzPervasives.Time.Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-proto-libs/Tezos_protocol_environment/Context/index.html#type-t">Tezos_protocol_environment.Context.t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-commit"><a href="#val-commit" class="anchor"></a><code><span><span class="keyword">val</span> commit : 
  <span><span class="label">time</span>:<a href="../../../octez-libs/Tezos_base/Time/Protocol/index.html#type-t">Tezos_base.TzPervasives.Time.Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?message</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_base.TzPervasives.Context_hash.t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-gc"><a href="#val-gc" class="anchor"></a><code><span><span class="keyword">val</span> gc : <span><a href="#type-index">index</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_base.TzPervasives.Context_hash.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>gc index commit_hash</code> removes from disk all the data older than the <code>commit_hash</code>. Operations needing to checkout commits greater or equal to <code>commit_hash</code> will continue to work. Calling <code>checkout h'</code> on GC-ed commits will return <code>None</code>.</p><p>From the irmin point of view, a successful gc call on a <code>commit_hash</code> will result in a new prefix file containing that <code>commit_hash</code> as a root commit. This prefix file is considered as standalone as all the data referenced by that commit is contained in that file.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wait_gc_completion"><a href="#val-wait_gc_completion" class="anchor"></a><code><span><span class="keyword">val</span> wait_gc_completion : <span><a href="#type-index">index</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>wait_gc_completion index</code> will return a blocking thread if an Irmin GC is currently ongoing.</p><p><b>Warning</b>: this currently only applies to GC started in the Irmin instance referenced as <code>index</code>; other opened instances will always return instantly.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_gc_allowed"><a href="#val-is_gc_allowed" class="anchor"></a><code><span><span class="keyword">val</span> is_gc_allowed : <span><a href="#type-index">index</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_gc_allowed index</code> returns whether or not it is possible to run a GC on the given context tree. If false is returned, it means that the context was run, at least once, with the indexing strategy mode &quot;always&quot;, which is not suitable for GC.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-split"><a href="#val-split" class="anchor"></a><code><span><span class="keyword">val</span> split : <span><a href="#type-index">index</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>split index</code> creates a new suffix file, also called &quot;chunk&quot;, into the irmin's file hierarchy.</p><p>To be optimal, the split function is expected to be called directly after committing, to the context, a commit (of hash <code>context_hash</code>) that will be a future candidate of a GC target. Thus, the commit <code>commit_hash</code> is the last commit stored on a given chunk. The GC called on that <code>commit_hash</code> will be able to extract that <code>commit_hash</code> into a new prefix file, and then, drop the whole chunk.</p><p>If the last commit of a chunk appears not to be the candidate of a future GC, it may result in keeping chunks containing partially needed data. This is not an issue, but it should be avoided to prevent storing unnecessary data and thus, to minimize the disk footprint.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sync"><a href="#val-sync" class="anchor"></a><code><span><span class="keyword">val</span> sync : <span><a href="#type-index">index</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Sync the context with disk. Only useful for read-only instances. Does not fail when the context is not in read-only mode.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-commit_test_chain_genesis"><a href="#val-commit_test_chain_genesis" class="anchor"></a><code><span><span class="keyword">val</span> commit_test_chain_genesis : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_base/Block_header/index.html#type-t">Tezos_base.TzPervasives.Block_header.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_base/Block_header/index.html#type-t">Tezos_base.TzPervasives.Block_header.t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compute_testchain_genesis"><a href="#val-compute_testchain_genesis" class="anchor"></a><code><span><span class="keyword">val</span> compute_testchain_genesis : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Block_hash/index.html#type-t">Tezos_base.TzPervasives.Block_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../octez-libs/Tezos_crypto/Hashed/Block_hash/index.html#type-t">Tezos_base.TzPervasives.Block_hash.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-merkle_tree"><a href="#val-merkle_tree" class="anchor"></a><code><span><span class="keyword">val</span> merkle_tree : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Tezos_context_sigs__Context.Proof_types.merkle_leaf_kind</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_context_disk/Context/index.html#type-key">Tezos_context.Context.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="xref-unresolved">Tezos_context_sigs__Context.Proof_types.merkle_node</span>
    <a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-t">Tezos_base.TzPervasives.String.Map.t</a></span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-merkle_tree_v2"><a href="#val-merkle_tree_v2" class="anchor"></a><code><span><span class="keyword">val</span> merkle_tree_v2 : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Tezos_context_sigs__Context.Proof_types.merkle_leaf_kind</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_context_disk/Context/index.html#type-key">Tezos_context.Context.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../octez-libs/Tezos_context_disk/Context/Proof/index.html#type-tree">Tezos_context.Context.Proof.tree</a> <a href="../../../octez-libs/Tezos_context_disk/Context/Proof/index.html#type-t">Tezos_context.Context.Proof.t</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-commit_genesis"><a href="#val-commit_genesis" class="anchor"></a><code><span><span class="keyword">val</span> commit_genesis : 
  <span><a href="#type-index">index</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">chain_id</span>:<a href="../../../octez-libs/Tezos_crypto/Hashed/Chain_id/index.html#type-t">Tezos_base.TzPervasives.Chain_id.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">time</span>:<a href="../../../octez-libs/Tezos_base/Time/Protocol/index.html#type-t">Tezos_base.TzPervasives.Time.Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">protocol</span>:<a href="../../../octez-libs/Tezos_crypto/Hashed/Protocol_hash/index.html#type-t">Tezos_base.TzPervasives.Protocol_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_base.TzPervasives.Context_hash.t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-checkout"><a href="#val-checkout" class="anchor"></a><code><span><span class="keyword">val</span> checkout : 
  <span><a href="#type-index">index</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_base.TzPervasives.Context_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../octez-proto-libs/Tezos_protocol_environment/Context/index.html#type-t">Tezos_protocol_environment.Context.t</a> option</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-checkout_exn"><a href="#val-checkout_exn" class="anchor"></a><code><span><span class="keyword">val</span> checkout_exn : 
  <span><a href="#type-index">index</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_base.TzPervasives.Context_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-proto-libs/Tezos_protocol_environment/Context/index.html#type-t">Tezos_protocol_environment.Context.t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exists"><a href="#val-exists" class="anchor"></a><code><span><span class="keyword">val</span> exists : <span><a href="#type-index">index</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_base.TzPervasives.Context_hash.t</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-close"><a href="#val-close" class="anchor"></a><code><span><span class="keyword">val</span> close : <span><a href="#type-index">index</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compute_testchain_chain_id"><a href="#val-compute_testchain_chain_id" class="anchor"></a><code><span><span class="keyword">val</span> compute_testchain_chain_id : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Block_hash/index.html#type-t">Tezos_base.TzPervasives.Block_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../octez-libs/Tezos_crypto/Hashed/Chain_id/index.html#type-t">Tezos_base.TzPervasives.Chain_id.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-export_snapshot"><a href="#val-export_snapshot" class="anchor"></a><code><span><span class="keyword">val</span> export_snapshot : 
  <span><a href="#type-index">index</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Context_hash/index.html#type-t">Tezos_base.TzPervasives.Context_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">path</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-integrity_check"><a href="#val-integrity_check" class="anchor"></a><code><span><span class="keyword">val</span> integrity_check : 
  <span><span class="optlabel">?ppf</span>:<span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">root</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">auto_repair</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">always</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">heads</span>:<span><span>string list</span> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-index">index</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div></div></body></html>
