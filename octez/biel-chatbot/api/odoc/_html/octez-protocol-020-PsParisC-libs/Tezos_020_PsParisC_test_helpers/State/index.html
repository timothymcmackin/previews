<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>State (octez-protocol-020-PsParisC-libs.Tezos_020_PsParisC_test_helpers.State)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-protocol-020-PsParisC-libs</a> &#x00BB; <a href="../index.html">Tezos_020_PsParisC_test_helpers</a> &#x00BB; State</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_020_PsParisC_test_helpers.State</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-double_signing_state"><a href="#type-double_signing_state" class="anchor"></a><code><span><span class="keyword">type</span> double_signing_state</span><span> = </span><span>{</span></code><ol><li id="type-double_signing_state.culprit" class="def record field anchored"><a href="#type-double_signing_state.culprit" class="anchor"></a><code><span>culprit : <a href="../../../octez-libs/Tezos_crypto/Signature/Public_key_hash/index.html#type-t">Tezos_base.TzPervasives.Signature.Public_key_hash.t</a>;</span></code></li><li id="type-double_signing_state.evidence" class="def record field anchored"><a href="#type-double_signing_state.evidence" class="anchor"></a><code><span>evidence : <span><a href="../Context/index.html#type-t">Context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../tezos-protocol-020-PsParisC/Tezos_raw_protocol_020_PsParisC/Alpha_context/index.html#type-packed_operation">Tezos_protocol_020_PsParisC.Protocol.Alpha_context.packed_operation</a>;</span></code></li><li id="type-double_signing_state.denounced" class="def record field anchored"><a href="#type-double_signing_state.denounced" class="anchor"></a><code><span>denounced : bool;</span></code></li><li id="type-double_signing_state.misbehaviour" class="def record field anchored"><a href="#type-double_signing_state.misbehaviour" class="anchor"></a><code><span>misbehaviour : <a href="../../../tezos-protocol-020-PsParisC/Tezos_raw_protocol_020_PsParisC/Misbehaviour_repr/index.html#type-t">Tezos_protocol_020_PsParisC.Protocol.Misbehaviour_repr.t</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>{</span></code><ol><li id="type-t.account_map" class="def record field anchored"><a href="#type-t.account_map" class="anchor"></a><code><span>account_map : <a href="../State_account/index.html#type-account_map">State_account.account_map</a>;</span></code></li><li id="type-t.total_supply" class="def record field anchored"><a href="#type-t.total_supply" class="anchor"></a><code><span>total_supply : <a href="../Tez_staking_helpers/Tez/index.html#type-t">Tezos_020_PsParisC_test_helpers.State_account.Tez.t</a>;</span></code></li><li id="type-t.constants" class="def record field anchored"><a href="#type-t.constants" class="anchor"></a><code><span>constants : <a href="../../../tezos-protocol-020-PsParisC/Tezos_raw_protocol_020_PsParisC/Alpha_context/Constants/Parametric/index.html#type-t">Tezos_protocol_020_PsParisC.Protocol.Alpha_context.Constants.Parametric.t</a>;</span></code></li><li id="type-t.param_requests" class="def record field anchored"><a href="#type-t.param_requests" class="anchor"></a><code><span>param_requests : <span><span>(string * <a href="../Adaptive_issuance_helpers/index.html#type-staking_parameters">Adaptive_issuance_helpers.staking_parameters</a> * int)</span>
                   list</span>;</span></code></li><li id="type-t.force_ai_vote_yes" class="def record field anchored"><a href="#type-t.force_ai_vote_yes" class="anchor"></a><code><span>force_ai_vote_yes : bool;</span></code></li><li id="type-t.baking_policy" class="def record field anchored"><a href="#type-t.baking_policy" class="anchor"></a><code><span>baking_policy : <span><a href="../Block/index.html#type-baker_policy">Block.baker_policy</a> option</span>;</span></code></li><li id="type-t.last_level_rewards" class="def record field anchored"><a href="#type-t.last_level_rewards" class="anchor"></a><code><span>last_level_rewards : <a href="../../../tezos-protocol-020-PsParisC/Tezos_raw_protocol_020_PsParisC/Alpha_context/Raw_level/index.html#type-t">Tezos_protocol_020_PsParisC.Protocol.Alpha_context.Raw_level.t</a>;</span></code></li><li id="type-t.snapshot_balances" class="def record field anchored"><a href="#type-t.snapshot_balances" class="anchor"></a><code><span>snapshot_balances : <span><span><span>(string * <a href="../State_account/index.html#type-balance">State_account.balance</a>)</span> list</span>
                      <a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-t">Tezos_base.TzPervasives.String.Map.t</a></span>;</span></code></li><li id="type-t.saved_rate" class="def record field anchored"><a href="#type-t.saved_rate" class="anchor"></a><code><span>saved_rate : <span><span class="xref-unresolved">Q</span>.t option</span>;</span></code></li><li id="type-t.burn_rewards" class="def record field anchored"><a href="#type-t.burn_rewards" class="anchor"></a><code><span>burn_rewards : bool;</span></code></li><li id="type-t.pending_operations" class="def record field anchored"><a href="#type-t.pending_operations" class="anchor"></a><code><span>pending_operations : <span><a href="../../../tezos-protocol-020-PsParisC/Tezos_raw_protocol_020_PsParisC/Alpha_context/index.html#type-packed_operation">Tezos_protocol_020_PsParisC.Protocol.Alpha_context.packed_operation</a>
                       list</span>;</span></code></li><li id="type-t.pending_slashes" class="def record field anchored"><a href="#type-t.pending_slashes" class="anchor"></a><code><span>pending_slashes : <span><span>(<a href="../../../octez-libs/Tezos_crypto/Signature/Public_key_hash/index.html#type-t">Tezos_base.TzPervasives.Signature.Public_key_hash.t</a>
                   * <a href="../../../tezos-protocol-020-PsParisC/Tezos_raw_protocol_020_PsParisC/Denunciations_repr/index.html#type-item">Tezos_protocol_020_PsParisC.Protocol.Denunciations_repr.item</a>)</span>
                    list</span>;</span></code></li><li id="type-t.double_signings" class="def record field anchored"><a href="#type-t.double_signings" class="anchor"></a><code><span>double_signings : <span><a href="#type-double_signing_state">double_signing_state</a> list</span>;</span></code></li><li id="type-t.ai_activation_cycle" class="def record field anchored"><a href="#type-t.ai_activation_cycle" class="anchor"></a><code><span>ai_activation_cycle : <span><a href="../../../tezos-protocol-020-PsParisC/Tezos_raw_protocol_020_PsParisC/Alpha_context/Cycle/index.html#type-t">Tezos_protocol_020_PsParisC.Protocol.Alpha_context.Cycle.t</a>
                        option</span>;</span></code></li><li id="type-t.force_attest_all" class="def record field anchored"><a href="#type-t.force_attest_all" class="anchor"></a><code><span>force_attest_all : bool;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Type of the state</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-param_wait"><a href="#val-param_wait" class="anchor"></a><code><span><span class="keyword">val</span> param_wait : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Expected number of cycles before staking parameters get applied</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unstake_wait"><a href="#val-unstake_wait" class="anchor"></a><code><span><span class="keyword">val</span> unstake_wait : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Expected number of cycles before staking unstaked funds get unfrozen</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_account"><a href="#val-find_account" class="anchor"></a><code><span><span class="keyword">val</span> find_account : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../State_account/index.html#type-account_state">State_account.account_state</a></span></code></div><div class="spec-doc"><p>From a name, returns the corresponding account</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_account_from_pkh"><a href="#val-find_account_from_pkh" class="anchor"></a><code><span><span class="keyword">val</span> find_account_from_pkh : 
  <span><a href="../../../octez-libs/Tezos_crypto/Signature/index.html#type-public_key_hash">Tezos_base.TzPervasives.Signature.public_key_hash</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  string * <a href="../State_account/index.html#type-account_state">State_account.account_state</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-liquid_delegated"><a href="#val-liquid_delegated" class="anchor"></a><code><span><span class="keyword">val</span> liquid_delegated : 
  <span><span class="label">name</span>:<a href="../../../octez-libs/Tezos_base/TzPervasives/String/index.html#type-t">Tezos_base.TzPervasives.String.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Tez_staking_helpers/Tez/index.html#type-t">Tezos_020_PsParisC_test_helpers.State_account.Tez.t</a>,
    <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span>
    <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_self_delegate"><a href="#val-is_self_delegate" class="anchor"></a><code><span><span class="keyword">val</span> is_self_delegate : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Returns true iff account is a delegate</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update_map"><a href="#val-update_map" class="anchor"></a><code><span><span class="keyword">val</span> update_map : 
  <span><span class="optlabel">?log_updates</span>:<span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/index.html#type-t">Tezos_base.TzPervasives.String.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span>(<span><a href="../State_account/index.html#type-account_map">State_account.account_map</a> <span class="arrow">&#45;&gt;</span></span> <a href="../State_account/index.html#type-account_map">State_account.account_map</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update_map_es"><a href="#val-update_map_es" class="anchor"></a><code><span><span class="keyword">val</span> update_map_es : 
  <span><span class="optlabel">?log_updates</span>:<span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/index.html#type-t">Tezos_base.TzPervasives.String.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:
    <span>(<span><a href="../State_account/index.html#type-account_map">State_account.account_map</a> <span class="arrow">&#45;&gt;</span></span>
      <span><span><a href="../State_account/index.html#type-account_map">State_account.account_map</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="#type-t">t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-apply_burn"><a href="#val-apply_burn" class="anchor"></a><code><span><span class="keyword">val</span> apply_burn : 
  <span><a href="../Tez_staking_helpers/Tez/index.html#type-t">Tezos_020_PsParisC_test_helpers.State_account.Tez.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-key">Tezos_base.TzPervasives.String.Map.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-apply_transfer"><a href="#val-apply_transfer" class="anchor"></a><code><span><span class="keyword">val</span> apply_transfer : 
  <span><a href="../../../tezos-protocol-020-PsParisC/Tezos_raw_protocol_020_PsParisC/Alpha_context/Tez/index.html#type-t">Tezos_protocol_020_PsParisC.Protocol.Alpha_context.Tez.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-key">Tezos_base.TzPervasives.String.Map.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-key">Tezos_base.TzPervasives.String.Map.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-apply_stake"><a href="#val-apply_stake" class="anchor"></a><code><span><span class="keyword">val</span> apply_stake : 
  <span><a href="../../../tezos-protocol-020-PsParisC/Tezos_raw_protocol_020_PsParisC/Alpha_context/Tez/index.html#type-t">Tezos_protocol_020_PsParisC.Protocol.Alpha_context.Tez.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../tezos-protocol-020-PsParisC/Tezos_raw_protocol_020_PsParisC/Alpha_context/Cycle/index.html#type-cycle">Tezos_020_PsParisC_test_helpers.State_account.Cycle.cycle</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-key">Tezos_base.TzPervasives.String.Map.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-apply_unstake"><a href="#val-apply_unstake" class="anchor"></a><code><span><span class="keyword">val</span> apply_unstake : 
  <span><a href="../../../tezos-protocol-020-PsParisC/Tezos_raw_protocol_020_PsParisC/Alpha_context/Cycle/index.html#type-t">Tezos_protocol_020_PsParisC.Protocol.Alpha_context.Cycle.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../tezos-protocol-020-PsParisC/Tezos_raw_protocol_020_PsParisC/Alpha_context/Tez/index.html#type-t">Tezos_protocol_020_PsParisC.Protocol.Alpha_context.Tez.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-key">Tezos_base.TzPervasives.String.Map.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-apply_finalize"><a href="#val-apply_finalize" class="anchor"></a><code><span><span class="keyword">val</span> apply_finalize : <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-key">Tezos_base.TzPervasives.String.Map.key</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-apply_unslashable"><a href="#val-apply_unslashable" class="anchor"></a><code><span><span class="keyword">val</span> apply_unslashable : 
  <span><a href="../../../tezos-protocol-020-PsParisC/Tezos_raw_protocol_020_PsParisC/Alpha_context/Cycle/index.html#type-cycle">Tezos_020_PsParisC_test_helpers.State_account.Cycle.cycle</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-key">Tezos_base.TzPervasives.String.Map.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-apply_unslashable_for_all"><a href="#val-apply_unslashable_for_all" class="anchor"></a><code><span><span class="keyword">val</span> apply_unslashable_for_all : 
  <span><a href="../../../tezos-protocol-020-PsParisC/Tezos_raw_protocol_020_PsParisC/Alpha_context/Cycle/index.html#type-cycle">Tezos_020_PsParisC_test_helpers.State_account.Cycle.cycle</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-apply_rewards"><a href="#val-apply_rewards" class="anchor"></a><code><span><span class="keyword">val</span> apply_rewards : 
  <span><span class="label">baker</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Block/index.html#type-t">Block.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="#type-t">t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update_account"><a href="#val-update_account" class="anchor"></a><code><span><span class="keyword">val</span> update_account : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="../State_account/index.html#type-account_state">State_account.account_state</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Given an account name and new account state, updates <code>state</code> accordingly Preferably use other specific update functions</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update_delegate"><a href="#val-update_delegate" class="anchor"></a><code><span><span class="keyword">val</span> update_delegate : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_pending_operations"><a href="#val-add_pending_operations" class="anchor"></a><code><span><span class="keyword">val</span> add_pending_operations : 
  <span><span><a href="../../../tezos-protocol-020-PsParisC/Tezos_raw_protocol_020_PsParisC/Alpha_context/index.html#type-packed_operation">Tezos_protocol_020_PsParisC.Protocol.Alpha_context.packed_operation</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pop_pending_operations"><a href="#val-pop_pending_operations" class="anchor"></a><code><span><span class="keyword">val</span> pop_pending_operations : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a> * <span><a href="../../../tezos-protocol-020-PsParisC/Tezos_raw_protocol_020_PsParisC/Alpha_context/index.html#type-packed_operation">Tezos_protocol_020_PsParisC.Protocol.Alpha_context.packed_operation</a> list</span></span></code></div></div></div></body></html>
