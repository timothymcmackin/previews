<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Constants_repr (tezos-protocol-alpha.Tezos_raw_protocol_alpha.Constants_repr)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-protocol-alpha</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_alpha</a> &#x00BB; Constants_repr</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_alpha.Constants_repr</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-version_value"><a href="#val-version_value" class="anchor"></a><code><span><span class="keyword">val</span> version_value : string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-version"><a href="#val-version" class="anchor"></a><code><span><span class="keyword">val</span> version : string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mainnet_id"><a href="#val-mainnet_id" class="anchor"></a><code><span><span class="keyword">val</span> mainnet_id : <a href="../../Tezos_protocol_environment_alpha/Chain_id/index.html#type-t">Tezos_protocol_environment_alpha.Chain_id.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fitness_version_number"><a href="#val-fitness_version_number" class="anchor"></a><code><span><span class="keyword">val</span> fitness_version_number : string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-proof_of_work_nonce_size"><a href="#val-proof_of_work_nonce_size" class="anchor"></a><code><span><span class="keyword">val</span> proof_of_work_nonce_size : int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-nonce_length"><a href="#val-nonce_length" class="anchor"></a><code><span><span class="keyword">val</span> nonce_length : int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_anon_ops_per_block"><a href="#val-max_anon_ops_per_block" class="anchor"></a><code><span><span class="keyword">val</span> max_anon_ops_per_block : int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_proposals_per_delegate"><a href="#val-max_proposals_per_delegate" class="anchor"></a><code><span><span class="keyword">val</span> max_proposals_per_delegate : int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_operation_data_length"><a href="#val-max_operation_data_length" class="anchor"></a><code><span><span class="keyword">val</span> max_operation_data_length : int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_micheline_node_count"><a href="#val-max_micheline_node_count" class="anchor"></a><code><span><span class="keyword">val</span> max_micheline_node_count : int</span></code></div><div class="spec-doc"><p>A global size limit on the size of Micheline expressions after expansion.</p><p>We want to prevent constants from being used to create huge values that could potentially do damage if ever printed or sent over the network. We arrived at this number by finding the largest possible contract in terms of number of nodes. The number of nodes is constrained by the current &quot;max_operation_data_length&quot; (32768) to be ~10,000 ( see &quot;large_flat_contract.tz&quot; in the tezt suite for the largest contract with constants that can be originated). As a first approximation, we set the node size limit to 5 times this amount.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_micheline_bytes_limit"><a href="#val-max_micheline_bytes_limit" class="anchor"></a><code><span><span class="keyword">val</span> max_micheline_bytes_limit : int</span></code></div><div class="spec-doc"><p>Same as <code>max_micheline_node_count</code> but for limiting the combined bytes of the strings, ints and bytes in a expanded Micheline expression.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_allowed_global_constant_depth"><a href="#val-max_allowed_global_constant_depth" class="anchor"></a><code><span><span class="keyword">val</span> max_allowed_global_constant_depth : int</span></code></div><div class="spec-doc"><p>Represents the maximum depth of an expression stored in the table after all references to other constants have (recursively) been expanded, where depth refers to the nesting of <code>Prim</code> and/or <code>Seq</code> nodes.</p><p>The size was chosen arbitrarily to match the typechecker in <code>Script_ir_translator</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-michelson_maximum_type_size"><a href="#val-michelson_maximum_type_size" class="anchor"></a><code><span><span class="keyword">val</span> michelson_maximum_type_size : int</span></code></div><div class="spec-doc"><p>A global size limit on the size of Michelson types.</p><p>The size of a type is the number of nodes in its AST representation. See <code>Script_typed_ir.TYPE_SIZE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_slashing_period"><a href="#val-max_slashing_period" class="anchor"></a><code><span><span class="keyword">val</span> max_slashing_period : int</span></code></div><div class="spec-doc"><p>The max slashing period is the maximum number of cycles after which a misbehaviour can be denounced, i.e. if a misbehaviour happened at cycle <code>c</code>, it will be rejected if it is denounced at cycle <code>c + max_slashing_period</code>. Having <code>max_slashing_period</code> strictly smaller than 2 doesn't make sense. Indeed, if a misbehaviour happens at the very last block of a cycle, it couldn't be denounced. <code>max_slashing_period = 2</code> leaves one cycle to denounce a misbehaviour in the worst case, which is deemed enough. Several parts of the codebase may use the fact that <code>max_slashing_period = 2</code>, so let's ensure it cannot be different.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sc_max_wrapped_proof_binary_size"><a href="#val-sc_max_wrapped_proof_binary_size" class="anchor"></a><code><span><span class="keyword">val</span> sc_max_wrapped_proof_binary_size : int</span></code></div><div class="spec-doc"><p>A size limit for <code>Sc_rollups.wrapped_proof</code> binary encoding.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sc_rollup_message_size_limit"><a href="#val-sc_rollup_message_size_limit" class="anchor"></a><code><span><span class="keyword">val</span> sc_rollup_message_size_limit : int</span></code></div><div class="spec-doc"><p>A limit on the size of the binary encoding for sc rollup messages: <a href="../Sc_rollup_inbox_message_repr/index.html#type-t"><code>Sc_rollup_inbox_message_repr.t</code></a> and <a href="../Sc_rollup_outbox_message_repr/index.html#type-t"><code>Sc_rollup_outbox_message_repr.t</code></a></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sc_rollup_max_number_of_messages_per_level"><a href="#val-sc_rollup_max_number_of_messages_per_level" class="anchor"></a><code><span><span class="keyword">val</span> sc_rollup_max_number_of_messages_per_level : 
  <a href="../../Tezos_protocol_environment_alpha/Z/index.html#type-t">Tezos_protocol_environment_alpha.Z.t</a></span></code></div><div class="spec-doc"><p>A limit on the number of messages in a inbox level enforced in <a href="../Sc_rollup_inbox_repr/index.html#type-t"><code>Sc_rollup_inbox_repr.t</code></a>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-fixed"><a href="#type-fixed" class="anchor"></a><code><span><span class="keyword">type</span> fixed</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fixed_encoding"><a href="#val-fixed_encoding" class="anchor"></a><code><span><span class="keyword">val</span> fixed_encoding : 
  <span><a href="#type-fixed">fixed</a> <a href="../../Tezos_protocol_environment_alpha/Data_encoding/index.html#type-encoding">Tezos_protocol_environment_alpha.Data_encoding.encoding</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <span class="keyword">private</span> </span><span>{</span></code><ol><li id="type-t.fixed" class="def record field anchored"><a href="#type-t.fixed" class="anchor"></a><code><span>fixed : <a href="#type-fixed">fixed</a>;</span></code></li><li id="type-t.parametric" class="def record field anchored"><a href="#type-t.parametric" class="anchor"></a><code><span>parametric : <a href="../Constants_parametric_repr/index.html#type-t">Constants_parametric_repr.t</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-all_of_parametric"><a href="#val-all_of_parametric" class="anchor"></a><code><span><span class="keyword">val</span> all_of_parametric : <span><a href="../Constants_parametric_repr/index.html#type-t">Constants_parametric_repr.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-encoding"><a href="#val-encoding" class="anchor"></a><code><span><span class="keyword">val</span> encoding : <span><a href="#type-t">t</a> <a href="../../Tezos_protocol_environment_alpha/Data_encoding/index.html#type-encoding">Tezos_protocol_environment_alpha.Data_encoding.encoding</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Invalid_protocol_constants"><a href="#extension-decl-Invalid_protocol_constants" class="anchor"></a><code><span><span class="keyword">type</span> <a href="../../Tezos_protocol_environment_alpha/Error_monad/index.html#type-error">Tezos_protocol_environment_alpha.Error_monad.error</a> += </span></code><ol><li id="extension-Invalid_protocol_constants" class="def variant extension anchored"><a href="#extension-Invalid_protocol_constants" class="anchor"></a><code><span>| </span><span><span class="extension">Invalid_protocol_constants</span> <span class="keyword">of</span> string</span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_constants"><a href="#val-check_constants" class="anchor"></a><code><span><span class="keyword">val</span> check_constants : 
  <span><a href="../Constants_parametric_repr/index.html#type-t">Constants_parametric_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../../Tezos_protocol_environment_alpha/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_alpha.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p>performs some consistency checks on the protocol parameters</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Generated"><a href="#module-Generated" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Generated/index.html">Generated</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cache_layout_size"><a href="#val-cache_layout_size" class="anchor"></a><code><span><span class="keyword">val</span> cache_layout_size : int</span></code></div><div class="spec-doc"><p>For each subcache, a size limit needs to be declared once. However, depending how the protocol will be instantiated (sandboxed mode, test network, ...) we may want to change this limit. For each subcache, a parametric constant can be used to change the limit (see <a href="#type-t.parametric"><code>parametric</code></a>).</p><p>The number of subcaches and the limits for all those subcaches form together what is called the <code>cache_layout</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cache_layout"><a href="#val-cache_layout" class="anchor"></a><code><span><span class="keyword">val</span> cache_layout : <span><a href="../Constants_parametric_repr/index.html#type-t">Constants_parametric_repr.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int list</span></span></code></div><div class="spec-doc"><p>The <code>cache_layout</code> depends on parametric constants.</p></div></div></div></body></html>
