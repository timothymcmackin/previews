<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sc_rollup_commitment_repr (tezos-protocol-alpha.Tezos_raw_protocol_alpha.Sc_rollup_commitment_repr)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-protocol-alpha</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_alpha</a> &#x00BB; Sc_rollup_commitment_repr</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_alpha.Sc_rollup_commitment_repr</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-Hash"><a href="#module-Hash" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Hash/index.html">Hash</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-V1"><a href="#module-V1" class="anchor"></a><code><span><span class="keyword">module</span> <a href="V1/index.html">V1</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A commitment represents a claim about the state of the Inbox and PVM at some Inbox level.</p></div></div><div class="odoc-include"><div class="spec-doc"><p>Versioning, see <a href="../Sc_rollup_data_version_sig/module-type-S/index.html"><code>Sc_rollup_data_version_sig.S</code></a> for more information.</p></div><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../Sc_rollup_data_version_sig/module-type-S/index.html">Sc_rollup_data_version_sig.S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Sc_rollup_data_version_sig/module-type-S/index.html#type-t">t</a> = <a href="V1/index.html#type-t">V1.t</a></span></span></code></summary><div class="odoc-spec"><div class="spec type anchored" id="type-versioned"><a href="#type-versioned" class="anchor"></a><code><span><span class="keyword">type</span> versioned</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-versioned_encoding"><a href="#val-versioned_encoding" class="anchor"></a><code><span><span class="keyword">val</span> versioned_encoding : 
  <span><a href="#type-versioned">versioned</a> <a href="../../Tezos_protocol_environment_alpha/Data_encoding/index.html#type-t">Tezos_protocol_environment_alpha.Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_versioned"><a href="#val-of_versioned" class="anchor"></a><code><span><span class="keyword">val</span> of_versioned : <span><a href="#type-versioned">versioned</a> <span class="arrow">&#45;&gt;</span></span> <a href="V1/index.html#type-t">V1.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_versioned"><a href="#val-to_versioned" class="anchor"></a><code><span><span class="keyword">val</span> to_versioned : <span><a href="V1/index.html#type-t">V1.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-versioned">versioned</a></span></code></div></div></details></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="V1/index.html">V1</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="V1/index.html#type-t">t</a> = <a href="V1/index.html#type-t">V1.t</a></span></span></code></summary><p>A commitment represents a claim about the state of the Inbox and PVM at some Inbox level.</p><p>More formally, a commitment is a claim that:</p><ul><li>assuming the PVM and Inbox are in a state implied by <code>predecessor</code></li><li>the PVM consumes all the messages until (and including) <code>inbox_level</code> from the inbox ;</li><li>the PVM advances to the state <code>compressed_state</code> over <code>number_of_ticks</code> ticks.</li></ul><p>Commitments are disjoint. The next correct commitment is a function of the previous machine state and Inbox.</p><p><code>compressed_state</code> and <code>number_of_ticks</code> can be proven/disproven by PVM execution, or equivalently, by an interactive proof game between conflicting parties, such that a correct executor always wins the game.</p><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <a href="V1/index.html#type-t">V1.t</a></span><span> = </span><span>{</span></code><ol><li id="type-t.compressed_state" class="def record field anchored"><a href="#type-t.compressed_state" class="anchor"></a><code><span>compressed_state : <a href="../Sc_rollup_repr/State_hash/index.html#type-t">Sc_rollup_repr.State_hash.t</a>;</span></code></li><li id="type-t.inbox_level" class="def record field anchored"><a href="#type-t.inbox_level" class="anchor"></a><code><span>inbox_level : <a href="../Raw_level_repr/index.html#type-t">Raw_level_repr.t</a>;</span></code></li><li id="type-t.predecessor" class="def record field anchored"><a href="#type-t.predecessor" class="anchor"></a><code><span>predecessor : <a href="Hash/index.html#type-t">Hash.t</a>;</span></code></li><li id="type-t.number_of_ticks" class="def record field anchored"><a href="#type-t.number_of_ticks" class="anchor"></a><code><span>number_of_ticks : <a href="../Sc_rollup_repr/Number_of_ticks/index.html#type-t">Sc_rollup_repr.Number_of_ticks.t</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><a href="../../Tezos_protocol_environment_alpha/Format/index.html#type-formatter">Tezos_protocol_environment_alpha.Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-encoding"><a href="#val-encoding" class="anchor"></a><code><span><span class="keyword">val</span> encoding : <span><a href="#type-t">t</a> <a href="../../Tezos_protocol_environment_alpha/Data_encoding/index.html#type-t">Tezos_protocol_environment_alpha.Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hash_uncarbonated"><a href="#val-hash_uncarbonated" class="anchor"></a><code><span><span class="keyword">val</span> hash_uncarbonated : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Hash/index.html#type-t">Hash.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-genesis_commitment"><a href="#val-genesis_commitment" class="anchor"></a><code><span><span class="keyword">val</span> genesis_commitment : 
  <span><span class="label">origination_level</span>:<a href="../Raw_level_repr/index.html#type-t">Raw_level_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">genesis_state_hash</span>:<a href="../Sc_rollup_repr/State_hash/index.html#type-t">Sc_rollup_repr.State_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>genesis_commitment ~origination_level ~genesis_state_hash</code> is the commitment that the protocol &quot;publish&quot; and &quot;cement&quot; when originating a new rollup. Each rollup have a different <code>genesis_commitment</code> because the <code>compressed_state</code> is computed after the boot sector is set. It has the following values:</p><ul><li><code>compressed_state</code> = <code>genesis_state_hash</code></li><li><code>inbox_level</code> = <code>origination_level</code></li><li><code>predecessor</code> = <a href="Hash/index.html#val-zero"><code>Hash.zero</code></a></li><li><code>number_of_ticks</code> = <a href="../Sc_rollup_repr/Number_of_ticks/index.html#val-min_value"><code>Sc_rollup_repr.Number_of_ticks.min_value</code></a></li></ul><p>where <code>Sc_rollup_repr.Number_of_messages.min_value</code> and <a href="../Sc_rollup_repr/Number_of_ticks/index.html#val-min_value"><code>Sc_rollup_repr.Number_of_ticks.min_value</code></a> are equal to <code>zero</code>.</p><p>See <a href="../Sc_rollup_storage/index.html#val-originate"><code>Sc_rollup_storage.originate</code></a> for the usage.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-genesis_info"><a href="#type-genesis_info" class="anchor"></a><code><span><span class="keyword">type</span> genesis_info</span><span> = </span><span>{</span></code><ol><li id="type-genesis_info.level" class="def record field anchored"><a href="#type-genesis_info.level" class="anchor"></a><code><span>level : <a href="../Raw_level_repr/index.html#type-t">Raw_level_repr.t</a>;</span></code></li><li id="type-genesis_info.commitment_hash" class="def record field anchored"><a href="#type-genesis_info.commitment_hash" class="anchor"></a><code><span>commitment_hash : <a href="Hash/index.html#type-t">Hash.t</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>The genesis of a rollup is characterized by the Tezos level of the rollup origination, and the hash of the commitment computed by the protocol to specialize the PVM initial state with the provided boot sector.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-genesis_info_encoding"><a href="#val-genesis_info_encoding" class="anchor"></a><code><span><span class="keyword">val</span> genesis_info_encoding : 
  <span><a href="#type-genesis_info">genesis_info</a> <a href="../../Tezos_protocol_environment_alpha/Data_encoding/index.html#type-t">Tezos_protocol_environment_alpha.Data_encoding.t</a></span></span></code></div></div></details></div></div></body></html>
