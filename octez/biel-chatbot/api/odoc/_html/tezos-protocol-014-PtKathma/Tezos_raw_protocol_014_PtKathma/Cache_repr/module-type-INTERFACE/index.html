<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>INTERFACE (tezos-protocol-014-PtKathma.Tezos_raw_protocol_014_PtKathma.Cache_repr.INTERFACE)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">tezos-protocol-014-PtKathma</a> &#x00BB; <a href="../../index.html">Tezos_raw_protocol_014_PtKathma</a> &#x00BB; <a href="../index.html">Cache_repr</a> &#x00BB; INTERFACE</nav><header class="odoc-preamble"><h1>Module type <code><span>Cache_repr.INTERFACE</span></code></h1><p>An <code>INTERFACE</code> to the subcache where keys live in a given <code>namespace</code>.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-cached_value"><a href="#type-cached_value" class="anchor"></a><code><span><span class="keyword">type</span> cached_value</span></code></div><div class="spec-doc"><p>The type of value to be stored in the cache.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update"><a href="#val-update" class="anchor"></a><code><span><span class="keyword">val</span> update : 
  <span><a href="../../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-identifier">identifier</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="#type-cached_value">cached_value</a> * <a href="../index.html#type-size">size</a>)</span> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Raw_context/index.html#type-t">Raw_context.t</a> <a href="../../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p><code>update ctxt i (Some (e, size))</code> returns a context where the value <code>e</code> of given <code>size</code> is associated to identifier <code>i</code> in the subcache. If <code>i</code> is already in the subcache, the cache entry is updated.</p><p><code>update ctxt i None</code> removes <code>i</code> from the subcache.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find"><a href="#val-find" class="anchor"></a><code><span><span class="keyword">val</span> find : 
  <span><a href="../../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-identifier">identifier</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="#type-cached_value">cached_value</a> option</span>
    <a href="../../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span>
    <a href="../../../Tezos_protocol_environment_014_PtKathma/Lwt/index.html#type-t">Tezos_protocol_environment_014_PtKathma.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>find ctxt i = Some v</code> if <code>v</code> is the value associated to <code>i</code> in the subcache. Returns <code>None</code> if there is no such value in the subcache. This function is in the Lwt monad because if the value may have not been constructed (see the lazy loading mode in <code>Environment_context</code>), it is constructed on the fly.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_identifiers"><a href="#val-list_identifiers" class="anchor"></a><code><span><span class="keyword">val</span> list_identifiers : <span><a href="../../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(string * int)</span> list</span></span></code></div><div class="spec-doc"><p><code>list_identifiers ctxt</code> returns the list of the identifiers of the cached values along with their respective size. The returned list is sorted in terms of their age in the cache, the oldest coming first.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-identifier_rank"><a href="#val-identifier_rank" class="anchor"></a><code><span><span class="keyword">val</span> identifier_rank : <span><a href="../../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int option</span></span></code></div><div class="spec-doc"><p><code>identifier_rank ctxt identifier</code> returns the number of cached values older than the one of <code>identifier</code>; or, <code>None</code> if the <code>identifier</code> has no associated value in the subcache.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-size"><a href="#val-size" class="anchor"></a><code><span><span class="keyword">val</span> size : <span><a href="../../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>size ctxt</code> returns an overapproximation of the subcache size. Note that the size unit is subcache specific.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-size_limit"><a href="#val-size_limit" class="anchor"></a><code><span><span class="keyword">val</span> size_limit : <span><a href="../../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>size_limit ctxt</code> returns the maximal size of the subcache. Note that the size unit is subcache specific.</p></div></div></div></body></html>
