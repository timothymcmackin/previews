<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Script_ir_annot (tezos-protocol-014-PtKathma.Tezos_raw_protocol_014_PtKathma.Script_ir_annot)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-protocol-014-PtKathma</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_014_PtKathma</a> &#x00BB; Script_ir_annot</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_014_PtKathma.Script_ir_annot</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-error_unexpected_annot"><a href="#val-error_unexpected_annot" class="anchor"></a><code><span><span class="keyword">val</span> error_unexpected_annot : 
  <span><a href="../Alpha_context/Script/index.html#type-location">Alpha_context.Script.location</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>an error <code>Unexpected_annotation</code> in the monad the list is not empty.</p></li></ul></div></div><p>check_xxx_annot functions below are remains from the past (they were called parse_xxx_annot before). They check that annotations are well-formed and, depending on different contexts, that only the annotations that are expected to be found are present. Hopefully we will relax this property soon.</p><div class="odoc-spec"><div class="spec value anchored" id="val-check_type_annot"><a href="#val-check_type_annot" class="anchor"></a><code><span><span class="keyword">val</span> check_type_annot : 
  <span><a href="../Alpha_context/Script/index.html#type-location">Alpha_context.Script.location</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p>Check a type annotation only.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_field_annot"><a href="#val-is_field_annot" class="anchor"></a><code><span><span class="keyword">val</span> is_field_annot : 
  <span><a href="../Alpha_context/Script/index.html#type-location">Alpha_context.Script.location</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>bool <a href="../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p>Check a field annotation only.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_composed_type_annot"><a href="#val-check_composed_type_annot" class="anchor"></a><code><span><span class="keyword">val</span> check_composed_type_annot : 
  <span><a href="../Alpha_context/Script/index.html#type-location">Alpha_context.Script.location</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p>Check an annotation for composed types, of the form <code>:ty_name %field1 %field2</code> in any order.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-has_field_annot"><a href="#val-has_field_annot" class="anchor"></a><code><span><span class="keyword">val</span> has_field_annot : 
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span>bool <a href="../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p>Checks whether a node has a field annotation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_field_annot"><a href="#val-remove_field_annot" class="anchor"></a><code><span><span class="keyword">val</span> remove_field_annot : 
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a>
    <a href="../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p>Removes a field annotation from a node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extract_entrypoint_annot"><a href="#val-extract_entrypoint_annot" class="anchor"></a><code><span><span class="keyword">val</span> extract_entrypoint_annot : 
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> * <span><a href="../Alpha_context/Entrypoint/index.html#type-t">Alpha_context.Entrypoint.t</a> option</span>)</span>
    <a href="../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p>Extract and remove a field annotation as an entrypoint from a node</p></div></div><p>Instruction annotations parsing</p><div class="odoc-spec"><div class="spec value anchored" id="val-check_var_annot"><a href="#val-check_var_annot" class="anchor"></a><code><span><span class="keyword">val</span> check_var_annot : 
  <span><a href="../Alpha_context/Script/index.html#type-location">Alpha_context.Script.location</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p>Check a variable annotation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_allowed_char"><a href="#val-is_allowed_char" class="anchor"></a><code><span><span class="keyword">val</span> is_allowed_char : <span>char <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_constr_annot"><a href="#val-check_constr_annot" class="anchor"></a><code><span><span class="keyword">val</span> check_constr_annot : 
  <span><a href="../Alpha_context/Script/index.html#type-location">Alpha_context.Script.location</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_two_var_annot"><a href="#val-check_two_var_annot" class="anchor"></a><code><span><span class="keyword">val</span> check_two_var_annot : 
  <span><a href="../Alpha_context/Script/index.html#type-location">Alpha_context.Script.location</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_destr_annot"><a href="#val-check_destr_annot" class="anchor"></a><code><span><span class="keyword">val</span> check_destr_annot : 
  <span><a href="../Alpha_context/Script/index.html#type-location">Alpha_context.Script.location</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_unpair_annot"><a href="#val-check_unpair_annot" class="anchor"></a><code><span><span class="keyword">val</span> check_unpair_annot : 
  <span><a href="../Alpha_context/Script/index.html#type-location">Alpha_context.Script.location</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_entrypoint_annot_strict"><a href="#val-parse_entrypoint_annot_strict" class="anchor"></a><code><span><span class="keyword">val</span> parse_entrypoint_annot_strict : 
  <span><a href="../Alpha_context/Script/index.html#type-location">Alpha_context.Script.location</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Entrypoint/index.html#type-t">Alpha_context.Entrypoint.t</a>
    <a href="../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p>Parses a field annotation and converts it to an entrypoint. An error is returned if the annotation is too long or is &quot;default&quot;. An empty annotation is converted to &quot;default&quot;.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_entrypoint_annot_lax"><a href="#val-parse_entrypoint_annot_lax" class="anchor"></a><code><span><span class="keyword">val</span> parse_entrypoint_annot_lax : 
  <span><a href="../Alpha_context/Script/index.html#type-location">Alpha_context.Script.location</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Entrypoint/index.html#type-t">Alpha_context.Entrypoint.t</a>
    <a href="../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p>Parse a field annotation and convert it to an entrypoint. An error is returned if the field annot is too long. An empty annotation is converted to &quot;default&quot;.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_var_type_annot"><a href="#val-check_var_type_annot" class="anchor"></a><code><span><span class="keyword">val</span> check_var_type_annot : 
  <span><a href="../Alpha_context/Script/index.html#type-location">Alpha_context.Script.location</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../../Tezos_protocol_environment_014_PtKathma/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_014_PtKathma.Error_monad.tzresult</a></span></span></code></div></div></div></body></html>
