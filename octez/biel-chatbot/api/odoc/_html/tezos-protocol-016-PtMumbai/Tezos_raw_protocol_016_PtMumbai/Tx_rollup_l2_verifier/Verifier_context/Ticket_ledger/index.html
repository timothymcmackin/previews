<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ticket_ledger (tezos-protocol-016-PtMumbai.Tezos_raw_protocol_016_PtMumbai.Tx_rollup_l2_verifier.Verifier_context.Ticket_ledger)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">tezos-protocol-016-PtMumbai</a> &#x00BB; <a href="../../../index.html">Tezos_raw_protocol_016_PtMumbai</a> &#x00BB; <a href="../../index.html">Tx_rollup_l2_verifier</a> &#x00BB; <a href="../index.html">Verifier_context</a> &#x00BB; Ticket_ledger</nav><header class="odoc-preamble"><h1>Module <code><span>Verifier_context.Ticket_ledger</span></code></h1><p>The ledger of the layer 2 where are registered the amount of a given ticket a L2 <code>account</code> has in its possession.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-get"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : 
  <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Tx_rollup_l2_context_sig/index.html#type-ticket_index">Tx_rollup_l2_context_sig.ticket_index</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Tx_rollup_l2_context_sig/index.html#type-address_index">Tx_rollup_l2_context_sig.address_index</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Tx_rollup_l2_qty/index.html#type-t">Tx_rollup_l2_qty.t</a> <a href="../index.html#type-m">m</a></span></span></code></div><div class="spec-doc"><p><code>get ctxt tidx aidx</code> returns the quantity of tickets (<code>tidx</code>) <code>aidx</code> owns.</p><p><b>Note:</b> It is the responsibility of the caller to verify that <code>aidx</code> and <code>tidx</code> have been associated to an address and a ticket respectively. The function will return zero when the address has no such ticket.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-credit"><a href="#val-credit" class="anchor"></a><code><span><span class="keyword">val</span> credit : 
  <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Tx_rollup_l2_context_sig/index.html#type-ticket_index">Tx_rollup_l2_context_sig.ticket_index</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Tx_rollup_l2_context_sig/index.html#type-address_index">Tx_rollup_l2_context_sig.address_index</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Tx_rollup_l2_qty/index.html#type-t">Tx_rollup_l2_qty.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-t">t</a> <a href="../index.html#type-m">m</a></span></span></code></div><div class="spec-doc"><p><code>credit ctxt tidx aidx qty</code> updates the ledger to increase the number of tickets indexed by <code>tidx</code> the address <code>aidx</code> owns by <code>qty</code> units.</p><p>This function can fail with <code>Balance_overflow</code> if adding <code>qty</code> to the current balance of <code>aidx</code> causes an integer overflow.</p><p>This function can fail with <code>Invalid_quantity</code> if <code>qty</code> is not strictly positive.</p><p><b>Note:</b> It is the responsibility of the caller to verify that <code>aidx</code> and <code>tidx</code> have been associated to an address and a ticket respectively.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spend"><a href="#val-spend" class="anchor"></a><code><span><span class="keyword">val</span> spend : 
  <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Tx_rollup_l2_context_sig/index.html#type-ticket_index">Tx_rollup_l2_context_sig.ticket_index</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Tx_rollup_l2_context_sig/index.html#type-address_index">Tx_rollup_l2_context_sig.address_index</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Tx_rollup_l2_qty/index.html#type-t">Tx_rollup_l2_qty.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-t">t</a> <a href="../index.html#type-m">m</a></span></span></code></div><div class="spec-doc"><p><code>spend ctxt tidx aidx qty</code> updates the ledger to decrease the number of tickets indexed by <code>tidx</code> the address <code>aidx</code> owns by <code>qty</code> units.</p><p>This function can fail with <code>Balance_too_low</code> if <code>aidx</code> does not own at least <code>qty</code> ticket.</p><p><b>Note:</b> It is the responsibility of the caller to verify that <code>aidx</code> and <code>tidx</code> have been associated to an address and a ticket respectively.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Internal_for_tests"><a href="#module-Internal_for_tests" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Internal_for_tests/index.html">Internal_for_tests</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
