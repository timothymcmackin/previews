<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ticket_transfer (tezos-protocol-016-PtMumbai.Tezos_raw_protocol_016_PtMumbai.Ticket_transfer)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-protocol-016-PtMumbai</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_016_PtMumbai</a> &#x00BB; Ticket_transfer</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_016_PtMumbai.Ticket_transfer</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-parse_ticket"><a href="#val-parse_ticket" class="anchor"></a><code><span><span class="keyword">val</span> parse_ticket : 
  <span><span class="label">consume_deserialization_gas</span>:<a href="../Alpha_context/Script/index.html#type-consume_deserialization_gas">Alpha_context.Script.consume_deserialization_gas</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">ticketer</span>:<a href="../Alpha_context/Contract/index.html#type-t">Alpha_context.Contract.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">contents</span>:<a href="../Alpha_context/Script/index.html#type-lazy_expr">Alpha_context.Script.lazy_expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">ty</span>:<a href="../Alpha_context/Script/index.html#type-lazy_expr">Alpha_context.Script.lazy_expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> * <a href="../Ticket_token/index.html#type-ex_token">Ticket_token.ex_token</a>,
    <span><a href="../../Tezos_protocol_environment_016_PtMumbai/Error_monad/index.html#type-error">Tezos_protocol_environment_016_PtMumbai.Error_monad.error</a>
      <a href="../../Tezos_protocol_environment_016_PtMumbai/Error_monad/index.html#type-trace">Tezos_protocol_environment_016_PtMumbai.Error_monad.trace</a></span>)</span>
    <a href="../../Tezos_protocol_environment_016_PtMumbai/Pervasives/index.html#type-result">Tezos_protocol_environment_016_PtMumbai.Pervasives.result</a></span>
    <a href="../../Tezos_protocol_environment_016_PtMumbai/Lwt/index.html#type-t">Tezos_protocol_environment_016_PtMumbai.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>parse_ticket ~ticketer ~contents ~ty
    ctxt</code> reconstructs a ticket from individual parts submitted as part of a layer-1 operation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_ticket_and_operation"><a href="#val-parse_ticket_and_operation" class="anchor"></a><code><span><span class="keyword">val</span> parse_ticket_and_operation : 
  <span><span class="label">consume_deserialization_gas</span>:<a href="../Alpha_context/Script/index.html#type-consume_deserialization_gas">Alpha_context.Script.consume_deserialization_gas</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">ticketer</span>:<a href="../Alpha_context/Contract/index.html#type-t">Alpha_context.Contract.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">contents</span>:<a href="../Alpha_context/Script/index.html#type-lazy_expr">Alpha_context.Script.lazy_expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">ty</span>:<a href="../Alpha_context/Script/index.html#type-lazy_expr">Alpha_context.Script.lazy_expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">source</span>:<a href="../Alpha_context/Destination/index.html#type-t">Alpha_context.Destination.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">destination</span>:<a href="../Contract_hash/index.html#type-t">Contract_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">entrypoint</span>:<a href="../Alpha_context/Entrypoint/index.html#type-t">Alpha_context.Entrypoint.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">amount</span>:<a href="../Script_typed_ir/index.html#type-ticket_amount">Script_typed_ir.ticket_amount</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>
   * <a href="../Ticket_token/index.html#type-ex_token">Ticket_token.ex_token</a>
   * <a href="../Script_typed_ir/index.html#type-packed_internal_operation">Script_typed_ir.packed_internal_operation</a>)</span>
    <a href="../../Tezos_protocol_environment_016_PtMumbai/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_016_PtMumbai.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_016_PtMumbai/Lwt/index.html#type-t">Tezos_protocol_environment_016_PtMumbai.Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Same as <code>parse_ticket</code>, but in addition, build a transaction to let <code>source</code> transfers <code>amount</code> units of said ticket to <code>destination</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-transfer_ticket_with_hashes"><a href="#val-transfer_ticket_with_hashes" class="anchor"></a><code><span><span class="keyword">val</span> transfer_ticket_with_hashes : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">src_hash</span>:<a href="../Alpha_context/Ticket_hash/index.html#type-t">Alpha_context.Ticket_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">dst_hash</span>:<a href="../Alpha_context/Ticket_hash/index.html#type-t">Alpha_context.Ticket_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Ticket_amount/index.html#type-t">Ticket_amount.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> * <a href="../../Tezos_protocol_environment_016_PtMumbai/Z/index.html#type-t">Tezos_protocol_environment_016_PtMumbai.Z.t</a>)</span>
    <a href="../../Tezos_protocol_environment_016_PtMumbai/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_016_PtMumbai.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_016_PtMumbai/Lwt/index.html#type-t">Tezos_protocol_environment_016_PtMumbai.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>transfer_ticket_with_hashes ctxt ~src_hash ~dst_hash qty</code> updates the table of tickets moves <code>qty</code> units of a given ticket from a source to a destination, as encoded by <code>src_hash</code> and <code>dst_hash</code>.</p><p>Consistency between <code>src_hash</code> and <code>dst_hash</code> is the responsibility of the caller. Whenever possible, <code>transfer_ticket</code> should be preferred, but <code>transfer_ticket_with_hashes</code> could be preferred to reduce gas comsumption (e.g., to reuse hashes already computed).</p><p>In addition to an updated context, this function returns the number of bytes that were newly allocated for the table of tickets.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-transfer_ticket"><a href="#val-transfer_ticket" class="anchor"></a><code><span><span class="keyword">val</span> transfer_ticket : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">src</span>:<a href="../Alpha_context/Destination/index.html#type-t">Alpha_context.Destination.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">dst</span>:<a href="../Alpha_context/Destination/index.html#type-t">Alpha_context.Destination.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Ticket_token/index.html#type-ex_token">Ticket_token.ex_token</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Ticket_amount/index.html#type-t">Ticket_amount.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> * <a href="../../Tezos_protocol_environment_016_PtMumbai/Z/index.html#type-t">Tezos_protocol_environment_016_PtMumbai.Z.t</a>,
    <span><a href="../../Tezos_protocol_environment_016_PtMumbai/Error_monad/index.html#type-error">Tezos_protocol_environment_016_PtMumbai.Error_monad.error</a>
      <a href="../../Tezos_protocol_environment_016_PtMumbai/Error_monad/index.html#type-trace">Tezos_protocol_environment_016_PtMumbai.Error_monad.trace</a></span>)</span>
    <a href="../../Tezos_protocol_environment_016_PtMumbai/Pervasives/index.html#type-result">Tezos_protocol_environment_016_PtMumbai.Pervasives.result</a></span>
    <a href="../../Tezos_protocol_environment_016_PtMumbai/Lwt/index.html#type-t">Tezos_protocol_environment_016_PtMumbai.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>transfer_ticket ctxt ~src ~dst ex_token qty</code> updates the table of tickets moves <code>qty</code> units of <code>ex_token</code> from <code>src</code> to <code>dst</code>, as encoded by <code>src_hash</code> and <code>dst_hash</code>.</p><p>In addition to an updated context, this function returns the number of bytes that were newly allocated for the table of tickets.</p></div></div></div></body></html>
