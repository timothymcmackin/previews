<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Seed_repr (tezos-protocol-016-PtMumbai.Tezos_raw_protocol_016_PtMumbai.Seed_repr)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-protocol-016-PtMumbai</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_016_PtMumbai</a> &#x00BB; Seed_repr</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_016_PtMumbai.Seed_repr</span></code></h1><p>Tezos Protocol Implementation - Random number generation</p><p>This is not expected to be a good cryptographic random number generator. In particular this is supposed to be used in situations where the seed is a globally known information.</p><p>The only expected property is: It should be difficult to find a seed such that the generated sequence is a given one.</p></header><nav class="odoc-toc"><ul><li><a href="#random-generation">Random Generation</a></li><li><a href="#entropy">Entropy</a></li><li><a href="#predefined-nonce">Predefined nonce</a></li><li><a href="#serializers">Serializers</a></li></ul></nav><div class="odoc-content"><h3 id="random-generation"><a href="#random-generation" class="anchor"></a>Random Generation</h3><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>The state of the random number generator</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-seed"><a href="#type-seed" class="anchor"></a><code><span><span class="keyword">type</span> seed</span></code></div><div class="spec-doc"><p>A random seed, to derive random sequences from</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-sequence"><a href="#type-sequence" class="anchor"></a><code><span><span class="keyword">type</span> sequence</span></code></div><div class="spec-doc"><p>A random sequence, to derive random values from</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-vdf_setup"><a href="#type-vdf_setup" class="anchor"></a><code><span><span class="keyword">type</span> vdf_setup</span><span> =
  <a href="../../Tezos_protocol_environment_016_PtMumbai/Vdf/index.html#type-discriminant">Tezos_protocol_environment_016_PtMumbai.Vdf.discriminant</a>
  * <a href="../../Tezos_protocol_environment_016_PtMumbai/Vdf/index.html#type-challenge">Tezos_protocol_environment_016_PtMumbai.Vdf.challenge</a></span></code></div><div class="spec-doc"><p>A VDF discriminant and challenge</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-vdf_solution"><a href="#type-vdf_solution" class="anchor"></a><code><span><span class="keyword">type</span> vdf_solution</span><span> =
  <a href="../../Tezos_protocol_environment_016_PtMumbai/Vdf/index.html#type-result">Tezos_protocol_environment_016_PtMumbai.Vdf.result</a>
  * <a href="../../Tezos_protocol_environment_016_PtMumbai/Vdf/index.html#type-proof">Tezos_protocol_environment_016_PtMumbai.Vdf.proof</a></span></code></div><div class="spec-doc"><p>A VDF result, to derive a seed from</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_solution"><a href="#val-pp_solution" class="anchor"></a><code><span><span class="keyword">val</span> pp_solution : 
  <span><a href="../../Tezos_protocol_environment_016_PtMumbai/Format/index.html#type-formatter">Tezos_protocol_environment_016_PtMumbai.Format.formatter</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-vdf_solution">vdf_solution</a> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compare_vdf_solution"><a href="#val-compare_vdf_solution" class="anchor"></a><code><span><span class="keyword">val</span> compare_vdf_solution : <span><a href="#type-vdf_solution">vdf_solution</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vdf_solution">vdf_solution</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Compare only the first element of two vdf_solution, that are of <code>Vdf.result</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-generate_vdf_setup"><a href="#val-generate_vdf_setup" class="anchor"></a><code><span><span class="keyword">val</span> generate_vdf_setup : 
  <span><span class="label">seed_discriminant</span>:<a href="#type-seed">seed</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">seed_challenge</span>:<a href="#type-seed">seed</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-vdf_setup">vdf_setup</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-verify"><a href="#val-verify" class="anchor"></a><code><span><span class="keyword">val</span> verify : 
  <span><a href="#type-vdf_setup">vdf_setup</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_protocol_environment_016_PtMumbai/Int64/index.html#type-t">Tezos_protocol_environment_016_PtMumbai.Int64.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-vdf_solution">vdf_solution</a> <span class="arrow">&#45;&gt;</span></span>
  <span>bool option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-vdf_to_seed"><a href="#val-vdf_to_seed" class="anchor"></a><code><span><span class="keyword">val</span> vdf_to_seed : <span><a href="#type-seed">seed</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vdf_solution">vdf_solution</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-seed">seed</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-initialize_new"><a href="#val-initialize_new" class="anchor"></a><code><span><span class="keyword">val</span> initialize_new : <span><a href="#type-seed">seed</a> <span class="arrow">&#45;&gt;</span></span> <span><span>bytes list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>initialize_new state ident</code> returns a new generator</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sequence"><a href="#val-sequence" class="anchor"></a><code><span><span class="keyword">val</span> sequence : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int32 <span class="arrow">&#45;&gt;</span></span> <a href="#type-sequence">sequence</a></span></code></div><div class="spec-doc"><p><code>sequence state n</code> prepares the n-th sequence of a state</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-take"><a href="#val-take" class="anchor"></a><code><span><span class="keyword">val</span> take : <span><a href="#type-sequence">sequence</a> <span class="arrow">&#45;&gt;</span></span> bytes * <a href="#type-sequence">sequence</a></span></code></div><div class="spec-doc"><p>Generates the next random value in the sequence</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-take_int32"><a href="#val-take_int32" class="anchor"></a><code><span><span class="keyword">val</span> take_int32 : <span><a href="#type-sequence">sequence</a> <span class="arrow">&#45;&gt;</span></span> <span>int32 <span class="arrow">&#45;&gt;</span></span> int32 * <a href="#type-sequence">sequence</a></span></code></div><div class="spec-doc"><p><code>take_int32 s bound</code> generates the next random value as a bounded <code>int32</code></p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">bound</span> <p>must be a positive integer</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Invalid_argument</code> <p>&quot;Seed_repr.take_int32&quot; if <code>bound</code> &lt;= 0</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-take_int64"><a href="#val-take_int64" class="anchor"></a><code><span><span class="keyword">val</span> take_int64 : <span><a href="#type-sequence">sequence</a> <span class="arrow">&#45;&gt;</span></span> <span>int64 <span class="arrow">&#45;&gt;</span></span> int64 * <a href="#type-sequence">sequence</a></span></code></div><div class="spec-doc"><p><code>take_int64 s bound</code> generates the next random value as a bounded <code>int64</code></p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">bound</span> <p>must be a positive integer</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Invalid_argument</code> <p>&quot;Seed_repr.take_int64&quot; if <code>bound</code> &lt;= 0</p></li></ul></div></div><h3 id="entropy"><a href="#entropy" class="anchor"></a>Entropy</h3><div class="odoc-spec"><div class="spec type anchored" id="type-nonce"><a href="#type-nonce" class="anchor"></a><code><span><span class="keyword">type</span> nonce</span></code></div><div class="spec-doc"><p>A nonce for adding entropy to the generator</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update_seed"><a href="#val-update_seed" class="anchor"></a><code><span><span class="keyword">val</span> update_seed : <span><a href="#type-seed">seed</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-nonce">nonce</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-seed">seed</a></span></code></div><div class="spec-doc"><p>Add entropy to the seed generator</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_nonce"><a href="#val-make_nonce" class="anchor"></a><code><span><span class="keyword">val</span> make_nonce : 
  <span>bytes <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-nonce">nonce</a> <a href="../../Tezos_protocol_environment_016_PtMumbai/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_016_PtMumbai.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p>Use a byte sequence as a nonce</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-hash"><a href="#val-hash" class="anchor"></a><code><span><span class="keyword">val</span> hash : <span><a href="#type-nonce">nonce</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Nonce_hash/index.html#type-t">Nonce_hash.t</a></span></code></div><div class="spec-doc"><p>Compute the hash of a nonce</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_hash"><a href="#val-check_hash" class="anchor"></a><code><span><span class="keyword">val</span> check_hash : <span><a href="#type-nonce">nonce</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Nonce_hash/index.html#type-t">Nonce_hash.t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>check_hash nonce hash</code> is true if the nonce correspond to the hash</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-nonce_hash_key_part"><a href="#val-nonce_hash_key_part" class="anchor"></a><code><span><span class="keyword">val</span> nonce_hash_key_part : <span><a href="../Nonce_hash/index.html#type-t">Nonce_hash.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p>For using nonce hashes as keys in the hierarchical database</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-deterministic_seed"><a href="#val-deterministic_seed" class="anchor"></a><code><span><span class="keyword">val</span> deterministic_seed : <span><a href="#type-seed">seed</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-seed">seed</a></span></code></div><div class="spec-doc"><p>Returns a new seed by hashing the one passed with a constant.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-initial_seeds"><a href="#val-initial_seeds" class="anchor"></a><code><span><span class="keyword">val</span> initial_seeds : <span><span class="optlabel">?initial_seed</span>:<a href="../State_hash/index.html#type-t">State_hash.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-seed">seed</a> list</span></span></code></div><div class="spec-doc"><p><code>initial_seeds n</code> generates the first <code>n</code> seeds for which there are no nonces. The first seed is a constant value. The kth seed is the hash of seed (k-1) concatenated with a constant. If an <code>initial_seed</code> is provided, the <i>first</i> seed is created using it as the first one.</p></div></div><h3 id="predefined-nonce"><a href="#predefined-nonce" class="anchor"></a>Predefined nonce</h3><div class="odoc-spec"><div class="spec value anchored" id="val-initial_nonce_0"><a href="#val-initial_nonce_0" class="anchor"></a><code><span><span class="keyword">val</span> initial_nonce_0 : <a href="#type-nonce">nonce</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-initial_nonce_hash_0"><a href="#val-initial_nonce_hash_0" class="anchor"></a><code><span><span class="keyword">val</span> initial_nonce_hash_0 : <a href="../Nonce_hash/index.html#type-t">Nonce_hash.t</a></span></code></div></div><h3 id="serializers"><a href="#serializers" class="anchor"></a>Serializers</h3><div class="odoc-spec"><div class="spec value anchored" id="val-nonce_encoding"><a href="#val-nonce_encoding" class="anchor"></a><code><span><span class="keyword">val</span> nonce_encoding : 
  <span><a href="#type-nonce">nonce</a> <a href="../../Tezos_protocol_environment_016_PtMumbai/Data_encoding/index.html#type-t">Tezos_protocol_environment_016_PtMumbai.Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-seed_encoding"><a href="#val-seed_encoding" class="anchor"></a><code><span><span class="keyword">val</span> seed_encoding : 
  <span><a href="#type-seed">seed</a> <a href="../../Tezos_protocol_environment_016_PtMumbai/Data_encoding/index.html#type-t">Tezos_protocol_environment_016_PtMumbai.Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-vdf_setup_encoding"><a href="#val-vdf_setup_encoding" class="anchor"></a><code><span><span class="keyword">val</span> vdf_setup_encoding : 
  <span><a href="#type-vdf_setup">vdf_setup</a> <a href="../../Tezos_protocol_environment_016_PtMumbai/Data_encoding/index.html#type-t">Tezos_protocol_environment_016_PtMumbai.Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-vdf_solution_encoding"><a href="#val-vdf_solution_encoding" class="anchor"></a><code><span><span class="keyword">val</span> vdf_solution_encoding : 
  <span><a href="#type-vdf_solution">vdf_solution</a> <a href="../../Tezos_protocol_environment_016_PtMumbai/Data_encoding/index.html#type-t">Tezos_protocol_environment_016_PtMumbai.Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-seed_status"><a href="#type-seed_status" class="anchor"></a><code><span><span class="keyword">type</span> seed_status</span><span> = </span></code><ol><li id="type-seed_status.RANDAO_seed" class="def variant constructor anchored"><a href="#type-seed_status.RANDAO_seed" class="anchor"></a><code><span>| </span><span><span class="constructor">RANDAO_seed</span></span></code></li><li id="type-seed_status.VDF_seed" class="def variant constructor anchored"><a href="#type-seed_status.VDF_seed" class="anchor"></a><code><span>| </span><span><span class="constructor">VDF_seed</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-seed_status_encoding"><a href="#val-seed_status_encoding" class="anchor"></a><code><span><span class="keyword">val</span> seed_status_encoding : 
  <span><a href="#type-seed_status">seed_status</a> <a href="../../Tezos_protocol_environment_016_PtMumbai/Data_encoding/index.html#type-t">Tezos_protocol_environment_016_PtMumbai.Data_encoding.t</a></span></span></code></div></div></div></body></html>
