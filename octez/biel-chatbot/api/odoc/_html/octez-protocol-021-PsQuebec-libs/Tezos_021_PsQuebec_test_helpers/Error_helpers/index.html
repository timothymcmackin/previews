<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Error_helpers (octez-protocol-021-PsQuebec-libs.Tezos_021_PsQuebec_test_helpers.Error_helpers)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-protocol-021-PsQuebec-libs</a> &#x00BB; <a href="../index.html">Tezos_021_PsQuebec_test_helpers</a> &#x00BB; Error_helpers</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_021_PsQuebec_test_helpers.Error_helpers</span></code></h1><p>Helpers to check expected errors.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-check_error_constructor_name"><a href="#val-check_error_constructor_name" class="anchor"></a><code><span><span class="keyword">val</span> check_error_constructor_name : 
  <span><span class="label">loc</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">expected</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_error_monad/Error_monad/index.html#type-tztrace">Tezos_base.TzPervasives.Error_monad.tztrace</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_inconsistent_sources"><a href="#val-check_inconsistent_sources" class="anchor"></a><code><span><span class="keyword">val</span> check_inconsistent_sources : 
  <span><span class="label">first_source</span>:<a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Contract/index.html#type-t">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Contract.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">source</span>:<a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Contract/index.html#type-t">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Contract.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../tezos-protocol-021-PsQuebec/Tezos_protocol_environment_021_PsQuebec/Error_monad/index.html#type-error">Tezos_protocol_environment_021_PsQuebec.Error_monad.error</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div><div class="spec-doc"><p>Identifies the <code>Inconsistent_sources</code> error.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-expect_inconsistent_sources"><a href="#val-expect_inconsistent_sources" class="anchor"></a><code><span><span class="keyword">val</span> expect_inconsistent_sources : 
  <span><span class="label">loc</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">first_source</span>:<a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Contract/index.html#type-t">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Contract.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">source</span>:<a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Contract/index.html#type-t">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Contract.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_error_monad/Error_monad/index.html#type-tztrace">Tezos_base.TzPervasives.Error_monad.tztrace</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>To be used as the <code>expect_failure</code> argument of <a href="../Incremental/index.html#val-add_operation"><code>Incremental.add_operation</code></a> when expecting the <code>Inconsistent_sources</code> error.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_inconsistent_counters"><a href="#val-check_inconsistent_counters" class="anchor"></a><code><span><span class="keyword">val</span> check_inconsistent_counters : 
  <span><span class="label">source</span>:<a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Contract/index.html#type-t">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Contract.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">previous_counter</span>:
    <a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Manager_counter/index.html#type-t">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Manager_counter.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">counter</span>:<a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Manager_counter/index.html#type-t">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Manager_counter.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../tezos-protocol-021-PsQuebec/Tezos_protocol_environment_021_PsQuebec/Error_monad/index.html#type-error">Tezos_protocol_environment_021_PsQuebec.Error_monad.error</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div><div class="spec-doc"><p>Identifies the <code>Inconsistent_counters</code> error.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-expect_inconsistent_counters"><a href="#val-expect_inconsistent_counters" class="anchor"></a><code><span><span class="keyword">val</span> expect_inconsistent_counters : 
  <span><span class="label">loc</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">source</span>:<a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Contract/index.html#type-t">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Contract.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">previous_counter</span>:
    <a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Manager_counter/index.html#type-t">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Manager_counter.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">counter</span>:<a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Manager_counter/index.html#type-t">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Manager_counter.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_error_monad/Error_monad/index.html#type-tztrace">Tezos_base.TzPervasives.Error_monad.tztrace</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>To be used as the <code>expect_failure</code> argument of <a href="../Incremental/index.html#val-add_operation"><code>Incremental.add_operation</code></a> when expecting the <code>Inconsistent_counters</code> error.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-expect_inconsistent_counters_int"><a href="#val-expect_inconsistent_counters_int" class="anchor"></a><code><span><span class="keyword">val</span> expect_inconsistent_counters_int : 
  <span><span class="label">loc</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">source</span>:<a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Contract/index.html#type-t">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Contract.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">previous_counter</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">counter</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_error_monad/Error_monad/index.html#type-tztrace">Tezos_base.TzPervasives.Error_monad.tztrace</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-expect_inconsistent_counters"><code>expect_inconsistent_counters</code></a> but with <code>int</code> arguments for counters.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-expect_incorrect_reveal_position"><a href="#val-expect_incorrect_reveal_position" class="anchor"></a><code><span><span class="keyword">val</span> expect_incorrect_reveal_position : 
  <span><span class="label">loc</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_error_monad/Error_monad/index.html#type-tztrace">Tezos_base.TzPervasives.Error_monad.tztrace</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>To be used as the <code>expect_failure</code> argument of <a href="../Incremental/index.html#val-add_operation"><code>Incremental.add_operation</code></a> when expecting the <code>Incorrect_reveal_position</code> error.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-expect_forbidden_delegate"><a href="#val-expect_forbidden_delegate" class="anchor"></a><code><span><span class="keyword">val</span> expect_forbidden_delegate : 
  <span><span class="label">loc</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">delegate</span>:<a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Contract/index.html#type-t">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Contract.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_error_monad/Error_monad/index.html#type-tztrace">Tezos_base.TzPervasives.Error_monad.tztrace</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-expect_outdated_denunciation"><a href="#val-expect_outdated_denunciation" class="anchor"></a><code><span><span class="keyword">val</span> expect_outdated_denunciation : 
  <span><span class="label">loc</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?kind</span>:<a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Misbehaviour/index.html#type-kind">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Misbehaviour.kind</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?level</span>:<a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Raw_level/index.html#type-t">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Raw_level.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?last_cycle</span>:<a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Cycle/index.html#type-t">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Cycle.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_error_monad/Error_monad/index.html#type-tztrace">Tezos_base.TzPervasives.Error_monad.tztrace</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-expect_outdated_denunciation_state"><a href="#val-expect_outdated_denunciation_state" class="anchor"></a><code><span><span class="keyword">val</span> expect_outdated_denunciation_state : 
  <span><span class="label">loc</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">state</span>:<a href="../State/index.html#type-t">State.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_error_monad/Error_monad/index.html#type-tztrace">Tezos_base.TzPervasives.Error_monad.tztrace</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-expect_no_slots_found_for"><a href="#val-expect_no_slots_found_for" class="anchor"></a><code><span><span class="keyword">val</span> expect_no_slots_found_for : 
  <span><span class="label">loc</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">pkh</span>:<a href="../../../octez-libs/Tezos_crypto/Signature/Public_key_hash/index.html#type-t">Tezos_base.TzPervasives.Signature.Public_key_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-expect_empty_transaction"><a href="#val-expect_empty_transaction" class="anchor"></a><code><span><span class="keyword">val</span> expect_empty_transaction : 
  <span><span class="label">loc</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">contract</span>:<a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Contract/index.html#type-t">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Contract.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_error_monad/Error_monad/index.html#type-tztrace">Tezos_base.TzPervasives.Error_monad.tztrace</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-expect_balance_too_low"><a href="#val-expect_balance_too_low" class="anchor"></a><code><span><span class="keyword">val</span> expect_balance_too_low : 
  <span><span class="label">loc</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_error_monad/Error_monad/index.html#type-tztrace">Tezos_base.TzPervasives.Error_monad.tztrace</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-expect_failwith"><a href="#val-expect_failwith" class="anchor"></a><code><span><span class="keyword">val</span> expect_failwith : 
  <span><span class="label">loc</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?str</span>:<span class="xref-unresolved">Str</span>.regexp <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>expect_failwith str err</code> checks whether <code>err</code> is a failwith error containing a string that matches the regular expression <code>str</code>.</p><p>For example, in case of a failure, <code>Assert.equal a b</code> prints a string saying that <code>a</code> is not equal to <code>b</code>, replacing <code>a</code> and <code>b</code> with their actual values. In this case, <code>Str.regexp &quot;.*\n.*is not equal to.*&quot;</code> is constructed to check for such kind of errors.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-expect_empty_implicit_delegated_contract"><a href="#val-expect_empty_implicit_delegated_contract" class="anchor"></a><code><span><span class="keyword">val</span> expect_empty_implicit_delegated_contract : 
  <span><span class="label">loc</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">contract</span>:<a href="../../../tezos-protocol-021-PsQuebec/Tezos_raw_protocol_021_PsQuebec/Alpha_context/Contract/index.html#type-t">Tezos_protocol_021_PsQuebec.Protocol.Alpha_context.Contract.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_error_monad/Error_monad/index.html#type-tztrace">Tezos_base.TzPervasives.Error_monad.tztrace</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div></div></body></html>
