<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Handler (tezos-dac-node-lib.Tezos_dac_node_lib.Handler)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-dac-node-lib</a> &#x00BB; <a href="../index.html">Tezos_dac_node_lib</a> &#x00BB; Handler</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_dac_node_lib.Handler</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span> * <span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span></span></code></div><div class="spec-doc"><p>A value of type <code>t</code> represent a handler that specifies a procedure that is invoked by the DAC daemon. In most cases, it never resolves unless the DAC node terminates, in which case the underlying <code>Tezos_rpc__RPC_context.stopper</code> is called.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-resolve_plugin_and_set_ready"><a href="#val-resolve_plugin_and_set_ready" class="anchor"></a><code><span><span class="keyword">val</span> resolve_plugin_and_set_ready : 
  <span><a href="../Node_context/index.html#type-t">Node_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="#type-t">t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Monitor heads and try resolve the DAC protocol plugin corresponding to the protocol of the targeted node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-handlers"><a href="#val-handlers" class="anchor"></a><code><span><span class="keyword">val</span> handlers : 
  <span><a href="../Node_context/index.html#type-t">Node_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span><span><a href="#type-t">t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span> list</span>
    <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>handlers ctxt</code> returns the handlers to be executed in the main loop of the daemon. The set of handlers is different according to the operating mode indicated in <code>ctxt.mode</code>. All operating modes have one handler for tracking new heads from the Layer 1. Additionally</p><ul><li>If <code>ctx.mode</code> is <code>Coordinator _</code>, then no other handlers are present,</li><li>If <code>ctxt.mode</code> is <code>Committee_member _</code>, then the DAC node also has one handler for monitoring root hashes streamed by a <code>Coordinator</code>. Upon detecting a new root hash, the associated pages are downloaded from the <code>Coordinator</code>, after which the root hash is signed and the signature posted to the <code>Coordinator</code>,</li><li>If <code>ctxt.mode</code> is <code>Observer _</code>, then the DAC node also has one handler for monitoring root hashes streamed by a <code>Coordinator</code>. Upon detecting a new root hash, the associated pages are downloaded from the <code>Coordinator</code>. Differently from the case of <code>Committee_member _</code>, root hashes are not signed.</li></ul></div></div></div></body></html>
