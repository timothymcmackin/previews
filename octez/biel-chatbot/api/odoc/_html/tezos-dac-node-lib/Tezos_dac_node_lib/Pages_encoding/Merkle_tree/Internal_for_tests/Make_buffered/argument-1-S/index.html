<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>S (tezos-dac-node-lib.Tezos_dac_node_lib.Pages_encoding.Merkle_tree.Internal_for_tests.Make_buffered.S)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../../index.html">tezos-dac-node-lib</a> &#x00BB; <a href="../../../../../index.html">Tezos_dac_node_lib</a> &#x00BB; <a href="../../../../index.html">Pages_encoding</a> &#x00BB; <a href="../../../index.html">Merkle_tree</a> &#x00BB; <a href="../../index.html">Internal_for_tests</a> &#x00BB; <a href="../index.html">Make_buffered</a> &#x00BB; S</nav><header class="odoc-preamble"><h1>Parameter <code><span>Make_buffered.S</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p><code>t</code> represents an instance of a storage backened.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-configuration"><a href="#type-configuration" class="anchor"></a><code><span><span class="keyword">type</span> configuration</span></code></div><div class="spec-doc"><p><code>configuration</code> is the type of the configuration which can be used to initialize the store.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : <span><a href="#type-configuration">configuration</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>init configuration</code> initializes a page store using the information provided in <code>configuration</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-save"><a href="#val-save" class="anchor"></a><code><span><span class="keyword">val</span> save : 
  <span><a href="../../../../../../../tezos-dac-lib/Tezos_dac_lib/Dac_plugin/index.html#type-t">Tezos_dac_lib.Dac_plugin.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">hash</span>:<a href="../../../../../../../tezos-dac-lib/Tezos_dac_lib/Dac_plugin/index.html#type-hash">Tezos_dac_lib.Dac_plugin.hash</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">content</span>:bytes <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../../../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>save dac_plugin t ~hash ~content</code> writes <code>content</code> of page onto storage backend <code>t</code> under given <code>key</code>.</p><p>When writing fails it returns a <code>Cannot_write_page_to_page_storage</code> error.</p><p>We require <code>save</code> to be atomic.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mem"><a href="#val-mem" class="anchor"></a><code><span><span class="keyword">val</span> mem : 
  <span><a href="../../../../../../../tezos-dac-lib/Tezos_dac_lib/Dac_plugin/index.html#type-t">Tezos_dac_lib.Dac_plugin.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../../../../../tezos-dac-lib/Tezos_dac_lib/Dac_plugin/index.html#type-hash">Tezos_dac_lib.Dac_plugin.hash</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>bool <a href="../../../../../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>mem dac_plugin t hash</code> Checks whether there is an entry for <code>hash</code> in the page storage. It can fail with error <code>Cannot_read_from_page_storage hash_as_string</code>, if it was not possible to check that the page exists for any reason related to the page storage backend implementation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-load"><a href="#val-load" class="anchor"></a><code><span><span class="keyword">val</span> load : 
  <span><a href="../../../../../../../tezos-dac-lib/Tezos_dac_lib/Dac_plugin/index.html#type-t">Tezos_dac_lib.Dac_plugin.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../../../../../tezos-dac-lib/Tezos_dac_lib/Dac_plugin/index.html#type-hash">Tezos_dac_lib.Dac_plugin.hash</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>bytes <a href="../../../../../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>load dac_plugin t hash</code> returns <code>content</code> of the storage backend <code>t</code> represented by a key. When reading fails it returns a <code>Cannot_read_page_from_page_storage</code> error.</p></div></div></div></body></html>
