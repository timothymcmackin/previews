<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Pages_encoding (tezos-dac-node-lib.Tezos_dac_node_lib.Pages_encoding)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-dac-node-lib</a> &#x00BB; <a href="../index.html">Tezos_dac_node_lib</a> &#x00BB; Pages_encoding</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_dac_node_lib.Pages_encoding</span></code></h1><p>Library for encoding payloads of arbitrary size in formats that can be decoded by the Sc-rollup kernels.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Payload_cannot_be_empty"><a href="#extension-decl-Payload_cannot_be_empty" class="anchor"></a><code><span><span class="keyword">type</span> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-error">Tezos_base.TzPervasives.error</a> += </span></code><ol><li id="extension-Payload_cannot_be_empty" class="def variant extension anchored"><a href="#extension-Payload_cannot_be_empty" class="anchor"></a><code><span>| </span><span><span class="extension">Payload_cannot_be_empty</span></span></code></li><li id="extension-Cannot_serialize_page_payload" class="def variant extension anchored"><a href="#extension-Cannot_serialize_page_payload" class="anchor"></a><code><span>| </span><span><span class="extension">Cannot_serialize_page_payload</span></span></code></li><li id="extension-Cannot_deserialize_page" class="def variant extension anchored"><a href="#extension-Cannot_deserialize_page" class="anchor"></a><code><span>| </span><span><span class="extension">Cannot_deserialize_page</span></span></code></li><li id="extension-Non_positive_size_of_payload" class="def variant extension anchored"><a href="#extension-Non_positive_size_of_payload" class="anchor"></a><code><span>| </span><span><span class="extension">Non_positive_size_of_payload</span> <span class="keyword">of</span> int</span></code></li><li id="extension-Merkle_tree_branching_factor_not_high_enough" class="def variant extension anchored"><a href="#extension-Merkle_tree_branching_factor_not_high_enough" class="anchor"></a><code><span>| </span><span><span class="extension">Merkle_tree_branching_factor_not_high_enough</span> <span class="keyword">of</span> int</span></code></li><li id="extension-Cannot_combine_pages_data_of_different_type" class="def variant extension anchored"><a href="#extension-Cannot_combine_pages_data_of_different_type" class="anchor"></a><code><span>| </span><span><span class="extension">Cannot_combine_pages_data_of_different_type</span></span></code></li><li id="extension-Hashes_page_repr_expected_single_element" class="def variant extension anchored"><a href="#extension-Hashes_page_repr_expected_single_element" class="anchor"></a><code><span>| </span><span><span class="extension">Hashes_page_repr_expected_single_element</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-CONFIG"><a href="#module-type-CONFIG" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-CONFIG/index.html">CONFIG</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>CONFIG</code> is a module for configuration of encoding scheme.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-version"><a href="#type-version" class="anchor"></a><code><span><span class="keyword">type</span> version</span><span> = int</span></code></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-VERSION"><a href="#module-type-VERSION" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-VERSION/index.html">VERSION</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>VERSION</code> is a module for versioning <code>Content</code> and <code>Hashes</code> pages of a specific encoding.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-Dac_codec"><a href="#module-type-Dac_codec" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Dac_codec/index.html">Dac_codec</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>Dac_codec</code> is a module for encoding a payload as a whole and returning the calculated root hash.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-Buffered_dac_codec"><a href="#module-type-Buffered_dac_codec" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Buffered_dac_codec/index.html">Buffered_dac_codec</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>Buffered_dac_codec</code> icrementally constructs and serializes payload by aggregating messages one message at a time. <code>add</code> maintains partially constructed pages in a buffer and persist full pages to <code>page_store</code>. <code>finalize</code> is called to end the aggregation process, by flushing all the remaining data inside the buffer and calculating the resulting root hash.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Merkle_tree"><a href="#module-Merkle_tree" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Merkle_tree/index.html">Merkle_tree</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Encoding of DAC payload as a Merkle tree with an arbitrary branching factor greater or equal to 2. The serialization process works as follows:</p></div></div></div></body></html>
