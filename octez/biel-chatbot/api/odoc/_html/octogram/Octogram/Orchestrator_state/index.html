<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Orchestrator_state (octogram.Octogram.Orchestrator_state)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octogram</a> &#x00BB; <a href="../index.html">Octogram</a> &#x00BB; Orchestrator_state</nav><header class="odoc-preamble"><h1>Module <code><span>Octogram.Orchestrator_state</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-initial_state"><a href="#val-initial_state" class="anchor"></a><code><span><span class="keyword">val</span> initial_state : <span><span class="optlabel">?prometheus</span>:<a href="../Remote_prometheus/index.html#type-t">Remote_prometheus.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Global_variables/index.html#type-t">Global_variables.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_agent"><a href="#val-get_agent" class="anchor"></a><code><span><span class="keyword">val</span> get_agent : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Agent_name/index.html#type-t">Agent_name.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Remote_agent/index.html#type-t">Remote_agent.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-iter_agents"><a href="#val-iter_agents" class="anchor"></a><code><span><span class="keyword">val</span> iter_agents : 
  <span><a href="../Execution_params/index.html#type-mode">Execution_params.mode</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="../Remote_agent/index.html#type-t">Remote_agent.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-record_agent"><a href="#val-record_agent" class="anchor"></a><code><span><span class="keyword">val</span> record_agent : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Remote_agent/index.html#type-t">Remote_agent.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-forget_agent"><a href="#val-forget_agent" class="anchor"></a><code><span><span class="keyword">val</span> forget_agent : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Agent_name/index.html#type-t">Agent_name.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_global_variables"><a href="#val-get_global_variables" class="anchor"></a><code><span><span class="keyword">val</span> get_global_variables : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Global_variables/index.html#type-t">Global_variables.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_global_variables"><a href="#val-with_global_variables" class="anchor"></a><code><span><span class="keyword">val</span> with_global_variables : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="../Global_variables/index.html#type-t">Global_variables.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Global_variables/index.html#type-t">Global_variables.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>with_global_variables state f</code> uses the blocking function <code>f</code> to update the global variables of <code>state</code>. This is the only way to modify the global variables, as a mitigation for the highly asynchronous nature of the orchestrator.</p><p>That is, you get the freshest version possible of the global variables before you update it, compare to using a <code>get</code>/<code>set</code> pattern.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-uri_resolver"><a href="#val-uri_resolver" class="anchor"></a><code><span><span class="keyword">val</span> uri_resolver : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Uri_resolver/index.html#type-t">Uri_resolver.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-record_metrics_source"><a href="#val-record_metrics_source" class="anchor"></a><code><span><span class="keyword">val</span> record_metrics_source : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Agent_name/index.html#type-t">Agent_name.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_prometheus"><a href="#val-with_prometheus" class="anchor"></a><code><span><span class="keyword">val</span> with_prometheus : <span><span class="label">default</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="../Remote_prometheus/index.html#type-t">Remote_prometheus.t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div></div></body></html>
