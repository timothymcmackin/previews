<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Router (octez-evm-node-libs.Evm_node_lib_dev.Router)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-evm-node-libs</a> &#x00BB; <a href="../index.html">Evm_node_lib_dev</a> &#x00BB; Router</nav><header class="odoc-preamble"><h1>Module <code><span>Evm_node_lib_dev.Router</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#helper-functions-to-build--routes-from--services.">Helper functions to build <code>Dream</code> routes from <code>Resto</code> services.</a><ul><li><a href="#jsonrpc-specific-routes">JSONRPC specific routes</a></li></ul></li></ul></nav><div class="odoc-content"><h2 id="helper-functions-to-build--routes-from--services."><a href="#helper-functions-to-build--routes-from--services." class="anchor"></a>Helper functions to build <code>Dream</code> routes from <a href="../../../octez-libs/Resto/index.html"><code>Resto</code></a> services.</h2><div class="odoc-spec"><div class="spec value anchored" id="val-make_route"><a href="#val-make_route" class="anchor"></a><code><span><span class="keyword">val</span> make_route : 
  <span><span><span>(<span>[&lt; <a href="../../../octez-libs/Resto/index.html#type-meth">Resto.meth</a> ]</span>, unit, <span class="type-var">'params</span>, <span class="type-var">'query</span>, <span class="type-var">'input</span>, <span class="type-var">'output</span>)</span> <a href="../../../octez-libs/Tezos_rpc/Service/index.html#type-t">Tezos_rpc.Service.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="label">params</span>:<span class="type-var">'params</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">query</span>:<span class="type-var">'query</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'input</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'output</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Dream</span>.route</span></code></div><div class="spec-doc"><p><code>make_route service handler</code> builds a route from a handler that returns an output.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_tz_route"><a href="#val-make_tz_route" class="anchor"></a><code><span><span class="keyword">val</span> make_tz_route : 
  <span><span><span>(<span>[&lt; <a href="../../../octez-libs/Resto/index.html#type-meth">Resto.meth</a> ]</span>, unit, <span class="type-var">'params</span>, <span class="type-var">'query</span>, <span class="type-var">'input</span>, <span class="type-var">'output</span>)</span> <a href="../../../octez-libs/Tezos_rpc/Service/index.html#type-t">Tezos_rpc.Service.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="label">params</span>:<span class="type-var">'params</span> <span class="arrow">&#45;&gt;</span></span>
    <span><span class="label">query</span>:<span class="type-var">'query</span> <span class="arrow">&#45;&gt;</span></span>
    <span><span class="type-var">'input</span> <span class="arrow">&#45;&gt;</span></span>
    <span><span><span class="type-var">'output</span> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Dream</span>.route</span></code></div><div class="spec-doc"><p><code>make_tz_route service handler</code> builds a route from a handler that returns an output or an error.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_opt_tz_route"><a href="#val-make_opt_tz_route" class="anchor"></a><code><span><span class="keyword">val</span> make_opt_tz_route : 
  <span><span><span>(<span>[&lt; <a href="../../../octez-libs/Resto/index.html#type-meth">Resto.meth</a> ]</span>, unit, <span class="type-var">'params</span>, <span class="type-var">'query</span>, <span class="type-var">'input</span>, <span class="type-var">'output</span>)</span> <a href="../../../octez-libs/Tezos_rpc/Service/index.html#type-t">Tezos_rpc.Service.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="label">params</span>:<span class="type-var">'params</span> <span class="arrow">&#45;&gt;</span></span>
    <span><span class="label">query</span>:<span class="type-var">'query</span> <span class="arrow">&#45;&gt;</span></span>
    <span><span class="type-var">'input</span> <span class="arrow">&#45;&gt;</span></span>
    <span><span><span><span class="type-var">'output</span> option</span> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Dream</span>.route</span></code></div><div class="spec-doc"><p><code>make_opt_tz_route service handler</code> builds a route from a handler that returns an optional output or an error. If <code>handler</code> returns <code>None</code> the server answers with a 404 Not_Found response.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_stream_route"><a href="#val-make_stream_route" class="anchor"></a><code><span><span class="keyword">val</span> make_stream_route : 
  <span><span><span>(<span>[&lt; <a href="../../../octez-libs/Resto/index.html#type-meth">Resto.meth</a> ]</span>, unit, <span class="type-var">'params</span>, <span class="type-var">'query</span>, <span class="type-var">'input</span>, <span class="type-var">'output</span>)</span> <a href="../../../octez-libs/Tezos_rpc/Service/index.html#type-t">Tezos_rpc.Service.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="label">params</span>:<span class="type-var">'params</span> <span class="arrow">&#45;&gt;</span></span>
    <span><span class="label">query</span>:<span class="type-var">'query</span> <span class="arrow">&#45;&gt;</span></span>
    <span><span class="type-var">'input</span> <span class="arrow">&#45;&gt;</span></span>
    <span><span>(<span><span class="type-var">'output</span> <span class="xref-unresolved">Lwt_stream</span>.t</span> * <span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span>)</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Dream</span>.route</span></code></div><div class="spec-doc"><p><code>make_stream_route service handler</code> builds a route which streams the response from a handler that constructs an <code>Lwt_stream.t</code>. The output stream is streamed as chunks in the response body.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_metrics_route"><a href="#val-make_metrics_route" class="anchor"></a><code><span><span class="keyword">val</span> make_metrics_route : <span>string <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Dream</span>.route</span></code></div><div class="spec-doc"><p><code>make_metrics_route path</code> builds a route that returns collected metrics in plain text format.</p></div></div><h3 id="jsonrpc-specific-routes"><a href="#jsonrpc-specific-routes" class="anchor"></a>JSONRPC specific routes</h3><div class="odoc-spec"><div class="spec value anchored" id="val-make_jsonrpc_websocket_route"><a href="#val-make_jsonrpc_websocket_route" class="anchor"></a><code><span><span class="keyword">val</span> make_jsonrpc_websocket_route : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Rpc_encodings/index.html#type-websocket_handler">Rpc_encodings.websocket_handler</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Dream</span>.route</span></code></div><div class="spec-doc"><p><code>make_jsonrpc_websocket_route service handler</code> builds a route which accepts websocket connections for JSONRPC requests and subscriptions. The server reads requests from this websocket and writes a stream of output in response. Multiple streams can be written and interlaced in the websocket response.</p></div></div></div></body></html>
