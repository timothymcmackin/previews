<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Data_dir (octez-evm-node-libs.Evm_node_lib_dev.Data_dir)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-evm-node-libs</a> &#x00BB; <a href="../index.html">Evm_node_lib_dev</a> &#x00BB; Data_dir</nav><header class="odoc-preamble"><h1>Module <code><span>Evm_node_lib_dev.Data_dir</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-store_path"><a href="#val-store_path" class="anchor"></a><code><span><span class="keyword">val</span> store_path : <span><span class="label">data_dir</span>:string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Path of EVM state store.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-store_info"><a href="#type-store_info" class="anchor"></a><code><span><span class="keyword">type</span> store_info</span><span> = </span><span>{</span></code><ol><li id="type-store_info.rollup_address" class="def record field anchored"><a href="#type-store_info.rollup_address" class="anchor"></a><code><span>rollup_address : <a href="../../../octez-l2-libs/Octez_smart_rollup/Address/index.html#type-t">Octez_smart_rollup.Address.t</a>;</span></code></li><li id="type-store_info.current_number" class="def record field anchored"><a href="#type-store_info.current_number" class="anchor"></a><code><span>current_number : <a href="../../Evm_node_lib_dev_encoding/Ethereum_types/index.html#type-quantity">Evm_node_lib_dev_encoding.Ethereum_types.quantity</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-export_store"><a href="#val-export_store" class="anchor"></a><code><span><span class="keyword">val</span> export_store : 
  <span><span class="label">data_dir</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">output_db_file</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="#type-store_info">store_info</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>export_store ~data_dir ~output_db_file</code> exports the store database with data from the <code>data_dir</code> into the <code>output_db_file</code> and returns the rollup address and the current level.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lock"><a href="#val-lock" class="anchor"></a><code><span><span class="keyword">val</span> lock : <span><span class="label">data_dir</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>lock ~data_dir</code> takes an exclusive lock on <code>data_dir</code> for the duration of the process. It fails if there is already another evm node with a lock.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-use"><a href="#val-use" class="anchor"></a><code><span><span class="keyword">val</span> use : 
  <span><span class="label">data_dir</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>use ~data_dir k</code> creates <code>data_dir</code> if necessary before executing <code>k ()</code>, and deletes <code>data_dir</code> if it was created and <code>k ()</code> fails.</p></div></div></div></body></html>
