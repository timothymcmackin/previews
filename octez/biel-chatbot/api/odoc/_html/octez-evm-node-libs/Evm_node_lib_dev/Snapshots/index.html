<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Snapshots (octez-evm-node-libs.Evm_node_lib_dev.Snapshots)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-evm-node-libs</a> &#x00BB; <a href="../index.html">Evm_node_lib_dev</a> &#x00BB; Snapshots</nav><header class="odoc-preamble"><h1>Module <code><span>Evm_node_lib_dev.Snapshots</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-compression"><a href="#type-compression" class="anchor"></a><code><span><span class="keyword">type</span> compression</span><span> = </span></code><ol><li id="type-compression.No" class="def variant constructor anchored"><a href="#type-compression.No" class="anchor"></a><code><span>| </span><span><span class="constructor">No</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Produce uncompressed archive. Takes more space.</p><span class="comment-delim">*)</span></div></li><li id="type-compression.On_the_fly" class="def variant constructor anchored"><a href="#type-compression.On_the_fly" class="anchor"></a><code><span>| </span><span><span class="constructor">On_the_fly</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Compress archive on the fly. The rollup node will use less disk space to produce the snapshot but will lock the rollup node (if running) for a longer time.</p><span class="comment-delim">*)</span></div></li><li id="type-compression.After" class="def variant constructor anchored"><a href="#type-compression.After" class="anchor"></a><code><span>| </span><span><span class="constructor">After</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Compress archive after snapshot creation. Uses more disk space temporarily than <a href="#type-compression.On_the_fly"><code>On_the_fly</code></a> but does not lock the rollup node for very long.</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>Compression strategy for snapshot archives.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Header"><a href="#module-Header" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Header/index.html">Header</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-export"><a href="#val-export" class="anchor"></a><code><span><span class="keyword">val</span> export : 
  <span><span class="optlabel">?snapshot_file</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">compression</span>:<a href="#type-compression">compression</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">data_dir</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span>string <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>export ?snapshot_file ~compression ~data_dir () </code> creates a tar gzipped archive with name <code>snapshot_file</code> (or a generated name in the current directory) containing a snapshot of the data of the rollup node with data directory <code>data_dir</code>. The path of the snapshot archive is returned.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-import"><a href="#val-import" class="anchor"></a><code><span><span class="keyword">val</span> import : 
  <span><span class="label">cancellable</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">force</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">data_dir</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">snapshot_file</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>import ~display_progress ~force ~data_dir ~snapshot_file</code> imports the snapshot at path <code>snapshot_file</code> into the data directory <code>data_dir</code>. Import will fail if <code>data_dir</code> is already populated unless <code>force</code> is set to <code>true</code>. Set <code>cancellable</code> if you want to be able to cancel the resulting promise cleanly.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-info"><a href="#val-info" class="anchor"></a><code><span><span class="keyword">val</span> info : <span><span class="label">snapshot_file</span>:string <span class="arrow">&#45;&gt;</span></span> <a href="Header/index.html#type-t">Header.t</a> * <span>[ `Compressed <span>| `Uncompressed</span> ]</span></span></code></div><div class="spec-doc"><p><code>info ~snapshot_file</code> returns information that can be used to inspect the snapshot file.</p></div></div></div></body></html>
