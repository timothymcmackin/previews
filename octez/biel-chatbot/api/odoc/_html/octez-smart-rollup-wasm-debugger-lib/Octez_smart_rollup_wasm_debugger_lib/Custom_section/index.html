<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Custom_section (octez-smart-rollup-wasm-debugger-lib.Octez_smart_rollup_wasm_debugger_lib.Custom_section)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-smart-rollup-wasm-debugger-lib</a> &#x00BB; <a href="../index.html">Octez_smart_rollup_wasm_debugger_lib</a> &#x00BB; Custom_section</nav><header class="odoc-preamble"><h1>Module <code><span>Octez_smart_rollup_wasm_debugger_lib.Custom_section</span></code></h1><p>This files implements the parsing of custom subsection, especially the `name` custom section (see https://webassembly.github.io/spec/core/appendix/custom.html#name-section).</p><p>The `name` section has the following format: <code>h</code> <code>len</code> <code>vec_len:n</code> (<code>index</code> <code>name_len</code> <code>name</code>)^n where</p><ul><li><code>h</code> is a tag encoded in a single byte (`1` for the functions subsection)</li><li><code>len</code> is a variable-length unsigned 32bits integer (`vu32`), which is the length of the subsection</li><li><code>vec_len</code> (`vu32`) encoding the number of values in the vector then for each value of the vector:</li><li><code>index</code> (`vu32`) encoding the function representation</li><li><code>name_len</code> (`vu32`) encoding the length in bytes of the name</li><li><code>name</code> (`utf8`) bytes of length `name_len` encoding an utf8 representation of the symbol</li></ul></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-vuN"><a href="#val-vuN" class="anchor"></a><code><span><span class="keyword">val</span> vuN : <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int64 * int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-vu32"><a href="#val-vu32" class="anchor"></a><code><span><span class="keyword">val</span> vu32 : <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int32 * int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_subsection_header"><a href="#val-parse_subsection_header" class="anchor"></a><code><span><span class="keyword">val</span> parse_subsection_header : <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(char * int32 * int)</span> option</span></span></code></div><div class="spec-doc"><p><code>parse_subsection_header bytes index</code> reads the tag for the subsection and its length, and returns the next index to continue reading. Returns `None` if there are not at least 2 bytes to read.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-u32_to_int"><a href="#val-u32_to_int" class="anchor"></a><code><span><span class="keyword">val</span> u32_to_int : <span>int32 <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_function_name_section_indexes"><a href="#val-get_function_name_section_indexes" class="anchor"></a><code><span><span class="keyword">val</span> get_function_name_section_indexes : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(int * int32)</span> option</span></span></code></div><div class="spec-doc"><p><code>get_function_name_section_indexes bytes</code> returns the starting index of the `functions` subsection and its length.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_nameassoc"><a href="#val-parse_nameassoc" class="anchor"></a><code><span><span class="keyword">val</span> parse_nameassoc : 
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/index.html#type-t">Tezos_base.TzPervasives.String.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span>(int32 * string)</span> * int</span></code></div><div class="spec-doc"><p><code>parse_nameassoc bytes index</code> parses a `(index, name)` encoded value and returns the index to continue the reading.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-FuncMap"><a href="#module-FuncMap" class="anchor"></a><code><span><span class="keyword">module</span> <a href="FuncMap/index.html">FuncMap</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_vec"><a href="#val-parse_vec" class="anchor"></a><code><span><span class="keyword">val</span> parse_vec : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> * int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="../../../octez-libs/Tezos_error_monad/TzLwtreslib/Seq/index.html#type-t">Tezos_base.TzPervasives.Seq.t</a></span></span></code></div><div class="spec-doc"><p><code>parse_vec bytes start parse_value</code> parses an encoded vector and its values with <code>parse_value</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_function_subsection"><a href="#val-parse_function_subsection" class="anchor"></a><code><span><span class="keyword">val</span> parse_function_subsection : 
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/index.html#type-t">Tezos_base.TzPervasives.String.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <a href="FuncMap/index.html#type-t">FuncMap.t</a></span></span></code></div><div class="spec-doc"><p><code>parse_function_subsection bytes</code> parse and returns the `functions` subsection, as described by the reference documentation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_function_subsection"><a href="#val-pp_function_subsection" class="anchor"></a><code><span><span class="keyword">val</span> pp_function_subsection : 
  <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span>
  <span><span>string <a href="FuncMap/index.html#type-t">FuncMap.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>pp_function_subsection ppf map</code> pretty-prints the parsed functions subsection.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_custom_sections"><a href="#val-parse_custom_sections" class="anchor"></a><code><span><span class="keyword">val</span> parse_custom_sections : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string <a href="FuncMap/index.html#type-t">FuncMap.t</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div></div></body></html>
