<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Shared_arg (octez-node-config.Octez_node_config.Shared_arg)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-node-config</a> &#x00BB; <a href="../index.html">Octez_node_config</a> &#x00BB; Shared_arg</nav><header class="odoc-preamble"><h1>Module <code><span>Octez_node_config.Shared_arg</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-net_config"><a href="#type-net_config" class="anchor"></a><code><span><span class="keyword">type</span> net_config</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>{</span></code><ol><li id="type-t.disable_config_validation" class="def record field anchored"><a href="#type-t.disable_config_validation" class="anchor"></a><code><span>disable_config_validation : bool;</span></code></li><li id="type-t.data_dir" class="def record field anchored"><a href="#type-t.data_dir" class="anchor"></a><code><span>data_dir : <span>string option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>a directory where the node's configuration and state should be stored</p><span class="comment-delim">*)</span></div></li><li id="type-t.config_file" class="def record field anchored"><a href="#type-t.config_file" class="anchor"></a><code><span>config_file : string;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>the config.json file to use</p><span class="comment-delim">*)</span></div></li><li id="type-t.network" class="def record field anchored"><a href="#type-t.network" class="anchor"></a><code><span>network : <span><a href="#type-net_config">net_config</a> option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>the P2P network to connect to</p><span class="comment-delim">*)</span></div></li><li id="type-t.connections" class="def record field anchored"><a href="#type-t.connections" class="anchor"></a><code><span>connections : <span>int option</span>;</span></code></li><li id="type-t.max_download_speed" class="def record field anchored"><a href="#type-t.max_download_speed" class="anchor"></a><code><span>max_download_speed : <span>int option</span>;</span></code></li><li id="type-t.max_upload_speed" class="def record field anchored"><a href="#type-t.max_upload_speed" class="anchor"></a><code><span>max_upload_speed : <span>int option</span>;</span></code></li><li id="type-t.binary_chunks_size" class="def record field anchored"><a href="#type-t.binary_chunks_size" class="anchor"></a><code><span>binary_chunks_size : <span>int option</span>;</span></code></li><li id="type-t.peer_table_size" class="def record field anchored"><a href="#type-t.peer_table_size" class="anchor"></a><code><span>peer_table_size : <span>int option</span>;</span></code></li><li id="type-t.expected_pow" class="def record field anchored"><a href="#type-t.expected_pow" class="anchor"></a><code><span>expected_pow : <span>float option</span>;</span></code></li><li id="type-t.peers" class="def record field anchored"><a href="#type-t.peers" class="anchor"></a><code><span>peers : <span>string list</span>;</span></code></li><li id="type-t.no_bootstrap_peers" class="def record field anchored"><a href="#type-t.no_bootstrap_peers" class="anchor"></a><code><span>no_bootstrap_peers : bool;</span></code></li><li id="type-t.listen_addr" class="def record field anchored"><a href="#type-t.listen_addr" class="anchor"></a><code><span>listen_addr : <span>string option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>address to listen to connections from peers</p><span class="comment-delim">*)</span></div></li><li id="type-t.advertised_net_port" class="def record field anchored"><a href="#type-t.advertised_net_port" class="anchor"></a><code><span>advertised_net_port : <span>int option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>port advertised for other peers to connect to</p><span class="comment-delim">*)</span></div></li><li id="type-t.discovery_addr" class="def record field anchored"><a href="#type-t.discovery_addr" class="anchor"></a><code><span>discovery_addr : <span>string option</span>;</span></code></li><li id="type-t.rpc_listen_addrs" class="def record field anchored"><a href="#type-t.rpc_listen_addrs" class="anchor"></a><code><span>rpc_listen_addrs : <span>string list</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>a list of addresses to listen to RPC requests on</p><span class="comment-delim">*)</span></div></li><li id="type-t.external_rpc_listen_addrs" class="def record field anchored"><a href="#type-t.external_rpc_listen_addrs" class="anchor"></a><code><span>external_rpc_listen_addrs : <span>string list</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>a list of addresses to listen to RPC requests on</p><span class="comment-delim">*)</span></div></li><li id="type-t.private_mode" class="def record field anchored"><a href="#type-t.private_mode" class="anchor"></a><code><span>private_mode : bool;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>enables the private mode, see https://tezos.gitlab.io/user/node-configuration.html#private-node</p><span class="comment-delim">*)</span></div></li><li id="type-t.disable_p2p_maintenance" class="def record field anchored"><a href="#type-t.disable_p2p_maintenance" class="anchor"></a><code><span>disable_p2p_maintenance : bool;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>If <code>disable_p2p_maintenance</code> is <code>true</code> the p2p layer will not open or close connections by itself. This flag is intended to be used for testing and debugging.</p><span class="comment-delim">*)</span></div></li><li id="type-t.disable_p2p_swap" class="def record field anchored"><a href="#type-t.disable_p2p_swap" class="anchor"></a><code><span>disable_p2p_swap : bool;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>If <code>disable_p2p_swap</code> is <code>true</code> the p2p layer will neither initiate a swap of connections with its neighbors nor answer to a swap request. This flag is intended to be used for testing and debugging.</p><span class="comment-delim">*)</span></div></li><li id="type-t.disable_mempool" class="def record field anchored"><a href="#type-t.disable_mempool" class="anchor"></a><code><span>disable_mempool : bool;</span></code></li><li id="type-t.enable_testchain" class="def record field anchored"><a href="#type-t.enable_testchain" class="anchor"></a><code><span>enable_testchain : bool;</span></code></li><li id="type-t.cors_origins" class="def record field anchored"><a href="#type-t.cors_origins" class="anchor"></a><code><span>cors_origins : <span>string list</span>;</span></code></li><li id="type-t.cors_headers" class="def record field anchored"><a href="#type-t.cors_headers" class="anchor"></a><code><span>cors_headers : <span>string list</span>;</span></code></li><li id="type-t.rpc_tls" class="def record field anchored"><a href="#type-t.rpc_tls" class="anchor"></a><code><span>rpc_tls : <span><a href="../Config_file/index.html#type-tls">Config_file.tls</a> option</span>;</span></code></li><li id="type-t.log_output" class="def record field anchored"><a href="#type-t.log_output" class="anchor"></a><code><span>log_output : <span><a href="../../../octez-libs/Tezos_base_unix/Logs_simple_config/Output/index.html#type-t">Tezos_base_unix.Logs_simple_config.Output.t</a> option</span>;</span></code></li><li id="type-t.log_coloring" class="def record field anchored"><a href="#type-t.log_coloring" class="anchor"></a><code><span>log_coloring : <span>bool option</span>;</span></code></li><li id="type-t.bootstrap_threshold" class="def record field anchored"><a href="#type-t.bootstrap_threshold" class="anchor"></a><code><span>bootstrap_threshold : <span>int option</span>;</span></code></li><li id="type-t.history_mode" class="def record field anchored"><a href="#type-t.history_mode" class="anchor"></a><code><span>history_mode : <span><a href="../../../octez-shell-libs/Tezos_shell_services/History_mode/index.html#type-t">Tezos_shell_services.History_mode.t</a> option</span>;</span></code></li><li id="type-t.synchronisation_threshold" class="def record field anchored"><a href="#type-t.synchronisation_threshold" class="anchor"></a><code><span>synchronisation_threshold : <span>int option</span>;</span></code></li><li id="type-t.latency" class="def record field anchored"><a href="#type-t.latency" class="anchor"></a><code><span>latency : <span>int option</span>;</span></code></li><li id="type-t.allow_all_rpc" class="def record field anchored"><a href="#type-t.allow_all_rpc" class="anchor"></a><code><span>allow_all_rpc : <span><a href="../../../octez-libs/Tezos_base/P2p_point/Id/index.html#type-addr_port_id">Tezos_base.P2p_point.Id.addr_port_id</a> list</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>a list of RPC listening addresses for which a full access should be granted</p><span class="comment-delim">*)</span></div></li><li id="type-t.media_type" class="def record field anchored"><a href="#type-t.media_type" class="anchor"></a><code><span>media_type : <a href="../../../octez-libs/Tezos_rpc_http/Media_type/Command_line/index.html#type-t">Tezos_rpc_http.Media_type.Command_line.t</a>;</span></code></li><li id="type-t.max_active_rpc_connections" class="def record field anchored"><a href="#type-t.max_active_rpc_connections" class="anchor"></a><code><span>max_active_rpc_connections : <a href="../../../octez-libs/Tezos_rpc_http_server/RPC_server/Max_active_rpc_connections/index.html#type-t">Tezos_rpc_http_server.RPC_server.Max_active_rpc_connections.t</a>;</span></code></li><li id="type-t.metrics_addr" class="def record field anchored"><a href="#type-t.metrics_addr" class="anchor"></a><code><span>metrics_addr : <span>string list</span>;</span></code></li><li id="type-t.operation_metadata_size_limit" class="def record field anchored"><a href="#type-t.operation_metadata_size_limit" class="anchor"></a><code><span>operation_metadata_size_limit : <span><a href="../../../octez-shell-libs/Tezos_shell_services/Shell_limits/index.html#type-operation_metadata_size_limit">Tezos_shell_services.Shell_limits.operation_metadata_size_limit</a>
                                  option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>maximum operation metadata size allowed to be stored on disk</p><span class="comment-delim">*)</span></div></li><li id="type-t.enable_http_cache_headers" class="def record field anchored"><a href="#type-t.enable_http_cache_headers" class="anchor"></a><code><span>enable_http_cache_headers : <span>bool option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Adds Cache-control header directives to RPC responses for queries that are relative to the head block.</p><span class="comment-delim">*)</span></div></li><li id="type-t.disable_context_pruning" class="def record field anchored"><a href="#type-t.disable_context_pruning" class="anchor"></a><code><span>disable_context_pruning : <span>bool option</span>;</span></code></li><li id="type-t.storage_maintenance_delay" class="def record field anchored"><a href="#type-t.storage_maintenance_delay" class="anchor"></a><code><span>storage_maintenance_delay : <span><a href="../../../octez-shell-libs/Tezos_shell_services/Storage_maintenance/index.html#type-delay">Tezos_shell_services.Storage_maintenance.delay</a>
                              option</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>This record represents a collection of command line arguments given when starting the node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-process_command"><a href="#val-process_command" class="anchor"></a><code><span><span class="keyword">val</span> process_command : 
  <span><span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Cmdliner</span>.Term.ret</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Term"><a href="#module-Term" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Term/index.html">Term</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read_config_file"><a href="#val-read_config_file" class="anchor"></a><code><span><span class="keyword">val</span> read_config_file : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Config_file/index.html#type-t">Config_file.t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-resolve_data_dir_and_config_file"><a href="#val-resolve_data_dir_and_config_file" class="anchor"></a><code><span><span class="keyword">val</span> resolve_data_dir_and_config_file : 
  <span><span class="optlabel">?data_dir</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?config_file</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(string * <a href="../Config_file/index.html#type-t">Config_file.t</a>, <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-patch_network"><a href="#val-patch_network" class="anchor"></a><code><span><span class="keyword">val</span> patch_network : 
  <span><span class="optlabel">?cfg</span>:<a href="../Config_file/index.html#type-t">Config_file.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Config_file/index.html#type-blockchain_network">Config_file.blockchain_network</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Config_file/index.html#type-t">Config_file.t</a>, <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Modify a node's network configuration.</p><p>This returns <code>cfg</code> modified according to the <code>network</code> argument. Default value for <code>cfg</code> is <code>Config_file.default_config</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-patch_config"><a href="#val-patch_config" class="anchor"></a><code><span><span class="keyword">val</span> patch_config : 
  <span><span class="optlabel">?may_override_network</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?emit</span>:
    <span>(<span><span>unit <a href="../../../octez-libs/Tezos_event_logging/Internal_event/Simple/index.html#type-t">Tezos_base.TzPervasives.Internal_event.Simple.t</a></span> <span class="arrow">&#45;&gt;</span></span>
      <span>unit <span class="arrow">&#45;&gt;</span></span>
      <span>unit <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?ignore_bootstrap_peers</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?cfg</span>:<a href="../Config_file/index.html#type-t">Config_file.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Config_file/index.html#type-t">Config_file.t</a>, <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Modify a node configuration.</p><p>This returns <code>cfg</code> modified according to command-line arguments. Default value for <code>cfg</code> is <code>Config_file.default_config</code>.</p><p><code>may_override_network</code> specifies whether the network parameter is overridden, if already configured. Default value for <code>may_override_network</code> is false.</p><p><code>ignore_bootstrap_peers</code> specifies whether the bootstrap peers, from <code>cfg</code>, are ignored or not. Default value for <code>ignore_bootstrap_peers</code> is false.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read_and_patch_config_file"><a href="#val-read_and_patch_config_file" class="anchor"></a><code><span><span class="keyword">val</span> read_and_patch_config_file : 
  <span><span class="optlabel">?may_override_network</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?emit</span>:
    <span>(<span><span>unit <a href="../../../octez-libs/Tezos_event_logging/Internal_event/Simple/index.html#type-t">Tezos_base.TzPervasives.Internal_event.Simple.t</a></span> <span class="arrow">&#45;&gt;</span></span>
      <span>unit <span class="arrow">&#45;&gt;</span></span>
      <span>unit <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?ignore_bootstrap_peers</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Config_file/index.html#type-t">Config_file.t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>read_and_patch_config_file ~may_override_network ~ignore_bootstrap_peers args</code> Read the current config file and modify it accordingly to <code>args</code>.</p><p><code>may_override_network</code> specifies whether the network parameter is overridden, if already configured. <code>ignore_bootstrap_peers</code> specifies whether the bootstrap peers, from the current config file, are ignored or not.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Manpage"><a href="#module-Manpage" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Manpage/index.html">Manpage</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
