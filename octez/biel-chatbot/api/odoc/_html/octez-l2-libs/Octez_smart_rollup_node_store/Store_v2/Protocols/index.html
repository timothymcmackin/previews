<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Protocols (octez-l2-libs.Octez_smart_rollup_node_store.Store_v2.Protocols)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">octez-l2-libs</a> &#x00BB; <a href="../../index.html">Octez_smart_rollup_node_store</a> &#x00BB; <a href="../index.html">Store_v2</a> &#x00BB; Protocols</nav><header class="odoc-preamble"><h1>Module <code><span>Store_v2.Protocols</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-level"><a href="#type-level" class="anchor"></a><code><span><span class="keyword">type</span> level</span><span> = </span></code><ol><li id="type-level.First_known" class="def variant constructor anchored"><a href="#type-level.First_known" class="anchor"></a><code><span>| </span><span><span class="constructor">First_known</span> <span class="keyword">of</span> int32</span></code></li><li id="type-level.Activation_level" class="def variant constructor anchored"><a href="#type-level.Activation_level" class="anchor"></a><code><span>| </span><span><span class="constructor">Activation_level</span> <span class="keyword">of</span> int32</span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-proto_info"><a href="#type-proto_info" class="anchor"></a><code><span><span class="keyword">type</span> proto_info</span><span> = </span><span>{</span></code><ol><li id="type-proto_info.level" class="def record field anchored"><a href="#type-proto_info.level" class="anchor"></a><code><span>level : <a href="#type-level">level</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The level at which we have seen the protocol for the first time, either because we saw its activation or because the first block we saw (at the origination of the rollup) was from this protocol.</p><span class="comment-delim">*)</span></div></li><li id="type-proto_info.proto_level" class="def record field anchored"><a href="#type-proto_info.proto_level" class="anchor"></a><code><span>proto_level : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The protocol level, i.e. its number in the sequence of protocol activations on the chain.</p><span class="comment-delim">*)</span></div></li><li id="type-proto_info.protocol" class="def record field anchored"><a href="#type-proto_info.protocol" class="anchor"></a><code><span>protocol : <a href="../../../../octez-libs/Tezos_crypto/Hashed/Protocol_hash/index.html#type-t">Tezos_base.TzPervasives.Protocol_hash.t</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The protocol this information concerns.</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Each element of this type represents information we have about a Tezos protocol regarding its activation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-proto_info_encoding"><a href="#val-proto_info_encoding" class="anchor"></a><code><span><span class="keyword">val</span> proto_info_encoding : <span><a href="#type-proto_info">proto_info</a> <a href="../../../../octez-libs/Data_encoding/index.html#type-t">Tezos_base.TzPervasives.Data_encoding.t</a></span></span></code></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../../../Tezos_layer2_store/Indexed_store/module-type-SINGLETON_STORE/index.html">Tezos_layer2_store.Indexed_store.SINGLETON_STORE</a>
  <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../Tezos_layer2_store/Indexed_store/module-type-SINGLETON_STORE/index.html#type-value">value</a> = <span><a href="#type-proto_info">proto_info</a> list</span></span></span></code></summary><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>+'a t</span></span></code></div><div class="spec-doc"><p>The type of the singleton store.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-value"><a href="#type-value" class="anchor"></a><code><span><span class="keyword">type</span> value</span><span> = <span><a href="#type-proto_info">proto_info</a> list</span></span></code></div><div class="spec-doc"><p>The type of values stored in this singleton store.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-load"><a href="#val-load" class="anchor"></a><code><span><span class="keyword">val</span> load : 
  <span><span class="label">path</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../../../Tezos_layer2_store/Store_sigs/index.html#type-mode">Tezos_layer2_store.Store_sigs.mode</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <a href="../../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Load (or initializes) a singleton store in the file <code>path</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read"><a href="#val-read" class="anchor"></a><code><span><span class="keyword">val</span> read : <span><span><span>[&gt; `Read ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span><a href="#type-value">value</a> option</span> <a href="../../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Reads the current value from the disk. Returns <code>None</code> if the file does not exist.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-write"><a href="#val-write" class="anchor"></a><code><span><span class="keyword">val</span> write : 
  <span><span><span>[&gt; `Write ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-value">value</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Write the value to disk.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-delete"><a href="#val-delete" class="anchor"></a><code><span><span class="keyword">val</span> delete : <span><span><span>[&gt; `Write ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>unit <a href="../../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Deletes the value from the disk.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-readonly"><a href="#val-readonly" class="anchor"></a><code><span><span class="keyword">val</span> readonly : <span><span><span>[&gt; `Read ]</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>[ `Read ]</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>readonly t</code> returns a read only version of the store <code>t</code>.</p></div></div></details></div></div></body></html>
