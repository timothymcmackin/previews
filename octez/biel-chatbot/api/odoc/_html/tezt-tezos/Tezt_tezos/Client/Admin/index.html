<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Admin (tezt-tezos.Tezt_tezos.Client.Admin)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">tezt-tezos</a> &#x00BB; <a href="../../index.html">Tezt_tezos</a> &#x00BB; <a href="../index.html">Client</a> &#x00BB; Admin</nav><header class="odoc-preamble"><h1>Module <code><span>Client.Admin</span></code></h1><p>Run octez-admin-client commands.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-trust_address"><a href="#val-trust_address" class="anchor"></a><code><span><span class="keyword">val</span> trust_address : <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">peer</span>:<a href="../../Node/index.html#type-t">Node.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Ask a node to trust the address and port of another node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-untrust_address"><a href="#val-untrust_address" class="anchor"></a><code><span><span class="keyword">val</span> untrust_address : <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">peer</span>:<a href="../../Node/index.html#type-t">Node.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Ask a node to untrust the address and port of another node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_trust_address"><a href="#val-spawn_trust_address" class="anchor"></a><code><span><span class="keyword">val</span> spawn_trust_address : 
  <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">peer</span>:<a href="../../Node/index.html#type-t">Node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Tezt_wrapper</span>.Process.t</span></code></div><div class="spec-doc"><p>Same as <code>trust_address</code>, but do not wait for the process to exit.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_untrust_address"><a href="#val-spawn_untrust_address" class="anchor"></a><code><span><span class="keyword">val</span> spawn_untrust_address : 
  <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">peer</span>:<a href="../../Node/index.html#type-t">Node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Tezt_wrapper</span>.Process.t</span></code></div><div class="spec-doc"><p>Same as <code>untrust_address</code>, but do not wait for the process to exit.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-connect_address"><a href="#val-connect_address" class="anchor"></a><code><span><span class="keyword">val</span> connect_address : <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">peer</span>:<a href="../../Node/index.html#type-t">Node.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Connect a node to another peer.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_connect_address"><a href="#val-spawn_connect_address" class="anchor"></a><code><span><span class="keyword">val</span> spawn_connect_address : 
  <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">peer</span>:<a href="../../Node/index.html#type-t">Node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Tezt_wrapper</span>.Process.t</span></code></div><div class="spec-doc"><p>Same as <code>connect_address</code>, but do not wait for the process to exit.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-kick_peer"><a href="#val-kick_peer" class="anchor"></a><code><span><span class="keyword">val</span> kick_peer : <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">peer</span>:string <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Kick a peer.</p><p><code>peer</code> is the identity of the peer to kick. You can get it with <code>Node.wait_for_identity</code> for instance.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_kick_peer"><a href="#val-spawn_kick_peer" class="anchor"></a><code><span><span class="keyword">val</span> spawn_kick_peer : 
  <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">peer</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Tezt_wrapper</span>.Process.t</span></code></div><div class="spec-doc"><p>Same as <code>kick_peer</code>, but do not wait for the process to exit.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ban_peer"><a href="#val-ban_peer" class="anchor"></a><code><span><span class="keyword">val</span> ban_peer : <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">peer</span>:string <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Ban a peer.</p><p><code>peer</code> is the identity of the peer to ban. You can get it with <code>Node.wait_for_identity</code> for instance.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_ban_peer"><a href="#val-spawn_ban_peer" class="anchor"></a><code><span><span class="keyword">val</span> spawn_ban_peer : 
  <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">peer</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Tezt_wrapper</span>.Process.t</span></code></div><div class="spec-doc"><p>Same as <code>ban_peer</code>, but do not wait for the process to exit.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-p2p_stat"><a href="#val-p2p_stat" class="anchor"></a><code><span><span class="keyword">val</span> p2p_stat : <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Run <code>octez-admin-client p2p stat</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_p2p_stat"><a href="#val-spawn_p2p_stat" class="anchor"></a><code><span><span class="keyword">val</span> spawn_p2p_stat : <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Tezt_wrapper</span>.Process.t</span></code></div><div class="spec-doc"><p>Same as <code>p2p_stat</code>, but do not wait for the process to exit.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-inject_protocol"><a href="#val-inject_protocol" class="anchor"></a><code><span><span class="keyword">val</span> inject_protocol : 
  <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">protocol_path</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Run <code>octez-admin-client inject protocol &lt;protocol_path&gt;</code>.</p><p>Returns the hash of the injected protocol.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_inject_protocol"><a href="#val-spawn_inject_protocol" class="anchor"></a><code><span><span class="keyword">val</span> spawn_inject_protocol : 
  <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">protocol_path</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Tezt_wrapper</span>.Process.t</span></code></div><div class="spec-doc"><p>Same as <code>inject_protocol</code>, but do not wait for the process to exit.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_protocols"><a href="#val-list_protocols" class="anchor"></a><code><span><span class="keyword">val</span> list_protocols : <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Run <code>octez-admin-client list protocols</code> and return the list of protocol hashes.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_list_protocols"><a href="#val-spawn_list_protocols" class="anchor"></a><code><span><span class="keyword">val</span> spawn_list_protocols : <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Tezt_wrapper</span>.Process.t</span></code></div><div class="spec-doc"><p>Same as <code>list_protocols</code>, but do not wait for the process to exit.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-protocol_environment"><a href="#val-protocol_environment" class="anchor"></a><code><span><span class="keyword">val</span> protocol_environment : <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Run <code>octez-admin-client protocol environment</code> on a protocol hash.</p><p>Return its environment version as a string such as <code>&quot;V1&quot;</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_protocol_environment"><a href="#val-spawn_protocol_environment" class="anchor"></a><code><span><span class="keyword">val</span> spawn_protocol_environment : 
  <span><span class="optlabel">?endpoint</span>:<a href="../index.html#type-endpoint">endpoint</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Tezt_wrapper</span>.Process.t</span></code></div><div class="spec-doc"><p>Same as <code>protocol_environment</code>, but do not wait for the process to exit.</p></div></div></div></body></html>
