<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Daemon (tezt-tezos.Tezt_tezos.Daemon)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezt-tezos</a> &#x00BB; <a href="../index.html">Tezt_tezos</a> &#x00BB; Daemon</nav><header class="odoc-preamble"><h1>Module <code><span>Tezt_tezos.Daemon</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#filter-combinators">Filter combinators</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-PARAMETERS"><a href="#module-type-PARAMETERS" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-PARAMETERS/index.html">PARAMETERS</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Parameters of the <code>Daemon.Make</code> functor.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Level"><a href="#module-Level" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Level/index.html">Level</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Make"><a href="#module-Make" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Make/index.html">Make</a></span><span> (<a href="Make/argument-1-X/index.html">X</a> : <a href="module-type-PARAMETERS/index.html">PARAMETERS</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Functor for the common parts of all Tezos daemons: node, baker, endorser and accuser. Handles event handling in particular.</p></div></div><h3 id="filter-combinators"><a href="#filter-combinators" class="anchor"></a>Filter combinators</h3><div class="odoc-spec"><div class="spec value anchored" id="val-n_events"><a href="#val-n_events" class="anchor"></a><code><span><span class="keyword">val</span> n_events : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> list</span> option</span></span></code></div><div class="spec-doc"><p>Transform an event filter into one that waits for several events.</p><p>Usage: <code>n_events n filter</code></p><p><code>n</code> represents the number of events that the resulting filter must wait for.</p><p><code>filter</code> is the initial filter that must be transformed. It is expressed as a function that takes a serialized input (for example a <code>JSON.t</code>) and returns some deserialized output (an event) if no error occured during the decoding and input matched some acceptance criteria.</p><p>The function evaluates into a new filter, i.e. a new function that takes a serialized input and returns <code>None</code> until <code>n</code> calls where the given input passes the initial <code>filter</code> are performed.</p><p>On the <code>nth</code> successful call, the resulting filter will return some list of the <code>n</code> successuful outputs of <code>filter</code>. The order of the given inputs is preserved in the list of outputs.</p><p>The behavior of the resulting filter is unspecified after the list has been returned.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-nth_event"><a href="#val-nth_event" class="anchor"></a><code><span><span class="keyword">val</span> nth_event : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> option</span></span></code></div><div class="spec-doc"><p>Tranform an event filter into one that waits for several events to return the last one.</p><p>Similar to <code>n_events</code> but only returns the last successful event instead of the whole list.</p></div></div></div></body></html>
