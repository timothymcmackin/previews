<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Snoop (tezt-tezos.Tezt_tezos.Snoop)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezt-tezos</a> &#x00BB; <a href="../index.html">Tezt_tezos</a> &#x00BB; Snoop</nav><header class="odoc-preamble"><h1>Module <code><span>Tezt_tezos.Snoop</span></code></h1><p>Run octez-snoop commands.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>octez-snoop states.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span><span class="optlabel">?path</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?color</span>:<span class="xref-unresolved">Tezt_wrapper</span>.Log.Color.t <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Create a octez-snoop state</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-benchmark"><a href="#val-benchmark" class="anchor"></a><code><span><span class="keyword">val</span> benchmark : 
  <span><span class="label">bench_name</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">bench_num</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">nsamples</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">save_to</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?seed</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?config_file</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?csv_dump</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Runs the benchmark command.</p><p>This performs benchmark <code>bench_name</code>, asking for <code>bench_num</code> points. Each point is obtained by measuring execution time <code>nsamples</code> times. The result of benchmarking is saved to <code>save_to</code>.</p><p>For the meaning of the other optional parameters, see the documentation of <code>octez-snoop</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-regression_method"><a href="#type-regression_method" class="anchor"></a><code><span><span class="keyword">type</span> regression_method</span><span> = </span></code><ol><li id="type-regression_method.Lasso" class="def variant constructor anchored"><a href="#type-regression_method.Lasso" class="anchor"></a><code><span>| </span><span><span class="constructor">Lasso</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-regression_method.positive" class="def record field anchored"><a href="#type-regression_method.positive" class="anchor"></a><code><span>positive : bool;</span></code></li></ol><code><span>}</span></code></li><li id="type-regression_method.Ridge" class="def variant constructor anchored"><a href="#type-regression_method.Ridge" class="anchor"></a><code><span>| </span><span><span class="constructor">Ridge</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-regression_method.positive" class="def record field anchored"><a href="#type-regression_method.positive" class="anchor"></a><code><span>positive : bool;</span></code></li></ol><code><span>}</span></code></li><li id="type-regression_method.NNLS" class="def variant constructor anchored"><a href="#type-regression_method.NNLS" class="anchor"></a><code><span>| </span><span><span class="constructor">NNLS</span></span></code></li></ol></div><div class="spec-doc"><p>Several regression methods are proposed. <code>Lasso</code> gives good result. When the variables to be inferred must be constrained to be positive (as is typical with cost models that are monotonically increasing in the size of the inputs) then the <code>positive</code> field can be set to <code>true</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-infer_parameters"><a href="#val-infer_parameters" class="anchor"></a><code><span><span class="keyword">val</span> infer_parameters : 
  <span><span class="label">workload_data</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">regression_method</span>:<a href="#type-regression_method">regression_method</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">dump_csv</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">solution</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?report</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?graph</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Infers parameters for a model on some benchmark data.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sapling_generate"><a href="#val-sapling_generate" class="anchor"></a><code><span><span class="keyword">val</span> sapling_generate : 
  <span><span class="optlabel">?protocol</span>:<a href="../Protocol/index.html#type-t">Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">tx_count</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">max_inputs</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">max_outputs</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">file</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?max_nullifiers</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?max_additional_commitments</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?seed</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Generate a bunch of sapling transactions</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-michelson_term_kind"><a href="#type-michelson_term_kind" class="anchor"></a><code><span><span class="keyword">type</span> michelson_term_kind</span><span> = </span></code><ol><li id="type-michelson_term_kind.Data" class="def variant constructor anchored"><a href="#type-michelson_term_kind.Data" class="anchor"></a><code><span>| </span><span><span class="constructor">Data</span></span></code></li><li id="type-michelson_term_kind.Code" class="def variant constructor anchored"><a href="#type-michelson_term_kind.Code" class="anchor"></a><code><span>| </span><span><span class="constructor">Code</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn_michelson_generate"><a href="#val-spawn_michelson_generate" class="anchor"></a><code><span><span class="keyword">val</span> spawn_michelson_generate : 
  <span><span class="optlabel">?protocol</span>:<a href="../Protocol/index.html#type-t">Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">terms_count</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">kind</span>:<a href="#type-michelson_term_kind">michelson_term_kind</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">file</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?min_size</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?max_size</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?burn_in</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?seed</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Tezt_wrapper</span>.Process.t</span></code></div><div class="spec-doc"><p>Generate a bunch of Michelson terms</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-michelson_generate"><a href="#val-michelson_generate" class="anchor"></a><code><span><span class="keyword">val</span> michelson_generate : 
  <span><span class="optlabel">?protocol</span>:<a href="../Protocol/index.html#type-t">Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">terms_count</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">kind</span>:<a href="#type-michelson_term_kind">michelson_term_kind</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">file</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?min_size</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?max_size</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?burn_in</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?seed</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-michelson_concat"><a href="#val-michelson_concat" class="anchor"></a><code><span><span class="keyword">val</span> michelson_concat : 
  <span><span class="optlabel">?protocol</span>:<a href="../Protocol/index.html#type-t">Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">file1</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">file2</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">target</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Concatenate files containing Michelson terms</p></div></div><p>List all benchmarks matching provided tags according to the chosen mode.</p><div class="odoc-spec"><div class="spec type anchored" id="type-tag"><a href="#type-tag" class="anchor"></a><code><span><span class="keyword">type</span> tag</span><span> = </span></code><ol><li id="type-tag.Proto" class="def variant constructor anchored"><a href="#type-tag.Proto" class="anchor"></a><code><span>| </span><span><span class="constructor">Proto</span> <span class="keyword">of</span> <a href="../Protocol/index.html#type-t">Protocol.t</a></span></code></li><li id="type-tag.Interpreter" class="def variant constructor anchored"><a href="#type-tag.Interpreter" class="anchor"></a><code><span>| </span><span><span class="constructor">Interpreter</span></span></code></li><li id="type-tag.Translator" class="def variant constructor anchored"><a href="#type-tag.Translator" class="anchor"></a><code><span>| </span><span><span class="constructor">Translator</span></span></code></li><li id="type-tag.Sapling" class="def variant constructor anchored"><a href="#type-tag.Sapling" class="anchor"></a><code><span>| </span><span><span class="constructor">Sapling</span></span></code></li><li id="type-tag.Encoding" class="def variant constructor anchored"><a href="#type-tag.Encoding" class="anchor"></a><code><span>| </span><span><span class="constructor">Encoding</span></span></code></li><li id="type-tag.Io" class="def variant constructor anchored"><a href="#type-tag.Io" class="anchor"></a><code><span>| </span><span><span class="constructor">Io</span></span></code></li><li id="type-tag.Misc" class="def variant constructor anchored"><a href="#type-tag.Misc" class="anchor"></a><code><span>| </span><span><span class="constructor">Misc</span></span></code></li><li id="type-tag.Builtin" class="def variant constructor anchored"><a href="#type-tag.Builtin" class="anchor"></a><code><span>| </span><span><span class="constructor">Builtin</span></span></code></li><li id="type-tag.Global_constants" class="def variant constructor anchored"><a href="#type-tag.Global_constants" class="anchor"></a><code><span>| </span><span><span class="constructor">Global_constants</span></span></code></li><li id="type-tag.Cache" class="def variant constructor anchored"><a href="#type-tag.Cache" class="anchor"></a><code><span>| </span><span><span class="constructor">Cache</span></span></code></li><li id="type-tag.Carbonated_map" class="def variant constructor anchored"><a href="#type-tag.Carbonated_map" class="anchor"></a><code><span>| </span><span><span class="constructor">Carbonated_map</span></span></code></li><li id="type-tag.Tickets" class="def variant constructor anchored"><a href="#type-tag.Tickets" class="anchor"></a><code><span>| </span><span><span class="constructor">Tickets</span></span></code></li><li id="type-tag.Big_map" class="def variant constructor anchored"><a href="#type-tag.Big_map" class="anchor"></a><code><span>| </span><span><span class="constructor">Big_map</span></span></code></li><li id="type-tag.Skip_list" class="def variant constructor anchored"><a href="#type-tag.Skip_list" class="anchor"></a><code><span>| </span><span><span class="constructor">Skip_list</span></span></code></li><li id="type-tag.Sc_rollup" class="def variant constructor anchored"><a href="#type-tag.Sc_rollup" class="anchor"></a><code><span>| </span><span><span class="constructor">Sc_rollup</span></span></code></li><li id="type-tag.Shell" class="def variant constructor anchored"><a href="#type-tag.Shell" class="anchor"></a><code><span>| </span><span><span class="constructor">Shell</span></span></code></li><li id="type-tag.Apply" class="def variant constructor anchored"><a href="#type-tag.Apply" class="anchor"></a><code><span>| </span><span><span class="constructor">Apply</span></span></code></li><li id="type-tag.Example" class="def variant constructor anchored"><a href="#type-tag.Example" class="anchor"></a><code><span>| </span><span><span class="constructor">Example</span></span></code></li><li id="type-tag.Micheline" class="def variant constructor anchored"><a href="#type-tag.Micheline" class="anchor"></a><code><span>| </span><span><span class="constructor">Micheline</span></span></code></li><li id="type-tag.Dal" class="def variant constructor anchored"><a href="#type-tag.Dal" class="anchor"></a><code><span>| </span><span><span class="constructor">Dal</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-list_mode"><a href="#type-list_mode" class="anchor"></a><code><span><span class="keyword">type</span> list_mode</span><span> = </span></code><ol><li id="type-list_mode.All" class="def variant constructor anchored"><a href="#type-list_mode.All" class="anchor"></a><code><span>| </span><span><span class="constructor">All</span></span></code></li><li id="type-list_mode.Any" class="def variant constructor anchored"><a href="#type-list_mode.Any" class="anchor"></a><code><span>| </span><span><span class="constructor">Any</span></span></code></li><li id="type-list_mode.Exactly" class="def variant constructor anchored"><a href="#type-list_mode.Exactly" class="anchor"></a><code><span>| </span><span><span class="constructor">Exactly</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_benchmarks"><a href="#val-list_benchmarks" class="anchor"></a><code><span><span class="keyword">val</span> list_benchmarks : <span><span class="label">mode</span>:<a href="#type-list_mode">list_mode</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">tags</span>:<span><a href="#type-tag">tag</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-write_config"><a href="#val-write_config" class="anchor"></a><code><span><span class="keyword">val</span> write_config : 
  <span><span class="label">benchmark</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">bench_config</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">file</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-generate_code_for_solutions"><a href="#val-generate_code_for_solutions" class="anchor"></a><code><span><span class="keyword">val</span> generate_code_for_solutions : 
  <span><span class="label">solution</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?save_to</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?split_to</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?fixed_point</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Execute <code>octez-snoop generate code for &lt;solutions-dir&gt;</code> comamnd and returns its stdout output.</p><p>If <code>fixed_point</code> is specified <code>--fixed-point &lt;fixed_point&gt;</code> option is added.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_definitions"><a href="#val-check_definitions" class="anchor"></a><code><span><span class="keyword">val</span> check_definitions : <span><span class="label">files</span>:<span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Execute octez-snoop check definitions of <code>files</code></p></div></div></div></body></html>
