<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Operation_legacy (tezt-tezos.Tezt_tezos.Operation_legacy)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezt-tezos</a> &#x00BB; <a href="../index.html">Tezt_tezos</a> &#x00BB; Operation_legacy</nav><header class="odoc-preamble"><h1>Module <code><span>Tezt_tezos.Operation_legacy</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#smart-constructors">Smart constructors</a></li><li><a href="#helper-functions-to-build-manager-operations">Helper functions to build manager operations</a></li><li><a href="#forging,-signing-and-injecting-operations">Forging, signing and injecting operations</a></li><li><a href="#high-level-injection-functions">High-level injection functions</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-manager_operation_content"><a href="#type-manager_operation_content" class="anchor"></a><code><span><span class="keyword">type</span> manager_operation_content</span></code></div><div class="spec-doc"><p><code>manager_operation_content</code> is an abstract type for manager operations. Values of this type can be constructed using the smart constructors below.</p><p>Unless mentioned otherwise, the default values for generic parameters of a manager operations are the following ones:</p><ul><li>Default <code>counter</code> is the successor of the counter of <code>source</code>.</li></ul><ul><li>Default <code>amount</code> is <code>1</code> tez.</li></ul><ul><li>Default <code>fee</code> is <code>1000</code> mutez.</li></ul><ul><li>Default <code>gas_limit</code> is <code>1040</code> gas. Use a greater limit (e.g. ~1500) if the destination is not allocated, and ~1900 if the source will additionnaly be emptied.</li></ul><ul><li>Default <code>storage_limit</code> is <code>257</code>.</li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-micheline"><a href="#type-micheline" class="anchor"></a><code><span><span class="keyword">type</span> micheline</span><span> = </span><span>[ </span></code><ol><li id="type-micheline.Json" class="def variant constructor anchored"><a href="#type-micheline.Json" class="anchor"></a><code><span>| </span><span>`Json <span class="keyword">of</span> <span class="xref-unresolved">Tezt_wrapper</span>.JSON.u</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>JSON value</p><span class="comment-delim">*)</span></div></li><li id="type-micheline.Michelson" class="def variant constructor anchored"><a href="#type-micheline.Michelson" class="anchor"></a><code><span>| </span><span>`Michelson <span class="keyword">of</span> string</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Michelson string</p><span class="comment-delim">*)</span></div></li><li id="type-micheline.File" class="def variant constructor anchored"><a href="#type-micheline.File" class="anchor"></a><code><span>| </span><span>`File <span class="keyword">of</span> string</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>file with ext .tz or .json for JSON</p><span class="comment-delim">*)</span></div></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>Michelson scripts and data in different representations.</p><p>Used when originating or calling contracts. Depending on the test, the user can provide:</p><ul><li>an EzJsonm value directly</li><li>a Michelson value in a string</li><li>a Michelson value in a file (mainly for Michelson scripts). In this case, files should have extension `.tz`, `.tez` or `.mic`</li><li>a file storing directly the JSON representation. This is for instance useful to test contracts that fail at type-checking. Instead of Michelson, the user can generate the JSON and store it a file with a '.json' extension.</li></ul></div></div><h3 id="smart-constructors"><a href="#smart-constructors" class="anchor"></a>Smart constructors</h3><div class="odoc-spec"><div class="spec value anchored" id="val-mk_reveal"><a href="#val-mk_reveal" class="anchor"></a><code><span><span class="keyword">val</span> mk_reveal : 
  <span><span class="label">source</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?counter</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?fee</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?gas_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?storage_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-manager_operation_content">manager_operation_content</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>mk_reveal</code> allows to construct a manager operation representing a public key revelation of an implicit account <code>source</code>.</p><ul><li>Default <code>counter</code> is the successor of the counter of <code>source</code>.</li><li>Default <code>fee</code> is <code>1000</code> mutez.</li><li>Default <code>gas_limit</code> is <code>1040</code> gas.</li><li>Default <code>storage_limit</code> is <code>0</code>.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mk_call"><a href="#val-mk_call" class="anchor"></a><code><span><span class="keyword">val</span> mk_call : 
  <span><span class="label">source</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?counter</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?fee</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?gas_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?storage_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">dest</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?amount</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">entrypoint</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">arg</span>:<a href="#type-micheline">micheline</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-manager_operation_content">manager_operation_content</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>mk_call</code> allows to construct a manager operation representing a call to a smart contract <code>entrypoint</code> with a given parameter <code>arg</code> from an implicit account <code>source</code>.</p><ul><li>Default <code>counter</code> is the successor of the counter of <code>source</code>.</li><li>Default <code>amount</code> is <code>0</code> tez.</li><li>Default <code>fee</code> is <code>30_000</code> mutez.</li><li>Default <code>gas_limit</code> is <code>30_000</code> gas.</li><li>Default <code>storage_limit</code> is <code>1_500</code>.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mk_origination"><a href="#val-mk_origination" class="anchor"></a><code><span><span class="keyword">val</span> mk_origination : 
  <span><span class="label">source</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?counter</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?fee</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?gas_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?storage_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">code</span>:<a href="#type-micheline">micheline</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">init_storage</span>:<a href="#type-micheline">micheline</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?init_balance</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-manager_operation_content">manager_operation_content</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>mk_origination</code> allows to construct a manager operation representing a smart contract origination from an implicit account <code>source</code>.</p><ul><li>Default <code>counter</code> is the successor of the counter of <code>source</code>.</li><li>Default <code>init_balance</code> is <code>0</code> tez.</li><li>Default <code>fee</code> is <code>1_000_000</code> mutez.</li><li>Default <code>gas_limit</code> is <code>100_000</code> gas.</li><li>Default <code>storage_limit</code> is <code>10_000</code>.</li></ul></div></div><h3 id="helper-functions-to-build-manager-operations"><a href="#helper-functions-to-build-manager-operations" class="anchor"></a>Helper functions to build manager operations</h3><div class="odoc-spec"><div class="spec value anchored" id="val-get_counter"><a href="#val-get_counter" class="anchor"></a><code><span><span class="keyword">val</span> get_counter : <span><span class="label">source</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Returns the current counter of the given implicit account</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_next_counter"><a href="#val-get_next_counter" class="anchor"></a><code><span><span class="keyword">val</span> get_next_counter : <span><span class="label">source</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Returns the next counter of the given implicit account</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_injection_branch"><a href="#val-get_injection_branch" class="anchor"></a><code><span><span class="keyword">val</span> get_injection_branch : <span><span class="optlabel">?branch</span>:string <span class="arrow">&#45;&gt;</span></span> <span><a href="../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Returns <code>branch</code> if supplied as argument, or fetches and returns the default injection branch, i.e. <code>head - 2</code>.</p></div></div><h3 id="forging,-signing-and-injecting-operations"><a href="#forging,-signing-and-injecting-operations" class="anchor"></a>Forging, signing and injecting operations</h3><div class="odoc-spec"><div class="spec value anchored" id="val-sign_manager_op_bytes"><a href="#val-sign_manager_op_bytes" class="anchor"></a><code><span><span class="keyword">val</span> sign_manager_op_bytes : 
  <span><span class="label">signer</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span>bytes <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../octez-libs/Tezos_crypto/Signature/index.html#type-t">Tezos_crypto.Signature.t</a></span></code></div><div class="spec-doc"><p><code>sign_manager_op_bytes ~signer op_bytes</code> signs <code>op_bytes</code> with <code>signer</code>'s secret key and the watermark <code>Generic_operation</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sign_manager_op_hex"><a href="#val-sign_manager_op_hex" class="anchor"></a><code><span><span class="keyword">val</span> sign_manager_op_hex : <span><span class="label">signer</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Hex</span>.t <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Hex</span>.t</span></code></div><div class="spec-doc"><p>Same as <code>sign_manager_op_bytes</code>, but the input operation is given in hexadecimal representation and returns a signature in hexadecimal representation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-forge_operation"><a href="#val-forge_operation" class="anchor"></a><code><span><span class="keyword">val</span> forge_operation : 
  <span><span class="optlabel">?protocol</span>:<a href="../Protocol/index.html#type-t">Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">branch</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">batch</span>:<span>[ <span>`Manager of <span><a href="#type-manager_operation_content">manager_operation_content</a> list</span></span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>[&gt; <span>`Hex of string</span> ]</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Forge an operation and returns the hexadecimal binary representation.</p><p>If the <code>protocol</code> argument is supplied, the operation is forged locally (using <code>octez-codec</code>), otherwise we call an RPC (<code>.../helpers/forge/operations</code>).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-inject_operation"><a href="#val-inject_operation" class="anchor"></a><code><span><span class="keyword">val</span> inject_operation : 
  <span><span class="optlabel">?async</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?force</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?wait_for_injection</span>:<a href="../Node/index.html#type-t">Node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">unsigned_op</span>:<span class="xref-unresolved">Hex</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">signature</span>:<span class="xref-unresolved">Hex</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>[ <span>`OpHash of string</span> ]</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Inject a forged operation with its signature.</p><p>If the <code>force</code> argument (by default <code>false</code>) is <code>true</code>, then Tezt uses the RPC <code>/private/injection/operation</code> to allow for the injection of operations (which would be rejected by the default injection RPC).</p><p>The <code>async</code> argument, whose default value is <code>false</code>, is passed to the RPC during injection.</p><p>On success, the function returns the injected operation's hash.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-forge_and_inject_operation"><a href="#val-forge_and_inject_operation" class="anchor"></a><code><span><span class="keyword">val</span> forge_and_inject_operation : 
  <span><span class="optlabel">?protocol</span>:<a href="../Protocol/index.html#type-t">Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?branch</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?async</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?force</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?wait_for_injection</span>:<a href="../Node/index.html#type-t">Node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">batch</span>:<span>[ <span>`Manager of <span><a href="#type-manager_operation_content">manager_operation_content</a> list</span></span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">signer</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>[ <span>`OpHash of string</span> ]</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>forge_and_inject_operation</code> allows to forge, sign and inject to a node, via the provided <code>client</code>, the list <code>batch</code> of managed operations. The forged operation is signed by the given <code>signer</code> account. Default <code>branch</code> is the one returned by <code>RPC.get_branch client</code>.</p><p>If the <code>protocol</code> argument is supplied, the operation is forged locally (using <code>octez-codec</code>), otherwise we call an RPC (<code>.../helpers/forge/operations</code>).</p><p>If the <code>force</code> argument (by default <code>false</code>) is <code>true</code>, then Tezt uses the RPC <code>/private/injection/operation</code> to allow for the injection of operations (which would be rejected by the default injection RPC).</p><p>The <code>async</code> argument, whose default value is <code>false</code>, is passed to the RPC during injection.</p><p>On success, the function returns the injected operation's hash.</p></div></div><h3 id="high-level-injection-functions"><a href="#high-level-injection-functions" class="anchor"></a>High-level injection functions</h3><div class="odoc-spec"><div class="spec value anchored" id="val-inject_origination"><a href="#val-inject_origination" class="anchor"></a><code><span><span class="keyword">val</span> inject_origination : 
  <span><span class="optlabel">?protocol</span>:<a href="../Protocol/index.html#type-t">Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?async</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?force</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?wait_for_injection</span>:<a href="../Node/index.html#type-t">Node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?branch</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">source</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?signer</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?counter</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?fee</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?gas_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?storage_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">code</span>:<a href="#type-micheline">micheline</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">init_storage</span>:<a href="#type-micheline">micheline</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?init_balance</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>[ <span>`OpHash of string</span> ]</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>inject_origination</code> is a high-level wrapper that allows to construct an origination operation and inject it using the given client. The <code>signer</code> can be different from the <code>source</code> to be able to inject missigned operations.</p><p>See <a href="#val-mk_origination"><code>mk_origination</code></a> and <a href="#val-forge_and_inject_operation"><code>forge_and_inject_operation</code></a> for the list of parameters and their default values.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-inject_public_key_revelation"><a href="#val-inject_public_key_revelation" class="anchor"></a><code><span><span class="keyword">val</span> inject_public_key_revelation : 
  <span><span class="optlabel">?protocol</span>:<a href="../Protocol/index.html#type-t">Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?async</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?force</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?wait_for_injection</span>:<a href="../Node/index.html#type-t">Node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?branch</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">source</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?signer</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?counter</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?fee</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?gas_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?storage_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?public_key</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>[ <span>`OpHash of string</span> ]</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>inject_public_key_revelation</code> is a high-level wrapper that allows to build public key reveal operations and to inject them using the given client. The <code>signer</code> can be different from the <code>source</code> to be able to inject missigned operations. Also, it is possible to provide a <code>public_key</code> that does not match the one of the <code>signer</code> or of the <code>source</code>.</p><p>See <a href="#val-mk_reveal"><code>mk_reveal</code></a> and <a href="#val-forge_and_inject_operation"><code>forge_and_inject_operation</code></a> for the list of parameters and their default values.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-inject_transfer"><a href="#val-inject_transfer" class="anchor"></a><code><span><span class="keyword">val</span> inject_transfer : 
  <span><span class="optlabel">?protocol</span>:<a href="../Protocol/index.html#type-t">Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?async</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?force</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?wait_for_injection</span>:<a href="../Node/index.html#type-t">Node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?branch</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">source</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?signer</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?counter</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?fee</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?gas_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?storage_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">dest</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?amount</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>[ <span>`OpHash of string</span> ]</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>inject_transfer</code> is a high-level wrapper that allows to build XTZ transfer operations and to inject it using the given client. The <code>signer</code> can be different from the <code>source</code> to be able to inject missigned operations.</p><p>See <a href="#type-manager_operation_content"><code>manager_operation_content</code></a> and <a href="#val-forge_and_inject_operation"><code>forge_and_inject_operation</code></a> for the list of parameters and their default values.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-inject_contract_call"><a href="#val-inject_contract_call" class="anchor"></a><code><span><span class="keyword">val</span> inject_contract_call : 
  <span><span class="optlabel">?protocol</span>:<a href="../Protocol/index.html#type-t">Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?async</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?force</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?wait_for_injection</span>:<a href="../Node/index.html#type-t">Node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?branch</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">source</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?signer</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?counter</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?fee</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?gas_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?storage_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">dest</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?amount</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">entrypoint</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">arg</span>:<a href="#type-micheline">micheline</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>[ <span>`OpHash of string</span> ]</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>inject_contract_call</code> is a high-level wrapper that allows to build smart contracts calls operations and to inject it using the given client. The <code>signer</code> can be different from the <code>source</code> to be able to inject missigned operations.</p><p>See <a href="#val-mk_call"><code>mk_call</code></a> and <a href="#val-forge_and_inject_operation"><code>forge_and_inject_operation</code></a> for the list of parameters and their default values.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-inject_transfers"><a href="#val-inject_transfers" class="anchor"></a><code><span><span class="keyword">val</span> inject_transfers : 
  <span><span class="optlabel">?protocol</span>:<a href="../Protocol/index.html#type-t">Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?async</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?force</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?wait_for_injection</span>:<a href="../Node/index.html#type-t">Node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?amount</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?fee</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?gas_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?source</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?destination</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">node</span>:<a href="../Node/index.html#type-t">Node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">number_of_operations</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>[ <span>`OpHash of string</span> ]</span> list</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>inject_transfers</code> is a wrapper around <code>inject_transfer</code> to inject <code>number_of_operations</code> transfers with the same parameters. See <a href="#val-inject_transfer"><code>inject_transfer</code></a> for optional arguments.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-inject_transfer_ticket"><a href="#val-inject_transfer_ticket" class="anchor"></a><code><span><span class="keyword">val</span> inject_transfer_ticket : 
  <span><span class="optlabel">?protocol</span>:<a href="../Protocol/index.html#type-t">Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?async</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?force</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?wait_for_injection</span>:<a href="../Node/index.html#type-t">Node.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?branch</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">source</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?signer</span>:<a href="../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?counter</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?fee</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?gas_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?storage_limit</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">contents</span>:<a href="#type-micheline">micheline</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">ty</span>:<a href="#type-micheline">micheline</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">ticketer</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">amount</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">destination</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">entrypoint</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>[ <span>`OpHash of string</span> ]</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>inject_transfer_ticket</code> constructs and injects a mangager operation representing a transfer ticket operation.</p></div></div></div></body></html>
