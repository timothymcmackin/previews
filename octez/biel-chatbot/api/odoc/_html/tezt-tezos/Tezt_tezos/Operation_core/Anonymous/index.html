<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Anonymous (tezt-tezos.Tezt_tezos.Operation_core.Anonymous)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">tezt-tezos</a> &#x00BB; <a href="../../index.html">Tezt_tezos</a> &#x00BB; <a href="../index.html">Operation_core</a> &#x00BB; Anonymous</nav><header class="odoc-preamble"><h1>Module <code><span>Operation_core.Anonymous</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>A representation of an anonymous operation.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-double_consensus_evidence_kind"><a href="#type-double_consensus_evidence_kind" class="anchor"></a><code><span><span class="keyword">type</span> double_consensus_evidence_kind</span><span> = </span></code><ol><li id="type-double_consensus_evidence_kind.Double_attestation_evidence" class="def variant constructor anchored"><a href="#type-double_consensus_evidence_kind.Double_attestation_evidence" class="anchor"></a><code><span>| </span><span><span class="constructor">Double_attestation_evidence</span></span></code></li><li id="type-double_consensus_evidence_kind.Double_preattestation_evidence" class="def variant constructor anchored"><a href="#type-double_consensus_evidence_kind.Double_preattestation_evidence" class="anchor"></a><code><span>| </span><span><span class="constructor">Double_preattestation_evidence</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-double_consensus_evidence"><a href="#val-double_consensus_evidence" class="anchor"></a><code><span><span class="keyword">val</span> double_consensus_evidence : 
  <span><span class="label">kind</span>:<a href="#type-double_consensus_evidence_kind">double_consensus_evidence_kind</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../index.html#type-operation">operation</a> * <a href="../../../../octez-libs/Tezos_crypto/Signature/index.html#type-t">Tezos_crypto.Signature.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../index.html#type-operation">operation</a> * <a href="../../../../octez-libs/Tezos_crypto/Signature/index.html#type-t">Tezos_crypto.Signature.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>double_consensus_evidence ~kind op1 op2</code> crafts a double consensus evidence operation with the <code>kind</code>, <code>op1</code> and <code>op2</code>. Both operations should be of the same kind and the same as the one expected by <code>kind</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-double_attestation_evidence"><a href="#val-double_attestation_evidence" class="anchor"></a><code><span><span class="keyword">val</span> double_attestation_evidence : 
  <span><span>(<a href="../index.html#type-operation">operation</a> * <a href="../../../../octez-libs/Tezos_crypto/Signature/index.html#type-t">Tezos_crypto.Signature.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../index.html#type-operation">operation</a> * <a href="../../../../octez-libs/Tezos_crypto/Signature/index.html#type-t">Tezos_crypto.Signature.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>double_attestation_evidence op1 op2</code> crafts a double attestation evidence operation with op1 and op2. Both operations should be attestations.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-double_preattestation_evidence"><a href="#val-double_preattestation_evidence" class="anchor"></a><code><span><span class="keyword">val</span> double_preattestation_evidence : 
  <span><span>(<a href="../index.html#type-operation">operation</a> * <a href="../../../../octez-libs/Tezos_crypto/Signature/index.html#type-t">Tezos_crypto.Signature.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../index.html#type-operation">operation</a> * <a href="../../../../octez-libs/Tezos_crypto/Signature/index.html#type-t">Tezos_crypto.Signature.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>double_preattestation_evidence op1 op2</code> crafts a double preattestation evidence operation with op1 and op2. Both operations should be preattestations.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-kind_to_string"><a href="#val-kind_to_string" class="anchor"></a><code><span><span class="keyword">val</span> kind_to_string : <span><a href="#type-double_consensus_evidence_kind">double_consensus_evidence_kind</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>kind_to_string kind</code> return the name of the <code>kind</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-operation"><a href="#val-operation" class="anchor"></a><code><span><span class="keyword">val</span> operation : <span><span class="optlabel">?branch</span>:string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-operation">operation</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>operation</code> constructs an operation from an anonymous operation. the <code>client</code> is used to fetch the branch and the <code>chain_id</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-inject"><a href="#val-inject" class="anchor"></a><code><span><span class="keyword">val</span> inject : 
  <span><span class="optlabel">?request</span>:<span>[ `Inject <span>| `Notify</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?force</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?branch</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?error</span>:<span class="xref-unresolved">Tezt_wrapper</span>.Base.rex <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>[ <span>`OpHash of string</span> ]</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>A wrapper for <a href="#val-inject"><code>inject</code></a> with anonymous operations. The client is used to get all the data that was not provided if it can be recovered via RPCs. Mainly those are the <code>branch</code> and the <code>chain_id</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_double_consensus_evidence_with_distinct_bph"><a href="#val-make_double_consensus_evidence_with_distinct_bph" class="anchor"></a><code><span><span class="keyword">val</span> make_double_consensus_evidence_with_distinct_bph : 
  <span><span class="label">kind</span>:<a href="#type-double_consensus_evidence_kind">double_consensus_evidence_kind</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">misbehaviour_level</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">misbehaviour_round</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">culprit</span>:<a href="../../Account/index.html#type-key">Account.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Client/index.html#type-t">Client.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Crafts two (pre)attestations that only differ in their block payload hash, then a well-formed double (pre)attestation evidence operation on them.</p><p>The denounced (pre)attestations have the specified <code>misbehaviour_level</code> and <code>misbehaviour_round</code>, the first slot of <code>culprit</code>, and two constant and distinct block payload hashes. They are signed by <code>culprit</code>.</p></div></div></div></body></html>
