<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Rpc_process_worker (octez-rpc-process.Octez_rpc_process.Rpc_process_worker)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">octez-rpc-process</a> &#x00BB; <a href="../index.html">Octez_rpc_process</a> &#x00BB; Rpc_process_worker</nav><header class="odoc-preamble"><h1>Module <code><span>Octez_rpc_process.Rpc_process_worker</span></code></h1><p>Worker that handles the RPC server spawned as an external process by the node.</p><p>This module defines an RPC process worker type <code>t</code> that is responsible of dealing with the process' lifetime.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Type of the RPC process worker</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : 
  <span><span class="label">comm_socket_path</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-node-config/Octez_node_config/Config_file/index.html#type-t">Octez_node_config.Config_file.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_version/Octez_node_version/index.html#type-t">Tezos_version.Octez_node_version.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_base/Internal_event_config/index.html#type-t">Tezos_base.Internal_event_config.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>create ~comm_socket_path config node_version internal_event_config</code> creates the worker initial state. <code>comm_socket_path</code> is a socket path that will be used to communicate with the node (note that the socket is created automatically, but the cleaning of it is not handled). <code>config</code> contains all the RPC server configuration (such as ACLs, cors_headers, …). <code>node_version</code> contains informations regarding version of the node to show when answering related rpcs.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-start"><a href="#val-start" class="anchor"></a><code><span><span class="keyword">val</span> start : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Starts the external RPC process using fork+exec calls. It implements a watch dog that is responsible of restarting the process if it dies at some point. Additionally, if the process fails to be restarted, it retries with an exponential back-off until the restart is successful. The promise is blocking until the RPC server is fully available to answer to RPCs.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-stop"><a href="#val-stop" class="anchor"></a><code><span><span class="keyword">val</span> stop : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Stops gracefully the RPC process worker</p></div></div></div></body></html>
