<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>S (tezos-protocol-013-PtJakart.Tezos_raw_protocol_013_PtJakart.Skip_list_repr.S)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">tezos-protocol-013-PtJakart</a> &#x00BB; <a href="../../index.html">Tezos_raw_protocol_013_PtJakart</a> &#x00BB; <a href="../index.html">Skip_list_repr</a> &#x00BB; S</nav><header class="odoc-preamble"><h1>Module type <code><span>Skip_list_repr.S</span></code></h1><p>A skip list represents a sequence of values. There are three main differences between these <code>skip list</code>s and OCaml standard <code>list</code>s:</p><p>1. A skip list cannot be empty.</p><p>2. A skip list grows at its end.</p><p>3. Each cell of the skip list provides several back pointers allowing to *skip* chunk of ancestors of the sequence to directly jump to a given position. More precisely, given a <code>basis</code> parameter, the i-th back pointers of element number <code>n</code> in the sequence points to <code>n - n mod basis^i - 1</code>. The element number <code>n</code> in the sequence contains <code>log_basis n</code> back pointers.</p><p>The skip list is defined by a pair of dereferencing function of type <code>'ptr -&gt; ('content, 'ptr) cell</code> and the last cell of the sequence. The maintainance of this pair is left to the client. In particular, the client is responsible to correctly bind a cell to each back pointers reachable from the last cell.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-cell"><a href="#type-cell" class="anchor"></a><code><span><span class="keyword">type</span> <span>('content, 'ptr) cell</span></span></code></div><div class="spec-doc"><p>A cell in the skip list carrying a given <code>'content</code> and back pointers of type <code>'ptr</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : 
  <span><span>(<span><span class="type-var">'content</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'content</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'ptr</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'ptr</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'content</span>, <span class="type-var">'ptr</span>)</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'content</span>, <span class="type-var">'ptr</span>)</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-encoding"><a href="#val-encoding" class="anchor"></a><code><span><span class="keyword">val</span> encoding : 
  <span><span><span class="type-var">'ptr</span> <a href="../../../Tezos_protocol_environment_013_PtJakart/Data_encoding/index.html#type-t">Tezos_protocol_environment_013_PtJakart.Data_encoding.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'content</span> <a href="../../../Tezos_protocol_environment_013_PtJakart/Data_encoding/index.html#type-t">Tezos_protocol_environment_013_PtJakart.Data_encoding.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'content</span>, <span class="type-var">'ptr</span>)</span> <a href="#type-cell">cell</a></span> <a href="../../../Tezos_protocol_environment_013_PtJakart/Data_encoding/index.html#type-t">Tezos_protocol_environment_013_PtJakart.Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-index"><a href="#val-index" class="anchor"></a><code><span><span class="keyword">val</span> index : <span><span><span>(<span class="type-var">_</span>, <span class="type-var">_</span>)</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>index cell</code> returns the position of <code>cell</code> in the sequence.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-content"><a href="#val-content" class="anchor"></a><code><span><span class="keyword">val</span> content : <span><span><span>(<span class="type-var">'content</span>, <span class="type-var">'ptr</span>)</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'content</span></span></code></div><div class="spec-doc"><p><code>content cell</code> is the content carried by the <code>cell</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-back_pointer"><a href="#val-back_pointer" class="anchor"></a><code><span><span class="keyword">val</span> back_pointer : <span><span><span>(<span class="type-var">'content</span>, <span class="type-var">'ptr</span>)</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'ptr</span> option</span></span></code></div><div class="spec-doc"><p><code>back_pointer cell i</code> returns <code>Some ptr</code> if <code>ptr</code> is the <code>i</code>-th back pointer of <code>cell</code>. Returns <code>None</code> if the cell contains less than <code>i + 1</code> back pointers.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-back_pointers"><a href="#val-back_pointers" class="anchor"></a><code><span><span class="keyword">val</span> back_pointers : <span><span><span>(<span class="type-var">'content</span>, <span class="type-var">'ptr</span>)</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'ptr</span> list</span></span></code></div><div class="spec-doc"><p><code>back_pointers cell</code> returns the back pointers of <code>cell</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-genesis"><a href="#val-genesis" class="anchor"></a><code><span><span class="keyword">val</span> genesis : <span><span class="type-var">'content</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'content</span>, <span class="type-var">'ptr</span>)</span> <a href="#type-cell">cell</a></span></span></code></div><div class="spec-doc"><p><code>genesis content</code> is the first cell of a skip list. It has no back pointers.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-next"><a href="#val-next" class="anchor"></a><code><span><span class="keyword">val</span> next : 
  <span><span class="label">prev_cell</span>:<span><span>(<span class="type-var">'content</span>, <span class="type-var">'ptr</span>)</span> <a href="#type-cell">cell</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">prev_cell_ptr</span>:<span class="type-var">'ptr</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'content</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'content</span>, <span class="type-var">'ptr</span>)</span> <a href="#type-cell">cell</a></span></span></code></div><div class="spec-doc"><p><code>next ~prev_cell ~prev_cell_ptr content</code> creates a new cell that carries some <code>content</code>, that follows <code>prev_cell</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-back_path"><a href="#val-back_path" class="anchor"></a><code><span><span class="keyword">val</span> back_path : 
  <span><span class="label">deref</span>:<span>(<span><span class="type-var">'ptr</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'content</span>, <span class="type-var">'ptr</span>)</span> <a href="#type-cell">cell</a></span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">cell_ptr</span>:<span class="type-var">'ptr</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">target_index</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'ptr</span> list</span> option</span></span></code></div><div class="spec-doc"><p><code>back_path ~deref ~cell_ptr ~target_index</code> returns <code>Some path</code> where <code>path</code> is a sequence of back pointers to traverse to go from <code>cell_ptr</code> to the cell at position <code>target_index</code> in the sequence denoted by <code>(deref, cell_ptr)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-valid_back_path"><a href="#val-valid_back_path" class="anchor"></a><code><span><span class="keyword">val</span> valid_back_path : 
  <span><span class="label">equal_ptr</span>:<span>(<span><span class="type-var">'ptr</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'ptr</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">deref</span>:<span>(<span><span class="type-var">'ptr</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'content</span>, <span class="type-var">'ptr</span>)</span> <a href="#type-cell">cell</a></span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">cell_ptr</span>:<span class="type-var">'ptr</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">target_ptr</span>:<span class="type-var">'ptr</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'ptr</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div><div class="spec-doc"><p><code>valid_back_path ~equal_ptr ~deref ~cell_ptr ~target_ptr path</code> returns <code>true</code> iff <code>path</code> is a valid and minimal path from <code>cell_ptr</code> to <code>target_ptr</code> in the skip list denoted by <code>(deref, cell_ptr)</code>.</p></div></div></div></body></html>
