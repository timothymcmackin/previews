<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sc_rollup_game (tezos-protocol-013-PtJakart.Tezos_raw_protocol_013_PtJakart.Sc_rollup_game)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-protocol-013-PtJakart</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_013_PtJakart</a> &#x00BB; Sc_rollup_game</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_013_PtJakart.Sc_rollup_game</span></code></h1><p>This module provides a refutation game logic for smart contract rollups.</p><p>It is in fact a functor that takes a PVM semantic implemented by a <a href="../Sc_rollup_PVM_sem/module-type-S/index.html"><code>Sc_rollup_PVM_sem.S</code></a> module and produces a game logic.</p><p>This game logic is used by the protocol when two commitments are in conflict to determine which one of the commitments is wrong.</p><p>A commitment characterizes a section of the PVM execution trace. When two commitments are in conflict, they agree on the first state of the section and disagree on the last one. The game runs in two steps: first, the two players alternatively refine the section they disagree on until they reach an atomic section of length 1, that is a single execution step of the PVM ; second, the player must provide a Merkle proof that a valid execution step corresponds to her final state.</p><p>Important invariants ====================</p><ul><li>The committer and the refuter agree on the first state of the current section and disagree on its final state. If they agree on both then whoever plays loses by <code>InvalidMove</code>.</li></ul><p>Expected properties ===================</p><p>Honest-committer-wins:</p><ul><li>If a committer has posted a valid commit and has a perfect PVM at hand, there is a winning strategy which consists in choosing the first section of the current dissection and in producing a regular dissection until the conflict is reached.</li></ul><p>Honest-refuter-wins:</p><ul><li>If a refuter has detected an invalid commit and has a perfect PVM at hand, the same strategy is also winning.</li></ul><p>Here &quot;winning strategy&quot; means that the player actually wins (a draw is not enough).</p><p>Remarks =======</p><p>There are several subtle cornercases:</p><ul><li>If the refuter and the committer both post only invalid states, the game may end in a conflict state where both are wrong. By convention, we decide that these games have no winner.</li></ul><ul><li>If the refuter and the committer both post only states, the game never has any conflicts. By convention, we decide that in this case the commiter wins by <code>InvalidMove</code>.</li></ul><ul><li>If the refuter and the committer both post valid and invalid states, all outcomes are possible. This means that if a committer wins a game we have no guarantee that she has posted a valid commit.</li></ul></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-Make"><a href="#module-Make" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Make/index.html">Make</a></span><span> (<a href="Make/argument-1-PVM/index.html">PVM</a> : <a href="../Sc_rollup_PVM_sem/module-type-S/index.html">Sc_rollup_PVM_sem.S</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
