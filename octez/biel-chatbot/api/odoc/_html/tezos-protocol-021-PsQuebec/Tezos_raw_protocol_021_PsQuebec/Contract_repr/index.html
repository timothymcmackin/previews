<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Contract_repr (tezos-protocol-021-PsQuebec.Tezos_raw_protocol_021_PsQuebec.Contract_repr)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-protocol-021-PsQuebec</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_021_PsQuebec</a> &#x00BB; Contract_repr</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_021_PsQuebec.Contract_repr</span></code></h1><p>This module defines identifiers for two basic types of contracts. It also specifies how to compute originated contract's hash from origination nonce.</p></header><nav class="odoc-toc"><ul><li><a href="#originated-contracts">Originated contracts</a></li><li><a href="#human-readable-notation">Human readable notation</a></li><li><a href="#serializers">Serializers</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span></code><ol><li id="type-t.Implicit" class="def variant constructor anchored"><a href="#type-t.Implicit" class="anchor"></a><code><span>| </span><span><span class="constructor">Implicit</span> <span class="keyword">of</span> <a href="../../Tezos_protocol_environment_021_PsQuebec/Signature/Public_key_hash/index.html#type-t">Tezos_protocol_environment_021_PsQuebec.Signature.Public_key_hash.t</a></span></code></li><li id="type-t.Originated" class="def variant constructor anchored"><a href="#type-t.Originated" class="anchor"></a><code><span>| </span><span><span class="constructor">Originated</span> <span class="keyword">of</span> <a href="../Contract_hash/index.html#type-t">Contract_hash.t</a></span></code></li></ol></div><div class="spec-doc"><p>A contract is simply an account on the blockchain ledger. There are two types of contracts:</p><ul><li>implicit contracts represent accounts of users of the blockchain; hence, they are commonly called &quot;user accounts&quot; in the documentation;</li><li>originated are special accounts with a Michelson script attached to them. Every time a transaction is sent to an originated account, its associated script is run in order to trigger some action in response. These scripted accounts are commonly called &quot;smart contracts&quot; in the documentation.</li></ul><p>An implicit account is identified by the hash of the public key which was used to create it. The owner of the corresponding private key is the holder of the account. An originated contract's hash is derived from its origination nonce (see below).</p></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../../Tezos_protocol_environment_021_PsQuebec/Compare/module-type-S/index.html">Tezos_protocol_environment_021_PsQuebec.Compare.S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../Tezos_protocol_environment_021_PsQuebec/Compare/module-type-S/index.html#type-t">t</a> := <a href="#type-t">t</a></span></span></code></summary><div class="odoc-spec"><div class="spec value anchored" id="val-(=)"><a href="#val-(=)" class="anchor"></a><code><span><span class="keyword">val</span> (=) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&lt;&gt;)"><a href="#val-(&lt;&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;&gt;) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&lt;)"><a href="#val-(&lt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&lt;=)"><a href="#val-(&lt;=)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;=) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&gt;=)"><a href="#val-(&gt;=)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;=) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&gt;)"><a href="#val-(&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span><span class="keyword">val</span> compare : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max"><a href="#val-max" class="anchor"></a><code><span><span class="keyword">val</span> max : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-min"><a href="#val-min" class="anchor"></a><code><span><span class="keyword">val</span> min : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div></details></div><div class="odoc-spec"><div class="spec value anchored" id="val-in_memory_size"><a href="#val-in_memory_size" class="anchor"></a><code><span><span class="keyword">val</span> in_memory_size : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Cache_memory_helpers/index.html#type-sint">Cache_memory_helpers.sint</a></span></code></div></div><h3 id="originated-contracts"><a href="#originated-contracts" class="anchor"></a>Originated contracts</h3><div class="odoc-spec"><div class="spec value anchored" id="val-originated_contract"><a href="#val-originated_contract" class="anchor"></a><code><span><span class="keyword">val</span> originated_contract : <span><a href="../Origination_nonce/index.html#type-t">Origination_nonce.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>originated_contract nonce</code> is the contract address originated from <code>nonce</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-originated_contracts"><a href="#val-originated_contracts" class="anchor"></a><code><span><span class="keyword">val</span> originated_contracts : 
  <span><span class="label">since</span>:<a href="../Origination_nonce/index.html#type-t">Origination_nonce.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">until</span>:<a href="../Origination_nonce/index.html#type-t">Origination_nonce.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Contract_hash/index.html#type-t">Contract_hash.t</a> list</span></span></code></div><div class="spec-doc"><p><code>originated_contracts ~since ~until</code> is the contract addresses originated from <code>since</code> until <code>until</code>. The operation hash of nonce <code>since</code> and <code>until</code> must be the same or it will fail with an <code>assert</code>. <code>since</code> &lt; <code>until</code> or the returned list is empty</p></div></div><h3 id="human-readable-notation"><a href="#human-readable-notation" class="anchor"></a>Human readable notation</h3><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Invalid_contract_notation"><a href="#extension-decl-Invalid_contract_notation" class="anchor"></a><code><span><span class="keyword">type</span> <a href="../../Tezos_protocol_environment_021_PsQuebec/Error_monad/index.html#type-error">Tezos_protocol_environment_021_PsQuebec.Error_monad.error</a> += </span></code><ol><li id="extension-Invalid_contract_notation" class="def variant extension anchored"><a href="#extension-Invalid_contract_notation" class="anchor"></a><code><span>| </span><span><span class="extension">Invalid_contract_notation</span> <span class="keyword">of</span> string</span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_b58check"><a href="#val-to_b58check" class="anchor"></a><code><span><span class="keyword">val</span> to_b58check : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_b58check"><a href="#val-of_b58check" class="anchor"></a><code><span><span class="keyword">val</span> of_b58check : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <a href="../../Tezos_protocol_environment_021_PsQuebec/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_021_PsQuebec.Error_monad.tzresult</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_b58data"><a href="#val-of_b58data" class="anchor"></a><code><span><span class="keyword">val</span> of_b58data : 
  <span><a href="../../Tezos_protocol_environment_021_PsQuebec/Base58/index.html#type-data">Tezos_protocol_environment_021_PsQuebec.Base58.data</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><a href="../../Tezos_protocol_environment_021_PsQuebec/Format/index.html#type-formatter">Tezos_protocol_environment_021_PsQuebec.Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_short"><a href="#val-pp_short" class="anchor"></a><code><span><span class="keyword">val</span> pp_short : 
  <span><a href="../../Tezos_protocol_environment_021_PsQuebec/Format/index.html#type-formatter">Tezos_protocol_environment_021_PsQuebec.Format.formatter</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><h3 id="serializers"><a href="#serializers" class="anchor"></a>Serializers</h3><div class="odoc-spec"><div class="spec value anchored" id="val-encoding"><a href="#val-encoding" class="anchor"></a><code><span><span class="keyword">val</span> encoding : <span><a href="#type-t">t</a> <a href="../../Tezos_protocol_environment_021_PsQuebec/Data_encoding/index.html#type-t">Tezos_protocol_environment_021_PsQuebec.Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-implicit_encoding"><a href="#val-implicit_encoding" class="anchor"></a><code><span><span class="keyword">val</span> implicit_encoding : 
  <span><a href="../../Tezos_protocol_environment_021_PsQuebec/Signature/Public_key_hash/index.html#type-t">Tezos_protocol_environment_021_PsQuebec.Signature.Public_key_hash.t</a>
    <a href="../../Tezos_protocol_environment_021_PsQuebec/Data_encoding/index.html#type-t">Tezos_protocol_environment_021_PsQuebec.Data_encoding.t</a></span></span></code></div><div class="spec-doc"><p><code>implicit_encoding</code> is an encoding for public key hashes compatible with the <code>encoding</code> of contracts in the specific case of implicit accounts.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-originated_encoding"><a href="#val-originated_encoding" class="anchor"></a><code><span><span class="keyword">val</span> originated_encoding : 
  <span><a href="../Contract_hash/index.html#type-t">Contract_hash.t</a> <a href="../../Tezos_protocol_environment_021_PsQuebec/Data_encoding/index.html#type-t">Tezos_protocol_environment_021_PsQuebec.Data_encoding.t</a></span></span></code></div><div class="spec-doc"><p><code>originated_encoding</code> is an encoding for contract hashes that is compatible with the <code>encoding</code> of contracts in the specific case of originated accounts.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cases"><a href="#val-cases" class="anchor"></a><code><span><span class="keyword">val</span> cases : 
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> option</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../../Tezos_protocol_environment_021_PsQuebec/Data_encoding/index.html#type-case">Tezos_protocol_environment_021_PsQuebec.Data_encoding.case</a></span> list</span></span></code></div><div class="spec-doc"><p><code>cases f g</code> exports the <code>Data_encoding.case</code>s used to define <a href="#val-encoding"><code>encoding</code></a>.</p><p>The only reason why we export that is to let <a href="../Destination_repr/index.html#val-encoding"><code>Destination_repr.encoding</code></a> use it. This allows the latter to be compatible with <a href="#val-encoding"><code>encoding</code></a>, which is of key importance for backward compatibility reasons.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rpc_arg"><a href="#val-rpc_arg" class="anchor"></a><code><span><span class="keyword">val</span> rpc_arg : <span><a href="#type-t">t</a> <a href="../../Tezos_protocol_environment_021_PsQuebec/RPC_arg/index.html#type-arg">Tezos_protocol_environment_021_PsQuebec.RPC_arg.arg</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Index"><a href="#module-Index" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Index/index.html">Index</a></span><span> : <a href="../Storage_description/module-type-INDEX/index.html">Storage_description.INDEX</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Storage_description/module-type-INDEX/index.html#type-t">t</a> = <a href="#type-t">t</a></span></span></code></div></div></div></body></html>
