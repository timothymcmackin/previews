<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dal_slot_repr (tezos-protocol-015-PtLimaPt.Tezos_raw_protocol_015_PtLimaPt.Dal_slot_repr)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-protocol-015-PtLimaPt</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_015_PtLimaPt</a> &#x00BB; Dal_slot_repr</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_015_PtLimaPt.Dal_slot_repr</span></code></h1><p>Slot header representation for the data-availability layer.</p></header><nav class="odoc-toc"><ul><li><a href="#overview">Overview</a></li></ul></nav><div class="odoc-content"><h2 id="overview"><a href="#overview" class="anchor"></a>Overview</h2><p>For the data-availability layer, the L1 provides a list of slots at every level. A slot is a blob of data that can be interpreted by the users of the data-availability layer (such as SCORU).</p><p>The purpose of the data-availability layer is to increase the bandwidth of the layer 1 thanks to the distribution of &quot;slots&quot;. A slot is never posted directly onto the layer 1 blocks but on the data-availability layer. The producer of a slot sill has to post a slot header onto the layer 1. A slot header is an abstract datatype certifying that the corresponding slot has some maximum size (provided by the layer 1). In other words, the whole data contained into the slot cannot exceed some fixed size. This is to avoid attacks where a slot header would be posted onto the layer 1 block, declared available by the protocol, but actually the slot size would be too large to be refuted a posteriori.</p><p>The slot header can also be used to prove that a blob of data is a portion of the initial slot.</p><div class="odoc-spec"><div class="spec module anchored" id="module-Header"><a href="#module-Header" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Header/index.html">Header</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Index"><a href="#module-Index" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Index/index.html">Index</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>An `Index.t` is a possible value for a slot index. We assume this value to be a positive 8-bit integer. Note that this is a hard constraint, which is independent of protocol constants. If a choice is ever made to increase the size of available slots in the protocol, we also need to change this module to accommodate for higher values.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-id"><a href="#type-id" class="anchor"></a><code><span><span class="keyword">type</span> id</span><span> = </span><span>{</span></code><ol><li id="type-id.published_level" class="def record field anchored"><a href="#type-id.published_level" class="anchor"></a><code><span>published_level : <a href="../Raw_level_repr/index.html#type-t">Raw_level_repr.t</a>;</span></code></li><li id="type-id.index" class="def record field anchored"><a href="#type-id.index" class="anchor"></a><code><span>index : <a href="Index/index.html#type-t">Index.t</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>For Layer-1, a slot is described by the level at which it is published, the slot's index (in the list of slots), and the slot's header (KATE commitment hash).</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>{</span></code><ol><li id="type-t.id" class="def record field anchored"><a href="#type-t.id" class="anchor"></a><code><span>id : <a href="#type-id">id</a>;</span></code></li><li id="type-t.header" class="def record field anchored"><a href="#type-t.header" class="anchor"></a><code><span>header : <a href="Header/index.html#type-t">Header.t</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-slot"><a href="#type-slot" class="anchor"></a><code><span><span class="keyword">type</span> slot</span><span> = <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-slot_index"><a href="#type-slot_index" class="anchor"></a><code><span><span class="keyword">type</span> slot_index</span><span> = <a href="Index/index.html#type-t">Index.t</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Page"><a href="#module-Page" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Page/index.html">Page</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A DAL slot is decomposed to a successive list of pages with fixed content size. The size is chosen so that it's possible to inject a page in a Tezos L1 operation if needed during the proof phase of a refutation game.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-encoding"><a href="#val-encoding" class="anchor"></a><code><span><span class="keyword">val</span> encoding : <span><a href="#type-t">t</a> <a href="../../Tezos_protocol_environment_015_PtLimaPt/Data_encoding/index.html#type-t">Tezos_protocol_environment_015_PtLimaPt.Data_encoding.t</a></span></span></code></div><div class="spec-doc"><p>The encoding ensures the slot is always a non-negative number.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><a href="../../Tezos_protocol_environment_015_PtLimaPt/Format/index.html#type-formatter">Tezos_protocol_environment_015_PtLimaPt.Format.formatter</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Slot_market"><a href="#module-Slot_market" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Slot_market/index.html">Slot_market</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Only one slot header is accepted per slot index. If two slots headers are included into a block, the second one will fail.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Slots_history"><a href="#module-Slots_history" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Slots_history/index.html">Slots_history</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>This module provides an abstract data structure (type <a href="#type-t"><code>t</code></a>) that represents a skip list used to store successive DAL slots confirmed on L1. There is one slot per cell in the skip list. The slots are sorted in increasing order by level, and by slot index, for the slots of the same level.</p></div></div></div></body></html>
