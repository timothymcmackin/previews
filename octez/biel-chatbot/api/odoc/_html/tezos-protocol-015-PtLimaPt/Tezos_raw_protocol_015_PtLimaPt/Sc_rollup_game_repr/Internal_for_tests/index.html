<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Internal_for_tests (tezos-protocol-015-PtLimaPt.Tezos_raw_protocol_015_PtLimaPt.Sc_rollup_game_repr.Internal_for_tests)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">tezos-protocol-015-PtLimaPt</a> &#x00BB; <a href="../../index.html">Tezos_raw_protocol_015_PtLimaPt</a> &#x00BB; <a href="../index.html">Sc_rollup_game_repr</a> &#x00BB; Internal_for_tests</nav><header class="odoc-preamble"><h1>Module <code><span>Sc_rollup_game_repr.Internal_for_tests</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-find_choice"><a href="#val-find_choice" class="anchor"></a><code><span><span class="keyword">val</span> find_choice : 
  <span><span><a href="../index.html#type-dissection_chunk">dissection_chunk</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Sc_rollup_tick_repr/index.html#type-t">Sc_rollup_tick_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../index.html#type-dissection_chunk">dissection_chunk</a> * <a href="../index.html#type-dissection_chunk">dissection_chunk</a>, <a href="../index.html#type-reason">reason</a>)</span>
    <a href="../../../Tezos_protocol_environment_015_PtLimaPt/Pervasives/index.html#type-result">Tezos_protocol_environment_015_PtLimaPt.Pervasives.result</a></span>
    <a href="../../../Tezos_protocol_environment_015_PtLimaPt/Lwt/index.html#type-t">Tezos_protocol_environment_015_PtLimaPt.Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Checks that the tick count chosen by the current move is one of the ones in the current dissection. Returns a tuple containing the current dissection interval (including the two states) between this tick and the next.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_dissection"><a href="#val-check_dissection" class="anchor"></a><code><span><span class="keyword">val</span> check_dissection : 
  <span><span class="label">default_number_of_sections</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">start_chunk</span>:<a href="../index.html#type-dissection_chunk">dissection_chunk</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">stop_chunk</span>:<a href="../index.html#type-dissection_chunk">dissection_chunk</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../index.html#type-dissection_chunk">dissection_chunk</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(unit, <a href="../index.html#type-reason">reason</a>)</span> <a href="../../../Tezos_protocol_environment_015_PtLimaPt/Pervasives/index.html#type-result">Tezos_protocol_environment_015_PtLimaPt.Pervasives.result</a></span>
    <a href="../../../Tezos_protocol_environment_015_PtLimaPt/Lwt/index.html#type-t">Tezos_protocol_environment_015_PtLimaPt.Lwt.t</a></span></span></code></div><div class="spec-doc"><p>We check firstly that <code>dissection</code> is the correct length. It must be <code>default_number_of_sections</code> values long, unless the distance between <code>start_tick</code> and <code>stop_tick</code> is too small to make this possible, in which case it should be as long as possible. (If the distance is one we fail immediately as there is no possible legal dissection).</p><p>Then we check that <code>dissection</code> starts at the correct tick and state, and that it ends at the correct tick and with a different state to the current dissection.</p><p>Finally, we check that <code>dissection</code> is well formed: it has correctly ordered the ticks, and it begins with a real hash of the form <code>Some
    s</code> not a <code>None</code> state. Note that we have to allow the possibility of multiple <code>None</code> states because the restrictions on dissection shape (which are necessary to prevent a 'linear-time game' attack) will mean that sometimes the honest play is a dissection with multiple <code>None</code> states.</p></div></div></div></body></html>
