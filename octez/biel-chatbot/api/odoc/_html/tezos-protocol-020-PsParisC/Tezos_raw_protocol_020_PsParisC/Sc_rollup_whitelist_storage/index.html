<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sc_rollup_whitelist_storage (tezos-protocol-020-PsParisC.Tezos_raw_protocol_020_PsParisC.Sc_rollup_whitelist_storage)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-protocol-020-PsParisC</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_020_PsParisC</a> &#x00BB; Sc_rollup_whitelist_storage</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_020_PsParisC.Sc_rollup_whitelist_storage</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-is_private"><a href="#val-is_private" class="anchor"></a><code><span><span class="keyword">val</span> is_private : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a> * bool)</span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_020_PsParisC.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Lwt/index.html#type-t">Tezos_protocol_environment_020_PsParisC.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>is_private context rollup</code> returns true if and only if the <code>rollup</code> is private, along with the new context accounting for the gas consumption of the function call.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">whitelist</span>:<a href="../Sc_rollup_whitelist_repr/index.html#type-t">Sc_rollup_whitelist_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">origination_level</span>:<a href="../Raw_level_repr/index.html#type-t">Raw_level_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a> * <a href="../../Tezos_protocol_environment_020_PsParisC/Z/index.html#type-t">Tezos_protocol_environment_020_PsParisC.Z.t</a>)</span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_020_PsParisC.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Lwt/index.html#type-t">Tezos_protocol_environment_020_PsParisC.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>init  context rollup ~whitelist</code> returns the new context resulting from the addition of the elements of <code>whitelist</code> to the whitelist in the given <code>rollup</code>'s storage, along with the used storage space.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_access_to_private_rollup"><a href="#val-check_access_to_private_rollup" class="anchor"></a><code><span><span class="keyword">val</span> check_access_to_private_rollup : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_protocol_environment_020_PsParisC/Signature/index.html#type-public_key_hash">Tezos_protocol_environment_020_PsParisC.Signature.public_key_hash</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <a href="../../Tezos_protocol_environment_020_PsParisC/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_020_PsParisC.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Lwt/index.html#type-t">Tezos_protocol_environment_020_PsParisC.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>check_access_to_private_rollup context rollup staker_pkh</code> returns an error if <code>staker_pkh</code> is not in the whitelist of <code>rollup</code> if the <code>rollup</code> is marked as private. Returns the gas consumed by performing the call otherwise. Assumes the private rollup feature is activated.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_whitelist_uncarbonated"><a href="#val-find_whitelist_uncarbonated" class="anchor"></a><code><span><span class="keyword">val</span> find_whitelist_uncarbonated : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span><a href="../../Tezos_protocol_environment_020_PsParisC/Signature/index.html#type-public_key_hash">Tezos_protocol_environment_020_PsParisC.Signature.public_key_hash</a> list</span> option</span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_020_PsParisC.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Lwt/index.html#type-t">Tezos_protocol_environment_020_PsParisC.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>find_whitelist_uncarbonated context rollup</code> returns the whitelist from the storage.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-replace"><a href="#val-replace" class="anchor"></a><code><span><span class="keyword">val</span> replace : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">whitelist</span>:<a href="../Sc_rollup_whitelist_repr/index.html#type-t">Sc_rollup_whitelist_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a> * <a href="../../Tezos_protocol_environment_020_PsParisC/Z/index.html#type-t">Tezos_protocol_environment_020_PsParisC.Z.t</a>)</span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_020_PsParisC.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Lwt/index.html#type-t">Tezos_protocol_environment_020_PsParisC.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>replace context rollup ~whitelist</code> replaces the whitelist of <code>rollup</code> in the storage by <code>whitelist</code>. Returns the resulting context along with the used storage space.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_public"><a href="#val-make_public" class="anchor"></a><code><span><span class="keyword">val</span> make_public : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a> * <a href="../../Tezos_protocol_environment_020_PsParisC/Z/index.html#type-t">Tezos_protocol_environment_020_PsParisC.Z.t</a>)</span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_020_PsParisC.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Lwt/index.html#type-t">Tezos_protocol_environment_020_PsParisC.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>make_public context rollup</code> removes the whitelist of <code>rollup</code> from the storage thus making the rollup public. Returns the resulting context along with the freed storage space.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-adjust_storage_space"><a href="#val-adjust_storage_space" class="anchor"></a><code><span><span class="keyword">val</span> adjust_storage_space : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">new_storage_size</span>:<a href="../../Tezos_protocol_environment_020_PsParisC/Z/index.html#type-t">Tezos_protocol_environment_020_PsParisC.Z.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a> * <a href="../../Tezos_protocol_environment_020_PsParisC/Z/index.html#type-t">Tezos_protocol_environment_020_PsParisC.Z.t</a>)</span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_020_PsParisC.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Lwt/index.html#type-t">Tezos_protocol_environment_020_PsParisC.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>adjust_storage_space ctxt ~new_storage_size</code> updates the used storage space for the whitelist according to <code>new_storage_size</code>. The additional positive amount of unpaid storage is returned. If no unpaid storage is consumed, this amount is 0.</p><p>Note that when storage space for the whitelist is released we may later use that space for free. For this reason, the amount returned may be less than the given (positive) <code>storage_diff</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_last_whitelist_update"><a href="#val-get_last_whitelist_update" class="anchor"></a><code><span><span class="keyword">val</span> get_last_whitelist_update : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a> * <a href="../Sc_rollup_whitelist_repr/index.html#type-last_whitelist_update">Sc_rollup_whitelist_repr.last_whitelist_update</a>)</span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_020_PsParisC.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Lwt/index.html#type-t">Tezos_protocol_environment_020_PsParisC.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>get_last_whitelist_update ctxt rollup</code> returns the pair (outbox level, message index) of the latest message of update to the whitelist. Returns None if no whitelist update has been applied. The returned context accounts for the gas consumption of the storage's update.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_last_whitelist_update"><a href="#val-set_last_whitelist_update" class="anchor"></a><code><span><span class="keyword">val</span> set_last_whitelist_update : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_repr/index.html#type-t">Sc_rollup_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sc_rollup_whitelist_repr/index.html#type-last_whitelist_update">Sc_rollup_whitelist_repr.last_whitelist_update</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a> * <a href="../../Tezos_protocol_environment_020_PsParisC/Z/index.html#type-t">Tezos_protocol_environment_020_PsParisC.Z.t</a>)</span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_020_PsParisC.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_020_PsParisC/Lwt/index.html#type-t">Tezos_protocol_environment_020_PsParisC.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>set_last_whitelist_update ctxt rollup (outbox_level, message_index)</code> set the outbox level and message index of the latest message of update to the whitelist. Returns the new context, and the difference from the old (maybe 0) to the new size of the underlying storage.</p></div></div></div></body></html>
