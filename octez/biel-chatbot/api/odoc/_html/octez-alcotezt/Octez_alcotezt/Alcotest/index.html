<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Alcotest (octez-alcotezt.Octez_alcotezt.Alcotest)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-alcotezt</a> &#x00BB; <a href="../index.html">Octez_alcotezt</a> &#x00BB; Alcotest</nav><header class="odoc-preamble"><h1>Module <code><span>Octez_alcotezt.Alcotest</span></code></h1><p>Wrapper to run Alcotest tests with Tezt as a backend.</p></header><div class="odoc-content"><p>This module provides a subset of the interface of the <code>Alcotest</code> module of the real Alcotest library. But instead of using Alcotest to run the tests, it uses Tezt. This allows to transition from Alcotest to Tezt without having to actually change the code. In turn, this allows to benefit from Tezt features such as auto-balancing in the CI. One can then use Tezt's modules in the test, to gradually migrate the test to Tezt and stop using this wrapper.</p><p>This module is intended as a way to help transition from Alcotest to Tezt, not to use both at the same time forever. First use Alcotezt to have the test runnable using Tezt, as a quick win to get auto-balancing etc. Then stop using Alcotest functions and migrate existing calls at the pace that is convenient for you.</p><div class="odoc-spec"><div class="spec type anchored" id="type-return"><a href="#type-return" class="anchor"></a><code><span><span class="keyword">type</span> return</span><span> = unit</span></code></div><div class="spec-doc"><p>Return type for tests.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-speed_level"><a href="#type-speed_level" class="anchor"></a><code><span><span class="keyword">type</span> speed_level</span><span> = </span><span>[ </span></code><ol><li id="type-speed_level.Quick" class="def variant constructor anchored"><a href="#type-speed_level.Quick" class="anchor"></a><code><span>| </span><span>`Quick</span></code></li><li id="type-speed_level.Slow" class="def variant constructor anchored"><a href="#type-speed_level.Slow" class="anchor"></a><code><span>| </span><span>`Slow</span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>Speed levels.</p><p>In Alcotest, one can ask not to run slow tests with <code>-q</code> from the command-line. In Tezt, the equivalent is <code>quick</code>.</p><p>Tests registered with <code>`Slow</code> or <code>`Quick</code> will have respectively the tag <code>&quot;slow&quot;</code> or <code>&quot;quick&quot;</code>. <code>&quot;slow&quot;</code> tag may have consequences on how the test will be handled by the CI. More information is given in <code>src/lib_test/tag.mli</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-test_case"><a href="#type-test_case" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a test_case</span></span><span> = string * <a href="#type-speed_level">speed_level</a> * <span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-return">return</a>)</span></span></code></div><div class="spec-doc"><p>Test cases.</p><p>The name of the Alcotest test case appears in Tezt's logs, but it is not used in the Tezt test title, nor as a tag.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-test_case"><a href="#val-test_case" class="anchor"></a><code><span><span class="keyword">val</span> test_case : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-speed_level">speed_level</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-return">return</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-test_case">test_case</a></span></span></code></div><div class="spec-doc"><p>Make a test case.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Test_error"><a href="#exception-Test_error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Test_error</span></span></code></div><div class="spec-doc"><p>Can be raised to fail a test.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-test"><a href="#type-test" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a test</span></span><span> = string * <span><span><span class="type-var">'a</span> <a href="#type-test_case">test_case</a></span> list</span></span></code></div><div class="spec-doc"><p>Tests.</p><p>In Tezt, the name of the test is used as the title of the test.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : <span><span class="label">__FILE__</span>:string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span>unit <a href="#type-test">test</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-return">return</a></span></code></div><div class="spec-doc"><p>Run a test suite.</p><p>In Tezt, this calls <code>Test.register</code> but does not actually run the test suite. The name of the test suite is used as the filename for the Tezt test.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-TESTABLE"><a href="#module-type-TESTABLE" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-TESTABLE/index.html">TESTABLE</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-testable"><a href="#type-testable" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a testable</span></span><span> = <span>(<span class="keyword">module</span> <a href="module-type-TESTABLE/index.html">TESTABLE</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-TESTABLE/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span></span></code></div><div class="spec-doc"><p>Values that can be tested with <a href="#val-check"><code>check</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-testable"><a href="#val-testable" class="anchor"></a><code><span><span class="keyword">val</span> testable : 
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>testable pp eq</code> is a new <a href="#type-testable"><code>testable</code></a> with the pretty-printer <code>pp</code> and equality <code>eq</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-return">return</a></span></code></div><div class="spec-doc"><p><code>pp t</code> is <code>t</code>'s pretty-printer.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_pp"><a href="#val-of_pp" class="anchor"></a><code><span><span class="keyword">val</span> of_pp : <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-return">return</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p><code>of_pp pp</code> tests values which can be printed using <code>pp</code> and compared using <code>Stdlib.compare</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>equal t</code> is <code>t</code>'s equality.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unit"><a href="#val-unit" class="anchor"></a><code><span><span class="keyword">val</span> unit : <span>unit <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p>The <code>unit</code> testable type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string"><a href="#val-string" class="anchor"></a><code><span><span class="keyword">val</span> string : <span>string <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p>The <code>string</code> testable type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bool"><a href="#val-bool" class="anchor"></a><code><span><span class="keyword">val</span> bool : <span>bool <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p>The boolean testable type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bytes"><a href="#val-bytes" class="anchor"></a><code><span><span class="keyword">val</span> bytes : <span>bytes <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p>The bytes testable type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int64"><a href="#val-int64" class="anchor"></a><code><span><span class="keyword">val</span> int64 : <span>int64 <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p>The int64 testable type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int32"><a href="#val-int32" class="anchor"></a><code><span><span class="keyword">val</span> int32 : <span>int32 <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p>The int32 testable type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int"><a href="#val-int" class="anchor"></a><code><span><span class="keyword">val</span> int : <span>int <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p>The int testable type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-float"><a href="#val-float" class="anchor"></a><code><span><span class="keyword">val</span> float : <span>float <span class="arrow">&#45;&gt;</span></span> <span>float <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p>The float testable type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list"><a href="#val-list" class="anchor"></a><code><span><span class="keyword">val</span> list : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p>The list testable type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-array"><a href="#val-array" class="anchor"></a><code><span><span class="keyword">val</span> array : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> array</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p>The array testable type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pair"><a href="#val-pair" class="anchor"></a><code><span><span class="keyword">val</span> pair : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-testable">testable</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p>The pair testable type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-triple"><a href="#val-triple" class="anchor"></a><code><span><span class="keyword">val</span> triple : 
  <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="#type-testable">testable</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'c</span> <a href="#type-testable">testable</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span>)</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p>The triple testable type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-result"><a href="#val-result" class="anchor"></a><code><span><span class="keyword">val</span> result : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'e</span> <a href="#type-testable">testable</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'e</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p>The result testable type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reject"><a href="#val-reject" class="anchor"></a><code><span><span class="keyword">val</span> reject : <span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p>The reject testable type. <code>reject</code> always fails on values of any type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-option"><a href="#val-option" class="anchor"></a><code><span><span class="keyword">val</span> option : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> option</span> <a href="#type-testable">testable</a></span></span></code></div><div class="spec-doc"><p>The option testable type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check"><a href="#val-check" class="anchor"></a><code><span><span class="keyword">val</span> check : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-return">return</a></span></code></div><div class="spec-doc"><p>Check that two values are equal.</p><p>In Tezt, this becomes <code>Check.(=)</code> where <code>~error_msg</code> is <code>msg ^ &quot;: expected %L, got %R&quot;</code> where <code>msg</code> is the <code>string</code> given to <code>check</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check'"><a href="#val-check'" class="anchor"></a><code><span><span class="keyword">val</span> check' : <span><span><span class="type-var">'a</span> <a href="#type-testable">testable</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">msg</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="label">expected</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">actual</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-return">return</a></span></code></div><div class="spec-doc"><p>Check that two values are equal (labeled variant of <a href="#val-check"><code>check</code></a>).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_raises"><a href="#val-check_raises" class="anchor"></a><code><span><span class="keyword">val</span> check_raises : <span>string <span class="arrow">&#45;&gt;</span></span> <span>exn <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-return">return</a></span></code></div><div class="spec-doc"><p>Check that an exception is raised.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fail"><a href="#val-fail" class="anchor"></a><code><span><span class="keyword">val</span> fail : <span>string <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Fail the current test (string version).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-failf"><a href="#val-failf" class="anchor"></a><code><span><span class="keyword">val</span> failf : <span><span><span>(<span class="type-var">'a</span>, <span class="xref-unresolved">Stdlib</span>.Format.formatter, <a href="#type-return">return</a>, <span class="type-var">'b</span>)</span> <span class="xref-unresolved">Stdlib</span>.format4</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Fail the current test (format version).</p></div></div></div></body></html>
