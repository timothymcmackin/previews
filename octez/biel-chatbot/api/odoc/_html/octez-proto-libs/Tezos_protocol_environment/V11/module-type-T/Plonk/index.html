<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Plonk (octez-proto-libs.Tezos_protocol_environment.V11.T.Plonk)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../../../index.html">octez-proto-libs</a> &#x00BB; <a href="../../../index.html">Tezos_protocol_environment</a> &#x00BB; <a href="../../index.html">V11</a> &#x00BB; <a href="../index.html">T</a> &#x00BB; Plonk</nav><header class="odoc-preamble"><h1>Module <code><span>T.Plonk</span></code></h1><p>aPlonK is a <em>PlonK</em>-based proving system. As such, it provides a way to create <em>succinct cryptographic proofs</em> about a given predicate, which can be then verified with a low computational cost.</p><p>In this system, a predicate is represented by an <em>arithmetic circuit</em>, i.e. a collection of arithmetic <em>gates</em> operating over a <em>prime field</em>, connected through <em>wires</em> holding <em>scalars</em> from this field. For example, the following diagram illustrates a simple circuit checking that the addition of two scalars (<code>w1</code> and <code>w2</code>) is equal to <code>w0</code>. Here, the <code>add</code> gate can be seen as taking two inputs and producing an output, while the <code>eq</code> gate just takes two inputs and asserts they're equal.</p><pre class="language-ocaml"><code>(w0)│      w1│         w2│
    │        └───┐   ┌───┘
    │          ┌─┴───┴─┐
    │          │  add  │
    │          └───┬───┘
    └──────┐   ┌───┘w3
         ┌─┴───┴─┐
         │  eq   │
         └───────┘</code></pre><p>The wires of a circuit are called <em>prover inputs</em>, since the prover needs an assignment of all wires to produce a proof. The predicate also declares a subset of the wires called <em>verifier inputs</em>. In our example, wire <code>w0</code> is the only verifier input, which is indicated by the parenthesis. A proof for a given <code>w0</code> would prove the following statement: <code>∃ w1, w2, w3: w3 = w1 + w2 ∧ w0 = w3</code> This means that the verifier only needs a (typically small) subset of the inputs alongside the (succinct) proof to check the validity of the statement.</p><p>A more interesting example would be to replace the <code>add</code> gate by a more complicated hash circuit. This would prove the knowledge of the pre-image of a hash.</p><p>A simplified view of aPlonk's API consists of the following three functions:</p><pre class="language-ocaml"><code>val setup : circuit -&gt; srs -&gt;
  (prover_public_parameters, verifier_public_parameters)

val prove : prover_public_parameters -&gt; prover_inputs -&gt;
  private_inputs -&gt; proof

val verify : verifier_public_parameters -&gt; verifier_inputs -&gt;
  proof -&gt; bool</code></pre><p>In addition to the prove and verify, the interface provides a function to setup the system. The setup function requires a <em>Structured Reference String</em>. Two large SRSs were generated by the ZCash and Filecoin projects and are both used in aPlonK. Notice also that the circuit is used during setup only and, independently from its size, the resulting <em>verifier_public_parameters</em> will be a succinct piece of data that will be posted on-chain to allow verification and they are bound to the specific circuit that generated them. The <em>prover_public_parameters</em>'s size is linear in the size of the circuit.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type subst anchored" id="type-scalar"><a href="#type-scalar" class="anchor"></a><code><span><span class="keyword">type</span> scalar</span><span> := <a href="../Bls/Primitive/Fr/index.html#type-t">Bls.Primitive.Fr.t</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-public_parameters"><a href="#type-public_parameters" class="anchor"></a><code><span><span class="keyword">type</span> public_parameters</span><span> =
  <a href="../../../../Tezos_protocol_environment_structs/V9/Plonk/index.html#type-verifier_public_parameters">Tezos_protocol_environment_structs.V11.Plonk.verifier_public_parameters</a></span></code></div><div class="spec-doc"><p>Set of public parameters needed by the verifier. Its size is constant w.r.t. the size of the circuits.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-verifier_inputs"><a href="#type-verifier_inputs" class="anchor"></a><code><span><span class="keyword">type</span> verifier_inputs</span><span> = <span><span>(string * <span><span><a href="#type-scalar">scalar</a> array</span> list</span>)</span> list</span></span></code></div><div class="spec-doc"><p>Map where each circuit identifier is bound to the verifier inputs for this circuit.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-proof"><a href="#type-proof" class="anchor"></a><code><span><span class="keyword">type</span> proof</span><span> = <a href="../../../../Tezos_protocol_environment_structs/V9/Plonk/index.html#type-proof">Tezos_protocol_environment_structs.V11.Plonk.proof</a></span></code></div><div class="spec-doc"><p>Succinct proof for a collection of statements.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-public_parameters_encoding"><a href="#val-public_parameters_encoding" class="anchor"></a><code><span><span class="keyword">val</span> public_parameters_encoding : <span><a href="#type-public_parameters">public_parameters</a> <a href="../Data_encoding/index.html#type-t">Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-proof_encoding"><a href="#val-proof_encoding" class="anchor"></a><code><span><span class="keyword">val</span> proof_encoding : <span><a href="#type-proof">proof</a> <a href="../Data_encoding/index.html#type-t">Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-scalar_encoding"><a href="#val-scalar_encoding" class="anchor"></a><code><span><span class="keyword">val</span> scalar_encoding : <span><a href="#type-scalar">scalar</a> <a href="../Data_encoding/index.html#type-t">Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-scalar_array_encoding"><a href="#val-scalar_array_encoding" class="anchor"></a><code><span><span class="keyword">val</span> scalar_array_encoding : <span><span><a href="#type-scalar">scalar</a> array</span> <a href="../Data_encoding/index.html#type-t">Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-verify"><a href="#val-verify" class="anchor"></a><code><span><span class="keyword">val</span> verify : <span><a href="#type-public_parameters">public_parameters</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-verifier_inputs">verifier_inputs</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-proof">proof</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>verify public_parameters inputs proof</code> returns true if the <code>proof</code> is valid on the given <code>inputs</code> according to the <code>public_parameters</code>.</p></div></div></div></body></html>
