<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Script_ir_unparser (tezos-protocol-018-Proxford.Tezos_raw_protocol_018_Proxford.Script_ir_unparser)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">tezos-protocol-018-Proxford</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_018_Proxford</a> &#x00BB; Script_ir_unparser</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_018_Proxford.Script_ir_unparser</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-unparsing_mode"><a href="#type-unparsing_mode" class="anchor"></a><code><span><span class="keyword">type</span> unparsing_mode</span><span> = </span></code><ol><li id="type-unparsing_mode.Optimized" class="def variant constructor anchored"><a href="#type-unparsing_mode.Optimized" class="anchor"></a><code><span>| </span><span><span class="constructor">Optimized</span></span></code></li><li id="type-unparsing_mode.Readable" class="def variant constructor anchored"><a href="#type-unparsing_mode.Readable" class="anchor"></a><code><span>| </span><span><span class="constructor">Readable</span></span></code></li><li id="type-unparsing_mode.Optimized_legacy" class="def variant constructor anchored"><a href="#type-unparsing_mode.Optimized_legacy" class="anchor"></a><code><span>| </span><span><span class="constructor">Optimized_legacy</span></span></code></li></ol></div><div class="spec-doc"><p>Flag that drives unparsing of typed values to nodes.</p><ul><li><code>Optimized_legacy</code> must be kept backward-compatible in order to compute valid hashes (of big map keys).</li><li><code>Optimized</code> may be used as long as the result can be read by <a href="../Script_ir_translator/index.html#val-parse_data"><code>Script_ir_translator.parse_data</code></a>.</li><li><code>Readable</code> produces with <code>string</code> values instead of <code>bytes</code> when feasible.</li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-comb_witness"><a href="#type-comb_witness" class="anchor"></a><code><span><span class="keyword">type</span> <span>('ty, 'depth) comb_witness</span></span><span> = </span></code><ol><li id="type-comb_witness.Comb_Pair" class="def variant constructor anchored"><a href="#type-comb_witness.Comb_Pair" class="anchor"></a><code><span>| </span><span><span class="constructor">Comb_Pair</span> : <span><span>(<span class="type-var">'t</span>, <span class="type-var">'d</span>)</span> <a href="#type-comb_witness">comb_witness</a></span> <span class="arrow">&#45;&gt;</span> <span><span>(<span class="type-var">_</span> * <span class="type-var">'t</span>, <span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'d</span>)</span> <a href="#type-comb_witness">comb_witness</a></span></span></code></li><li id="type-comb_witness.Comb_Any" class="def variant constructor anchored"><a href="#type-comb_witness.Comb_Any" class="anchor"></a><code><span>| </span><span><span class="constructor">Comb_Any</span> : <span><span>(<span class="type-var">_</span>, <span class="type-var">_</span>)</span> <a href="#type-comb_witness">comb_witness</a></span></span></code></li></ol></div><div class="spec-doc"><p><code>('t, 'd) comb_witness</code> describes types of values belonging to a <code>comb</code> of type <code>'t</code> and size <code>'d</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-serialize_ty_for_error"><a href="#val-serialize_ty_for_error" class="anchor"></a><code><span><span class="keyword">val</span> serialize_ty_for_error : 
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../Alpha_context/Script/index.html#type-expr">Alpha_context.Script.expr</a></span></code></div><div class="spec-doc"><p><code>serialize_ty_for_error ty</code> returns the Micheline representation of <code>ty</code> suitable for rendering in an error message. Does not consume gas, since when this function is called, the operation must have already failed.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-serialize_stack_for_error"><a href="#val-serialize_stack_for_error" class="anchor"></a><code><span><span class="keyword">val</span> serialize_stack_for_error : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../Script_typed_ir/index.html#type-stack_ty">Script_typed_ir.stack_ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-expr">Alpha_context.Script.expr</a> list</span></span></code></div><div class="spec-doc"><p><code>serialize_stack_for_error ctxt stack_ty</code> returns a Micheline representation of <code>stack_ty</code> as a list of Micheline expressions ONLY IF gas is unlimited in <code>ctxt</code>. Otherwise returns an empty list.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unparse_ty"><a href="#val-unparse_ty" class="anchor"></a><code><span><span class="keyword">val</span> unparse_ty : 
  <span><span class="label">loc</span>:<span class="type-var">'loc</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'c</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'loc</span> <a href="../Alpha_context/Script/index.html#type-michelson_node">Alpha_context.Script.michelson_node</a></span> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>,
    <span><a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-error">Tezos_protocol_environment_018_Proxford.Error_monad.error</a>
      <a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-trace">Tezos_protocol_environment_018_Proxford.Error_monad.trace</a></span>)</span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Pervasives/index.html#type-result">Tezos_protocol_environment_018_Proxford.Pervasives.result</a></span></span></code></div><div class="spec-doc"><p><code>unparse_ty ~loc ctxt ty</code> returns the Micheline representation of a given type and an update context, where gas has been properly consumed.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unparse_comparable_ty_uncarbonated"><a href="#val-unparse_comparable_ty_uncarbonated" class="anchor"></a><code><span><span class="keyword">val</span> unparse_comparable_ty_uncarbonated : 
  <span><span class="label">loc</span>:<span class="type-var">'loc</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../Script_typed_ir/index.html#type-comparable_ty">Script_typed_ir.comparable_ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'loc</span> <a href="../Alpha_context/Script/index.html#type-michelson_node">Alpha_context.Script.michelson_node</a></span></span></code></div><div class="spec-doc"><p><code>unparse_comparable_ty_uncarbonated ~loc ty</code> returns the Michelson representation of comparable type <code>ty</code> without consuming gas.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unparse_stack_uncarbonated"><a href="#val-unparse_stack_uncarbonated" class="anchor"></a><code><span><span class="keyword">val</span> unparse_stack_uncarbonated : 
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'s</span>)</span> <a href="../Script_typed_ir/index.html#type-stack_ty">Script_typed_ir.stack_ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-expr">Alpha_context.Script.expr</a> list</span></span></code></div><div class="spec-doc"><p><code>unparse_stack_uncarbonated stack_ty</code> returns the Micheline representation of <code>stack_ty</code>. Does not consume gas.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unparse_parameter_ty"><a href="#val-unparse_parameter_ty" class="anchor"></a><code><span><span class="keyword">val</span> unparse_parameter_ty : 
  <span><span class="label">loc</span>:<span class="type-var">'loc</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>)</span> <a href="../Script_typed_ir/index.html#type-ty">Script_typed_ir.ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">entrypoints</span>:<span><span class="type-var">'a</span> <a href="../Script_typed_ir/index.html#type-entrypoints">Script_typed_ir.entrypoints</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'loc</span> <a href="../Alpha_context/Script/index.html#type-michelson_node">Alpha_context.Script.michelson_node</a></span> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>,
    <span><a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-error">Tezos_protocol_environment_018_Proxford.Error_monad.error</a>
      <a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-trace">Tezos_protocol_environment_018_Proxford.Error_monad.trace</a></span>)</span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Pervasives/index.html#type-result">Tezos_protocol_environment_018_Proxford.Pervasives.result</a></span></span></code></div><div class="spec-doc"><p><code>unparse_parameter_ty ~loc ctxt ty ~entrypoints</code> is a specialised version of <code>unparse_ty</code>, which also analyses <code>entrypoints</code> in order to annotate the returned type with adequate annotations.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unparse_bls12_381_g1"><a href="#val-unparse_bls12_381_g1" class="anchor"></a><code><span><span class="keyword">val</span> unparse_bls12_381_g1 : 
  <span><span class="label">loc</span>:<span class="type-var">'loc</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Script_typed_ir/Script_bls/G1/index.html#type-t">Script_typed_ir.Script_bls.G1.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'loc</span> <a href="../Alpha_context/Script/index.html#type-michelson_node">Alpha_context.Script.michelson_node</a></span> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>,
    <span><a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-error">Tezos_protocol_environment_018_Proxford.Error_monad.error</a>
      <a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-trace">Tezos_protocol_environment_018_Proxford.Error_monad.trace</a></span>)</span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Pervasives/index.html#type-result">Tezos_protocol_environment_018_Proxford.Pervasives.result</a></span></span></code></div><div class="spec-doc"><p><code>unparse_bls12_381_g1 ~loc ctxt bls</code> returns the Micheline representation of <code>bls</code> and consumes gas from <code>ctxt</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unparse_bls12_381_g2"><a href="#val-unparse_bls12_381_g2" class="anchor"></a><code><span><span class="keyword">val</span> unparse_bls12_381_g2 : 
  <span><span class="label">loc</span>:<span class="type-var">'loc</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Script_typed_ir/Script_bls/G2/index.html#type-t">Script_typed_ir.Script_bls.G2.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'loc</span> <a href="../Alpha_context/Script/index.html#type-michelson_node">Alpha_context.Script.michelson_node</a></span> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>,
    <span><a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-error">Tezos_protocol_environment_018_Proxford.Error_monad.error</a>
      <a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-trace">Tezos_protocol_environment_018_Proxford.Error_monad.trace</a></span>)</span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Pervasives/index.html#type-result">Tezos_protocol_environment_018_Proxford.Pervasives.result</a></span></span></code></div><div class="spec-doc"><p><code>unparse_bls12_381_g1 ~loc ctxt bls</code> returns the Micheline representation of <code>bls</code> and consumes gas from <code>ctxt</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unparse_bls12_381_fr"><a href="#val-unparse_bls12_381_fr" class="anchor"></a><code><span><span class="keyword">val</span> unparse_bls12_381_fr : 
  <span><span class="label">loc</span>:<span class="type-var">'loc</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Script_typed_ir/Script_bls/Fr/index.html#type-t">Script_typed_ir.Script_bls.Fr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'loc</span> <a href="../Alpha_context/Script/index.html#type-michelson_node">Alpha_context.Script.michelson_node</a></span> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>,
    <span><a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-error">Tezos_protocol_environment_018_Proxford.Error_monad.error</a>
      <a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-trace">Tezos_protocol_environment_018_Proxford.Error_monad.trace</a></span>)</span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Pervasives/index.html#type-result">Tezos_protocol_environment_018_Proxford.Pervasives.result</a></span></span></code></div><div class="spec-doc"><p><code>unparse_bls12_381_g1 ~loc ctxt bls</code> returns the Micheline representation of <code>bls</code> and consumes gas from <code>ctxt</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unparse_operation"><a href="#val-unparse_operation" class="anchor"></a><code><span><span class="keyword">val</span> unparse_operation : 
  <span><span class="label">loc</span>:<span class="type-var">'loc</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Script_typed_ir/index.html#type-operation">Script_typed_ir.operation</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'loc</span> <a href="../Alpha_context/Script/index.html#type-michelson_node">Alpha_context.Script.michelson_node</a></span> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>,
    <span><a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-error">Tezos_protocol_environment_018_Proxford.Error_monad.error</a>
      <a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-trace">Tezos_protocol_environment_018_Proxford.Error_monad.trace</a></span>)</span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Pervasives/index.html#type-result">Tezos_protocol_environment_018_Proxford.Pervasives.result</a></span></span></code></div><div class="spec-doc"><p><code>unparse_operation ~loc ctxt op</code> returns the Micheline representation of <code>op</code> and consumes gas from <code>ctxt</code>. Useful only for producing execution traces in the interpreter.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unparse_with_data_encoding"><a href="#val-unparse_with_data_encoding" class="anchor"></a><code><span><span class="keyword">val</span> unparse_with_data_encoding : 
  <span><span class="label">loc</span>:<span class="type-var">'loc</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Gas/index.html#type-cost">Alpha_context.Gas.cost</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../../Tezos_protocol_environment_018_Proxford/Data_encoding/index.html#type-t">Tezos_protocol_environment_018_Proxford.Data_encoding.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><span class="type-var">'loc</span> <a href="../Alpha_context/Script/index.html#type-michelson_node">Alpha_context.Script.michelson_node</a></span> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>,
    <span><a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-error">Tezos_protocol_environment_018_Proxford.Error_monad.error</a>
      <a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-trace">Tezos_protocol_environment_018_Proxford.Error_monad.trace</a></span>)</span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Pervasives/index.html#type-result">Tezos_protocol_environment_018_Proxford.Pervasives.result</a></span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Lwt/index.html#type-t">Tezos_protocol_environment_018_Proxford.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>unparse_with_data_encoding ~loc ctxt v gas_cost enc</code> returns the bytes representation of <code>v</code> wrapped in <code>Micheline.Bytes</code>, consuming <code>gas_cost</code> from <code>ctxt</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unparse_comparable_data"><a href="#val-unparse_comparable_data" class="anchor"></a><code><span><span class="keyword">val</span> unparse_comparable_data : 
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-unparsing_mode">unparsing_mode</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../Script_typed_ir/index.html#type-comparable_ty">Script_typed_ir.comparable_ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Alpha_context/Script/index.html#type-expr">Alpha_context.Script.expr</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_018_Proxford.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Lwt/index.html#type-t">Tezos_protocol_environment_018_Proxford.Lwt.t</a></span></span></code></div><div class="spec-doc"><p><code>unparse_comparable_data ctxt unparsing_mode ty v</code> returns the Micheline representation of <code>v</code> of type <code>ty</code>, consuming gas from <code>ctxt</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unparse_contract"><a href="#val-unparse_contract" class="anchor"></a><code><span><span class="keyword">val</span> unparse_contract : 
  <span><span class="label">loc</span>:<span class="type-var">'loc</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-unparsing_mode">unparsing_mode</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="../Script_typed_ir/index.html#type-typed_contract">Script_typed_ir.typed_contract</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'loc</span> <a href="../Alpha_context/Script/index.html#type-michelson_node">Alpha_context.Script.michelson_node</a></span> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>,
    <span><a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-error">Tezos_protocol_environment_018_Proxford.Error_monad.error</a>
      <a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-trace">Tezos_protocol_environment_018_Proxford.Error_monad.trace</a></span>)</span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Pervasives/index.html#type-result">Tezos_protocol_environment_018_Proxford.Pervasives.result</a></span></span></code></div><div class="spec-doc"><p><code>unparse_contract ~loc ctxt unparsin_mode contract</code> returns a Micheline representation of a given contract in a given <code>unparsing_mode</code>. Consumes gas <code>ctxt</code>.</p></div></div><p>Lambdas are normalized at parsing and also at unparsing. These normalizations require to parse and unparse data appearing inside PUSH and introduces a mutual dependency between this module and <code>Script_ir_translator</code> which is resolved as follows:</p><ul><li><code>Script_ir_translator.parse_data</code> takes the normalization function <code>unparse_code_rec</code> as argument,</li><li>the unparsing function <code>unparse_data_rec</code> and the normalization function <code>unparse_code_rec</code> are mutually defined in a functor parameterized by the missing bits from <code>Script_ir_translator</code>; see the module signature <code>MICHELSON_PARSER</code> below.</li></ul><div class="odoc-spec"><div class="spec type anchored" id="type-unparse_code_rec"><a href="#type-unparse_code_rec" class="anchor"></a><code><span><span class="keyword">type</span> unparse_code_rec</span><span> =
  <span><a href="../Alpha_context/index.html#type-context">Alpha_context.context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">stack_depth</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-unparsing_mode">unparsing_mode</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Alpha_context/Script/index.html#type-node">Alpha_context.Script.node</a> * <a href="../Alpha_context/index.html#type-context">Alpha_context.context</a>)</span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_018_Proxford.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Lwt/index.html#type-t">Tezos_protocol_environment_018_Proxford.Lwt.t</a></span></span></code></div><div class="spec-doc"><p>The <code>unparse_code_rec</code> function is not exported (except through the <code>Internal_for_benchmarking</code> module), but needs to be called by <code>parse_data</code> to normalize lambdas so it is passed as argument to the <code>parse_data</code> of the <code>MICHELSON_PARSER</code> signature below and to several functions of <code>Script_ir_translator</code>. To avoid repeating the signature of this function we define a type alias for it.</p></div></div><p><code>MICHELSON_PARSER</code> signature describes a set of dependencies required to unparse arbitrary values in the IR. Because some of those values contain just a Michelson code that does not need to be parsed immediately, unparsing them requires extracting information from that code – that's why we depend on the parser here.</p><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-MICHELSON_PARSER"><a href="#module-type-MICHELSON_PARSER" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-MICHELSON_PARSER/index.html">MICHELSON_PARSER</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Data_unparser"><a href="#module-Data_unparser" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Data_unparser/index.html">Data_unparser</a></span><span> (<a href="Data_unparser/argument-1-P/index.html">P</a> : <a href="module-type-MICHELSON_PARSER/index.html">MICHELSON_PARSER</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
