<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Delegate_slashed_deposits_storage (tezos-protocol-018-Proxford.Tezos_raw_protocol_018_Proxford.Delegate_slashed_deposits_storage)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-protocol-018-Proxford</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_018_Proxford</a> &#x00BB; Delegate_slashed_deposits_storage</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_018_Proxford.Delegate_slashed_deposits_storage</span></code></h1><p>This module maintains the storage related to slashing of delegates for double signing. In particular, it is responsible for maintaining the <code>Storage.Slashed_deposits</code>, <code>Storage.Contract.Slashed_deposits</code>, and <code>Storage.Current_cycle_denunciations</code> tables.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-already_slashed_for_double_baking"><a href="#val-already_slashed_for_double_baking" class="anchor"></a><code><span><span class="keyword">val</span> already_slashed_for_double_baking : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_protocol_environment_018_Proxford/Signature/Public_key_hash/index.html#type-t">Tezos_protocol_environment_018_Proxford.Signature.Public_key_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Level_repr/index.html#type-t">Level_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>bool <a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_018_Proxford.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Lwt/index.html#type-t">Tezos_protocol_environment_018_Proxford.Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Returns true if the given delegate has already been slashed for double baking for the given level.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-already_slashed_for_double_attesting"><a href="#val-already_slashed_for_double_attesting" class="anchor"></a><code><span><span class="keyword">val</span> already_slashed_for_double_attesting : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_protocol_environment_018_Proxford/Signature/Public_key_hash/index.html#type-t">Tezos_protocol_environment_018_Proxford.Signature.Public_key_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Level_repr/index.html#type-t">Level_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>bool <a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_018_Proxford.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Lwt/index.html#type-t">Tezos_protocol_environment_018_Proxford.Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Returns true if the given delegate has already been slashed for double preattesting or double attesting for the given level.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-reward_and_burn"><a href="#type-reward_and_burn" class="anchor"></a><code><span><span class="keyword">type</span> reward_and_burn</span><span> = </span><span>{</span></code><ol><li id="type-reward_and_burn.reward" class="def record field anchored"><a href="#type-reward_and_burn.reward" class="anchor"></a><code><span>reward : <a href="../Tez_repr/index.html#type-t">Tez_repr.t</a>;</span></code></li><li id="type-reward_and_burn.amount_to_burn" class="def record field anchored"><a href="#type-reward_and_burn.amount_to_burn" class="anchor"></a><code><span>amount_to_burn : <a href="../Tez_repr/index.html#type-t">Tez_repr.t</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>The <code>reward_and_burn</code> type embeds amounts involved when slashing a delegate for double attesting or double baking.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-punishing_amounts"><a href="#type-punishing_amounts" class="anchor"></a><code><span><span class="keyword">type</span> punishing_amounts</span><span> = </span><span>{</span></code><ol><li id="type-punishing_amounts.staked" class="def record field anchored"><a href="#type-punishing_amounts.staked" class="anchor"></a><code><span>staked : <a href="#type-reward_and_burn">reward_and_burn</a>;</span></code></li><li id="type-punishing_amounts.unstaked" class="def record field anchored"><a href="#type-punishing_amounts.unstaked" class="anchor"></a><code><span>unstaked : <span><span>(<a href="../Cycle_repr/index.html#type-t">Cycle_repr.t</a> * <a href="#type-reward_and_burn">reward_and_burn</a>)</span> list</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>The <code>punishing_amounts</code> type embeds amounts involved when slashing a delegate for double attesting or double baking.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-punish_double_signing"><a href="#val-punish_double_signing" class="anchor"></a><code><span><span class="keyword">val</span> punish_double_signing : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">operation_hash</span>:<a href="../../Tezos_protocol_environment_018_Proxford/Operation_hash/index.html#type-t">Tezos_protocol_environment_018_Proxford.Operation_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Misbehaviour/index.html#type-t">Misbehaviour.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Tezos_protocol_environment_018_Proxford/Signature/Public_key_hash/index.html#type-t">Tezos_protocol_environment_018_Proxford.Signature.Public_key_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Level_repr/index.html#type-t">Level_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">rewarded</span>:<a href="../../Tezos_protocol_environment_018_Proxford/Signature/index.html#type-public_key_hash">Tezos_protocol_environment_018_Proxford.Signature.public_key_hash</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a> * bool)</span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_018_Proxford.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Lwt/index.html#type-t">Tezos_protocol_environment_018_Proxford.Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Record in the context that the given delegate has now been slashed for double signing for the given misbehaviour for the given level and return the amounts to burn and to reward. If the delegate has no remaining frozen deposits, this will also forbid it to bake or attest until a new deposit is frozen.</p><p>Fails with <code>Unrequired_denunciation</code> if the given delegate has already been slashed for the same misbehaviour for the given level.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-clear_outdated_slashed_deposits"><a href="#val-clear_outdated_slashed_deposits" class="anchor"></a><code><span><span class="keyword">val</span> clear_outdated_slashed_deposits : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">new_cycle</span>:<a href="../Cycle_repr/index.html#type-t">Cycle_repr.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <a href="../../Tezos_protocol_environment_018_Proxford/Lwt/index.html#type-t">Tezos_protocol_environment_018_Proxford.Lwt.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-apply_and_clear_current_cycle_denunciations"><a href="#val-apply_and_clear_current_cycle_denunciations" class="anchor"></a><code><span><span class="keyword">val</span> apply_and_clear_current_cycle_denunciations : 
  <span><a href="../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Raw_context/index.html#type-t">Raw_context.t</a>
   * <span><a href="../Int_percentage/index.html#type-t">Int_percentage.t</a>
       <a href="../../Tezos_protocol_environment_018_Proxford/Signature/Public_key_hash/Map/index.html#type-t">Tezos_protocol_environment_018_Proxford.Signature.Public_key_hash.Map.t</a></span>
   * <a href="../Receipt_repr/index.html#type-balance_updates">Receipt_repr.balance_updates</a>)</span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_018_Proxford.Error_monad.tzresult</a></span>
    <a href="../../Tezos_protocol_environment_018_Proxford/Lwt/index.html#type-t">Tezos_protocol_environment_018_Proxford.Lwt.t</a></span></span></code></div></div></div></body></html>
