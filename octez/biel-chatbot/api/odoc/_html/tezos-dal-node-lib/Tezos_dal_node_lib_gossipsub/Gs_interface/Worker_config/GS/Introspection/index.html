<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Introspection (tezos-dal-node-lib.Tezos_dal_node_lib_gossipsub.Gs_interface.Worker_config.GS.Introspection)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../index.html">tezos-dal-node-lib</a> &#x00BB; <a href="../../../../index.html">Tezos_dal_node_lib_gossipsub</a> &#x00BB; <a href="../../../index.html">Gs_interface</a> &#x00BB; <a href="../../index.html">Worker_config</a> &#x00BB; <a href="../index.html">GS</a> &#x00BB; Introspection</nav><header class="odoc-preamble"><h1>Module <code><span>GS.Introspection</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-connection"><a href="#type-connection" class="anchor"></a><code><span><span class="keyword">type</span> connection</span><span> = </span><span>{</span></code><ol><li id="type-connection.topics" class="def record field anchored"><a href="#type-connection.topics" class="anchor"></a><code><span>topics : <a href="../Topic/Set/index.html#type-t">Topic.Set.t</a>;</span></code></li><li id="type-connection.direct" class="def record field anchored"><a href="#type-connection.direct" class="anchor"></a><code><span>direct : bool;</span></code></li><li id="type-connection.outbound" class="def record field anchored"><a href="#type-connection.outbound" class="anchor"></a><code><span>outbound : bool;</span></code></li><li id="type-connection.bootstrap" class="def record field anchored"><a href="#type-connection.bootstrap" class="anchor"></a><code><span>bootstrap : bool;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-fanout_peers"><a href="#type-fanout_peers" class="anchor"></a><code><span><span class="keyword">type</span> fanout_peers</span><span> = </span><span>{</span></code><ol><li id="type-fanout_peers.peers" class="def record field anchored"><a href="#type-fanout_peers.peers" class="anchor"></a><code><span>peers : <a href="../Peer/Set/index.html#type-t">Peer.Set.t</a>;</span></code></li><li id="type-fanout_peers.last_published_time" class="def record field anchored"><a href="#type-fanout_peers.last_published_time" class="anchor"></a><code><span>last_published_time : <a href="../Time/index.html#type-t">Time.t</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Connections"><a href="#module-Connections" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Connections/index.html">Connections</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Message_cache"><a href="#module-Message_cache" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Message_cache/index.html">Message_cache</a></span><span> : 
  <a href="../../../../../../octez-libs/Tezos_gossipsub/Gossipsub_intf/module-type-MESSAGE_CACHE/index.html">Tezos_gossipsub.Gossipsub_intf.MESSAGE_CACHE</a>
    <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../../../../octez-libs/Tezos_gossipsub/Gossipsub_intf/module-type-MESSAGE_CACHE/Peer/index.html#type-t">Peer.t</a> = <a href="../Peer/index.html#type-t">Peer.t</a></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <span>'a <a href="../../../../../../octez-libs/Tezos_gossipsub/Gossipsub_intf/module-type-MESSAGE_CACHE/Peer/Map/index.html#type-t">Peer.Map.t</a></span> = <span><span class="type-var">'a</span> <a href="../Peer/Map/index.html#type-t">Peer.Map.t</a></span></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="../../../../../../octez-libs/Tezos_gossipsub/Gossipsub_intf/module-type-MESSAGE_CACHE/Topic/index.html#type-t">Topic.t</a> = <a href="../Topic/index.html#type-t">Topic.t</a></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="../../../../../../octez-libs/Tezos_gossipsub/Gossipsub_intf/module-type-MESSAGE_CACHE/Message_id/index.html#type-t">Message_id.t</a> = <a href="../Message_id/index.html#type-t">Message_id.t</a></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="../../../../../../octez-libs/Tezos_gossipsub/Gossipsub_intf/module-type-MESSAGE_CACHE/Message/index.html#type-t">Message.t</a> = <a href="../Message/index.html#type-t">Message.t</a></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="../../../../../../octez-libs/Tezos_gossipsub/Gossipsub_intf/module-type-MESSAGE_CACHE/Time/index.html#type-t">Time.t</a> = <a href="../Time/index.html#type-t">Time.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-view"><a href="#type-view" class="anchor"></a><code><span><span class="keyword">type</span> view</span><span> = </span><span>{</span></code><ol><li id="type-view.limits" class="def record field anchored"><a href="#type-view.limits" class="anchor"></a><code><span>limits : <a href="../index.html#type-limits">limits</a>;</span></code></li><li id="type-view.parameters" class="def record field anchored"><a href="#type-view.parameters" class="anchor"></a><code><span>parameters : <a href="../index.html#type-parameters">parameters</a>;</span></code></li><li id="type-view.connections" class="def record field anchored"><a href="#type-view.connections" class="anchor"></a><code><span>connections : <a href="Connections/index.html#type-t">Connections.t</a>;</span></code></li><li id="type-view.scores" class="def record field anchored"><a href="#type-view.scores" class="anchor"></a><code><span>scores : <span><a href="../Score/index.html#type-t">Score.t</a> <a href="../Peer/Map/index.html#type-t">Peer.Map.t</a></span>;</span></code></li><li id="type-view.ihave_per_heartbeat" class="def record field anchored"><a href="#type-view.ihave_per_heartbeat" class="anchor"></a><code><span>ihave_per_heartbeat : <span>int <a href="../Peer/Map/index.html#type-t">Peer.Map.t</a></span>;</span></code></li><li id="type-view.iwant_per_heartbeat" class="def record field anchored"><a href="#type-view.iwant_per_heartbeat" class="anchor"></a><code><span>iwant_per_heartbeat : <span>int <a href="../Peer/Map/index.html#type-t">Peer.Map.t</a></span>;</span></code></li><li id="type-view.mesh" class="def record field anchored"><a href="#type-view.mesh" class="anchor"></a><code><span>mesh : <span><a href="../Peer/Set/index.html#type-t">Peer.Set.t</a> <a href="../Topic/Map/index.html#type-t">Topic.Map.t</a></span>;</span></code></li><li id="type-view.fanout" class="def record field anchored"><a href="#type-view.fanout" class="anchor"></a><code><span>fanout : <span><a href="#type-fanout_peers">fanout_peers</a> <a href="../Topic/Map/index.html#type-t">Topic.Map.t</a></span>;</span></code></li><li id="type-view.backoff" class="def record field anchored"><a href="#type-view.backoff" class="anchor"></a><code><span>backoff : <span><span><a href="../Time/index.html#type-t">Time.t</a> <a href="../Peer/Map/index.html#type-t">Peer.Map.t</a></span> <a href="../Topic/Map/index.html#type-t">Topic.Map.t</a></span>;</span></code></li><li id="type-view.message_cache" class="def record field anchored"><a href="#type-view.message_cache" class="anchor"></a><code><span>message_cache : <a href="Message_cache/index.html#type-t">Message_cache.t</a>;</span></code></li><li id="type-view.rng" class="def record field anchored"><a href="#type-view.rng" class="anchor"></a><code><span>rng : <span class="xref-unresolved">Stdlib</span>.Random.State.t;</span></code></li><li id="type-view.heartbeat_ticks" class="def record field anchored"><a href="#type-view.heartbeat_ticks" class="anchor"></a><code><span>heartbeat_ticks : int64;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-connected_peers_filter"><a href="#type-connected_peers_filter" class="anchor"></a><code><span><span class="keyword">type</span> connected_peers_filter</span><span> = </span></code><ol><li id="type-connected_peers_filter.Direct" class="def variant constructor anchored"><a href="#type-connected_peers_filter.Direct" class="anchor"></a><code><span>| </span><span><span class="constructor">Direct</span></span></code></li><li id="type-connected_peers_filter.Subscribed_to" class="def variant constructor anchored"><a href="#type-connected_peers_filter.Subscribed_to" class="anchor"></a><code><span>| </span><span><span class="constructor">Subscribed_to</span> <span class="keyword">of</span> <a href="../Topic/index.html#type-t">Topic.t</a></span></code></li><li id="type-connected_peers_filter.Score_above" class="def variant constructor anchored"><a href="#type-connected_peers_filter.Score_above" class="anchor"></a><code><span>| </span><span><span class="constructor">Score_above</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-connected_peers_filter.threshold" class="def record field anchored"><a href="#type-connected_peers_filter.threshold" class="anchor"></a><code><span>threshold : <a href="../Score/index.html#type-value">Score.value</a>;</span></code></li></ol><code><span>}</span></code></li></ol></div><div class="spec-doc"><p>When selecting a set of connected peers, one can specify some criteria to filter the result.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-view"><a href="#val-view" class="anchor"></a><code><span><span class="keyword">val</span> view : <span><a href="../index.html#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-view">view</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_peers_in_topic_mesh"><a href="#val-get_peers_in_topic_mesh" class="anchor"></a><code><span><span class="keyword">val</span> get_peers_in_topic_mesh : <span><a href="../Topic/index.html#type-t">Topic.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-view">view</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Peer/index.html#type-t">Peer.t</a> list</span></span></code></div><div class="spec-doc"><p><code>get_peers_in_topic_mesh topic state</code> returns the peers in the mesh of <code>topic</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_connected_peers"><a href="#val-get_connected_peers" class="anchor"></a><code><span><span class="keyword">val</span> get_connected_peers : 
  <span><span class="optlabel">?filters</span>:<span><a href="#type-connected_peers_filter">connected_peers_filter</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-view">view</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Peer/index.html#type-t">Peer.t</a> list</span></span></code></div><div class="spec-doc"><p><code>get_connected_peers ?filters view</code> returns the list of connected peers filtered by the given criteria.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_our_topics"><a href="#val-get_our_topics" class="anchor"></a><code><span><span class="keyword">val</span> get_our_topics : <span><a href="#type-view">view</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Topic/index.html#type-t">Topic.t</a> list</span></span></code></div><div class="spec-doc"><p><code>get_our_topics state</code> returns the set of topics the local peer is subscribed to.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_subscribed_topics"><a href="#val-get_subscribed_topics" class="anchor"></a><code><span><span class="keyword">val</span> get_subscribed_topics : <span><a href="../Peer/index.html#type-t">Peer.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-view">view</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Topic/index.html#type-t">Topic.t</a> list</span></span></code></div><div class="spec-doc"><p><code>get_subscribed_topics peer state</code> returns the set of topics that are subscribed by <code>peer</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_fanout_peers"><a href="#val-get_fanout_peers" class="anchor"></a><code><span><span class="keyword">val</span> get_fanout_peers : <span><a href="../Topic/index.html#type-t">Topic.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-view">view</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Peer/index.html#type-t">Peer.t</a> list</span></span></code></div><div class="spec-doc"><p><code>get_fanout_peers topic state</code> returns the fanout peers of <code>topic</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_peer_score"><a href="#val-get_peer_score" class="anchor"></a><code><span><span class="keyword">val</span> get_peer_score : <span><a href="../Peer/index.html#type-t">Peer.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-view">view</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Score/index.html#type-value">Score.value</a></span></code></div><div class="spec-doc"><p><code>get_peer_score peer view</code> returns the score of <code>peer</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_peer_ihave_per_heartbeat"><a href="#val-get_peer_ihave_per_heartbeat" class="anchor"></a><code><span><span class="keyword">val</span> get_peer_ihave_per_heartbeat : <span><a href="../Peer/index.html#type-t">Peer.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-view">view</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>get_peer_ihave_per_heartbeat peer view</code> returns the number of IHaves received from <code>peer</code> since the last heartbeat.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_peer_iwant_per_heartbeat"><a href="#val-get_peer_iwant_per_heartbeat" class="anchor"></a><code><span><span class="keyword">val</span> get_peer_iwant_per_heartbeat : <span><a href="../Peer/index.html#type-t">Peer.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-view">view</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>get_peer_iwant_per_heartbeat peer view</code> returns the number of IWants sent to <code>peer</code> since the last heartbeat.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_peer_backoff"><a href="#val-get_peer_backoff" class="anchor"></a><code><span><span class="keyword">val</span> get_peer_backoff : <span><a href="../Topic/index.html#type-t">Topic.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Peer/index.html#type-t">Peer.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-view">view</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Time/index.html#type-t">Time.t</a> option</span></span></code></div><div class="spec-doc"><p><code>get_peer_backoff topic peer view</code> returns the backoff time of <code>peer</code> for <code>topic</code>. Returns <code>None</code> if the peer is not backoffed for <code>topic</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-limits"><a href="#val-limits" class="anchor"></a><code><span><span class="keyword">val</span> limits : <span><a href="#type-view">view</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-limits">limits</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-has_joined"><a href="#val-has_joined" class="anchor"></a><code><span><span class="keyword">val</span> has_joined : <span><a href="../Topic/index.html#type-t">Topic.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-view">view</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>has_joined topic view</code> returns true if and only if the automaton is currently tracking messages for <code>topic</code>. That is, the local peer has joined and hasn't left the <code>topic</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-in_mesh"><a href="#val-in_mesh" class="anchor"></a><code><span><span class="keyword">val</span> in_mesh : <span><a href="../Topic/index.html#type-t">Topic.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Peer/index.html#type-t">Peer.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-view">view</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>in_mesh peer topic view</code> returns true if and only if <code>peer</code> is in the mesh of <code>topic</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_direct"><a href="#val-is_direct" class="anchor"></a><code><span><span class="keyword">val</span> is_direct : <span><a href="../Peer/index.html#type-t">Peer.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-view">view</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_direct peer view</code> returns true if and only if <code>peer</code> is a direct peer.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_outbound"><a href="#val-is_outbound" class="anchor"></a><code><span><span class="keyword">val</span> is_outbound : <span><a href="../Peer/index.html#type-t">Peer.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-view">view</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_outbound peer view</code> returns true if and only if <code>peer</code> has an outbound connection.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_connection"><a href="#val-pp_connection" class="anchor"></a><code><span><span class="keyword">val</span> pp_connection : <span><a href="#type-connection">connection</a> <span class="xref-unresolved">Fmt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_connections"><a href="#val-pp_connections" class="anchor"></a><code><span><span class="keyword">val</span> pp_connections : <span><a href="Connections/index.html#type-t">Connections.t</a> <span class="xref-unresolved">Fmt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_scores"><a href="#val-pp_scores" class="anchor"></a><code><span><span class="keyword">val</span> pp_scores : <span><span><a href="../Score/index.html#type-value">Score.value</a> <a href="../Peer/Map/index.html#type-t">Peer.Map.t</a></span> <span class="xref-unresolved">Fmt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_peer_map"><a href="#val-pp_peer_map" class="anchor"></a><code><span><span class="keyword">val</span> pp_peer_map : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Fmt</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Peer/Map/index.html#type-t">Peer.Map.t</a></span> <span class="xref-unresolved">Fmt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_message_id_map"><a href="#val-pp_message_id_map" class="anchor"></a><code><span><span class="keyword">val</span> pp_message_id_map : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Fmt</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Message_id/Map/index.html#type-t">Message_id.Map.t</a></span> <span class="xref-unresolved">Fmt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_topic_map"><a href="#val-pp_topic_map" class="anchor"></a><code><span><span class="keyword">val</span> pp_topic_map : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Fmt</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Topic/Map/index.html#type-t">Topic.Map.t</a></span> <span class="xref-unresolved">Fmt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_peer_set"><a href="#val-pp_peer_set" class="anchor"></a><code><span><span class="keyword">val</span> pp_peer_set : <span><a href="../Peer/Set/index.html#type-t">Peer.Set.t</a> <span class="xref-unresolved">Fmt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_topic_set"><a href="#val-pp_topic_set" class="anchor"></a><code><span><span class="keyword">val</span> pp_topic_set : <span><a href="../Topic/Set/index.html#type-t">Topic.Set.t</a> <span class="xref-unresolved">Fmt</span>.t</span></span></code></div></div></div></body></html>
