<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Constants_repr (tezos-protocol-012-Psithaca.Tezos_raw_protocol_012_Psithaca.Constants_repr)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-protocol-012-Psithaca</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_012_Psithaca</a> &#x00BB; Constants_repr</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_012_Psithaca.Constants_repr</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-fitness_version_number"><a href="#val-fitness_version_number" class="anchor"></a><code><span><span class="keyword">val</span> fitness_version_number : string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-proof_of_work_nonce_size"><a href="#val-proof_of_work_nonce_size" class="anchor"></a><code><span><span class="keyword">val</span> proof_of_work_nonce_size : int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-nonce_length"><a href="#val-nonce_length" class="anchor"></a><code><span><span class="keyword">val</span> nonce_length : int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_anon_ops_per_block"><a href="#val-max_anon_ops_per_block" class="anchor"></a><code><span><span class="keyword">val</span> max_anon_ops_per_block : int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_proposals_per_delegate"><a href="#val-max_proposals_per_delegate" class="anchor"></a><code><span><span class="keyword">val</span> max_proposals_per_delegate : int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_operation_data_length"><a href="#val-max_operation_data_length" class="anchor"></a><code><span><span class="keyword">val</span> max_operation_data_length : int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_micheline_node_count"><a href="#val-max_micheline_node_count" class="anchor"></a><code><span><span class="keyword">val</span> max_micheline_node_count : int</span></code></div><div class="spec-doc"><p>A global size limit on the size of Micheline expressions after expansion.</p><p>We want to prevent constants from being used to create huge values that could potentially do damage if ever printed or sent over the network. We arrived at this number by finding the largest possible contract in terms of number of nodes. The number of nodes is constrained by the current &quot;max_operation_data_length&quot; (32768) to be ~10,000 ( see &quot;largest_flat_contract.tz&quot; in the tezt suite for the largest contract with constants that can be originated). As a first approximation, we set the node size limit to 5 times this amount.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_micheline_bytes_limit"><a href="#val-max_micheline_bytes_limit" class="anchor"></a><code><span><span class="keyword">val</span> max_micheline_bytes_limit : int</span></code></div><div class="spec-doc"><p>Same as <code>max_micheline_node_count</code> but for limiting the combined bytes of the strings, ints and bytes in a expanded Micheline expression.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_allowed_global_constant_depth"><a href="#val-max_allowed_global_constant_depth" class="anchor"></a><code><span><span class="keyword">val</span> max_allowed_global_constant_depth : int</span></code></div><div class="spec-doc"><p>Represents the maximum depth of an expression stored in the table after all references to other constants have (recursively) been expanded, where depth refers to the nesting of <code>Prim</code> and/or <code>Seq</code> nodes.</p><p>The size was chosen arbitrarily to match the typechecker in <code>Script_ir_translator</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-stake_distribution_size"><a href="#val-stake_distribution_size" class="anchor"></a><code><span><span class="keyword">val</span> stake_distribution_size : int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sampler_state_size"><a href="#val-sampler_state_size" class="anchor"></a><code><span><span class="keyword">val</span> sampler_state_size : int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cache_layout"><a href="#val-cache_layout" class="anchor"></a><code><span><span class="keyword">val</span> cache_layout : <span>int list</span></span></code></div><div class="spec-doc"><p>Each protocol defines the number of subcaches and their respective limit size using <code>cache_layout</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-michelson_maximum_type_size"><a href="#val-michelson_maximum_type_size" class="anchor"></a><code><span><span class="keyword">val</span> michelson_maximum_type_size : int</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-fixed"><a href="#type-fixed" class="anchor"></a><code><span><span class="keyword">type</span> fixed</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fixed_encoding"><a href="#val-fixed_encoding" class="anchor"></a><code><span><span class="keyword">val</span> fixed_encoding : 
  <span><a href="#type-fixed">fixed</a> <a href="../../Tezos_protocol_environment_012_Psithaca/Data_encoding/index.html#type-encoding">Tezos_protocol_environment_012_Psithaca.Data_encoding.encoding</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ratio"><a href="#type-ratio" class="anchor"></a><code><span><span class="keyword">type</span> ratio</span><span> = </span><span>{</span></code><ol><li id="type-ratio.numerator" class="def record field anchored"><a href="#type-ratio.numerator" class="anchor"></a><code><span>numerator : int;</span></code></li><li id="type-ratio.denominator" class="def record field anchored"><a href="#type-ratio.denominator" class="anchor"></a><code><span>denominator : int;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ratio_encoding"><a href="#val-ratio_encoding" class="anchor"></a><code><span><span class="keyword">val</span> ratio_encoding : 
  <span><a href="#type-ratio">ratio</a> <a href="../../Tezos_protocol_environment_012_Psithaca/Data_encoding/index.html#type-t">Tezos_protocol_environment_012_Psithaca.Data_encoding.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_ratio"><a href="#val-pp_ratio" class="anchor"></a><code><span><span class="keyword">val</span> pp_ratio : 
  <span><a href="../../Tezos_protocol_environment_012_Psithaca/Format/index.html#type-formatter">Tezos_protocol_environment_012_Psithaca.Format.formatter</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-ratio">ratio</a> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-delegate_selection"><a href="#type-delegate_selection" class="anchor"></a><code><span><span class="keyword">type</span> delegate_selection</span><span> = </span></code><ol><li id="type-delegate_selection.Random" class="def variant constructor anchored"><a href="#type-delegate_selection.Random" class="anchor"></a><code><span>| </span><span><span class="constructor">Random</span></span></code></li><li id="type-delegate_selection.Round_robin_over" class="def variant constructor anchored"><a href="#type-delegate_selection.Round_robin_over" class="anchor"></a><code><span>| </span><span><span class="constructor">Round_robin_over</span> <span class="keyword">of</span> <span><span><a href="../../Tezos_protocol_environment_012_Psithaca/Signature/Public_key/index.html#type-t">Tezos_protocol_environment_012_Psithaca.Signature.Public_key.t</a>
                      list</span>
                      list</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-delegate_selection_encoding"><a href="#val-delegate_selection_encoding" class="anchor"></a><code><span><span class="keyword">val</span> delegate_selection_encoding : 
  <span><a href="#type-delegate_selection">delegate_selection</a>
    <a href="../../Tezos_protocol_environment_012_Psithaca/Data_encoding/index.html#type-encoding">Tezos_protocol_environment_012_Psithaca.Data_encoding.encoding</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-parametric"><a href="#type-parametric" class="anchor"></a><code><span><span class="keyword">type</span> parametric</span><span> = </span><span>{</span></code><ol><li id="type-parametric.preserved_cycles" class="def record field anchored"><a href="#type-parametric.preserved_cycles" class="anchor"></a><code><span>preserved_cycles : int;</span></code></li><li id="type-parametric.blocks_per_cycle" class="def record field anchored"><a href="#type-parametric.blocks_per_cycle" class="anchor"></a><code><span>blocks_per_cycle : int32;</span></code></li><li id="type-parametric.blocks_per_commitment" class="def record field anchored"><a href="#type-parametric.blocks_per_commitment" class="anchor"></a><code><span>blocks_per_commitment : int32;</span></code></li><li id="type-parametric.blocks_per_stake_snapshot" class="def record field anchored"><a href="#type-parametric.blocks_per_stake_snapshot" class="anchor"></a><code><span>blocks_per_stake_snapshot : int32;</span></code></li><li id="type-parametric.blocks_per_voting_period" class="def record field anchored"><a href="#type-parametric.blocks_per_voting_period" class="anchor"></a><code><span>blocks_per_voting_period : int32;</span></code></li><li id="type-parametric.hard_gas_limit_per_operation" class="def record field anchored"><a href="#type-parametric.hard_gas_limit_per_operation" class="anchor"></a><code><span>hard_gas_limit_per_operation : <a href="../Gas_limit_repr/Arith/index.html#type-integral">Gas_limit_repr.Arith.integral</a>;</span></code></li><li id="type-parametric.hard_gas_limit_per_block" class="def record field anchored"><a href="#type-parametric.hard_gas_limit_per_block" class="anchor"></a><code><span>hard_gas_limit_per_block : <a href="../Gas_limit_repr/Arith/index.html#type-integral">Gas_limit_repr.Arith.integral</a>;</span></code></li><li id="type-parametric.proof_of_work_threshold" class="def record field anchored"><a href="#type-parametric.proof_of_work_threshold" class="anchor"></a><code><span>proof_of_work_threshold : int64;</span></code></li><li id="type-parametric.tokens_per_roll" class="def record field anchored"><a href="#type-parametric.tokens_per_roll" class="anchor"></a><code><span>tokens_per_roll : <a href="../Tez_repr/index.html#type-t">Tez_repr.t</a>;</span></code></li><li id="type-parametric.seed_nonce_revelation_tip" class="def record field anchored"><a href="#type-parametric.seed_nonce_revelation_tip" class="anchor"></a><code><span>seed_nonce_revelation_tip : <a href="../Tez_repr/index.html#type-t">Tez_repr.t</a>;</span></code></li><li id="type-parametric.origination_size" class="def record field anchored"><a href="#type-parametric.origination_size" class="anchor"></a><code><span>origination_size : int;</span></code></li><li id="type-parametric.baking_reward_fixed_portion" class="def record field anchored"><a href="#type-parametric.baking_reward_fixed_portion" class="anchor"></a><code><span>baking_reward_fixed_portion : <a href="../Tez_repr/index.html#type-t">Tez_repr.t</a>;</span></code></li><li id="type-parametric.baking_reward_bonus_per_slot" class="def record field anchored"><a href="#type-parametric.baking_reward_bonus_per_slot" class="anchor"></a><code><span>baking_reward_bonus_per_slot : <a href="../Tez_repr/index.html#type-t">Tez_repr.t</a>;</span></code></li><li id="type-parametric.endorsing_reward_per_slot" class="def record field anchored"><a href="#type-parametric.endorsing_reward_per_slot" class="anchor"></a><code><span>endorsing_reward_per_slot : <a href="../Tez_repr/index.html#type-t">Tez_repr.t</a>;</span></code></li><li id="type-parametric.cost_per_byte" class="def record field anchored"><a href="#type-parametric.cost_per_byte" class="anchor"></a><code><span>cost_per_byte : <a href="../Tez_repr/index.html#type-t">Tez_repr.t</a>;</span></code></li><li id="type-parametric.hard_storage_limit_per_operation" class="def record field anchored"><a href="#type-parametric.hard_storage_limit_per_operation" class="anchor"></a><code><span>hard_storage_limit_per_operation : <a href="../../Tezos_protocol_environment_012_Psithaca/Z/index.html#type-t">Tezos_protocol_environment_012_Psithaca.Z.t</a>;</span></code></li><li id="type-parametric.quorum_min" class="def record field anchored"><a href="#type-parametric.quorum_min" class="anchor"></a><code><span>quorum_min : int32;</span></code></li><li id="type-parametric.quorum_max" class="def record field anchored"><a href="#type-parametric.quorum_max" class="anchor"></a><code><span>quorum_max : int32;</span></code></li><li id="type-parametric.min_proposal_quorum" class="def record field anchored"><a href="#type-parametric.min_proposal_quorum" class="anchor"></a><code><span>min_proposal_quorum : int32;</span></code></li><li id="type-parametric.liquidity_baking_subsidy" class="def record field anchored"><a href="#type-parametric.liquidity_baking_subsidy" class="anchor"></a><code><span>liquidity_baking_subsidy : <a href="../Tez_repr/index.html#type-t">Tez_repr.t</a>;</span></code></li><li id="type-parametric.liquidity_baking_sunset_level" class="def record field anchored"><a href="#type-parametric.liquidity_baking_sunset_level" class="anchor"></a><code><span>liquidity_baking_sunset_level : int32;</span></code></li><li id="type-parametric.liquidity_baking_escape_ema_threshold" class="def record field anchored"><a href="#type-parametric.liquidity_baking_escape_ema_threshold" class="anchor"></a><code><span>liquidity_baking_escape_ema_threshold : int32;</span></code></li><li id="type-parametric.max_operations_time_to_live" class="def record field anchored"><a href="#type-parametric.max_operations_time_to_live" class="anchor"></a><code><span>max_operations_time_to_live : int;</span></code></li><li id="type-parametric.minimal_block_delay" class="def record field anchored"><a href="#type-parametric.minimal_block_delay" class="anchor"></a><code><span>minimal_block_delay : <a href="../Period_repr/index.html#type-t">Period_repr.t</a>;</span></code></li><li id="type-parametric.delay_increment_per_round" class="def record field anchored"><a href="#type-parametric.delay_increment_per_round" class="anchor"></a><code><span>delay_increment_per_round : <a href="../Period_repr/index.html#type-t">Period_repr.t</a>;</span></code></li><li id="type-parametric.minimal_participation_ratio" class="def record field anchored"><a href="#type-parametric.minimal_participation_ratio" class="anchor"></a><code><span>minimal_participation_ratio : <a href="#type-ratio">ratio</a>;</span></code></li><li id="type-parametric.consensus_committee_size" class="def record field anchored"><a href="#type-parametric.consensus_committee_size" class="anchor"></a><code><span>consensus_committee_size : int;</span></code></li><li id="type-parametric.consensus_threshold" class="def record field anchored"><a href="#type-parametric.consensus_threshold" class="anchor"></a><code><span>consensus_threshold : int;</span></code></li><li id="type-parametric.max_slashing_period" class="def record field anchored"><a href="#type-parametric.max_slashing_period" class="anchor"></a><code><span>max_slashing_period : int;</span></code></li><li id="type-parametric.frozen_deposits_percentage" class="def record field anchored"><a href="#type-parametric.frozen_deposits_percentage" class="anchor"></a><code><span>frozen_deposits_percentage : int;</span></code></li><li id="type-parametric.double_baking_punishment" class="def record field anchored"><a href="#type-parametric.double_baking_punishment" class="anchor"></a><code><span>double_baking_punishment : <a href="../Tez_repr/index.html#type-t">Tez_repr.t</a>;</span></code></li><li id="type-parametric.ratio_of_frozen_deposits_slashed_per_double_endorsement" class="def record field anchored"><a href="#type-parametric.ratio_of_frozen_deposits_slashed_per_double_endorsement" class="anchor"></a><code><span>ratio_of_frozen_deposits_slashed_per_double_endorsement : <a href="#type-ratio">ratio</a>;</span></code></li><li id="type-parametric.delegate_selection" class="def record field anchored"><a href="#type-parametric.delegate_selection" class="anchor"></a><code><span>delegate_selection : <a href="#type-delegate_selection">delegate_selection</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parametric_encoding"><a href="#val-parametric_encoding" class="anchor"></a><code><span><span class="keyword">val</span> parametric_encoding : 
  <span><a href="#type-parametric">parametric</a> <a href="../../Tezos_protocol_environment_012_Psithaca/Data_encoding/index.html#type-encoding">Tezos_protocol_environment_012_Psithaca.Data_encoding.encoding</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <span class="keyword">private</span> </span><span>{</span></code><ol><li id="type-t.fixed" class="def record field anchored"><a href="#type-t.fixed" class="anchor"></a><code><span>fixed : <a href="#type-fixed">fixed</a>;</span></code></li><li id="type-t.parametric" class="def record field anchored"><a href="#type-t.parametric" class="anchor"></a><code><span>parametric : <a href="#type-parametric">parametric</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-all"><a href="#val-all" class="anchor"></a><code><span><span class="keyword">val</span> all : <span><a href="#type-parametric">parametric</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-encoding"><a href="#val-encoding" class="anchor"></a><code><span><span class="keyword">val</span> encoding : <span><a href="#type-t">t</a> <a href="../../Tezos_protocol_environment_012_Psithaca/Data_encoding/index.html#type-encoding">Tezos_protocol_environment_012_Psithaca.Data_encoding.encoding</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Invalid_protocol_constants"><a href="#extension-decl-Invalid_protocol_constants" class="anchor"></a><code><span><span class="keyword">type</span> <a href="../../Tezos_protocol_environment_012_Psithaca/Error_monad/index.html#type-error">Tezos_protocol_environment_012_Psithaca.Error_monad.error</a> += </span></code><ol><li id="extension-Invalid_protocol_constants" class="def variant extension anchored"><a href="#extension-Invalid_protocol_constants" class="anchor"></a><code><span>| </span><span><span class="extension">Invalid_protocol_constants</span> <span class="keyword">of</span> string</span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_constants"><a href="#val-check_constants" class="anchor"></a><code><span><span class="keyword">val</span> check_constants : 
  <span><a href="#type-parametric">parametric</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <a href="../../Tezos_protocol_environment_012_Psithaca/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_012_Psithaca.Error_monad.tzresult</a></span></span></code></div><div class="spec-doc"><p>performs some consistency checks on the protocol parameters</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Generated"><a href="#module-Generated" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Generated/index.html">Generated</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Proto_previous"><a href="#module-Proto_previous" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Proto_previous/index.html">Proto_previous</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
