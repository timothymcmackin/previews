<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Fixed_size_string_set (octez-internal-libs.Irmin_data.Fixed_size_string_set)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-internal-libs</a> &#x00BB; <a href="../index.html">Irmin_data</a> &#x00BB; Fixed_size_string_set</nav><header class="odoc-preamble"><h1>Module <code><span>Irmin_data.Fixed_size_string_set</span></code></h1><p>Mutable sets of strings with a common length.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>The type of mutable sets of fixed-length strings.</p></div></div><div class="odoc-spec"><div class="spec type subst anchored" id="type-elt"><a href="#type-elt" class="anchor"></a><code><span><span class="keyword">type</span> elt</span><span> := string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : 
  <span><span class="label">elt_length</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?initial_slots</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?hash</span>:<span>(<span><a href="#type-elt">elt</a> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?hash_substring</span>:<span>(<span><span class="xref-unresolved">Bigstringaf</span>.t <span class="arrow">&#45;&gt;</span></span> <span><span class="label">off</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="label">len</span>:int <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?null</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>create</code> builds an empty set of fixed-length strings. The parameters are as follows:</p><ul><li><code>elt_length</code>: the length of each element string in bytes;</li></ul><ul><li><code>initial_slots</code>: the minimum number of slots contained in the initial internal buffer (NOTE: the actual number of slots will be the least power of two greater than or equal to <code>initial_buffer</code>. This is not the same as the number of elements that can fit inside the buffer, which also depends on the maximum load factor);</li></ul><ul><li><code>hash</code> / <code>hash_substring</code>: functions to use for placing elements inside the internal buffer (given that the element is contained in a string or a bigstring respectively). The stored elements must have uniformly distributed <code>hash</code> results for good performance, and the two hash functions must be equivalent. Defaults to <code>Hashtbl.hash</code> (and an equivalent function on substrings).</li></ul><ul><li><code>null</code>: a string of size <code>elt_length</code> that is guaranteed to never be added to the hashset. Passing this string to <a href="#val-add"><code>add</code></a> or <a href="#val-mem"><code>mem</code></a> after creating the hashset will result in an exception being raised.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add"><a href="#val-add" class="anchor"></a><code><span><span class="keyword">val</span> add : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-elt">elt</a> <span class="arrow">&#45;&gt;</span></span> <span>[ `Ok <span>| `Duplicate</span> ]</span></span></code></div><div class="spec-doc"><p><code>add t elt</code> adds <code>elt</code> to the set <code>t</code> and returns <code>`Ok</code> if <code>elt</code> is not already a member of <code>t</code>, otherwise returns <code>`Duplicate</code> and leaves the hashset unchanged.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_exn"><a href="#val-add_exn" class="anchor"></a><code><span><span class="keyword">val</span> add_exn : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-elt">elt</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>add_exn t elt</code> adds <code>elt</code> to the set <code>t</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Invalid_argument</code> <p>if <code>elt</code> is already a member of <code>t</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mem"><a href="#val-mem" class="anchor"></a><code><span><span class="keyword">val</span> mem : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-elt">elt</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>mem t elt</code> is <code>true</code> iff <code>elt</code> has been added to the hashset.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-invariant"><a href="#val-invariant" class="anchor"></a><code><span><span class="keyword">val</span> invariant : <span><span>(<span><a href="#type-elt">elt</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>invariant f t</code> checks the internal invariants of <code>t</code> and calls <code>f</code> on every element contained within. Exposed for testing.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reachable_words"><a href="#val-reachable_words" class="anchor"></a><code><span><span class="keyword">val</span> reachable_words : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>reachable_words t</code> is the total number of words of data kept alive by <code>t</code> (on both the C and OCaml heaps).</p></div></div></div></body></html>
