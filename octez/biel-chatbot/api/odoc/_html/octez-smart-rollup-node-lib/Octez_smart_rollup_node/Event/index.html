<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Event (octez-smart-rollup-node-lib.Octez_smart_rollup_node.Event)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-smart-rollup-node-lib</a> &#x00BB; <a href="../index.html">Octez_smart_rollup_node</a> &#x00BB; Event</nav><header class="odoc-preamble"><h1>Module <code><span>Octez_smart_rollup_node.Event</span></code></h1><p>This module defines functions that emit the events used when the smart rollup node is running (see <code>Daemon</code>).</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-starting_node"><a href="#val-starting_node" class="anchor"></a><code><span><span class="keyword">val</span> starting_node : <span>unit <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-node_is_ready"><a href="#val-node_is_ready" class="anchor"></a><code><span><span class="keyword">val</span> node_is_ready : <span><span class="label">rpc_addr</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="label">rpc_port</span>:int <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rollup_exists"><a href="#val-rollup_exists" class="anchor"></a><code><span><span class="keyword">val</span> rollup_exists : 
  <span><span class="label">addr</span>:<a href="../../../octez-l2-libs/Octez_smart_rollup/Address/index.html#type-t">Octez_smart_rollup.Address.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">kind</span>:<a href="../../../octez-l2-libs/Octez_smart_rollup/Kind/index.html#type-t">Octez_smart_rollup.Kind.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>rollup_exists addr kind</code> emits the event that the smart rollup node is interacting with the rollup at address <code>addr</code> and of the given <code>kind</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-shutdown_node"><a href="#val-shutdown_node" class="anchor"></a><code><span><span class="keyword">val</span> shutdown_node : <span>int <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>shutdown_node exit_status</code> emits the event that the smart rollup node is stopping with exit status <code>exit_status</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-starting_metrics_server"><a href="#val-starting_metrics_server" class="anchor"></a><code><span><span class="keyword">val</span> starting_metrics_server : <span><span class="label">host</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="label">port</span>:int <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>starting_metrics_server ~metrics_addr ~metrics_port</code> emits the event that the metrics server for the rollup node is starting.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-metrics_ended"><a href="#val-metrics_ended" class="anchor"></a><code><span><span class="keyword">val</span> metrics_ended : <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>metrics_ended error</code> emits the event that the metrics server has ended with a failure.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-metrics_ended_dont_wait"><a href="#val-metrics_ended_dont_wait" class="anchor"></a><code><span><span class="keyword">val</span> metrics_ended_dont_wait : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>metrics_ended error</code> emits the event that the metrics server has ended with a failure. (Doesn't wait for event to be emited.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-metrics_error"><a href="#val-metrics_error" class="anchor"></a><code><span><span class="keyword">val</span> metrics_error : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>metrics_error error</code> emits the event that the metrics has an error.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-kernel_debug"><a href="#val-kernel_debug" class="anchor"></a><code><span><span class="keyword">val</span> kernel_debug : <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>kernel_debug str</code> emits the event that the kernel has logged <code>str</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-simulation_kernel_debug"><a href="#val-simulation_kernel_debug" class="anchor"></a><code><span><span class="keyword">val</span> simulation_kernel_debug : <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>simulation_kernel_debug str</code> emits the event that the kernel has logged <code>str</code> during a simulation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-kernel_debug_dont_wait"><a href="#val-kernel_debug_dont_wait" class="anchor"></a><code><span><span class="keyword">val</span> kernel_debug_dont_wait : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>kernel_debug str</code> emits the event that the kernel has logged <code>str</code>. (Doesn't wait for event to be emitted)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-warn_dal_enabled_no_node"><a href="#val-warn_dal_enabled_no_node" class="anchor"></a><code><span><span class="keyword">val</span> warn_dal_enabled_no_node : <span>unit <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>warn_dal_enabled_no_node ()</code> emits a warning for when DAL is enabled in the protocol but the rollup node has no DAL node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-waiting_first_block"><a href="#val-waiting_first_block" class="anchor"></a><code><span><span class="keyword">val</span> waiting_first_block : <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Protocol_hash/index.html#type-t">Tezos_base.TzPervasives.Protocol_hash.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Emit event that the node is waiting for the first block of its protocol.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-received_first_block"><a href="#val-received_first_block" class="anchor"></a><code><span><span class="keyword">val</span> received_first_block : 
  <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Block_hash/index.html#type-t">Tezos_base.TzPervasives.Block_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_crypto/Hashed/Protocol_hash/index.html#type-t">Tezos_base.TzPervasives.Protocol_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Emit event that the node received the first block of its protocol.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-detected_protocol_migration"><a href="#val-detected_protocol_migration" class="anchor"></a><code><span><span class="keyword">val</span> detected_protocol_migration : <span>unit <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Emit event that the node will shutdown because of protocol migration.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-acquiring_lock"><a href="#val-acquiring_lock" class="anchor"></a><code><span><span class="keyword">val</span> acquiring_lock : <span>unit <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>acquiring_lock ()</code> emits an event to indicate that the node is attempting to acquire a lock on the data directory.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-calling_gc"><a href="#val-calling_gc" class="anchor"></a><code><span><span class="keyword">val</span> calling_gc : <span><span class="label">gc_level</span>:int32 <span class="arrow">&#45;&gt;</span></span> <span><span class="label">head_level</span>:int32 <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>calling_gc ~gc_level ~head_level</code> emits the event that the GC is started for level <code>gc_level</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-gc_levels_storage_failure"><a href="#val-gc_levels_storage_failure" class="anchor"></a><code><span><span class="keyword">val</span> gc_levels_storage_failure : <span>unit <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>gc_levels_storage_failure ()</code> emits an event which indicates that GC level values (<code>last_gc_level</code>, <code>first_available_level</code>) could not be written to storage.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-convert_history_mode"><a href="#val-convert_history_mode" class="anchor"></a><code><span><span class="keyword">val</span> convert_history_mode : 
  <span><a href="../Configuration/index.html#type-history_mode">Configuration.history_mode</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Configuration/index.html#type-history_mode">Configuration.history_mode</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>convert_history_mode old_history_mode new_history_mode</code> emits an event for when the history mode of the rollup node is changed.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-gc_finished"><a href="#val-gc_finished" class="anchor"></a><code><span><span class="keyword">val</span> gc_finished : <span><span class="label">gc_level</span>:int32 <span class="arrow">&#45;&gt;</span></span> <span><span class="label">head_level</span>:int32 <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>gc_finished ~gc_level ~head_level</code> emits the event that the GC is finished for level <code>gc_level</code>.</p></div></div></div></body></html>
