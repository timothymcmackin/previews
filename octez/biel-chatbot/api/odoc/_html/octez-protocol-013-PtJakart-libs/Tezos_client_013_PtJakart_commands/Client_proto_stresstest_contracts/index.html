<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Client_proto_stresstest_contracts (octez-protocol-013-PtJakart-libs.Tezos_client_013_PtJakart_commands.Client_proto_stresstest_contracts)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-protocol-013-PtJakart-libs</a> &#x00BB; <a href="../index.html">Tezos_client_013_PtJakart_commands</a> &#x00BB; Client_proto_stresstest_contracts</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_client_013_PtJakart_commands.Client_proto_stresstest_contracts</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-contract_parameters"><a href="#type-contract_parameters" class="anchor"></a><code><span><span class="keyword">type</span> contract_parameters</span><span> = </span><span>{</span></code><ol><li id="type-contract_parameters.probability" class="def record field anchored"><a href="#type-contract_parameters.probability" class="anchor"></a><code><span>probability : float;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The probability of calling this smart contract</p><span class="comment-delim">*)</span></div></li><li id="type-contract_parameters.invocation_fee" class="def record field anchored"><a href="#type-contract_parameters.invocation_fee" class="anchor"></a><code><span>invocation_fee : <a href="../../../tezos-protocol-013-PtJakart/Tezos_raw_protocol_013_PtJakart/Alpha_context/Tez/index.html#type-t">Tezos_protocol_013_PtJakart.Protocol.Alpha_context.Tez.t</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Fee to use for invocations during the stress test</p><span class="comment-delim">*)</span></div></li><li id="type-contract_parameters.invocation_gas_limit" class="def record field anchored"><a href="#type-contract_parameters.invocation_gas_limit" class="anchor"></a><code><span>invocation_gas_limit : <a href="../../../tezos-protocol-013-PtJakart/Tezos_raw_protocol_013_PtJakart/Alpha_context/Gas/Arith/index.html#type-integral">Tezos_protocol_013_PtJakart.Protocol.Alpha_context.Gas.Arith.integral</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Gas limit to use for invocations during the stress test</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>The information that the user has to provide for every smart contract they want to call during the stress test.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-contract_parameters_encoding"><a href="#val-contract_parameters_encoding" class="anchor"></a><code><span><span class="keyword">val</span> contract_parameters_encoding : 
  <span><a href="#type-contract_parameters">contract_parameters</a> <a href="../../../octez-libs/Data_encoding/index.html#type-t">Tezos_base.TzPervasives.Data_encoding.t</a></span></span></code></div><div class="spec-doc"><p>Encoding of <code>contract_parameters</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-contract_parameters_collection_encoding"><a href="#val-contract_parameters_collection_encoding" class="anchor"></a><code><span><span class="keyword">val</span> contract_parameters_collection_encoding : 
  <span><span><span>(string * <a href="#type-contract_parameters">contract_parameters</a>)</span> list</span> <a href="../../../octez-libs/Data_encoding/index.html#type-t">Tezos_base.TzPervasives.Data_encoding.t</a></span></span></code></div><div class="spec-doc"><p>Contract parameters collection encoding.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>An opaque type that stores all the information that is necessary for efficient sampling of smart contract calls.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-no_contracts"><a href="#val-no_contracts" class="anchor"></a><code><span><span class="keyword">val</span> no_contracts : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>A value with no smart contracts.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : 
  <span><a href="../../Tezos_client_013_PtJakart/Protocol_client_context/class-type-full/index.html">Tezos_client_013_PtJakart.Protocol_client_context.full</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(string * <a href="#type-contract_parameters">contract_parameters</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="#type-t">t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Convert a map of probabilities per smart contract alias to a <code>t</code> value.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-invocation_parameters"><a href="#type-invocation_parameters" class="anchor"></a><code><span><span class="keyword">type</span> invocation_parameters</span><span> = </span><span>{</span></code><ol><li id="type-invocation_parameters.destination" class="def record field anchored"><a href="#type-invocation_parameters.destination" class="anchor"></a><code><span>destination : <a href="../../../tezos-protocol-013-PtJakart/Tezos_raw_protocol_013_PtJakart/Alpha_context/Contract/index.html#type-t">Tezos_protocol_013_PtJakart.Protocol.Alpha_context.Contract.t</a>;</span></code></li><li id="type-invocation_parameters.entrypoint" class="def record field anchored"><a href="#type-invocation_parameters.entrypoint" class="anchor"></a><code><span>entrypoint : <a href="../../../tezos-protocol-013-PtJakart/Tezos_raw_protocol_013_PtJakart/Entrypoint_repr/index.html#type-t">Tezos_protocol_013_PtJakart.Protocol.Entrypoint_repr.t</a>;</span></code></li><li id="type-invocation_parameters.arg" class="def record field anchored"><a href="#type-invocation_parameters.arg" class="anchor"></a><code><span>arg : <a href="../../../tezos-protocol-013-PtJakart/Tezos_raw_protocol_013_PtJakart/Alpha_context/Script/index.html#type-expr">Tezos_protocol_013_PtJakart.Protocol.Alpha_context.Script.expr</a>;</span></code></li><li id="type-invocation_parameters.fee" class="def record field anchored"><a href="#type-invocation_parameters.fee" class="anchor"></a><code><span>fee : <a href="../../../tezos-protocol-013-PtJakart/Tezos_raw_protocol_013_PtJakart/Alpha_context/Tez/index.html#type-t">Tezos_protocol_013_PtJakart.Protocol.Alpha_context.Tez.t</a>;</span></code></li><li id="type-invocation_parameters.gas_limit" class="def record field anchored"><a href="#type-invocation_parameters.gas_limit" class="anchor"></a><code><span>gas_limit : <a href="../../../tezos-protocol-013-PtJakart/Tezos_raw_protocol_013_PtJakart/Alpha_context/Gas/Arith/index.html#type-integral">Tezos_protocol_013_PtJakart.Protocol.Alpha_context.Gas.Arith.integral</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>All information that is necessary for performing a smart contract call during the stress test.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-select"><a href="#val-select" class="anchor"></a><code><span><span class="keyword">val</span> select : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-invocation_parameters">invocation_parameters</a> option</span></span></code></div><div class="spec-doc"><p>Given <code>t</code> initialized earlier and a <code>float</code> in <code>0;1</code>, decide which smart contract is going to be chosen for the next call, if any.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-originate_command"><a href="#val-originate_command" class="anchor"></a><code><span><span class="keyword">val</span> originate_command : 
  <span><a href="../../Tezos_client_013_PtJakart/Protocol_client_context/class-type-full/index.html">Tezos_client_013_PtJakart.Protocol_client_context.full</a> <a href="../../../octez-libs/Tezos_clic/index.html#type-command">Tezos_clic.command</a></span></span></code></div><div class="spec-doc"><p>A ready-to-use command that originates all supported smart contracts.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_every_known_smart_contract"><a href="#val-with_every_known_smart_contract" class="anchor"></a><code><span><span class="keyword">val</span> with_every_known_smart_contract : 
  <span><a href="../../Tezos_client_013_PtJakart/Protocol_client_context/class-type-full/index.html">Tezos_client_013_PtJakart.Protocol_client_context.full</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span>(string * <span class="type-var">'a</span>)</span> list</span> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Call the callback function once per supported smart contract by passing it <code>t</code> that only selects that smart contract. Collect the results and pair them with the respective smart contract aliases. This is used for e.g. gas estimations.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mainnet_address_to_alias"><a href="#val-mainnet_address_to_alias" class="anchor"></a><code><span><span class="keyword">val</span> mainnet_address_to_alias : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string option</span></span></code></div><div class="spec-doc"><p>Return the alias that corresponds to the smart contract address on the Mainnet. Return <code>None</code> if the given address is not supported.</p></div></div></div></body></html>
