<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Scenario_op (octez-protocol-alpha-libs.Tezos_alpha_test_helpers.Scenario_op)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-protocol-alpha-libs</a> &#x00BB; <a href="../index.html">Tezos_alpha_test_helpers</a> &#x00BB; Scenario_op</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_alpha_test_helpers.Scenario_op</span></code></h1><p>This module gathers many protocol operations in the form of scenarios. This includes (but is not limited to) transfers and such (stake, unstake...), as well as various ways to forge double signings.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-normalize_parameters"><a href="#val-normalize_parameters" class="anchor"></a><code><span><span class="keyword">val</span> normalize_parameters : 
  <span><a href="../Adaptive_issuance_helpers/index.html#type-staking_parameters">Adaptive_issuance_helpers.staking_parameters</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../State/index.html#type-t">State.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../Adaptive_issuance_helpers/index.html#type-staking_parameters">Adaptive_issuance_helpers.staking_parameters</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_delegate_params"><a href="#val-set_delegate_params" class="anchor"></a><code><span><span class="keyword">val</span> set_delegate_params : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Adaptive_issuance_helpers/index.html#type-staking_parameters">Adaptive_issuance_helpers.staking_parameters</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>, <a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>)</span> <a href="../Scenario_dsl/index.html#type-scenarios">Scenario_dsl.scenarios</a></span></span></code></div><div class="spec-doc"><p>Set delegate parameters for the given delegate</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_account"><a href="#val-add_account" class="anchor"></a><code><span><span class="keyword">val</span> add_account : 
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-key">Tezos_base.TzPervasives.String.Map.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>, <a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>)</span> <a href="../Scenario_dsl/index.html#type-scenarios">Scenario_dsl.scenarios</a></span></span></code></div><div class="spec-doc"><p>Add a new account with the given name</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reveal"><a href="#val-reveal" class="anchor"></a><code><span><span class="keyword">val</span> reveal : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>, <a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>)</span> <a href="../Scenario_dsl/index.html#type-scenarios">Scenario_dsl.scenarios</a></span></span></code></div><div class="spec-doc"><p>Reveal operation</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-transfer"><a href="#val-transfer" class="anchor"></a><code><span><span class="keyword">val</span> transfer : 
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-key">Tezos_base.TzPervasives.String.Map.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-key">Tezos_base.TzPervasives.String.Map.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Tez_helpers/Ez_tez/index.html#type-tez_quantity">Tez_helpers.Ez_tez.tez_quantity</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>, <a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>)</span> <a href="../Scenario_dsl/index.html#type-scenarios">Scenario_dsl.scenarios</a></span></span></code></div><div class="spec-doc"><p>Transfer from src to dst</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-current_cycle"><a href="#val-current_cycle" class="anchor"></a><code><span><span class="keyword">val</span> current_cycle : 
  <span><a href="../Block/index.html#type-block">Block.block</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Cycle/index.html#type-cycle">Tezos_alpha_test_helpers.State_account.Cycle.cycle</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_delegate"><a href="#val-set_delegate" class="anchor"></a><code><span><span class="keyword">val</span> set_delegate : 
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-key">Tezos_base.TzPervasives.String.Map.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/index.html#type-t">Tezos_base.TzPervasives.String.t</a> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>, <a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>)</span> <a href="../Scenario_dsl/index.html#type-scenarios">Scenario_dsl.scenarios</a></span></span></code></div><div class="spec-doc"><p>Set delegate for src. If <code>delegate_name_opt = None</code>, then unset current delegate</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-stake"><a href="#val-stake" class="anchor"></a><code><span><span class="keyword">val</span> stake : 
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-key">Tezos_base.TzPervasives.String.Map.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Tez_helpers/Ez_tez/index.html#type-tez_quantity">Tez_helpers.Ez_tez.tez_quantity</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>, <a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>)</span> <a href="../Scenario_dsl/index.html#type-scenarios">Scenario_dsl.scenarios</a></span></span></code></div><div class="spec-doc"><p>Stake operation</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unstake"><a href="#val-unstake" class="anchor"></a><code><span><span class="keyword">val</span> unstake : 
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-key">Tezos_base.TzPervasives.String.Map.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Tez_helpers/Ez_tez/index.html#type-tez_quantity">Tez_helpers.Ez_tez.tez_quantity</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>, <a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>)</span> <a href="../Scenario_dsl/index.html#type-scenarios">Scenario_dsl.scenarios</a></span></span></code></div><div class="spec-doc"><p>unstake operation</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-finalize_unstake"><a href="#val-finalize_unstake" class="anchor"></a><code><span><span class="keyword">val</span> finalize_unstake : 
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-key">Tezos_base.TzPervasives.String.Map.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>, <a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>)</span> <a href="../Scenario_dsl/index.html#type-scenarios">Scenario_dsl.scenarios</a></span></span></code></div><div class="spec-doc"><p>finalize unstake operation</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_pending_slashings"><a href="#val-check_pending_slashings" class="anchor"></a><code><span><span class="keyword">val</span> check_pending_slashings : 
  <span><span class="label">loc</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Block/index.html#type-t">Block.t</a> * <a href="../State/index.html#type-t">State.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-order_attestations"><a href="#val-order_attestations" class="anchor"></a><code><span><span class="keyword">val</span> order_attestations : 
  <span><span class="label">correct_order</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Tezos_raw_protocol_alpha__Alpha_context.operation</span></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Tezos_raw_protocol_alpha__Alpha_context.operation</span></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="xref-unresolved">Tezos_raw_protocol_alpha__Alpha_context.operation</span></span>
  * <span><span class="type-var">'a</span> <span class="xref-unresolved">Tezos_raw_protocol_alpha__Alpha_context.operation</span></span></span></code></div><div class="spec-doc"><p>Double attestation helpers</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-op_double_attestation"><a href="#val-op_double_attestation" class="anchor"></a><code><span><span class="keyword">val</span> op_double_attestation : 
  <span><span class="optlabel">?correct_order</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Kind/index.html#type-attestation">Tezos_protocol_alpha.Protocol.Alpha_context.Kind.attestation</a>
    <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Operation/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Operation.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Kind/index.html#type-attestation">Tezos_protocol_alpha.Protocol.Alpha_context.Kind.attestation</a>
    <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Operation/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Operation.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Context/index.html#type-t">Context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Operation/index.html#type-packed">Tezos_protocol_alpha.Protocol.Alpha_context.Operation.packed</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-op_double_preattestation"><a href="#val-op_double_preattestation" class="anchor"></a><code><span><span class="keyword">val</span> op_double_preattestation : 
  <span><span class="optlabel">?correct_order</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Kind/index.html#type-preattestation">Tezos_protocol_alpha.Protocol.Alpha_context.Kind.preattestation</a>
    <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Operation/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Operation.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Kind/index.html#type-preattestation">Tezos_protocol_alpha.Protocol.Alpha_context.Kind.preattestation</a>
    <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Operation/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Operation.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Context/index.html#type-t">Context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Operation/index.html#type-packed">Tezos_protocol_alpha.Protocol.Alpha_context.Operation.packed</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-order_block_hashes"><a href="#val-order_block_hashes" class="anchor"></a><code><span><span class="keyword">val</span> order_block_hashes : 
  <span><span class="label">correct_order</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Block_header/index.html#type-block_header">Tezos_protocol_alpha.Protocol.Alpha_context.Block_header.block_header</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Block_header/index.html#type-block_header">Tezos_protocol_alpha.Protocol.Alpha_context.Block_header.block_header</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Block_header/index.html#type-block_header">Tezos_protocol_alpha.Protocol.Alpha_context.Block_header.block_header</a>
  * <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Block_header/index.html#type-block_header">Tezos_protocol_alpha.Protocol.Alpha_context.Block_header.block_header</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-op_double_baking"><a href="#val-op_double_baking" class="anchor"></a><code><span><span class="keyword">val</span> op_double_baking : 
  <span><span class="optlabel">?correct_order</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Block_header/index.html#type-block_header">Tezos_protocol_alpha.Protocol.Alpha_context.Block_header.block_header</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Block_header/index.html#type-block_header">Tezos_protocol_alpha.Protocol.Alpha_context.Block_header.block_header</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Context/index.html#type-t">Context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Operation/index.html#type-packed">Tezos_protocol_alpha.Protocol.Alpha_context.Operation.packed</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-double_bake_op"><a href="#val-double_bake_op" class="anchor"></a><code><span><span class="keyword">val</span> double_bake_op : 
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Block/index.html#type-t">Block.t</a> * <a href="../State/index.html#type-t">State.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Block/index.html#type-t">Block.t</a> * <a href="../State/index.html#type-t">State.t</a>, <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>double_bake_op delegate_names (block, state)</code> performs a double baking with the given delegate names. The first delegate in the list bakes the new main branch. All delegates (including the first) will bake two other blocks at the same level/different round.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-double_bake"><a href="#val-double_bake" class="anchor"></a><code><span><span class="keyword">val</span> double_bake : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>, <a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>)</span> <a href="../Scenario_dsl/index.html#type-scenarios">Scenario_dsl.scenarios</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-double_bake_many"><a href="#val-double_bake_many" class="anchor"></a><code><span><span class="keyword">val</span> double_bake_many : 
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>, <a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>)</span> <a href="../Scenario_dsl/index.html#type-scenarios">Scenario_dsl.scenarios</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-double_attest_op"><a href="#val-double_attest_op" class="anchor"></a><code><span><span class="keyword">val</span> double_attest_op : 
  <span><span class="optlabel">?other_bakers</span>:<span>(string * string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">op</span>:
    <span>(<span><span class="label">delegate</span>:<a href="../../../octez-libs/Tezos_crypto/Signature/Public_key_hash/index.html#type-t">Tezos_base.TzPervasives.Signature.Public_key_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
      <span><a href="../Block/index.html#type-t">Block.t</a> <span class="arrow">&#45;&gt;</span></span>
      <span><span><span>(<span><span><span class="type-var">'a</span> <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Kind/index.html#type-consensus">Tezos_protocol_alpha.Protocol.Alpha_context.Kind.consensus</a></span>
         <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/index.html#type-operation">Tezos_protocol_alpha.Protocol.Alpha_context.operation</a></span>,
        <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span>
        <span class="xref-unresolved">Stdlib</span>.result</span>
        <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">op_evidence</span>:
    <span>(<span><span><span><span class="type-var">'a</span> <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Kind/index.html#type-consensus">Tezos_protocol_alpha.Protocol.Alpha_context.Kind.consensus</a></span>
       <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/index.html#type-operation">Tezos_protocol_alpha.Protocol.Alpha_context.operation</a></span> <span class="arrow">&#45;&gt;</span></span>
      <span><span><span><span class="type-var">'a</span> <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Kind/index.html#type-consensus">Tezos_protocol_alpha.Protocol.Alpha_context.Kind.consensus</a></span>
        <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/index.html#type-operation">Tezos_protocol_alpha.Protocol.Alpha_context.operation</a></span> <span class="arrow">&#45;&gt;</span></span>
      <span><a href="../Context/index.html#type-t">Context.t</a> <span class="arrow">&#45;&gt;</span></span>
      <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/index.html#type-packed_operation">Tezos_protocol_alpha.Protocol.Alpha_context.packed_operation</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">kind</span>:<a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Misbehaviour_repr/index.html#type-kind">Tezos_protocol_alpha.Protocol.Misbehaviour_repr.kind</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Block/index.html#type-t">Block.t</a> * <a href="../State/index.html#type-t">State.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Block/index.html#type-t">Block.t</a> * <a href="../State/index.html#type-t">State.t</a>, <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>double_attest_op ?other_bakers ~op ~op_evidence ~kind delegate_names
  (block, state)</code> performs a double (pre)attestation with the given delegate names. Starting at block level `n`, it creates two 2-block branches and all delegates will (pre)attest the two blocks at level `n+2`. <code>other_bakers</code> can be used to force using specific bakers to avoid reusing forbidden ones</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-double_attest_"><a href="#val-double_attest_" class="anchor"></a><code><span><span class="keyword">val</span> double_attest_ : 
  <span><span class="optlabel">?other_bakers</span>:<span>(string * string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Block/index.html#type-t">Block.t</a> * <a href="../State/index.html#type-t">State.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Block/index.html#type-t">Block.t</a> * <a href="../State/index.html#type-t">State.t</a>, <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-double_attest_many"><a href="#val-double_attest_many" class="anchor"></a><code><span><span class="keyword">val</span> double_attest_many : 
  <span><span class="optlabel">?other_bakers</span>:<span>(string * string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>, <a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>)</span> <a href="../Scenario_dsl/index.html#type-scenarios">Scenario_dsl.scenarios</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-double_attest"><a href="#val-double_attest" class="anchor"></a><code><span><span class="keyword">val</span> double_attest : 
  <span><span class="optlabel">?other_bakers</span>:<span>(string * string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>, <a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>)</span> <a href="../Scenario_dsl/index.html#type-scenarios">Scenario_dsl.scenarios</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-double_preattest_"><a href="#val-double_preattest_" class="anchor"></a><code><span><span class="keyword">val</span> double_preattest_ : 
  <span><span class="optlabel">?other_bakers</span>:<span>(string * string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Block/index.html#type-t">Block.t</a> * <a href="../State/index.html#type-t">State.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Block/index.html#type-t">Block.t</a> * <a href="../State/index.html#type-t">State.t</a>, <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-double_preattest_many"><a href="#val-double_preattest_many" class="anchor"></a><code><span><span class="keyword">val</span> double_preattest_many : 
  <span><span class="optlabel">?other_bakers</span>:<span>(string * string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>, <a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>)</span> <a href="../Scenario_dsl/index.html#type-scenarios">Scenario_dsl.scenarios</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-double_preattest"><a href="#val-double_preattest" class="anchor"></a><code><span><span class="keyword">val</span> double_preattest : 
  <span><span class="optlabel">?other_bakers</span>:<span>(string * string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>, <a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>)</span> <a href="../Scenario_dsl/index.html#type-scenarios">Scenario_dsl.scenarios</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cycle_from_level"><a href="#val-cycle_from_level" class="anchor"></a><code><span><span class="keyword">val</span> cycle_from_level : 
  <span>int32 <span class="arrow">&#45;&gt;</span></span>
  <span>int32 <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Cycle/index.html#type-cycle">Tezos_alpha_test_helpers.State_account.Cycle.cycle</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update_state_denunciation"><a href="#val-update_state_denunciation" class="anchor"></a><code><span><span class="keyword">val</span> update_state_denunciation : 
  <span><span>(<a href="../Block/index.html#type-t">Block.t</a> * <a href="../State/index.html#type-t">State.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../State/index.html#type-double_signing_state">State.double_signing_state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../State/index.html#type-t">State.t</a> * bool, <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_denunciations_op"><a href="#val-make_denunciations_op" class="anchor"></a><code><span><span class="keyword">val</span> make_denunciations_op : 
  <span><span class="optlabel">?single</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?rev</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?filter</span>:<span>(<span><a href="../State/index.html#type-double_signing_state">State.double_signing_state</a> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Block/index.html#type-t">Block.t</a> * <a href="../State/index.html#type-t">State.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../State/index.html#type-t">State.t</a> * <span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/index.html#type-packed_operation">Tezos_protocol_alpha.Protocol.Alpha_context.packed_operation</a> list</span>,
    <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span>
    <span class="xref-unresolved">Stdlib</span>.result</span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>make_denunciations_op ?single ?rev ?filter ()</code> denounces all double signers in the state. If <code>single</code> is set, only one denunciation is made. If <code>rev</code> is set, the denunciations are made in reverse order. If <code>filter</code> is set, only the double signers for which the filter returns true are denounced.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_denunciations"><a href="#val-make_denunciations" class="anchor"></a><code><span><span class="keyword">val</span> make_denunciations : 
  <span><span class="optlabel">?single</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?rev</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?filter</span>:<span>(<span><a href="../State/index.html#type-double_signing_state">State.double_signing_state</a> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Block/index.html#type-t">Block.t</a> * <a href="../State/index.html#type-t">State.t</a>, <a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>)</span> <a href="../Scenario_dsl/index.html#type-scenarios">Scenario_dsl.scenarios</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_account_with_funds"><a href="#val-add_account_with_funds" class="anchor"></a><code><span><span class="keyword">val</span> add_account_with_funds : 
  <span><a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-key">Tezos_base.TzPervasives.String.Map.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">funder</span>:<a href="../../../octez-libs/Tezos_base/TzPervasives/String/Map/index.html#type-key">Tezos_base.TzPervasives.String.Map.key</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Tez_helpers/Ez_tez/index.html#type-tez_quantity">Tez_helpers.Ez_tez.tez_quantity</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>, <a href="../Scenario_base/index.html#type-t">Scenario_base.t</a>)</span> <a href="../Scenario_dsl/index.html#type-scenarios">Scenario_dsl.scenarios</a></span></span></code></div><div class="spec-doc"><p>Create an account and give an initial balance funded by <code>funder</code></p></div></div></div></body></html>
