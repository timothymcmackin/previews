<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Rewards (octez-protocol-alpha-libs.Tezos_alpha_test_helpers.Rewards)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-protocol-alpha-libs</a> &#x00BB; <a href="../index.html">Tezos_alpha_test_helpers</a> &#x00BB; Rewards</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_alpha_test_helpers.Rewards</span></code></h1><p>The tables are precomputed using this the following formulas:</p><p>let max_attestations = 256 let max_reward = 40</p><p>let r = 0.5 let a = 3. let b = 1.5</p><p>let ( -- ) i j = List.init (j - i + 1) (fun x -&gt; x + i)</p><p>let baking_rewards = let reward p e = let r_aux = if p = 0 then r *. (float_of_int max_reward) else a in let r = r_aux /. (float_of_int max_attestations) in let r = 1_000_000. *. r in Float.to_int ((float_of_int e) *. (ceil r)) in</p><p>let ps = 0 -- 2 in let es = 0 -- max_attestations in</p><p>List.map (fun p -&gt; List.map (fun e -&gt; reward p e ) es |&gt; Array.of_list ) ps |&gt; Array.of_list</p><p>let attesting_rewards = let reward p e = let r_aux = (1. -. r) *. (float_of_int max_reward) /. (float_of_int max_attestations) in let r = if p = 0 then r_aux else r_aux /. b in let r = 1_000_000. *. r in Float.to_int ((float_of_int e) *. (floor r)) in</p><p>let ps = 0 -- 2 in let es = 0 -- max_attestations in</p><p>List.map (fun p -&gt; List.map (fun e -&gt; reward p e ) es |&gt; Array.of_list ) ps |&gt; Array.of_list</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-baking_rewards"><a href="#val-baking_rewards" class="anchor"></a><code><span><span class="keyword">val</span> baking_rewards : <span><span>int array</span> array</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-attesting_rewards"><a href="#val-attesting_rewards" class="anchor"></a><code><span><span class="keyword">val</span> attesting_rewards : <span><span>int array</span> array</span></span></code></div></div></div></body></html>
