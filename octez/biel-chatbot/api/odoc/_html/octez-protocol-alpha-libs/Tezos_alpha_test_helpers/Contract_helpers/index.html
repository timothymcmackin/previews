<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Contract_helpers (octez-protocol-alpha-libs.Tezos_alpha_test_helpers.Contract_helpers)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-protocol-alpha-libs</a> &#x00BB; <a href="../index.html">Tezos_alpha_test_helpers</a> &#x00BB; Contract_helpers</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_alpha_test_helpers.Contract_helpers</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : 
  <span><span class="optlabel">?hard_gas_limit_per_block</span>:
    <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Gas/Arith/index.html#type-integral">Tezos_protocol_alpha.Protocol.Alpha_context.Gas.Arith.integral</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Block/index.html#type-t">Block.t</a>
   * <a href="../../../tezos-protocol-alpha/Tezos_protocol_environment_alpha/Signature/Public_key_hash/index.html#type-t">Tezos_protocol_environment_alpha.Signature.Public_key_hash.t</a>
   * <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Contract/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Contract.t</a>
   * <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Contract/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Contract.t</a>,
    <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span>
    <span class="xref-unresolved">Stdlib</span>.result</span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Initializes 2 addresses to do only operations plus one that will be used to bake.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read_file"><a href="#val-read_file" class="anchor"></a><code><span><span class="keyword">val</span> read_file : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Return contents of a given file as string.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-load_script"><a href="#val-load_script" class="anchor"></a><code><span><span class="keyword">val</span> load_script : 
  <span><span class="label">storage</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Script/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Script.t</a></span></code></div><div class="spec-doc"><p>Loads a script from file.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-originate_contract_hash"><a href="#val-originate_contract_hash" class="anchor"></a><code><span><span class="keyword">val</span> originate_contract_hash : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Contract/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Contract.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Block/index.html#type-t">Block.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/index.html#type-public_key_hash">Tezos_protocol_alpha.Protocol.Alpha_context.public_key_hash</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Contract_hash/index.html#type-t">Tezos_protocol_alpha.Protocol.Contract_hash.t</a> * <a href="../Block/index.html#type-t">Block.t</a>,
    <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span>
    <span class="xref-unresolved">Stdlib</span>.result</span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Returns a block in which the contract is originated.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-originate_contract"><a href="#val-originate_contract" class="anchor"></a><code><span><span class="keyword">val</span> originate_contract : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Contract/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Contract.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Block/index.html#type-t">Block.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/index.html#type-public_key_hash">Tezos_protocol_alpha.Protocol.Alpha_context.public_key_hash</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Contract/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Contract.t</a> * <a href="../Block/index.html#type-t">Block.t</a>,
    <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span>
    <span class="xref-unresolved">Stdlib</span>.result</span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fake_KT1"><a href="#val-fake_KT1" class="anchor"></a><code><span><span class="keyword">val</span> fake_KT1 : <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Contract_hash/index.html#type-t">Tezos_protocol_alpha.Protocol.Contract_hash.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default_self"><a href="#val-default_self" class="anchor"></a><code><span><span class="keyword">val</span> default_self : <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Contract_hash/index.html#type-t">Tezos_protocol_alpha.Protocol.Contract_hash.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default_payer"><a href="#val-default_payer" class="anchor"></a><code><span><span class="keyword">val</span> default_payer : <a href="../../../octez-libs/Tezos_crypto/Signature/Public_key_hash/index.html#type-t">Tezos_base.TzPervasives.Signature.Public_key_hash.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default_sender"><a href="#val-default_sender" class="anchor"></a><code><span><span class="keyword">val</span> default_sender : <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Contract/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Contract.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default_step_constants"><a href="#val-default_step_constants" class="anchor"></a><code><span><span class="keyword">val</span> default_step_constants : 
  <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Script_interpreter/index.html#type-step_constants">Tezos_protocol_alpha.Protocol.Script_interpreter.step_constants</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run_script"><a href="#val-run_script" class="anchor"></a><code><span><span class="keyword">val</span> run_script : 
  <span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/index.html#type-t">Tezos_raw_protocol_alpha.Alpha_context.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?logger</span>:<a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Script_typed_ir/index.html#type-logger">Tezos_raw_protocol_alpha.Script_typed_ir.logger</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?step_constants</span>:
    <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Script_interpreter/index.html#type-step_constants">Tezos_protocol_alpha.Protocol.Script_interpreter.step_constants</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?internal</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?entrypoint</span>:<a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Entrypoint/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Entrypoint.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">storage</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">parameter</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Script_interpreter/index.html#type-execution_result">Tezos_protocol_alpha.Protocol.Script_interpreter.execution_result</a>
   * <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/index.html#type-context">Tezos_raw_protocol_alpha.Alpha_context.context</a>)</span>
    <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Helper function that parses and typechecks a script, its initial storage and parameters from strings. It then executes the typed script with the storage and parameters and returns the result.</p><p>The <code>step_constants</code> argument passes in some data which remains constant throughout script's execution, hence the name. This includes addresses of the sender and payer, the address of the smart contract, the amount of Tez transferred to it and so on.</p><p>An <code>internal</code> operation is an operation generated by smart contract's execution rather than by an implicit account.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-originate_contract_from_string_hash"><a href="#val-originate_contract_from_string_hash" class="anchor"></a><code><span><span class="keyword">val</span> originate_contract_from_string_hash : 
  <span><span class="label">script</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">storage</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">source_contract</span>:<a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Contract/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Contract.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">baker</span>:<a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/index.html#type-public_key_hash">Tezos_protocol_alpha.Protocol.Alpha_context.public_key_hash</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Block/index.html#type-t">Block.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Contract_hash/index.html#type-t">Tezos_protocol_alpha.Protocol.Contract_hash.t</a>
   * <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Script/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Script.t</a>
   * <a href="../Block/index.html#type-t">Block.t</a>,
    <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span>
    <span class="xref-unresolved">Stdlib</span>.result</span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-originate_contract_from_string"><a href="#val-originate_contract_from_string" class="anchor"></a><code><span><span class="keyword">val</span> originate_contract_from_string : 
  <span><span class="label">script</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">storage</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">source_contract</span>:<a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Contract/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Contract.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">baker</span>:<a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/index.html#type-public_key_hash">Tezos_protocol_alpha.Protocol.Alpha_context.public_key_hash</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Block/index.html#type-t">Block.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Contract/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Contract.t</a>
   * <a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Script/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Script.t</a>
   * <a href="../Block/index.html#type-t">Block.t</a>,
    <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tztrace">Tezos_base.TzPervasives.tztrace</a>)</span>
    <span class="xref-unresolved">Stdlib</span>.result</span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div></div></body></html>
