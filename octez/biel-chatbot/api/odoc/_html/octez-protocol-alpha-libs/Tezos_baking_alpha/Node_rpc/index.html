<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Node_rpc (octez-protocol-alpha-libs.Tezos_baking_alpha.Node_rpc)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-protocol-alpha-libs</a> &#x00BB; <a href="../index.html">Tezos_baking_alpha</a> &#x00BB; Node_rpc</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_baking_alpha.Node_rpc</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-inject_block"><a href="#val-inject_block" class="anchor"></a><code><span><span class="keyword">val</span> inject_block : 
  <span><a href="../../Tezos_client_alpha/Protocol_client_context/class-type-full/index.html">Tezos_client_alpha.Protocol_client_context.full</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?force</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">chain</span>:<a href="../../../octez-shell-libs/Tezos_shell_services/Shell_services/index.html#type-chain">Tezos_shell_services.Shell_services.chain</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/Block_header/index.html#type-t">Tezos_protocol_alpha.Protocol.Alpha_context.Block_header.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="../../../octez-libs/Tezos_base/Operation/index.html#type-t">Tezos_base.Operation.t</a> list</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../octez-libs/Tezos_crypto/Hashed/Block_hash/index.html#type-t">Tezos_base.TzPervasives.Block_hash.t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Inject a block.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">force</span> <p>defaults to <code>false</code></p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>block hash of the newly injected block</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-inject_operation"><a href="#val-inject_operation" class="anchor"></a><code><span><span class="keyword">val</span> inject_operation : 
  <span><a href="../../Tezos_client_alpha/Protocol_client_context/class-type-full/index.html">Tezos_client_alpha.Protocol_client_context.full</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">chain</span>:<a href="../../../octez-shell-libs/Tezos_shell_services/Shell_services/index.html#type-chain">Tezos_shell_services.Shell_services.chain</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/index.html#type-packed_operation">Tezos_protocol_alpha.Protocol.Alpha_context.packed_operation</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../octez-libs/Tezos_crypto/Hashed/Operation_hash/index.html#type-t">Tezos_base.TzPervasives.Operation_hash.t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Inject an operation.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>operation hash of the newly injected operation</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-preapply_block"><a href="#val-preapply_block" class="anchor"></a><code><span><span class="keyword">val</span> preapply_block : 
  <span><a href="../../Tezos_client_alpha/Protocol_client_context/class-type-full/index.html">Tezos_client_alpha.Protocol_client_context.full</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">chain</span>:<a href="../../../octez-shell-libs/Tezos_shell_services/Shell_services/index.html#type-chain">Tezos_shell_services.Shell_services.chain</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">head</span>:<a href="../../../octez-libs/Tezos_crypto/Hashed/Block_hash/index.html#type-t">Tezos_base.TzPervasives.Block_hash.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">timestamp</span>:<a href="../../../octez-libs/Tezos_base/Time/Protocol/index.html#type-t">Tezos_base.TzPervasives.Time.Protocol.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">protocol_data</span>:<a href="../../../tezos-protocol-alpha/Tezos_protocol_alpha/Protocol/index.html#type-block_header_data">Tezos_protocol_alpha.Protocol.block_header_data</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="../../../tezos-protocol-alpha/Tezos_raw_protocol_alpha/Alpha_context/index.html#type-packed_operation">Tezos_protocol_alpha.Protocol.Alpha_context.packed_operation</a> list</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../../../octez-libs/Tezos_base/Block_header/index.html#type-shell_header">Tezos_base.Block_header.shell_header</a>
   * <span><span><a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-error">Tezos_base.TzPervasives.error</a> <a href="../../../octez-shell-libs/Tezos_shell_services/Preapply_result/index.html#type-t">Tezos_shell_services.Preapply_result.t</a></span> list</span>)</span>
    <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Preapply a block using the node validation mechanism.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-monitor_valid_proposals"><a href="#val-monitor_valid_proposals" class="anchor"></a><code><span><span class="keyword">val</span> monitor_valid_proposals : 
  <span><a href="../../Tezos_client_alpha/Protocol_client_context/class-type-rpc_context/index.html">Tezos_client_alpha.Protocol_client_context.rpc_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">chain</span>:<a href="../../../octez-shell-libs/Tezos_shell_services/Shell_services/index.html#type-chain">Tezos_shell_services.Shell_services.chain</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?cache</span>:<span><a href="../Baking_state/index.html#type-block_info">Baking_state.block_info</a> <a href="../Baking_cache/Block_cache/index.html#type-t">Baking_cache.Block_cache.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><a href="../Baking_state/index.html#type-proposal">Baking_state.proposal</a> <span class="xref-unresolved">Lwt_stream</span>.t</span> * <span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span>)</span>
    <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Monitor validated blocks/proposals from the node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-monitor_heads"><a href="#val-monitor_heads" class="anchor"></a><code><span><span class="keyword">val</span> monitor_heads : 
  <span><a href="../../Tezos_client_alpha/Protocol_client_context/class-type-rpc_context/index.html">Tezos_client_alpha.Protocol_client_context.rpc_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">chain</span>:<a href="../../../octez-shell-libs/Tezos_shell_services/Shell_services/index.html#type-chain">Tezos_shell_services.Shell_services.chain</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?cache</span>:<span><a href="../Baking_state/index.html#type-block_info">Baking_state.block_info</a> <a href="../Baking_cache/Block_cache/index.html#type-t">Baking_cache.Block_cache.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><a href="../Baking_state/index.html#type-proposal">Baking_state.proposal</a> <span class="xref-unresolved">Lwt_stream</span>.t</span> * <span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span>)</span>
    <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Monitor heads from the node.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-await_protocol_activation"><a href="#val-await_protocol_activation" class="anchor"></a><code><span><span class="keyword">val</span> await_protocol_activation : 
  <span><a href="../../Tezos_client_alpha/Protocol_client_context/class-type-rpc_context/index.html">Tezos_client_alpha.Protocol_client_context.rpc_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">chain</span>:<a href="../../../octez-shell-libs/Tezos_shell_services/Shell_services/index.html#type-chain">Tezos_shell_services.Shell_services.chain</a> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Await the current protocol to be activated.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fetch_dal_config"><a href="#val-fetch_dal_config" class="anchor"></a><code><span><span class="keyword">val</span> fetch_dal_config : 
  <span><a href="../../Tezos_client_alpha/Protocol_client_context/class-type-rpc_context/index.html">Tezos_client_alpha.Protocol_client_context.rpc_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../octez-libs/Tezos_crypto_dal/Cryptobox/Config/index.html#type-t">Tezos_crypto_dal.Cryptobox.Config.t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dal_attestable_slots"><a href="#val-dal_attestable_slots" class="anchor"></a><code><span><span class="keyword">val</span> dal_attestable_slots : 
  <span><a href="../../../octez-libs/Tezos_rpc/Context/class-type-generic/index.html">Tezos_rpc.Context.generic</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">attestation_level</span>:int32 <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Baking_state/index.html#type-delegate_slot">Baking_state.delegate_slot</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../Baking_state/index.html#type-dal_attestable_slots">Baking_state.dal_attestable_slots</a></span></code></div><div class="spec-doc"><p><code>dal_attestable_slots ctxt ~attestation_level delegates_slots</code> calls the DAL node RPC GET /profiles/&lt;pkh&gt;/attested_levels/&lt;level&gt;/attestable_slots/&lt;pkh&gt; for each of the delegates in <code>delegate_slots</code> and returns the corresponding promises.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-register_dal_profiles"><a href="#val-register_dal_profiles" class="anchor"></a><code><span><span class="keyword">val</span> register_dal_profiles : 
  <span><a href="../../../octez-libs/Tezos_rpc/Context/class-type-generic/index.html">Tezos_rpc.Context.generic</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Baking_state/index.html#type-consensus_key">Baking_state.consensus_key</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>unit <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>register_dal_profiles ctxt delegates</code> calls the DAL node RPC PATCH /profiles/ to register each profile corresponding to a delegate in <code>delegates</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_dal_health"><a href="#val-get_dal_health" class="anchor"></a><code><span><span class="keyword">val</span> get_dal_health : 
  <span><a href="../../../octez-libs/Tezos_rpc/Context/class-type-generic/index.html">Tezos_rpc.Context.generic</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../tezos-dal-node-services/Tezos_dal_node_services/Types/Health/index.html#type-t">Tezos_dal_node_services.Types.Health.t</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-tzresult">Tezos_base.TzPervasives.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>get_dal_health ctxt</code> calls the DAL node RPC 'GET /health'</p></div></div></div></body></html>
