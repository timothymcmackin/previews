<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Disk_persistence (octez-injector.Octez_injector.Disk_persistence)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">octez-injector</a> &#x00BB; <a href="../index.html">Octez_injector</a> &#x00BB; Disk_persistence</nav><header class="odoc-preamble"><h1>Module <code><span>Octez_injector.Disk_persistence</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Cannot_write_file"><a href="#extension-decl-Cannot_write_file" class="anchor"></a><code><span><span class="keyword">type</span> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-error">Tezos_base.TzPervasives.error</a> += </span></code><ol><li id="extension-Cannot_write_file" class="def variant extension anchored"><a href="#extension-Cannot_write_file" class="anchor"></a><code><span>| </span><span><span class="extension">Cannot_write_file</span> <span class="keyword">of</span> string</span></code></li><li id="extension-Cannot_create_dir" class="def variant extension anchored"><a href="#extension-Cannot_create_dir" class="anchor"></a><code><span>| </span><span><span class="extension">Cannot_create_dir</span> <span class="keyword">of</span> string</span></code></li><li id="extension-Cannot_read_file" class="def variant extension anchored"><a href="#extension-Cannot_read_file" class="anchor"></a><code><span>| </span><span><span class="extension">Cannot_read_file</span> <span class="keyword">of</span> string</span></code></li><li id="extension-Io_error" class="def variant extension anchored"><a href="#extension-Io_error" class="anchor"></a><code><span>| </span><span><span class="extension">Io_error</span> <span class="keyword">of</span> <span><span>[ `Close <span>| `Open</span> ]</span> <a href="../../../octez-libs/Tezos_stdlib_unix/Lwt_utils_unix/index.html#type-io_error">Tezos_stdlib_unix.Lwt_utils_unix.io_error</a></span></span></code></li><li id="extension-Unix_error" class="def variant extension anchored"><a href="#extension-Unix_error" class="anchor"></a><code><span>| </span><span><span class="extension">Unix_error</span> <span class="keyword">of</span> <span class="xref-unresolved">Unix</span>.error</span></code></li><li id="extension-Decoding_error" class="def variant extension anchored"><a href="#extension-Decoding_error" class="anchor"></a><code><span>| </span><span><span class="extension">Decoding_error</span> <span class="keyword">of</span> <a href="../../../octez-libs/Data_encoding/V1/Binary/index.html#type-read_error">Tezos_base.TzPervasives.Data_encoding.Binary.read_error</a></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-maybe_read_value"><a href="#val-maybe_read_value" class="anchor"></a><code><span><span class="keyword">val</span> maybe_read_value : 
  <span><span class="label">warn</span>:
    <span>(<span>string <span class="arrow">&#45;&gt;</span></span>
      <span><span><a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-error">Tezos_base.TzPervasives.error</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-trace">Tezos_base.TzPervasives.trace</a></span> <span class="arrow">&#45;&gt;</span></span>
      <span>unit <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../../../octez-libs/Data_encoding/index.html#type-t">Tezos_base.TzPervasives.Data_encoding.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> option</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>maybe_read_value ~warn filename encoding</code> reads the value with <code>encoding</code> from the file <code>filename</code>. It returns <code>None</code> if it fails to read a value and will emit a warning with the <code>warn</code> function in this case.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-write_value"><a href="#val-write_value" class="anchor"></a><code><span><span class="keyword">val</span> write_value : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../../../octez-libs/Data_encoding/index.html#type-t">Tezos_base.TzPervasives.Data_encoding.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(unit, <span><a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-error">Tezos_base.TzPervasives.error</a> <a href="../../../octez-libs/Tezos_base/TzPervasives/index.html#type-trace">Tezos_base.TzPervasives.trace</a></span>)</span>
    <span class="xref-unresolved">Stdlib</span>.result</span>
    <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>write_value filename encoding v</code> write the value <code>v</code> to the file <code>filename</code> in binary form following the <code>encoding</code>.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-H"><a href="#module-type-H" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-H/index.html">H</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Signature for hash tables with additional information</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Make_table"><a href="#module-Make_table" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Make_table/index.html">Make_table</a></span><span> (<a href="Make_table/argument-1-H/index.html">H</a> : <a href="module-type-H/index.html">H</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Create an on-disk persistent version of <code>Hashtbl</code>.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Make_heap"><a href="#module-Make_heap" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Make_heap/index.html">Make_heap</a></span><span>
  (<a href="Make_heap/argument-1-N/index.html">N</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span>)
  (<a href="Make_heap/argument-2-K/index.html">K</a> : <a href="../../../octez-libs/Tezos_crypto/Intfs/module-type-HASH/index.html">Tezos_crypto.Intfs.HASH</a>)
  (<a href="Make_heap/argument-3-V/index.html">V</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span>) : 
  <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Create an on-disk persistent version of the <code>Bounded_min_heap</code> data structure.</p></div></div></div></body></html>
