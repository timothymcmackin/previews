
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>RPC handling architecture &#8212; Octez &amp; Protocol products documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=6c3b92c6" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=661ca86b"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-KT3Z3X4Y82"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-KT3Z3X4Y82');
            </script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-KT3Z3X4Y82');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'developer/rpc_architecture';</script>
    <script src="../_static/js/custom.js?v=e7f469e6"></script>
    <link rel="canonical" href="https://octez.tezos.com/docs/developer/rpc_architecture.html" />
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Testing in Octez" href="testing_index.html" />
    <link rel="prev" title="Baker application’s architecture" href="baker.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.svg" class="logo__image only-light" alt="Octez & Protocol products documentation - Home"/>
    <script>document.write(`<img src="../_static/logo.svg" class="logo__image only-dark" alt="Octez & Protocol products documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://docs.tezos.com/" title="Up to Tezos docs" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/tezosdocs.png" class="icon-link-image" alt="Up to Tezos docs"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://docs.tezos.com/overview/resources/#documentation-map" title="Documentation map" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/map.png" class="icon-link-image" alt="Documentation map"/></a>
        </li>
</ul></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../introduction/tezos.html">Octez &amp; Protocol overview</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../introduction/howtoget.html">Installing Octez</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../introduction/howtobuild.html">Building Octez from source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/cosign-verify.html">Verifying Octez Docker Images with Cosign</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/get_troubleshooting.html">Installation troubleshooting</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/howtouse.html">Getting started with Octez</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/howtorun.html">Running Octez</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/services.html">Setting up Octez Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/serokell.html">Migrating from Serokell’s to Nomadic Labs’ packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/versioning.html">Octez &amp; Protocol versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/breaking_changes.html">Breaking changes</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Octez User manual</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../user/setup-client.html">Setting up the client</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../user/client-configuration.html">Client Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user/key-management.html">Key Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user/sandbox.html">Sandboxed mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user/mockup.html">Mockup mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user/proxy.html">Proxy mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user/light.html">Light mode</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../user/setup-node.html">Setting up the node</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../user/node-configuration.html">Node Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user/routing.html">Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user/multinetwork.html">Connecting to a Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user/history_modes.html">History modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user/snapshots.html">Snapshots</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../user/node-monitoring.html">Monitoring an Octez Node</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="openmetrics.html">Supported Open Metrics</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../user/teztale.html">Monitoring the consensus protocol</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../user/multisig.html">Built-in multisig contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/fa12.html">FA1.2 support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/logging.html">Logging features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/exits.html">Exit codes and signals</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Octez Reference manual</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../shell/the_big_picture.html">Octez Software Architecture</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../shell/shell.html">The Octez Shell</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../shell/validation.html">The validation subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/prevalidation.html">The Prevalidator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/storage.html">The storage layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/sync.html">Synchronisation heuristic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/p2p.html">The peer-to-peer layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/protocol_environment.html">Protocol Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/micheline.html">Micheline</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../shell/baker.html">The Octez Baker</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../shell/dal.html">Data Availability Layer</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../shell/dal_overview.html">DAL overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/dal_node.html">The DAL node</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/dal_run.html">Running a DAL attester node</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell/dal_bakers.html">Bakers &amp; the DAL</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../shell/smart_rollup_node.html">Smart rollup node</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="rollup_metrics.html">Supported Open Metrics</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../shell/p2p_api.html">P2P message format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shell/cli-commands.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shell/rpc.html">Shell RPCs - Reference</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Protocol Reference Manuals</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../active/index.html">Rio Protocol Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../active/protocol.html">Economic protocol features</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../active/protocol_overview.html">Overview of the economic protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/proof_of_stake.html">Proof-of-stake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/randomness_generation.html">Randomness generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/baking_power.html">Baking Power</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/consensus.html">The consensus algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/voting.html">The Amendment (and Voting) Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/accounts.html">Accounts and addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/michelson.html">Michelson: the language of Smart Contracts in Tezos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/views.html">On-chain Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/timelock.html">Time-lock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/sapling.html">Sapling support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/liquidity_baking.html">Liquidity Baking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/global_constants.html">Global Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/michelson_anti_patterns.html">Michelson Anti-Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/token_management.html">Token transfers and balance updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/mempool.html">Mempool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/smart_rollups.html">Smart Optimistic Rollups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/plugins.html">Protocol Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/event.html">Contract events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/blocks_ops.html">Blocks and Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/validation.html">Validation and Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/tickets.html">Tickets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/adaptive_issuance.html">Adaptive Issuance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/staking.html">Staking mechanism</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/adaptive_slashing.html">Adaptive Slashing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../active/dal_support.html">DAL integration</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../active/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../active/cli-commands.html">Command Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../active/rpc.html">Rio RPCs - Reference</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../seoul/index.html">Seoul Protocol Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../seoul/protocol.html">Economic protocol features</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../seoul/protocol_overview.html">Overview of the economic protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/proof_of_stake.html">Proof-of-stake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/randomness_generation.html">Randomness generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/baking_power.html">Baking Power</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/consensus.html">The consensus algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/voting.html">The Amendment (and Voting) Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/accounts.html">Accounts and addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/native_multisig.html">Native Multisig accounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/michelson.html">Michelson: the language of Smart Contracts in Tezos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/views.html">On-chain Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/timelock.html">Time-lock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/sapling.html">Sapling support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/liquidity_baking.html">Liquidity Baking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/global_constants.html">Global Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/michelson_anti_patterns.html">Michelson Anti-Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/token_management.html">Token transfers and balance updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/mempool.html">Mempool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/smart_rollups.html">Smart Optimistic Rollups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/plugins.html">Protocol Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/event.html">Contract events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/blocks_ops.html">Blocks and Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/validation.html">Validation and Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/tickets.html">Tickets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/adaptive_issuance.html">Adaptive Issuance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/staking.html">Staking mechanism</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/adaptive_slashing.html">Adaptive Slashing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../seoul/dal_support.html">DAL integration</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../seoul/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../seoul/cli-commands.html">Command Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../seoul/rpc.html">Seoul RPCs - Reference</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../alpha/index.html">Alpha Dev Protocol Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../alpha/protocol.html">Economic protocol features</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../alpha/protocol_overview.html">Overview of the economic protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/proof_of_stake.html">Proof-of-stake</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/randomness_generation.html">Randomness generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/baking_power.html">Baking Power</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/consensus.html">The consensus algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/voting.html">The Amendment (and Voting) Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/accounts.html">Accounts and addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/native_multisig.html">Native Multisig accounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/michelson.html">Michelson: the language of Smart Contracts in Tezos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/views.html">On-chain Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/timelock.html">Time-lock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/sapling.html">Sapling support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/liquidity_baking.html">Liquidity Baking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/global_constants.html">Global Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/michelson_anti_patterns.html">Michelson Anti-Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/token_management.html">Token transfers and balance updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/mempool.html">Mempool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/smart_rollups.html">Smart Optimistic Rollups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/plugins.html">Protocol Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/event.html">Contract events</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/blocks_ops.html">Blocks and Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/validation.html">Validation and Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/tickets.html">Tickets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/adaptive_issuance.html">Adaptive Issuance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/staking.html">Staking mechanism</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/adaptive_slashing.html">Adaptive Slashing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../alpha/dal_support.html">DAL integration</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../alpha/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../alpha/cli-commands.html">Command Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../alpha/rpc.html">Alpha RPCs - Reference</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tezos developer Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="rpc.html">JSON/RPC interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/errors.html">RPC Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/openapi.html">RPCs - OpenAPI reference</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Changes in Octez releases</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../releases/releases.html">Release System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/version-23.html">Version 23.2</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../releases/history.html">Older Versions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-22.html">Version 22.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-21.html">Version 21.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-20.html">Version 20.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-19.html">Version 19.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-18.html">Version 18.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-17.html">Version 17.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-16.html">Version 16.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-15.html">Version 15.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-14.html">Version 14.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-13.html">Version 13.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-12.html">Version 12.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-11.html">Version 11.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-10.html">Version 10.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-9.html">Version 9.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-8.html">Version 8.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/version-7.html">Version 7.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/january-2020.html">Mainnet January 2020</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/december-2019.html">Mainnet December 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/october-2019.html">Mainnet-Staging October 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/september-2019.html">Mainnet September 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/may-2019.html">Mainnet May 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/april-2019.html">Mainnet April 2019</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Changes in protocol versions</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../protocols/naming.html">Protocol versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocols/022_rio.html">Protocol Rio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocols/023_seoul.html">Protocol Seoul</a></li>
<li class="toctree-l1"><a class="reference internal" href="../protocols/alpha.html">Protocol Alpha</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../protocols/history.html">Older Protocols</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../protocols/021_quebec.html">Protocol Quebec</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/020_paris.html">Protocol Paris</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/018_oxford.html">Protocol Oxford</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/017_nairobi.html">Protocol Nairobi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/016_mumbai.html">Protocol Mumbai</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/015_lima.html">Protocol Lima</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/014_kathmandu.html">Protocol Kathmandu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/013_jakarta.html">Protocol Jakarta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/012_ithaca.html">Protocol Ithaca</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/011_hangzhou.html">Protocol Hangzhou</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/010_granada.html">Protocol Granada</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/009_florence.html">Protocol Florence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/008_edo.html">Protocol Edo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/007_delphi.html">Protocol Delphi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/006_carthage.html">Protocol Carthage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/005_babylon.html">Protocol Babylon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/004_Pt24m4xi.html">Protocol Athens</a></li>
<li class="toctree-l2"><a class="reference internal" href="../protocols/003_PsddFKi3.html">Protocol 003_PsddFKi3</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="contributing_index.html">How to contribute</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="contributing.html">How to contribute to Octez</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing-adding-a-new-opam-dependency.html">How to add or update opam dependencies</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="merge_team.html">Octez Merge Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="guidelines.html">Documentation and coding guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="repository_scope.html">Scope of the Octez repository</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="programming.html">Programming tutorials</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="gadt.html">Generalized Algebraic Data Types (GADTs)</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="error_monad.html">The Error Monad</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="error_monad_p1_result.html">Part 1: <code class="docutils literal notranslate"><span class="pre">result</span></code>, Lwt, and Lwt-<code class="docutils literal notranslate"><span class="pre">result</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="error_monad_p2_tzresult.html">Part 2: <code class="docutils literal notranslate"><span class="pre">tzresult</span></code> and Lwt-<code class="docutils literal notranslate"><span class="pre">tzresult</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="error_monad_p3_advanced.html">Part 3: Advanced topics</a></li>
<li class="toctree-l3"><a class="reference internal" href="error_monad_p4_appendices.html">Part 4: Appendices</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="clic.html">The <code class="docutils literal notranslate"><span class="pre">clic</span></code> library</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_encoding.html">The <code class="docutils literal notranslate"><span class="pre">data_encoding</span></code> library</a></li>
<li class="toctree-l2"><a class="reference internal" href="event_logging_framework.html">Using The Event Logging Framework</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="octez_architecture.html">Octez Architecture Details</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="baker.html">Baker application’s architecture</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">RPC handling architecture</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="testing_index.html">Testing in Octez</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Overview of Testing in Octez</a></li>
<li class="toctree-l2"><a class="reference internal" href="ppx_expect.html">Ppx_expect</a></li>
<li class="toctree-l2"><a class="reference internal" href="tezt.html">Tezt: OCaml Tezos Test Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="long-tezts.html">Tezt: Long Tests and Performance Regression Test Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="alcotezt.html">Alcotezt: An Alcotest Compatibility Wrapper for Tezt</a></li>
<li class="toctree-l2"><a class="reference internal" href="unit_testing_legacy_code.html">Making legacy code unit-testable</a></li>
<li class="toctree-l2"><a class="reference internal" href="proposal_testing.html">How to Test a Protocol Proposal</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="maintaining.html">Maintaining</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="entering_alpha.html">How to start reading protocol Alpha</a></li>
<li class="toctree-l2"><a class="reference internal" href="michelson_instructions.html">Adding a new instruction to Michelson language</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="protocol_playbook.html">Protocol Proposals</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="protocol_release_checklist.html">Protocol Release Checklist</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="howto-freeze-protocols.html">How to Freeze Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="protocol_environment_upgrade.html">Adding a new protocol environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="rpc_howto.html">RPC How-To</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Documenting</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tools.html">Platform Development tools</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="profiling.html">Profiling the Octez node</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="profiler_heap.html">Memory profiling the OCaml heap</a></li>
<li class="toctree-l3"><a class="reference internal" href="profiler_valgrind.html">Memory profiling the C heap</a></li>
<li class="toctree-l3"><a class="reference internal" href="profiler_perf.html">Performance profiling</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="profiler_module.html">The Profiler module</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="ppx_profiler.html">Profiler PPX</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="snoop.html">Benchmarking with Snoop</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="snoop_arch.html">Architecture of <code class="docutils literal notranslate"><span class="pre">octez-snoop</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="snoop_tutorial.html">Snoop usage tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="snoop_example.html">In-depth usage example: more control over your benchmark</a></li>
<li class="toctree-l3"><a class="reference internal" href="tezos_micheline_rewriting.html">Rewriting Micheline with <code class="docutils literal notranslate"><span class="pre">tezos-micheline-rewriting</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="snoop_interpreter.html">Snoop and the Michelson Interpreter</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="time_measurement_ppx.html">Time measurement PPX</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_environment.html">Python Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="pre_commit_hook.html">Pre-Commit Hook</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="encodings.html">Encodings</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="merkle-proof-encoding-formats.html">Merkle Proof Encoding Formats</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="merkle-proof-formats/v1-tree32.html">V1 for Tree32</a></li>
<li class="toctree-l2"><a class="reference internal" href="merkle-proof-formats/v1-tree2.html">V1 for Tree2</a></li>
<li class="toctree-l2"><a class="reference internal" href="merkle-proof-formats/v2-tree32.html">V2 for Tree32</a></li>
<li class="toctree-l2"><a class="reference internal" href="merkle-proof-formats/v2-tree2.html">V2 for Tree2</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api-inline.html">OCaml APIs - Reference</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Grafazos</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../grafazos-doc/index.html">Grafazos: Grafana dashboards for Octez node monitoring.</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-gitlab"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://gitlab.com/tezos/tezos" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-gitlab"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://gitlab.com/tezos/tezos/-/blob/master/docs/developer/rpc_architecture.rst" target="_blank"
   class="btn btn-sm btn-source-file-button dropdown-item"
   title="Show source"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="btn__text-container">Show source</span>
</a>
</li>
      
      
      
      
      <li><a href="https://gitlab.com/tezos/tezos/-/issues/new?issue[title]=Issue%20on%20page%20%2Fdeveloper/rpc_architecture.html&issue[description]=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>RPC handling architecture</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rpc-server-initialization">RPC server initialization</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#connection-management">Connection management</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-case-of-streams-and-chunks">The case of streams and chunks</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ok">Ok</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#okchunk">OkChunk</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#okstream">OkStream</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#software-stacks">Software stacks</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#declaring">Declaring</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#serving">Serving</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#the-lifetime-of-a-request">The lifetime of a request</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#querying">Querying</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#debugging">Debugging</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#see-also">See also</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="rpc-handling-architecture">
<h1>RPC handling architecture<a class="headerlink" href="#rpc-handling-architecture" title="Link to this heading">#</a></h1>
<figure class="align-default">
<img alt="Components of Local and External RPC servers" src="../_images/rpc_components.png" />
</figure>
<p>The Cohttp library is a vendored component responsible
for handling HTTP requests and responses, providing the core functionality
for HTTP communication in both the Local and External RPC servers.</p>
<p><a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/resto">Resto</a> is a library for declaratively defining services,
binding them to given paths, and then either starting an RPC server
to serve the RPCs on these paths or making RPC calls to these services.
For monitoring requests, a stream is created and updates are sent out
as soon as new data is available.
Resto is responsible for the following:</p>
<ul class="simple">
<li><p>Providing primitives to describe services.</p></li>
<li><p>Assembling the services into directories which are essentially maps of paths
and methods to services.</p></li>
<li><p>Spinning up a Cohttp server that serves the chosen directory.</p></li>
<li><p>Making requests to services as a client. The client automatically builds
paths based on parameters to the service, assembles other HTTP details,
and parses the response.</p></li>
</ul>
<p>Additionally, Resto provides features for configuring ACL and for serving
a self-description service - a service that describes all services of a directory.</p>
<p>In the rest of the document, we will use the term “Resto server” (as it is
called in the <code class="docutils literal notranslate"><span class="pre">resto</span></code> library), but it is worth clarifying that the Cohttp
server is the actual server which listens for events. Resto server is sitting
on top of Cohttp server, providing its handlers for events. Resto server is
not listening for events on its own but it handles the events.
So they split the functionality:</p>
<ul class="simple">
<li><p>Cohttp listens and involves event handlers</p></li>
<li><p>Resto provides handlers for events</p></li>
</ul>
<p>The <a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_rpc_http/RPC_middleware.ml">RPC middleware</a> module in
the External RPC server receives accepted connections
from the Resto server. Depending on the RPC type, it either handles the
underlying RPC request locally or forwards it to the Local RPC server next to the Tezos
node (they share the same PID) by initiating a connection to it. When forwarding, the RPC middleware
maintains a mapping between the accepted and the initiated connections. If
the client of the initial RPC request dies or closes a connection, the RPC middleware is notified by
Resto and then closes the corresponding initiated connection to the Local
RPC server.</p>
<section id="rpc-server-initialization">
<h2>RPC server initialization<a class="headerlink" href="#rpc-server-initialization" title="Link to this heading">#</a></h2>
<p>Local RPC server and External RPC server are initialized at Tezos node start in
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/bin_node/node_run_command.ml">src/bin_node/node_run_command.ml</a>. Each of them calls <code class="docutils literal notranslate"><span class="pre">launch</span></code> in
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_rpc_http/RPC_server.ml">src/lib_rpc_http/RPC_server.ml</a> for a Resto server.</p>
<p>An RPC server is declared in <a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_rpc_http/RPC_server.ml">src/lib_rpc_http/RPC_server.ml</a> by <code class="docutils literal notranslate"><span class="pre">Resto_cohttp_server.Server.Make</span></code>.
At launch, Resto RPC server takes 2 callbacks:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">callback</span></code> - the main callback for accepted connections</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">conn_closed</span></code> - the callback notifying about the connection closed
externally, e.g. by EOF</p></li>
</ul>
<p>Resto server launches Cohttp server which also takes <code class="docutils literal notranslate"><span class="pre">callback</span></code> and
<code class="docutils literal notranslate"><span class="pre">conn_closed</span></code> plus one more callback:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sleep_fn</span></code> - a callback implementing sleep with desired timeout which
is used to listen for EOF while the main callback is unresponsive handling
the request.</p></li>
</ul>
<p>Resto provides a default <code class="docutils literal notranslate"><span class="pre">callback</span></code> implementation, <code class="docutils literal notranslate"><span class="pre">resto_callback</span></code> in
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/resto/src/server.ml">resto/src/server.ml</a>, which serves Resto directory.</p>
<p>The forwarding logic is handled in file <a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_rpc_http/RPC_middleware.ml">src/lib_rpc_http/RPC_middleware.ml</a>
which defines <code class="docutils literal notranslate"><span class="pre">proxy_server_query_forwarder</span></code>.</p>
</section>
<section id="connection-management">
<h2>Connection management<a class="headerlink" href="#connection-management" title="Link to this heading">#</a></h2>
<p>The Client, Baker or Indexer can initiate RPC requests. As a result, a TCP
connection is established to the Tezos Node or to the External RPC server
depending on the settings in the Client, Baker or Indexer.</p>
<p>The External RPC server decides based on the RPC endpoint type if the request
has to be handled locally or should be forwarded to the Tezos node. For
performance reasons External RPC server tries to offload Tezos node.</p>
<p>If the request is forwarded, RPC middleware initiates a new request that is sent
to the Tezos node via an initialized Unix connection, using Cohttp client. From
now on, Cohttp client needs to monitor the connection health to notify the
Client/Baker/Indexer if the connection died.</p>
<p>This becomes critical as some requests are endless (e.g. <code class="docutils literal notranslate"><span class="pre">/monitor/heads/main</span></code>
or <code class="docutils literal notranslate"><span class="pre">/chains/main/mempool/monitor_operations</span></code>). The Client/Baker/Indexer have
no timeout for that and the responsibility of keeping these connections healthy
is on External RPC server.</p>
<p>The Cohttp server monitors the health of the Unix connection. If EOF is
received, RPC middleware is notified. Then it closes the connection towards the
Client/Baker/Indexer. See Cohttp functions <code class="docutils literal notranslate"><span class="pre">handle_request()</span></code> in
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/cohttp/cohttp-lwt/src/server.ml">cohttp/cohttp-lwt/src/server.ml</a> and <code class="docutils literal notranslate"><span class="pre">wait_eof_or_closed</span></code> in
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/cohttp/cohttp-lwt-unix/src/io.ml">cohttp/cohttp-lwt-unix/src/io.ml</a>.</p>
<p>Cohttp uses Conduit library for low-level operation with connections. The Unix
file descriptor of the connection is kept within Cohttp and is hidden for higher
levels of the stack which makes debugging quite complicated. Cohttp server
passes the closing function to the Resto server allowing it to close the
connection if the forwarding operation failed.</p>
<p>The RPC server provides its callbacks to Cohttp which actually starts a server,
receives requests and involves the provided callbacks. RPC server launches
Cohttp as <code class="docutils literal notranslate"><span class="pre">RPC_server.launch</span></code> in <a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_rpc_process/main.ml">src/lib_rpc_process/main.ml</a>. The
callback <code class="docutils literal notranslate"><span class="pre">conn_closed</span></code> takes a connection ID. This connection ID is provided
by Cohttp when the connection is created and then Resto stores it in forwarder
resources. Resto creates a new forwarded connection in
<code class="docutils literal notranslate"><span class="pre">make_transform_callback</span></code> and stores the connection ID and a closing function
in <code class="docutils literal notranslate"><span class="pre">forwarder_resources</span></code> in <a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_rpc_http/RPC_middleware.ml">src/lib_rpc_http/RPC_middleware.ml</a>.</p>
<p>The number of callbacks is confusing. So let’s take a closer look to
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_rpc_http/RPC_middleware.ml">src/lib_rpc_http/RPC_middleware.ml</a>:</p>
<ul class="simple">
<li><p>Cohttp runs a server. So a connection request received from
Client/Baker/Indexer/ arrives at Cohttp and then passed to Resto via
<code class="docutils literal notranslate"><span class="pre">make_transform_callback</span></code>.</p></li>
<li><p>Resto passes the callback to Cohttp at server start to deal with a connection
which has to be closed.
As it is provided at server start, it takes connections storage and a
connection ID as an input. The provided callback is essentially
<code class="docutils literal notranslate"><span class="pre">forwarding_conn_closed</span></code> as it handles dead forwarded Unix connection.
Therefore, Resto keeps a mapping of connections from Client/Baker/Indexer to
the shutdown function on the corresponding forwarded connections towards the
Tezos node. So if a client dies, the connection towards Tezos Node is also
closed.</p></li>
</ul>
<p>So when a connection from Client/Baker/Indexer is received, Resto is involved via  <code class="docutils literal notranslate"><span class="pre">make_transform_callback</span></code>. And if that connection dies, Cohttp invokes <code class="docutils literal notranslate"><span class="pre">forwarding_conn_closed</span></code>. If the connection is handled locally by External RPC server, Resto does nothing. If the request was forwarded, Resto will call <code class="docutils literal notranslate"><span class="pre">shutdown</span></code> for the Unix connection towards Tezos node.</p>
</section>
<section id="the-case-of-streams-and-chunks">
<h2>The case of streams and chunks<a class="headerlink" href="#the-case-of-streams-and-chunks" title="Link to this heading">#</a></h2>
<p>In Resto, service handlers return an <code class="docutils literal notranslate"><span class="pre">'a</span> <span class="pre">Answer.t</span></code> (as defined in
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/resto/src/resto_directory.ml">resto/src/resto_directory.ml</a>). The type <a class="reference external" href="../../api/odoc/_html/octez-libs/Tezos_rpc/Answer/index.html#type-t">Answer.t </a> models the
different possible <a class="reference external" href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes">HTTP status
codes</a>.
Here’s an excerpt:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>type (&#39;o, &#39;e) t =
  [ `Ok of &#39;o (* 200 *)
  | `Not_found of &#39;e option (* 404 *)
  … ]
</pre></div>
</div>
<p>The full type definition has more variants for more codes.
Interestingly, it actually has three different variants for the code 200
(OK).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>type (&#39;o, &#39;e) t =
  [ `Ok of &#39;o (* 200 *)
  | `OkChunk of &#39;o (* 200 *)
  | `OkStream of &#39;o stream (* 200 *)
  …]
</pre></div>
</div>
<section id="ok">
<h3>Ok<a class="headerlink" href="#ok" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">`Ok</span></code> is for just returning a value. No big deal. The handler
just returns a value; the server serialises this value for the body of
the HTTP response.</p>
</section>
<section id="okchunk">
<h3>OkChunk<a class="headerlink" href="#okchunk" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">`OkChunk</span></code> is for returning values which are very large. When
a handler returns <code class="docutils literal notranslate"><span class="pre">`OkChunk</span></code>, it is the handler’s way of
instructing the server to send the response over as multiple chunks.
This reduces the peak CPU and I/O usage of the server which is nicer for
the health of the octez-node process.</p>
<p>The server transmits the chunks via the <a class="reference external" href="https://en.wikipedia.org/wiki/Chunked_transfer_encoding">chunked transfer
encoding</a>.
In this HTTP response format, the server sends a series of chunks with
size headers and separators (see link). The server closes the connection
only once all the chunks have been sent.</p>
<p>The client recovers the data by deserialising the concatenation of all
the chunks received.</p>
<p>Note that the chunking only really impacts the <code class="docutils literal notranslate"><span class="pre">application/json</span></code> media
type. This is because of historical reasons: the JSON serialisation is
very costly and was blocking the node for noticeable spans of times. The
serialisation to binary could be improved to benefit from chunking but
this requires modifying the de/serialisation backend.</p>
</section>
<section id="okstream">
<h3>OkStream<a class="headerlink" href="#okstream" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">`OkStream</span></code> is for returning not one single value but a
sequence of different values that a variable can have in the
<code class="docutils literal notranslate"><span class="pre">octez-node</span></code>. E.g., the RPC entry point
<a class="reference external" href="https://octez.tezos.com/docs/shell/rpc.html#get-monitor-applied-blocks">/monitor/heads/&lt;chain_id&gt;</a>
sends a sequence of blocks, one for each time the node changes head on
the chain passed as parameter.</p>
<p>The server transmits each new value as a chunk using the chunk transfer
encoding (see above). Unlike with <code class="docutils literal notranslate"><span class="pre">`OkChunk</span></code> each of the chunk
transmitted for <code class="docutils literal notranslate"><span class="pre">`OkStream</span></code> is a fully formed element of a
stream. The client doesn’t concatenate the chunks together: it decodes
them one after the other.</p>
<p>The server never closes the connection (unless the stream ends, which is
not the case for the values monitored in the Tezos stream RPCs).</p>
<p>The payload of the <code class="docutils literal notranslate"><span class="pre">`OkStream</span></code> constructor is a <code class="docutils literal notranslate"><span class="pre">stream</span></code>
which is essentially a function <code class="docutils literal notranslate"><span class="pre">next</span></code> returning a promise for the
next available value:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>type &#39;a stream = {next : unit -&gt; &#39;a option Lwt.t; shutdown : unit -&gt; unit}
</pre></div>
</div>
<p>The resto server (<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/resto/src/server.ml">resto/src/server.ml</a>) transforms this <code class="docutils literal notranslate"><span class="pre">stream</span></code>
into an <code class="docutils literal notranslate"><span class="pre">Lwt_stream</span></code> and passes it to cohttp which uses it to
request new values to be transmitted.</p>
</section>
</section>
<section id="software-stacks">
<h2>Software stacks<a class="headerlink" href="#software-stacks" title="Link to this heading">#</a></h2>
<p>There are a number of modules and libraries involved in the RPC system
of Tezos. This section presents them by theme.</p>
<section id="declaring">
<h3>Declaring<a class="headerlink" href="#declaring" title="Link to this heading">#</a></h3>
<p>In the “declaring” part of the stack, the services are merely described:
how many parameters and of what type, what type of value is returned,
etc.</p>
<p>The services are declared in multiple files peppered around the source
tree. E.g., the p2p-related services are declared in
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_p2p_services/">src/lib_p2p_services/</a>, module <a class="reference external" href="../../api/odoc/_html/octez-libs/Tezos_p2p_services/P2p_services/index.html">P2p_services </a>. These declarations are split from the
registration so that both the serving and the querying stacks can depend
on it without introducing unneeded dependencies.</p>
<p>The files declare services by calling into
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_rpc/RPC_service.ml">src/lib_rpc/RPC_service.ml</a> the module <a class="reference external" href="../../api/odoc/_html/octez-libs/Tezos_rpc/Service/index.html">Service </a> which:</p>
<ul class="simple">
<li><p>instantiates the functor <a class="reference external" href="../../api/odoc/_html/octez-libs/Resto/MakeService/index.html">MakeService </a> from <a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/resto/src/resto.ml">resto/src/resto.ml</a> with a de/serialisation
process, and</p></li>
<li><p>specialises the service type and constructors with the error-management type <code class="docutils literal notranslate"><span class="pre">tzresult</span></code></p></li>
</ul>
</section>
<section id="serving">
<h3>Serving<a class="headerlink" href="#serving" title="Link to this heading">#</a></h3>
<p>In the “serving” part of the stack, the queries to the services are
answered.</p>
<p>Setting up the serving part is done in two phases.</p>
<p>First, the services are assembled into a directory, by declaring a directory and registering services into it. In this step, the
services are associated to a handler: the <em>procedure</em> in <em>Remote
Procedure Call</em>. This happens in multiple files peppered around the
source code, generally in modules which have “directory” in their names.
E.g., <a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_shell/chain_directory.ml">src/lib_shell/chain_directory.ml</a>.</p>
<p>The registration into directory is done by calling into
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_rpc/RPC_directory.ml">src/lib_rpc/RPC_directory.ml</a> which instantiates the functor <code class="docutils literal notranslate"><span class="pre">Make</span></code>
from <a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/resto/src/resto_directory.ml">resto/src/resto_directory.ml</a> with a de/serialisation process.
It also adds a layer of error-management.</p>
<p>Second, the assembled directory is used to initialise and start a
server. This is done by passing the directory to the functions in
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_rpc_http/RPC_server.ml">src/lib_rpc_http/RPC_server.ml</a>.</p>
<p><a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_rpc_http/RPC_server.ml">src/lib_rpc_http/RPC_server.ml</a> instantiates the functor in
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/resto/src/server.ml">resto/src/server.ml</a> and shadows a few functions.</p>
<p><a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/resto/src/server.ml">resto/src/server.ml</a> translates the directory passed during
initialisation into a dispatch callback: a function which, given a
request’s method and path will find the corresponding service (by
calling the <code class="docutils literal notranslate"><span class="pre">lookup</span></code> function in <a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/resto/src/resto_directory.ml">resto/src/resto_directory.ml</a>) and
call its handler. The callback also includes a significant amount of
legwork related to de/serialisation of service arguments and outputs,
error management, access-control checks ans so on. It then passes this
callback to <code class="docutils literal notranslate"><span class="pre">cohttp</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">cohttp</span></code> library handles the parsing and printing of HTTP message,
and passes this information to the callback it was given.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">cohttp</span></code> library delegates the network management (bind, accept,
close, etc.) to the <code class="docutils literal notranslate"><span class="pre">conduit</span></code> library.</p>
<section id="the-lifetime-of-a-request">
<h4>The lifetime of a request<a class="headerlink" href="#the-lifetime-of-a-request" title="Link to this heading">#</a></h4>
<p>The description of the stack above, can also be displayed as a sequence
diagram which shows the lifetime of a request.</p>
</section>
</section>
<section id="querying">
<h3>Querying<a class="headerlink" href="#querying" title="Link to this heading">#</a></h3>
<p>In the “querying” part of the stack, queries to services are formed and
sent, and then the responses are parsed. This is used by the different
executables to communicate with other executables. Most commonly this is
used by <code class="docutils literal notranslate"><span class="pre">octez-client</span></code> to communicate with <code class="docutils literal notranslate"><span class="pre">octez-node</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">octez-client</span></code> (or another binary) obtains a description of the
some services from the <code class="docutils literal notranslate"><span class="pre">src/lib_*_services</span></code> files. This is one of the
reason service declaration and registration are separate steps: the
former can be used by clients were the handler wouldn’t necessarily make
sense.</p>
<p id="rpc-cctx">The <code class="docutils literal notranslate"><span class="pre">octez-client</span></code> instantiates a <em>client context</em> object from
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_client_base_unix/client_context_unix.ml">src/lib_client_base_unix/client_context_unix.ml</a>. This object is
passed around the code under the variable name <code class="docutils literal notranslate"><span class="pre">cctxt</span></code> and it is
responsible for the side-effects (both making RPC calls through the
network and logging and displaying results and accessing local keys from
storage and all).</p>
<p>The aim of this abstraction is essentially dependency injection:
allowing the native client to run on unix using the unix context client,
allowing other clients to run on, say, JavaScript using a specialised
context for this. The ability to run the client on other backends than
native unix application is a discontinued project and this abstraction
has no purpose anymore.</p>
<p>The instantiation of the unix client context in
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_client_base_unix/client_context_unix.ml">src/lib_client_base_unix/client_context_unix.ml</a> instantantiates (via
the class inheritance mechanism) a unix rpc context defined in
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_rpc_http/RPC_client_unix.ml">src/lib_rpc_http/RPC_client_unix.ml</a>.</p>
<p>The code of <a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_rpc_http/RPC_client_unix.ml">src/lib_rpc_http/RPC_client_unix.ml</a> is a functor
application of the logic defined in <a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_rpc_http/RPC_client.ml">src/lib_rpc_http/RPC_client.ml</a>.
The functor application sets up some retry-on-failure mechanism around
the default cohttp client.</p>
<p>The code in <a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/src/lib_rpc_http/RPC_client.ml">src/lib_rpc_http/RPC_client.ml</a> is a wrapper around
<a class="reference external" href="https://gitlab.com/tezos/tezos/-/tree/master/resto/src/client.ml">resto/src/client.ml</a>. The wrapper provides:</p>
<ul class="simple">
<li><p>glue between the logging mechanism of resto and Octez</p></li>
<li><p>error-management and error-related UI/UX (translating HTTP errors into more readable messages)</p></li>
<li><p>media-types management and de/serialisation.</p></li>
</ul>
</section>
</section>
<section id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Link to this heading">#</a></h2>
<p>If you want to learn more about the exchange of RPCs between node and
client you can pass the option <code class="docutils literal notranslate"><span class="pre">-l</span></code> and the client will print all the
calls with their input/output.</p>
<p>A useful tool to manipulate JSON is <a class="reference external" href="https://stedolan.github.io/jq/">jq</a>.</p>
<p>To enable the logs for RPC-related components, prepend Tezos scripts
with <code class="docutils literal notranslate"><span class="pre">TEZOS_LOG=&quot;*-&gt;debug&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">COHTTP_DEBUG=true</span></code>.</p>
</section>
<section id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="rpc_howto.html"><span class="doc">RPC How-To</span></a></p></li>
</ul>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="baker.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Baker application’s architecture</p>
      </div>
    </a>
    <a class="right-next"
       href="testing_index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Testing in Octez</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rpc-server-initialization">RPC server initialization</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#connection-management">Connection management</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-case-of-streams-and-chunks">The case of streams and chunks</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ok">Ok</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#okchunk">OkChunk</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#okstream">OkStream</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#software-stacks">Software stacks</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#declaring">Declaring</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#serving">Serving</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#the-lifetime-of-a-request">The lifetime of a request</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#querying">Querying</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#debugging">Debugging</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#see-also">See also</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Contributors to the Octez & Tezos protocol documentation
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2018-2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>