<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-1.6.0 plugin-docs plugin-id-default docs-doc-id-reference/current-reference">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Tezos | Ligo</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ligolang.org/previews/ligo/modules/img/logo/logo.png"><meta data-rh="true" name="twitter:image" content="https://ligolang.org/previews/ligo/modules/img/logo/logo.png"><meta data-rh="true" property="og:url" content="https://ligolang.org/previews/ligo/modules/docs/1.6.0/reference/current-reference"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.6.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.6.0"><meta data-rh="true" name="docsearch:version" content="1.6.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.6.0"><meta data-rh="true" property="og:title" content="Tezos | Ligo"><meta data-rh="true" name="description" content="General operations for Tezos"><meta data-rh="true" property="og:description" content="General operations for Tezos"><link data-rh="true" rel="icon" href="/previews/ligo/modules/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://ligolang.org/previews/ligo/modules/docs/1.6.0/reference/current-reference"><link data-rh="true" rel="alternate" href="https://ligolang.org/previews/ligo/modules/docs/1.6.0/reference/current-reference" hreflang="en"><link data-rh="true" rel="alternate" href="https://ligolang.org/previews/ligo/modules/docs/1.6.0/reference/current-reference" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ZJTW93II01-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/previews/ligo/modules/blog/rss.xml" title="Ligo RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/previews/ligo/modules/blog/atom.xml" title="Ligo Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Ligo" href="/previews/ligo/modules/opensearch.xml"><link rel="stylesheet" href="/previews/ligo/modules/assets/css/styles.95ea01ea.css">
<link rel="preload" href="/previews/ligo/modules/assets/js/runtime~main.f86f8c60.js" as="script">
<link rel="preload" href="/previews/ligo/modules/assets/js/main.86e62175.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#003ee0;color:#efefef" role="banner"><div class="content_knG7 announcementBarContent_xLdY"><b>Ligo v1 is now available ! <a href="/blog/v1-migration-guide">Check the migration guide</a> ! </b></div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/previews/ligo/modules/"><div class="navbar__logo"><img src="/previews/ligo/modules/img/logo/logo.svg" alt="LIGO Logo" class="themedImage_ToTc themedImage--light_HNdA" height="32" width="104"><img src="/previews/ligo/modules/img/logo/logo-night.svg" alt="LIGO Logo" class="themedImage_ToTc themedImage--dark_i4oU" height="32" width="104"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/previews/ligo/modules/docs/1.6.0/intro/introduction">1.6.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/previews/ligo/modules/docs/next/reference/current-reference">Next</a></li><li><a class="dropdown__link" href="/previews/ligo/modules/docs/reference/current-reference">1.7.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/previews/ligo/modules/docs/1.6.0/reference/current-reference">1.6.0</a></li><li><a class="dropdown__link" href="/previews/ligo/modules/docs/1.5.0/reference/current-reference">1.5.0</a></li></ul></div><a class="navbar__item navbar__link" target="_self" href="/previews/ligo/modules/docs/intro/introduction">Docs</a><a class="navbar__item navbar__link" href="/previews/ligo/modules/docs/reference/toplevel-reference">API</a><a class="navbar__item navbar__link" href="/previews/ligo/modules/docs/faq/intro">FAQ</a><a class="navbar__item navbar__link" href="/previews/ligo/modules/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://packages.ligolang.org/packages" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Registry</a><a href="https://ide.ligolang.org/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Web IDE</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Ligo<!-- --> <b>1.6.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/previews/ligo/modules/docs/reference/current-reference">latest version</a></b> (<!-- -->1.7.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 1.6.0</span><div class="theme-doc-markdown markdown"><header><h1>Tezos</h1></header><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">get_balance</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">_u</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> tez</span></div></h4><p>Get the balance for the contract.</p><div class="codeBlockContent_vqWU"><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button><div tabindex="0" class="prism-code language-jsligo codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> check </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">p</span><span class="token operator">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> s</span><span class="token operator">:</span><span class="token plain"> tez</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">list</span><span class="token operator">&lt;</span><span class="token plain">operation</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tez</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> Tezos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get_balance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div></div><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">get_now</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">_u </span><span class="token operator" style="color:#063289">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> timestamp</span></div></h4><p>Returns the current time as a <a href="https://en.wikipedia.org/wiki/Unix_time" target="_blank" rel="noopener noreferrer">UNIX timestamp</a>.</p><p>In LIGO, timestamps are type compatible in operations with
integers. This lets you set for instance time constraints for your
smart contracts like this:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="24-hours-from-now">24 hours from now<a href="#24-hours-from-now" class="hash-link" aria-label="Direct link to 24 hours from now" title="Direct link to 24 hours from now">​</a></h4><div class="codeBlockContent_vqWU"><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button><div tabindex="0" class="prism-code language-jsligo codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> today         </span><span class="token operator">=</span><span class="token plain"> Tezos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get_now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> one_day       </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">86_400</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> in_24_hrs     </span><span class="token operator">=</span><span class="token plain"> today </span><span class="token operator">+</span><span class="token plain"> one_day</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> some_date     </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2000-01-01t10:10:10Z&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> timestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> one_day_later </span><span class="token operator">=</span><span class="token plain"> some_date </span><span class="token operator">+</span><span class="token plain"> one_day</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="24-hours-ago">24 hours ago<a href="#24-hours-ago" class="hash-link" aria-label="Direct link to 24 hours ago" title="Direct link to 24 hours ago">​</a></h4><div class="codeBlockContent_vqWU"><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button><div tabindex="0" class="prism-code language-jsligo codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> today     </span><span class="token operator">=</span><span class="token plain"> Tezos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get_now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> one_day   </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">86_400</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> in_24_hrs </span><span class="token operator">=</span><span class="token plain"> today </span><span class="token operator">-</span><span class="token plain"> one_day</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="comparing-timestamps">Comparing Timestamps<a href="#comparing-timestamps" class="hash-link" aria-label="Direct link to Comparing Timestamps" title="Direct link to Comparing Timestamps">​</a></h4><p>You can also compare timestamps using the same comparison operators as
for numbers</p><div class="codeBlockContent_vqWU"><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button><div tabindex="0" class="prism-code language-jsligo codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> not_tomorrow </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Tezos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get_now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">==</span><span class="token plain"> in_24_hrs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div></div><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">get_amount</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">_u </span><span class="token operator" style="color:#063289">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> tez</span></div></h4><p>Get the amount of tez provided by the sender to complete this
transaction.</p><div class="codeBlockContent_vqWU"><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button><div tabindex="0" class="prism-code language-jsligo codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">threshold</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">p </span><span class="token operator">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Tezos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get_amount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">==</span><span class="token plain"> 100tez</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token number">42</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div></div><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">get_sender</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">_u </span><span class="token operator" style="color:#063289">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> address</span></div></h4><p>Get the address that initiated the current transaction.</p><div class="codeBlockContent_vqWU"><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button><div tabindex="0" class="prism-code language-jsligo codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">check</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">p </span><span class="token operator">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> Tezos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get_sender</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div></div><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">address</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">contract</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> contract</span><span class="token operator" style="color:#063289">&lt;</span><span class="token plain">&#x27;a</span><span class="token operator" style="color:#063289">&gt;</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> address</span></div></h4><p>Get the address associated with a value of type <code>contract</code>.</p><div class="codeBlockContent_vqWU"><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button><div tabindex="0" class="prism-code language-jsligo codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">check</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">p </span><span class="token operator">:</span><span class="token plain"> key_hash</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> c </span><span class="token operator">=</span><span class="token plain"> Tezos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">implicit_account</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">p</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> Tezos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">c</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div></div><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">get_self_address</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">_u </span><span class="token operator" style="color:#063289">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> address</span></div></h4><p>Get the address of the currently running contract.</p><div class="codeBlockContent_vqWU"><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button><div tabindex="0" class="prism-code language-jsligo codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">check</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">p </span><span class="token operator">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> Tezos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get_self_address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div></div><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">self</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">entrypoint</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> contract</span><span class="token operator" style="color:#063289">&lt;</span><span class="token plain">&#x27;a</span><span class="token operator" style="color:#063289">&gt;</span></div></h4><p>Typecast the currently running contract with an entrypoint annotation.
If you are using entrypoints, use &quot;%bar&quot; for a constructor &quot;Bar&quot;. If
you are not using entrypoints: use &quot;%default&quot;</p><div class="codeBlockContent_vqWU"><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button><div tabindex="0" class="prism-code language-jsligo codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">check</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">p</span><span class="token operator">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> Tezos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;%default&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div></div><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">implicit_account</span><span class="token plain"> </span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">_</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> key_hash</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> contract</span><span class="token operator" style="color:#063289">&lt;</span><span class="token plain">unit</span><span class="token operator" style="color:#063289">&gt;</span></div></h4><p>Get the default contract associated with an on-chain key-pair. This
contract does not execute code, instead it exists to receive tokens on
behalf of a key&#x27;s owner.</p><p>See also: <a href="http://tezos.gitlab.io/user/glossary.html#implicit-account" target="_blank" rel="noopener noreferrer">http://tezos.gitlab.io/user/glossary.html#implicit-account</a></p><div class="codeBlockContent_vqWU"><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button><div tabindex="0" class="prism-code language-jsligo codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">check</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">kh</span><span class="token operator">:</span><span class="token plain"> key_hash</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> Tezos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">implicit_account</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">kh</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div></div><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">get_source</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">_u </span><span class="token operator" style="color:#063289">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> address</span></div></h4><p>Get the <em>originator</em> (address) of the current transaction. That is, if
a chain of transactions led to the current execution get the address
that began the chain. Not to be confused with <code>Tezos.get_sender</code>, which
gives the address of the contract or user which directly caused the
current transaction.</p><blockquote><p>⚠️ There are a few caveats you should keep in mind before using
<code>Tezos.get_source</code> over <code>Tezos.get_sender</code>:</p><ol><li><code>Tezos.get_source</code> will never be a contract, so if you want to allow
contracts (multisigs etc) to operate your contract, you need to
use <code>Tezos.get_sender</code></li><li><a href="https://vessenes.com/tx-origin-and-ethereum-oh-my/" target="_blank" rel="noopener noreferrer">https://vessenes.com/tx-origin-and-ethereum-oh-my/</a> -- in general
it is somewhat unsafe to assume that <code>Tezos.get_source</code> understands
everything that is going to happen in a transaction. If
<code>Tezos.get_source</code> transfers to a malicious (or sufficiently
attackable) contract, that contract might potentially transfer to
yours, without <code>Tezos.get_source</code>&#x27;s consent. So if you are using
<code>Tezos.get_source</code> for authentication, you risk being confused. A
good historical example of this is bakers paying out delegation
rewards. Naive bakers did (and probably still do) just use
tezos-client to transfer to whatever KT1 delegates they had, even
if those KT1 were malicious scripts.</li></ol></blockquote><div class="codeBlockContent_vqWU"><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button><div tabindex="0" class="prism-code language-jsligo codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">check</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">p </span><span class="token operator">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> Tezos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get_source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div></div><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">failwith</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">message</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> &#x27;a</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> unit</span></div></h4><p><a href="/previews/ligo/modules/docs/1.6.0/reference/toplevel-reference#failwith">See <code>failwith</code></a></p><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">get_chain_id</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">_u </span><span class="token operator" style="color:#063289">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> chain_id</span></div></h4><p>Get the identifier of the chain to distinguish between main and test chains.</p><p>This is mainly intended to avoid replay attacks between the chains, and can currently
only be used together with <code>Bytes.pack</code> and <code>Bytes.unpack</code>.</p><div class="codeBlockContent_vqWU"><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button><div tabindex="0" class="prism-code language-jsligo codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token class-name">storage</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token decorator at operator">@</span><span class="token decorator function" style="color:rgb(80, 250, 123)">entry</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> main </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_ignore</span><span class="token operator">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> storage</span><span class="token operator">:</span><span class="token plain"> storage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">list</span><span class="token operator">&lt;</span><span class="token plain">operation</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> storage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> packed </span><span class="token operator">=</span><span class="token plain"> Bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">pack</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Tezos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get_chain_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">storage </span><span class="token operator">!=</span><span class="token plain"> packed</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">failwith</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;wrong chain&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">list</span><span class="token operator">&lt;</span><span class="token plain">operation</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> storage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> packed</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div></div><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> transaction</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">action</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token string" style="color:#728fcb">&#x27;param, amount: mutez, contract: contract&lt;&#x27;</span><span class="token plain">param</span><span class="token operator" style="color:#063289">&gt;</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> operation</span></div></h4><p>Transfer <code>tez</code> to an account, or run code of another smart contract.</p><p>To indicate an account, use <code>unit</code> as <code>param</code>.</p><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> create_contract </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">contract</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token string" style="color:#728fcb">&#x27;param, &#x27;</span><span class="token plain">storage</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">list </span><span class="token operator" style="color:#063289">&lt;</span><span class="token plain">operation</span><span class="token operator" style="color:#063289">&gt;</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> </span><span class="token string" style="color:#728fcb">&#x27;storage), delegate: option&lt;key_hash&gt;, balance: tez, init: &#x27;</span><span class="token plain">storage</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">[</span><span class="token plain">operation</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> address</span><span class="token punctuation" style="color:#b6ad9a">]</span></div></h4><p>Construct an operation that originates a contract from a function. The
optional argument of type <code>key_hash</code> represents a delegate.</p><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">set_delegate</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">delegate</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> option</span><span class="token operator" style="color:#063289">&lt;</span><span class="token plain">key_hash</span><span class="token operator" style="color:#063289">&gt;</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> operation</span></div></h4><p>Modify the <a href="http://tezos.gitlab.io/user/glossary.html?highlight=delegate#delegate" target="_blank" rel="noopener noreferrer">delegate</a> of the current contract.</p><p>The operation fails when:</p><ul><li>the delegate is the same as current delegate</li><li>the keyhash is not of a registered delegate</li></ul><p>Use <code>None</code> to withdraw the current delegate.</p><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">get_contract_opt</span><span class="token plain"> </span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">a</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> address</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> option</span><span class="token operator" style="color:#063289">&lt;</span><span class="token plain">contract</span><span class="token operator" style="color:#063289">&lt;</span><span class="token plain">&#x27;param</span><span class="token operator" style="color:#063289">&gt;&gt;</span></div></h4><p>Get a contract from an address.</p><p>When no contract is found or the contract doesn&#x27;t match the type,
<code>None</code> is returned.</p><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">get_contract_with_error</span><span class="token plain"> </span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">a</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> address</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain">s</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> contract</span><span class="token operator" style="color:#063289">&lt;</span><span class="token plain">&#x27;param</span><span class="token operator" style="color:#063289">&gt;</span></div></h4><p>Get a contract from an address.</p><p>When no contract is found, fail with the provided string</p><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">get_entrypoint_opt</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">entrypoint</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> a</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> address</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> option</span><span class="token operator" style="color:#063289">&lt;</span><span class="token plain">contract</span><span class="token operator" style="color:#063289">&lt;</span><span class="token plain">&#x27;param</span><span class="token operator" style="color:#063289">&gt;&gt;</span></div></h4><p>Get a contract from an address and entrypoint.</p><p>Entrypoints are written in the form of: <code>%entrypoint</code>.</p><p>When no contract is found or the contract doesn&#x27;t match the type,
<code>None</code> is returned.</p><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">get_level</span><span class="token plain"> </span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">_u </span><span class="token operator" style="color:#063289">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> nat</span></div></h4><p>Get the current block level.</p><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">min_block_time</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> unit </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> nat</span><span class="token punctuation" style="color:#b6ad9a">;</span></div></h4><p>Returns the current minimal time between blocks, the value is obtained from the protocol’s minimal_block_delay constant.</p><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> pairing_check</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> list</span><span class="token operator" style="color:#063289">&lt;</span><span class="token punctuation" style="color:#b6ad9a">[</span><span class="token plain">bls12_381_g1</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> bls12_381_g2</span><span class="token punctuation" style="color:#b6ad9a">]</span><span class="token operator" style="color:#063289">&gt;</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> bool</span></div></h4><p>Verify that the product of pairings of the given list of points is equal to 1 in Fq12. Returns true if the list is empty.
Can be used to verify if two pairings P1 and P2 are equal by verifying <code>P1 * P2^(-1) = 1</code>.
(extracted from Tezos documentation)</p><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">never</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token builtin">never</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token builtin">never</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> &#x27;a</span></div></h4><p>Eliminate a value of the type <code>never</code> using the instruction <code>NEVER</code>
from Michelson.</p><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">get_total_voting_power</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">_u </span><span class="token operator" style="color:#063289">:</span><span class="token plain"> unit</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> nat</span></div></h4><p>Return the total voting power of all contracts. The total voting power coincides with the sum of the rolls count of every contract in the voting listings. The voting listings is calculated at the beginning of every voting period.</p><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">voting_power</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">key_hash</span><span class="token operator" style="color:#063289">:</span><span class="token plain">key_hash</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> nat</span></div></h4><p>Return the voting power of a given contract. The voting power value is the full staking power of the delegate, currently expressed in mutez. Though, developers should not rely on <code>Tezos.voting_power</code> to query the staking power of a contract in mutez: the value returned by <code>Tezos.voting_power</code> is still of type<code>nat and it should only be considered relative to</code>Tezos.total_voting_power`.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sapling">Sapling<a href="#sapling" class="hash-link" aria-label="Direct link to Sapling" title="Direct link to Sapling">​</a></h2><p>Delphi protocol introduced the following sapling types (state and transaction) with N being an int singleton</p><div class="codeBlockContent_vqWU"><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button><div tabindex="0" class="prism-code language-jsligo codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token class-name">st</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> sapling_state</span><span class="token operator">&lt;</span><span class="token number">8</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token class-name">tr</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> sapling_transaction</span><span class="token operator">&lt;</span><span class="token number">8</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div></div><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> sapling_empty_state</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> sapling_state</span><span class="token operator" style="color:#063289">&lt;</span><span class="token plain">n</span><span class="token operator" style="color:#063289">&gt;</span></div></h4><div class="codeBlockContent_vqWU"><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button><div tabindex="0" class="prism-code language-jsligo codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> Tezos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sapling_empty_state </span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div></div><p>Sapling empty state</p><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> sapling_verify_update</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> sapling_transaction</span><span class="token operator" style="color:#063289">&lt;</span><span class="token string" style="color:#728fcb">&#x27;a&gt; =&gt; sapling_state&lt;&#x27;</span><span class="token plain">a</span><span class="token operator" style="color:#063289">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> option</span><span class="token operator" style="color:#063289">&lt;</span><span class="token punctuation" style="color:#b6ad9a">[</span><span class="token plain">bytes</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">[</span><span class="token plain">int</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> sapling_state</span><span class="token operator" style="color:#063289">&lt;</span><span class="token plain">&#x27;a</span><span class="token operator" style="color:#063289">&gt;</span><span class="token punctuation" style="color:#b6ad9a">]</span><span class="token punctuation" style="color:#b6ad9a">]</span><span class="token operator" style="color:#063289">&gt;</span></div></h4><p>Verify sapling update</p><div class="codeBlockContent_vqWU"><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button><div tabindex="0" class="prism-code language-jsligo codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">f</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">tr </span><span class="token operator">:</span><span class="token plain"> tr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">match</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Tezos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">sapling_verify_update</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">tr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">when</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">Some</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">p</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">when</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">None</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">failwith</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;failed&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="linearity">Linearity<a href="#linearity" class="hash-link" aria-label="Direct link to Linearity" title="Direct link to Linearity">​</a></h3><p>If a contract storage type contains a ticket, you must destructure the parameter-storage pair within the body to preserve storage linearity (e.g. avoid <code>DUP</code>-ing storage).
For the same reasons, if tickets are stored in a <code>map</code>/<code>big_map</code> you must use the new operator <code>get_and_update</code> to update your bindings.</p><div class="codeBlockContent_vqWU"><button type="button" aria-label="Copy code to clipboard" class="copyButton_H_xL">Copy</button><div tabindex="0" class="prism-code language-jsligo codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token class-name">storage</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> big_map</span><span class="token operator">&lt;</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ticket</span><span class="token operator">&lt;</span><span class="token plain">int</span><span class="token operator">&gt;&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token class-name">parameter</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> int </span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token class-name">result</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">list</span><span class="token operator">&lt;</span><span class="token plain">operation</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> storage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token decorator at operator">@</span><span class="token decorator function" style="color:rgb(80, 250, 123)">entry</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">main</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">i</span><span class="token operator">:</span><span class="token plain"> parameter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> store </span><span class="token operator">:</span><span class="token plain"> storage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> result </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> my_ticket1 </span><span class="token operator">=</span><span class="token plain"> Option</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">unopt</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Tezos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">create_ticket</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10n</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">_x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ret</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> Big_map</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">get_and_update</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">Some</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">my_ticket1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> store</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ret</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="timelock">Timelock<a href="#timelock" class="hash-link" aria-label="Direct link to Timelock" title="Direct link to Timelock">​</a></h2><div></div><h4 class="prism-code language-jsligo" style="background-color:var(--ifm-background-color);font-family:var(--ifm-font-family-monospace);line-height:var(--ifm-pre-line-height);font-size:1.1rem;font-weight:bold;padding:0;white-space:break-spaces;margin-top:3rem"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">let</span><span class="token plain"> </span><span class="token function-variable function" style="color:#b29762">open_chest</span><span class="token plain"> </span><span class="token operator" style="color:#063289">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">key</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> chest_key</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> chest</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> chest</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> time</span><span class="token operator" style="color:#063289">:</span><span class="token plain"> nat</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=&gt;</span><span class="token plain"> option</span><span class="token operator" style="color:#063289">&lt;</span><span class="token plain">bytes</span><span class="token operator" style="color:#063289">&gt;</span></div></h4><p>Open a timelocked chest given its key and the time.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div></div></div></main></div></div><footer><div class="footer"><div class="container footer__content_WVEf"><div class="footer__brand_I2nm"><div class="footer__bottom"><div class="margin-bottom--sm"><img src="/previews/ligo/modules/img/ligo-logo.svg" alt="Ligo Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="50" height="50"><img src="/previews/ligo/modules/img/ligo-logo-light.svg" alt="Ligo Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="50" height="50"></div></div><h3>Ligo</h3><p class="footer__brand-subtitle_zMnG">The smart-contract language tailored for Tezos.</p></div><div class="footer__links_r5Qx"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">LEARN LIGO</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/previews/ligo/modules/docs/intro/introduction">Get started</a></li><li class="footer__item"><a href="https://packages.ligolang.org/packages" target="_blank" rel="noopener noreferrer" class="footer__link-item">Registry<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/previews/ligo/modules/docs/api/cli-commands">Ligo CLI</a></li><li class="footer__item"><a class="footer__link-item" href="/previews/ligo/modules/docs/intro/changelog">Changelog</a></li><li class="footer__item"><a class="footer__link-item" href="/previews/ligo/modules/docs/faq/intro">FAQ</a></li></ul></div><div class="col footer__col"><div class="footer__title">COMMUNITY</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/tezos" target="_blank" rel="noopener noreferrer nofollow" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/playlist?list=PLmDOlM4rqLvInuervAU4YuU39ThuHw3fM" target="_blank" rel="noopener noreferrer nofollow" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/LigoLang" target="_blank" rel="noopener noreferrer nofollow" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/LigoLang" target="_blank" rel="noopener noreferrer nofollow" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/marigold-ligolang/" target="_blank" rel="noopener noreferrer nofollow" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">CONTRIBUTE</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://gitlab.com/ligolang/ligo" target="_blank" rel="noopener noreferrer nofollow" class="footer__link-item">Sources<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitlab.com/ligolang/ligo/-/issues" target="_blank" rel="noopener noreferrer nofollow" class="footer__link-item">Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://bounties.ligolang.org" target="_blank" rel="noopener noreferrer nofollow" class="footer__link-item">Bounties<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></div></div><div class="footer__after_KMLT"><div class="container footer__after-content_aHcP"><div class="footer__copyright">Copyright © 2024 LIGO. All rights reserved.</div><ul class="footer__socials_NwWN"><li class="footer__socials-item_RXZT"><a href="https://discord.gg/tezos" target="_blank" rel="noopener noreferrer nofollow"><img src="/previews/ligo/modules/img/communication_channels/discord.svg" height="30" width="30" alt="" loading="lazy" decoding="async"><span class="sr-only">Join the Ligo Discord server. We&#x27;re here to help.</span></a></li><li class="footer__socials-item_RXZT"><a href="https://www.youtube.com/playlist?list=PLmDOlM4rqLvInuervAU4YuU39ThuHw3fM" target="_blank" rel="noopener noreferrer nofollow"><img src="/previews/ligo/modules/img/communication_channels/youtube.svg" height="26" width="33" alt="" loading="lazy" decoding="async"><span class="sr-only">See Ligo latest videos on YouTube</span></a></li><li class="footer__socials-item_RXZT"><a href="https://gitlab.com/ligolang/ligo/issues" target="_blank" rel="noopener noreferrer nofollow"><img src="/previews/ligo/modules/img/communication_channels/gitlab.svg" height="30" width="30" alt="" loading="lazy" decoding="async"><span class="sr-only">Need a fix? Create an issue on the Ligo GitLab.</span></a></li><li class="footer__socials-item_RXZT"><a href="https://x.com/ligolang" target="_blank" rel="noopener noreferrer nofollow"><img src="/previews/ligo/modules/img/communication_channels/x.svg" height="26" width="26" alt="" loading="lazy" decoding="async"><span class="sr-only">Follow Ligo on X / Twitter to get news.</span></a></li><li class="footer__socials-item_RXZT"><a href="https://t.me/LigoLang" target="_blank" rel="noopener noreferrer nofollow"><img src="/previews/ligo/modules/img/communication_channels/telegram.svg" height="30" width="30" alt="" loading="lazy" decoding="async"><span class="sr-only">Talk with Ligo team on Telegram</span></a></li><li class="footer__socials-item_RXZT"><a href="https://www.linkedin.com/company/marigold-ligolang/" target="_blank" rel="noopener noreferrer nofollow"><img src="/previews/ligo/modules/img/communication_channels/linkedin.svg" height="30" width="30" alt="" loading="lazy" decoding="async"><span class="sr-only">Discover Ligo on LinkedIn</span></a></li></ul></div></div></footer></div>
<script src="/previews/ligo/modules/assets/js/runtime~main.f86f8c60.js"></script>
<script src="/previews/ligo/modules/assets/js/main.86e62175.js"></script>
</body>
</html>