"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[82944],{3905:(t,e,a)=>{a.d(e,{Zo:()=>c,kt:()=>u});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function s(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var l=n.createContext({}),p=function(t){var e=n.useContext(l),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},c=function(t){var e=p(t.components);return n.createElement(l.Provider,{value:e},t.children)},m={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},d=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,o=t.originalType,l=t.parentName,c=s(t,["components","mdxType","originalType","parentName"]),d=p(a),u=r,h=d["".concat(l,".").concat(u)]||d[u]||m[u]||o;return a?n.createElement(h,i(i({ref:e},c),{},{components:a})):n.createElement(h,i({ref:e},c))}));function u(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var o=a.length,i=new Array(o);i[0]=d;var s={};for(var l in e)hasOwnProperty.call(e,l)&&(s[l]=e[l]);s.originalType=t,s.mdxType="string"==typeof t?t:r,i[1]=s;for(var p=2;p<o;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},44590:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const o={id:"getting-started",title:"Quickstart"},i=void 0,s={unversionedId:"tutorials/getting-started/getting-started",id:"tutorials/getting-started/getting-started",title:"Quickstart",description:"This section is aimed at newcomers to LIGO and Tezos smart contracts.",source:"@site/../docs/tutorials/getting-started/getting-started.md",sourceDirName:"tutorials/getting-started",slug:"/tutorials/getting-started/",permalink:"/previews/ligo/tacoshop/docs/next/tutorials/getting-started/",draft:!1,tags:[],version:"current",frontMatter:{id:"getting-started",title:"Quickstart"}},l={},p=[{value:"Before you start",id:"before-you-start",level:2},{value:"What is a smart contract?",id:"what-is-a-smart-contract",level:2},{value:"Writing the smart contract code",id:"writing-the-smart-contract-code",level:2},{value:"Trying out the contract",id:"trying-out-the-contract",level:2},{value:"Testing the contract",id:"testing-the-contract",level:2},{value:"Compiling the contract",id:"compiling-the-contract",level:2},{value:"Setting up the Octez client and a local wallet",id:"setting-up-the-octez-client-and-a-local-wallet",level:2},{value:"Deploying the contract",id:"deploying-the-contract",level:2},{value:"Calling the contract",id:"calling-the-contract",level:2},{value:"Next steps",id:"next-steps",level:2}],c=(m="Syntax",function(t){return console.warn("Component "+m+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)});var m;const d={toc:p};function u(t){let{components:e,...a}=t;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"This section is aimed at newcomers to LIGO and Tezos smart contracts.\nIn this tutorial, we will go through the following steps:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Writing a simple contract"),(0,r.kt)("li",{parentName:"ul"},"Testing the contract"),(0,r.kt)("li",{parentName:"ul"},"Deploying the contract to Tezos")),(0,r.kt)("h2",{id:"before-you-start"},"Before you start"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Install LIGO on your computer as described in ",(0,r.kt)("a",{parentName:"p",href:"../../intro/installation"},"Installation"),".\nYou can also use the ",(0,r.kt)("a",{parentName:"p",href:"https://ide.ligolang.org"},"Online IDE")," but these instructions are for working with LIGO locally.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Select a syntax.\nYou can use JsLIGO for a JavaScript-like syntax or CameLIGO for an OCaml-like syntax."),(0,r.kt)("p",{parentName:"li"},'  This page provides instructions for both syntaxes.\nTo show the instructions for your syntax, select it under "Syntax Preference" at the top left of the page.')),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Optional: Install the ",(0,r.kt)("a",{parentName:"p",href:"../../intro/editor-support"},"IDE plugin")," for your IDE."))),(0,r.kt)("h2",{id:"what-is-a-smart-contract"},"What is a smart contract?"),(0,r.kt)("p",null,"LIGO is a domain-specific language for writing smart contracts on the Tezos blockchain.\nA smart contract is a piece of code stored on a blockchain.\nIt contains a set of instructions and rules to trigger them.\nAfter it is deployed, it becomes immutable, but a user can trigger the execution of the code without modifying it."),(0,r.kt)("p",null,"A smart contract is composed of three elements:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Its balance: a contract is a kind of Tezos account, and can receive and send tez tokens"),(0,r.kt)("li",{parentName:"ul"},"Its storage: data that is dedicated to and can be read and written by the contract"),(0,r.kt)("li",{parentName:"ul"},"Its code: one or more entrypoints, which are a kind of function that can be called either from outside the chain or from other contracts")),(0,r.kt)("p",null,"For more information about smart contracts on Tezos, see ",(0,r.kt)("a",{parentName:"p",href:"https://docs.tezos.com/smart-contracts"},"Smart contracts")," on docs.tezos.com."),(0,r.kt)("h2",{id:"writing-the-smart-contract-code"},"Writing the smart contract code"),(0,r.kt)("p",null,"These instructions walk you through creating a contract that acts as a counter.\nIt stores a single integer and provides entrypoints that allow users to pass an integer to add or subtract from the current value of the counter."),(0,r.kt)("p",null,"The only way to change the integer in storage is through these entrypoints.\nThat illustrates how you can store data in a smart contract and enforce specific rules about how that data can change."),(0,r.kt)("p",null,"Follow these steps to write the code for the contract:"),(0,r.kt)(c,{syntax:"cameligo",mdxType:"Syntax"},(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"On your computer, create a folder to store the contract file, such as ",(0,r.kt)("inlineCode",{parentName:"p"},"ligo_tutorial"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create a file with the extension ",(0,r.kt)("inlineCode",{parentName:"p"},".mligo"),", which indicates CameLIGO code, such as ",(0,r.kt)("inlineCode",{parentName:"p"},"counter.mligo"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In any code or text editor, add this code to the file:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-cameligo"},"type storage = int\ntype return_type = operation list * storage\n")),(0,r.kt)("p",{parentName:"li"},"This code defines two data types:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"A type that represents the storage for the contract.\nIn this case, the contract stores an integer, but contracts can define more complex data types to store more data."),(0,r.kt)("li",{parentName:"ul"},"A type that represents what the contract entrypoints return.\nLIGO entrypoints always return a list of operations to run after the entrypoint completes and the new state of the storage."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Add an entrypoint named ",(0,r.kt)("inlineCode",{parentName:"p"},"add")," that accepts an integer as a parameter and adds it to the storage value:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-cameligo"},"[@entry] let add (n : int) (storage : storage) : result = [], storage + n\n")),(0,r.kt)("p",{parentName:"li"},"This line creates a function and annotates it with ",(0,r.kt)("inlineCode",{parentName:"p"},"[@entry]"),", which indicates that it is an entrypoint that users can call.\nContracts can also include internal functions that are not annotated."),(0,r.kt)("p",{parentName:"li"},"The function accepts an integer and the current state of the storage as parameters.\nAll entrypoints receive the storage state as their final parameter.\nThe function returns an empty list of operations to run next and the new state of the storage, which in this case is the current integer in storage plus the integer that the caller passed.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Similarly, add an entrypoint named ",(0,r.kt)("inlineCode",{parentName:"p"},"sub")," that accepts an integer and subtracts it from the storage value:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-cameligo"},"[@entry] let sub (n : int) (storage : storage) : result = [], storage - n\n")))),(0,r.kt)("p",null,"The complete contract looks like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cameligo",metastring:"group=a",group:"a"},"type storage = int\ntype return_type = operation list * storage\n\n[@entry] let add (n : int) (storage : storage) : return_type = [], storage + n\n[@entry] let sub (n : int) (storage : storage) : return_type = [], storage - n\n"))),(0,r.kt)(c,{syntax:"jsligo",mdxType:"Syntax"},(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"On your computer, create a folder to store the contract file, such as ",(0,r.kt)("inlineCode",{parentName:"p"},"ligo_tutorial"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create a file with the extension ",(0,r.kt)("inlineCode",{parentName:"p"},".jsligo"),", which indicates JsLIGO code, such as ",(0,r.kt)("inlineCode",{parentName:"p"},"counter.jsligo"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In any code or text editor, add this code to the file:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-jsligo"},"type storage = int;\ntype return_type = [list<operation>, storage];\n")),(0,r.kt)("p",{parentName:"li"},"This code defines two data types:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"A type that represents the storage for the contract.\nIn this case, the contract stores an integer, but contracts can define more complex data types to store more data."),(0,r.kt)("li",{parentName:"ul"},"A type that represents what the contract entrypoints return.\nLIGO entrypoints always return a list of operations to run after the entrypoint completes and the new state of the storage."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Add an entrypoint named ",(0,r.kt)("inlineCode",{parentName:"p"},"add")," that accepts an integer as a parameter and adds it to the storage value:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-jsligo"},"@entry\nconst add = (n : int, storage : storage) : return_type => [[], storage + n];\n")),(0,r.kt)("p",{parentName:"li"},"These lines create a function and annotate it with ",(0,r.kt)("inlineCode",{parentName:"p"},"@entry"),", which indicates that it is an entrypoint that users can call.\nContracts can also include internal functions that are not annotated."),(0,r.kt)("p",{parentName:"li"},"The function accepts an integer and the current state of the storage as parameters.\nAll entrypoints receive the storage state as their final parameter.\nThe function returns an empty list of operations to run next and the new state of the storage, which in this case is the current integer in storage plus the integer that the caller passed.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Similarly, add an entrypoint named ",(0,r.kt)("inlineCode",{parentName:"p"},"sub")," that accepts an integer and subtracts it from the storage value:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-jsligo"},"@entry\nconst sub = (n : int, storage : storage) : return_type => [[], storage - n];\n")))),(0,r.kt)("p",null,"The complete contract looks like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsligo",metastring:"group=a",group:"a"},"type storage = int;\ntype return_type = [list<operation>, storage];\n\n@entry\nconst add = (n : int, storage : storage) : return_type => [[], storage + n];\n\n@entry\nconst sub = (n : int, storage : storage) : return_type => [[], storage - n];\n"))),(0,r.kt)("p",null,"That's all that is necessary for a very simple LIGO smart contract."),(0,r.kt)("h2",{id:"trying-out-the-contract"},"Trying out the contract"),(0,r.kt)("p",null,"To make sure the contract works as intended, you can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"run dry-run")," command to simulate a call to one of its entrypoints.\nFor example, to simulate a call to the ",(0,r.kt)("inlineCode",{parentName:"p"},"add")," entrypoint, pass the file name, the entrypoint and parameter, and the current state of the storage, as in this example:"),(0,r.kt)(c,{syntax:"cameligo",mdxType:"Syntax"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ligo run dry-run counter.mligo 'Add(3)' '5'\n"))),(0,r.kt)(c,{syntax:"jsligo",mdxType:"Syntax"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ligo run dry-run counter.jsligo 'Add(3)' '5'\n"))),(0,r.kt)("p",null,"This command sets the initial storage value to 5 and passes 3 to the ",(0,r.kt)("inlineCode",{parentName:"p"},"add")," entrypoint.\nNote that the function name in the code starts with a lower-case letter but the ",(0,r.kt)("inlineCode",{parentName:"p"},"run dry-run")," command uses entrypoint names that start with an upper-case letter.\nThe result is the return value of the entrypoint, which includes an empty list of operations to run next and the new value of the storage:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"( LIST_EMPTY() , 8 )\n")),(0,r.kt)("p",null,"This way you can test entrypoints manually with different storage states."),(0,r.kt)("h2",{id:"testing-the-contract"},"Testing the contract"),(0,r.kt)("p",null,"Testing contracts is critical because their code cannot be changed after deployment.\nFor a more powerful way to test contracts than the ",(0,r.kt)("inlineCode",{parentName:"p"},"run dry-run")," command, you can include automated tests in the contract code."),(0,r.kt)("p",null,"Follow these steps to add an automated test to the contract:"),(0,r.kt)(c,{syntax:"cameligo",mdxType:"Syntax"},(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In your contract file, wrap the existing code in a module:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-cameligo"},"module Counter = struct\n  type storage = int\n  type return_type = operation list * storage\n\n  [@entry] let add (n : int) (storage : storage) : return_type = [], storage + n\n  [@entry] let sub (n : int) (storage : storage) : return_type = [], storage - n\nend\n")),(0,r.kt)("p",{parentName:"li"},"Modules in CameLIGO provide a scope to the identifiers (names of types, functions, variables, etc.) to prevent collisions between them.\nYou can access identifiers that are within a module with dot notation, as in ",(0,r.kt)("inlineCode",{parentName:"p"},"<module>.<identifier>"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"At the end of the file, outside of the module, add a function named ",(0,r.kt)("inlineCode",{parentName:"p"},"test_add"),":"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-cameligo"},"let test_add =\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Add code to ",(0,r.kt)("em",{parentName:"p"},"originate")," (deploy) the contract to the test environment:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-cameligo"},"let initial_storage = 10 in\nlet orig = Test.Next.Originate.contract (contract_of Counter) initial_storage 0tez in\n")),(0,r.kt)("p",{parentName:"li"},"This command simulates deploying the contract, setting its initial storage to 10, and setting its initial balance to 0 tez.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Add code to call the ",(0,r.kt)("inlineCode",{parentName:"p"},"add")," entrypoint and pass the value 32:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-cameligo"},'let _ = Test.Next.Contract.transfer_exn (Test.Next.Typed_address.get_entrypoint "add" orig.taddr) 32 0tez in\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Add code to verify that the new value of the storage is correct:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-cameligo"},"Assert.assert (Test.Next.Typed_address.get_storage(orig.taddr) = initial_storage + 32)\n")),(0,r.kt)("p",{parentName:"li"},"The complete code looks like this:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-cameligo",metastring:"group=b",group:"b"},'module Counter = struct\n  type storage = int\n  type return_type = operation list * storage\n\n  [@entry] let add (n : int) (storage : storage) : return_type = [], storage + n\n  [@entry] let sub (n : int) (storage : storage) : return_type = [], storage - n\nend\n\nlet test_add =\n  let initial_storage = 10 in\n  let orig = Test.Next.Originate.contract (contract_of Counter) initial_storage 0tez in\n  let _ = Test.Next.Contract.transfer_exn (Test.Next.Typed_address.get_entrypoint "add" orig.taddr) 32 0tez in\n  Assert.assert (Test.Next.Typed_address.get_storage(orig.taddr) = initial_storage + 32)\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Run this command to run the test:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ligo run test counter.mligo\n"))))),(0,r.kt)(c,{syntax:"jsligo",mdxType:"Syntax"},(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In your contract file, wrap the existing code in a namespace:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-jsligo"},"namespace Counter {\n  type storage = int;\n  type return_type = [list<operation>, storage];\n\n  @entry\n  const add = (n : int, storage : storage) : return_type => [[], storage + n];\n\n  @entry\n  const sub = (n : int, storage : storage) : return_type => [[], storage - n];\n};\n")),(0,r.kt)("p",{parentName:"li"},"Namespaces in JsLIGO provide a scope to the identifiers (names of types, functions, variables, etc.) to prevent collisions between them.\nYou can access identifiers that are within a namespace with dot notation, as in ",(0,r.kt)("inlineCode",{parentName:"p"},"<module>.<identifier>"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"At the end of the file, outside of the namespace, add a function named ",(0,r.kt)("inlineCode",{parentName:"p"},"test_add"),":"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-jsligo"},"const test_add = (() => {\n\n}) ()\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Inside the function, add code to ",(0,r.kt)("em",{parentName:"p"},"originate")," (deploy) the contract to the test environment:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-jsligo"},"const initial_storage = 10 as int;\nconst orig = Test.Next.Originate.contract(contract_of(Counter), initial_storage, 0tez);\n")),(0,r.kt)("p",{parentName:"li"},"This command simulates deploying the contract, setting its initial storage to 10, and setting its initial balance to 0 tez.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Add code to call the ",(0,r.kt)("inlineCode",{parentName:"p"},"add")," entrypoint and pass the value 32:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-jsligo"},'Test.Next.Contract.transfer_exn(Test.Next.Typed_address.get_entrypoint("add", orig.taddr), 32 as int, 0tez);\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Add code to verify that the new value of the storage is correct:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-jsligo"},"return Assert.assert(Test.Next.Typed_address.get_storage(orig.taddr) == initial_storage + 32);\n")),(0,r.kt)("p",{parentName:"li"},"The complete code looks like this:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-jsligo",metastring:"group=b",group:"b"},'namespace Counter {\n  type storage = int;\n  type return_type = [list<operation>, storage];\n\n  @entry\n  const add = (n : int, storage : storage) : return_type => [[], storage + n];\n\n  @entry\n  const sub = (n : int, storage : storage) : return_type => [[], storage - n];\n};\n\nconst test_add = (() => {\n  const initial_storage = 10 as int;\n  const orig = Test.Next.Originate.contract(contract_of(Counter), initial_storage, 0tez);\n  Test.Next.Contract.transfer_exn(Test.Next.Typed_address.get_entrypoint("add", orig.taddr), 32 as int, 0tez);\n  return Assert.assert(Test.Next.Typed_address.get_storage(orig.taddr) == initial_storage + 32);\n}) ()\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Run this command to run the test:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ligo run test counter.jsligo\n"))))),(0,r.kt)("p",null,"The output shows that the test ran successfully:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Everything at the top-level was executed.\n- test_add exited with value ().\n")),(0,r.kt)("h2",{id:"compiling-the-contract"},"Compiling the contract"),(0,r.kt)("p",null,"Tezos runs contracts in the Michelson stack-based language, so you must compile your contract from LIGO to Michelson.\nThe process also looks for errors in the LIGO code but it does not run the tests."),(0,r.kt)("p",null,"Run this command to compile the contract:"),(0,r.kt)(c,{syntax:"cameligo",mdxType:"Syntax"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ligo compile contract counter.mligo -m Counter -o counter.tz\n"))),(0,r.kt)(c,{syntax:"jsligo",mdxType:"Syntax"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ligo compile contract counter.jsligo -m Counter -o counter.tz\n"))),(0,r.kt)("p",null,"The command writes the output of the compilation to the file ",(0,r.kt)("inlineCode",{parentName:"p"},"counter.tz"),".\nThe compiled Michelson contract looks like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-michelson"},"{ parameter (or (int %sub) (int %add)) ;\n  storage int ;\n  code { UNPAIR ; IF_LEFT { SWAP ; SUB } { ADD } ; NIL operation ; PAIR } }\n")),(0,r.kt)("p",null,"If you see any errors, make sure your code looks like the code in the previous section."),(0,r.kt)("h2",{id:"setting-up-the-octez-client-and-a-local-wallet"},"Setting up the Octez client and a local wallet"),(0,r.kt)("p",null,"The Octez client is a command-line tool that lets you send transactions to Tezos, including deploying and calling smart contracts.\nThese instructions show how to install the client, connect it to the Ghostnet test network, and get some tez tokens to pay transaction fees."),(0,r.kt)("p",null,"The Ghostnet test network is just like the Tezos mainnet, so you can use it to try out your contracts in a live environment before you deploy them to mainnet."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install the Octez client, which sends transactions to Tezos.\n(The Octez suite includes many programs, but for now all you need is the Octez client.)"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"For Ubuntu, Windows WSL, and Linux distributions that use ",(0,r.kt)("inlineCode",{parentName:"p"},"apt"),", run these commands:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'REPO="ppa:serokell/tezos"\nsudo add-apt-repository -y $REPO && sudo apt-get update\nsudo apt-get install -y tezos-client\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"For Fedora and Linux distributions that use Copr, run these commands:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'REPO="@Serokell/Tezos"\ndnf copr enable -y $REPO && dnf update -y\ndnf install -y tezos-client\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"For MacOS, use ",(0,r.kt)("inlineCode",{parentName:"p"},"brew"),":"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"brew tap serokell/tezos-packaging-stable https://github.com/serokell/tezos-packaging-stable.git\nbrew install tezos-client\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"For other methods, see ",(0,r.kt)("a",{parentName:"p",href:"https://octez.tezos.com/docs/introduction/howtoget.html"},"https://octez.tezos.com/docs/introduction/howtoget.html"),".")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Verify that you have at least version 20 of the Octez client by running ",(0,r.kt)("inlineCode",{parentName:"p"},"octez-client --version")," and verifying that the version is at least 20.0.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Set the Octez client to use the Ghostnet test network:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"If you just installed Octez for the first time, run this command:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"octez-client -E https://rpc.ghostnet.teztnets.com config init\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"If you already had Octez installed, run this command:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"octez-client -E https://rpc.ghostnet.teztnets.com config update\n"))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Verify that you are using Ghostnet by running ",(0,r.kt)("inlineCode",{parentName:"p"},"octez-client config show")," and verifying that the ",(0,r.kt)("inlineCode",{parentName:"p"},"endpoint")," field shows ",(0,r.kt)("inlineCode",{parentName:"p"},"https://rpc.ghostnet.teztnets.com"),", as in this example:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},'{ "base_dir": "/Users/me/.tezos-client",\n  "endpoint": "https://rpc.ghostnet.teztnets.com", "web_port": 8080,\n  "confirmations": 0 }\n'))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Optional: Disable the warning message about using a test network by running this command:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"export TEZOS_CLIENT_UNSAFE_DISABLE_DISCLAIMER=y\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In the Octez client, create a wallet by running this command:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"octez-client gen keys local_wallet\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Get your account's address by running this command:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"octez-client show address local_wallet\n")),(0,r.kt)("p",{parentName:"li"},"The Octez client prints the address of the new wallet in the ",(0,r.kt)("inlineCode",{parentName:"p"},"hash")," field.\nThe wallet address begins with ",(0,r.kt)("inlineCode",{parentName:"p"},"tz1"),", as in this example:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"Hash: tz1dW9Mk...........H67L\nPublic Key: edp.............................bjbeDj\n")),(0,r.kt)("p",{parentName:"li"},"You need the wallet address to send funds to the wallet, to deploy the contract, and to send transactions to the contract.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Copy your account's address, which starts with ",(0,r.kt)("inlineCode",{parentName:"p"},"tz1"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In a web browser, go to the Ghostnet faucet at ",(0,r.kt)("a",{parentName:"p",href:"https://faucet.ghostnet.teztnets.com/"},"https://faucet.ghostnet.teztnets.com/"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'Paste your address into the "Fund any address" field and send some tez to your account.\n20 tez is enough to start with, and you can always return to the faucet for more.')),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Verify that your account has tez by running this command:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"octez-client get balance for local_wallet\n")))),(0,r.kt)("p",null,"Now you have an account and funds that you can use to work with Tezos."),(0,r.kt)("h2",{id:"deploying-the-contract"},"Deploying the contract"),(0,r.kt)("p",null,"To deploy (or originate) the contract you need:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The compiled Michelson code of the contract"),(0,r.kt)("li",{parentName:"ul"},"The starting value for the contract storage, compiled as a Michelson expression"),(0,r.kt)("li",{parentName:"ul"},"A small amount of tez tokens to pay the transaction fee")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Get the compiled code of the contract by running this command, where ",(0,r.kt)("inlineCode",{parentName:"p"},"[FILENAME]")," is the name of your LIGO file."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ligo compile contract [FILENAME] -m Counter -o counter.tz\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Get the compiled value of the contract storage by running this command:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ligo compile storage -m Counter [FILENAME] '0'\n")),(0,r.kt)("p",{parentName:"li"},"You can put any integer value for the initial storage value as the last parameter in this command."),(0,r.kt)("p",{parentName:"li"},"The result is the compiled value of the integer in Michelson, which is the same as it is in LIGO.\nIn this case the LIGO storage value maps 1:1 to its Michelson representation.\nMore complex data types like records and maps look different in Michelson than in LIGO.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Deploy the contract by running this command, putting the initial storage value in the ",(0,r.kt)("inlineCode",{parentName:"p"},"--init")," argument:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"octez-client originate contract counter \\\n  transferring 0 from local_wallet \\\n  running counter.tz \\\n  --init 5 --burn-cap 0.5\n")),(0,r.kt)("p",{parentName:"li"},"This command deploys the contract to the currently selected Tezos network.\nIt includes these parts:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"It uses the Octez client ",(0,r.kt)("inlineCode",{parentName:"li"},"originate contract")," command to originate the contract and assigns the local name ",(0,r.kt)("inlineCode",{parentName:"li"},"counter")," to the contract"),(0,r.kt)("li",{parentName:"ul"},"It includes 0 tokens from your wallet with the transaction, but the ",(0,r.kt)("inlineCode",{parentName:"li"},"--burn-cap")," argument allows the transaction to take up to 0.1 XTZ from your wallet for fees."),(0,r.kt)("li",{parentName:"ul"},"It sets the initial value of the contract storage with the ",(0,r.kt)("inlineCode",{parentName:"li"},"--init")," argument.")),(0,r.kt)("p",{parentName:"li"},"If the contract deploys successfully, Octez shows the address of the new contract, as in this example:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"New contract KT1Nnk.................UFsJrq originated.\nThe operation has only been included 0 blocks ago.\nWe recommend to wait more.\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Copy the contract address, which starts with ",(0,r.kt)("inlineCode",{parentName:"p"},"KT1"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Optional: Run the command ",(0,r.kt)("inlineCode",{parentName:"p"},"octez-client get balance for local_wallet")," to get the updated balance of your wallet.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Verify that the contract deployed successfully by finding it on a block explorer:"),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Open a Tezos block explorer such as ",(0,r.kt)("a",{parentName:"p",href:"https://tzkt.io"},"TzKT")," or ",(0,r.kt)("a",{parentName:"p",href:"https://better-call.dev/"},"Better Call Dev"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Set the explorer to Ghostnet instead of Mainnet.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Paste the contract address into the search field and press Enter.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Go to the Storage tab to see that the initial value of the storage is the integer that you provided."))))),(0,r.kt)("p",null,"Now the contract is deployed and unchangeable.\nAnyone can call its entrypoints to change the storage value."),(0,r.kt)("h2",{id:"calling-the-contract"},"Calling the contract"),(0,r.kt)("p",null,"You can call the contract from many different Tezos clients, including web applications, block explorers, and the Octez client.\nTo call the contract from the Octez client, pass the entrypoint name and parameter to the ",(0,r.kt)("inlineCode",{parentName:"p"},"octez-client transfer")," command, as in this example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"octez-client --wait none transfer 0 from local_wallet \\\n  to counter --entrypoint 'add' --arg '5' --burn-cap 0.1\n")),(0,r.kt)("p",null,"Like the ",(0,r.kt)("inlineCode",{parentName:"p"},"originate contract")," command, this command takes the address or local name of the contract, an amount of tez to include, and a maximum fee.\nIt also includes the name of the entrypoint and the Michelson-encoded parameter to send to it."),(0,r.kt)("p",null,"Entrypoints don't return values, so the output shows only that the transaction was added successfully.\nTo verify that the transaction ran, you can check the value of the contract storage, either by looking it up in a block explorer or using the Octez client, as in this example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"octez-client get contract storage for counter\n")),(0,r.kt)("h2",{id:"next-steps"},"Next steps"),(0,r.kt)("p",null,"Now you have a simple LIGO smart contract and can test it, deploy it, and call it.\nYou can use it as a starting point to write your own contracts and experiment with LIGO."),(0,r.kt)("p",null,"You can also continue with the ",(0,r.kt)("a",{parentName:"p",href:"../taco-shop/selling-tacos"},"Taco shop tutorial")," to learn more about programming with LIGO."))}u.isMDXComponent=!0}}]);