"use strict";(self.webpackChunketherlink_docs=self.webpackChunketherlink_docs||[]).push([[24837],{59874:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>a});var t=r(85893),s=r(11151);const l={title:"Building the Etherlink kernel"},i=void 0,o={id:"network/building-kernel",title:"Building the Etherlink kernel",description:"It's not necessary to build Etherlink's kernel.",source:"@site/docs/network/building-kernel.md",sourceDirName:"network",slug:"/network/building-kernel",permalink:"/previews/etherlink/connection-buttons/network/building-kernel",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1717776047e3,frontMatter:{title:"Building the Etherlink kernel"},sidebar:"documentationSidebar",previous:{title:"Running an Etherlink EVM node",permalink:"/previews/etherlink/connection-buttons/network/evm-nodes"},next:{title:"Node providers",permalink:"/previews/etherlink/connection-buttons/tools/node-providers"}},c={},a=[];function d(e){const n={a:"a",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["It's not necessary to build Etherlink's kernel.\nYou can set the ",(0,t.jsx)(n.code,{children:"pre-images-endpoint"})," field in the Smart Rollup node's configuration file as described in ",(0,t.jsx)(n.a,{href:"/network/smart-rollup-nodes",children:"Running an Etherlink Smart Rollup node"}),".\nYou can also download the installer kernel here: ",(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:r(39716).Z+"",children:"installer.hex"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"However, if you want to build the kernel yourself, you can use these instructions."}),"\n",(0,t.jsxs)(n.p,{children:["This build process creates the installer kernel, which is a compressed version of the kernel that provides only enough information to install the original kernel.\nThe data for the original kernel is stored in separate files called preimages.\nFor more information about installer kernels and preimages, see the tutorial ",(0,t.jsx)(n.a,{href:"https://docs.tezos.com/tutorials/smart-rollup",children:"Deploy a Smart Rollup"})," on docs.tezos.com."]}),"\n",(0,t.jsx)(n.p,{children:"The Etherlink build process relies on a Docker image to ensure reproducible builds, so you must have Docker installed."}),"\n",(0,t.jsx)(n.p,{children:"Follow these steps to build the installer kernel:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Clone the repository at ",(0,t.jsx)(n.a,{href:"https://gitlab.com/tezos/tezos",children:"https://gitlab.com/tezos/tezos"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Check out the commit with the hash ",(0,t.jsx)(n.code,{children:"b9f6c9138719220db83086f0548e49c5c4c8421f"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Build the kernel by running this command from the root directory:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./etherlink/scripts/build-wasm.sh\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This command creates the file ",(0,t.jsx)(n.code,{children:"etherlink/kernels-b9f6c9138719220db83086f0548e49c5c4c8421f/evm_kernel.wasm"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Run this command to install the installer kernel build dependencies:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"make -f kernels.mk build-deps kernel_sdk\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Set the parameters for the Etherlink kernel by running this command, which sets the chain ID, governance and bridge contracts, and other values:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"octez-evm-node make kernel installer config setup_file.yml --chain-id 42793 \\\n  --sequencer edpktufVZGs2JmEwHSFLdA7XHXotmnkD2Nwr75ACpxUr1iKUWzYFHJ      \\\n  --delayed-bridge KT1AZeXH8qUdLMfwN2g7iwiYYSZYG4RrwhCj                   \\\n  --ticketer KT1CeFqjJRJPNVvhvznQrWfHad2jCiDZ6Lyj                         \\\n  --sequencer-governance KT1NcZQ3y9Wv32BGiUfD2ZciSUz9cY1DBDGF             \\\n  --kernel-governance KT1H5pCmFuhAwRExzNNrPQFKpunJx1yEVa6J                \\\n  --kernel-security-governance KT1N5MHQW5fkqXkW9GPjRYfn5KwbuYrvsY1g       \\\n  --sequencer-pool-address 0xCF02B9Ca488f8F6F4E28e37AA1bDD16b3F1b2aD8     \\\n  --delayed-inbox-min-levels 1600 --remove-whitelist\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Run this command to build the installer kernel:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"smart-rollup-installer get-reveal-installer \\\n  -u etherlink/kernels-b9f6c9138719220db83086f0548e49c5c4c8421f/evm_kernel.wasm \\\n  -o installer.hex \\\n  -P wasm_2_0_0 \\\n  -S setup_file.yml \\\n  -d\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The output of the build process is the installer kernel itself, named ",(0,t.jsx)(n.code,{children:"installer.hex"}),", and the preimages for the kernel, in the ",(0,t.jsx)(n.code,{children:"wasm_2_0_0"})," directory."]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},39716:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/files/installer-df17277bbd62ff61bfd336fd0393e238.hex"},11151:(e,n,r)=>{r.d(n,{Z:()=>o,a:()=>i});var t=r(67294);const s={},l=t.createContext(s);function i(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);