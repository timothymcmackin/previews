"use strict";(self.webpackChunketherlink_docs=self.webpackChunketherlink_docs||[]).push([[65690],{48786:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>l,contentTitle:()=>r,default:()=>m,frontMatter:()=>i,metadata:()=>c,toc:()=>h});var n=t(85893),a=t(11151);const i={title:"Fee structure"},r=void 0,c={id:"network/fees",title:"Fee structure",description:"Etherlink transactions include two fees:",source:"@site/docs/network/fees.md",sourceDirName:"network",slug:"/network/fees",permalink:"/previews/etherlink/connection-buttons/network/fees",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1718366862e3,frontMatter:{title:"Fee structure"},sidebar:"documentationSidebar",previous:{title:"Etherlink architecture",permalink:"/previews/etherlink/connection-buttons/network/architecture"},next:{title:"Running an Etherlink Smart Rollup node",permalink:"/previews/etherlink/connection-buttons/network/smart-rollup-nodes"}},l={},h=[{value:"Execution fee",id:"execution-fee",level:2},{value:"Inclusion fee",id:"inclusion-fee",level:2}];function o(e){const s={a:"a",annotation:"annotation",code:"code",em:"em",h2:"h2",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msup:"msup",mtext:"mtext",p:"p",semantics:"semantics",span:"span",ul:"ul",...(0,a.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.p,{children:"Etherlink transactions include two fees:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["The ",(0,n.jsx)(s.em,{children:"execution fee"}),", sometimes known as the ",(0,n.jsx)(s.em,{children:"gas fee"}),", is a fee for running the transaction.\nIt changes depending on Etherlink throughput over time; at times of high demand for Etherlink transactions, the gas fee rises.\nThis fee is burned."]}),"\n",(0,n.jsxs)(s.li,{children:["The ",(0,n.jsx)(s.em,{children:"inclusion fee"})," goes to the sequencer to defray the cost of the data that Etherlink stores on Tezos layer 1.\nTransactions that use more data pay a higher fee."]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Unlike some other chains, Etherlink does not use a voluntary gas fee, also known as a tip, to encourage block producers to include transactions more quickly.\nBecause the Etherlink sequencer orders transactions in first-come-first-served order, there is no need to offer higher fees for faster inclusion."}),"\n",(0,n.jsxs)(s.p,{children:["The base fee of the transaction (in the Ethereum ",(0,n.jsx)(s.code,{children:"max_fee_per_gas"})," ",(0,n.jsx)(s.a,{href:"https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1559.md",children:"EIP-1559"})," field) must be enough to cover these Etherlink fees.\nEtherlink ignores the priority fee in the ",(0,n.jsx)(s.code,{children:"max_priority_fee_per_gas"})," field.\nIf the transaction's base fee is not enough to cover Etherlink's fees, the transaction fails, even if the amount of the priority fee would be enough to cover the fee."]}),"\n",(0,n.jsx)(s.h2,{id:"execution-fee",children:"Execution fee"}),"\n",(0,n.jsx)(s.p,{children:"The execution fee changes based on the transaction throughput over time."}),"\n",(0,n.jsxs)(s.p,{children:["Etherlink measures throughput in terms of ",(0,n.jsx)(s.em,{children:"ticks"}),", which are execution steps.\nAs demand increases, Etherlink runs more ticks per second to process more transactions in the same amount of time."]}),"\n",(0,n.jsxs)(s.p,{children:["Etherlink has a target number of ticks to run per second, referred to as the ",(0,n.jsx)(s.em,{children:"speed limit"}),".\nTo calculate the throughput, Etherlink stores the number of ticks used by transactions and subtracts the speed limit every second.\nThe remaining number of ticks is known as the ",(0,n.jsx)(s.em,{children:"backlog"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"In this way, if the number of ticks that transactions use per second exceeds the speed limit, the backlog increases and the execution fee goes up.\nIf the number of ticks they use per second is below the speed limit, the backlog decreases or reaches zero and the execution fee decreases or reaches a base amount.\nThe backlog never goes below zero and the execution fee never goes below the base amount."}),"\n",(0,n.jsx)(s.p,{children:"The execution fee depends on these parameters:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"minimum_base_fee_per_gas"}),": The base fee for Etherlink transactions, which is 1 gwei"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"speed_limit"}),": The target number of ticks per second"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"tolerance"}),": The size the backlog is allowed to grow to before the execution fee increases"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"backlog"}),": A measure of the number of ticks used per second in excess of the speed limit; Etherlink deducts the speed limit from the backlog every second"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"alpha"}),": A scaling factor"]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["If the backlog is less than the tolerance, the execution fee for a transaction is ",(0,n.jsx)(s.code,{children:"minimum_base_fee_per_gas"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"If the backlog is greater than the tolerance, Etherlink calculates the execution fee with this equation:"}),"\n",(0,n.jsx)(s.span,{className:"katex-display",children:(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mtext,{mathvariant:"monospace",children:"execution"}),(0,n.jsx)(s.mtext,{children:"\xa0"}),(0,n.jsx)(s.mtext,{mathvariant:"monospace",children:"fee"})]}),(0,n.jsx)(s.mo,{children:"="}),(0,n.jsx)(s.mtext,{mathvariant:"monospace",children:"minimum_base_fee_per_gas"}),(0,n.jsx)(s.mo,{children:"\u2217"}),(0,n.jsxs)(s.msup,{children:[(0,n.jsx)(s.mi,{children:"e"}),(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mi,{children:"a"}),(0,n.jsx)(s.mo,{children:"\u2217"}),(0,n.jsx)(s.mo,{stretchy:"false",children:"("}),(0,n.jsx)(s.mtext,{mathvariant:"monospace",children:"backlog"}),(0,n.jsx)(s.mo,{children:"\u2212"}),(0,n.jsx)(s.mtext,{mathvariant:"monospace",children:"tolerance"}),(0,n.jsx)(s.mo,{stretchy:"false",children:")"})]})]})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\texttt{execution fee} = \\texttt{minimum\\_base\\_fee\\_per\\_gas} * e ^{a * (\\texttt{backlog} - \\texttt{tolerance})}"})]})})}),(0,n.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.6111em"}}),(0,n.jsx)(s.span,{className:"mord text",children:(0,n.jsx)(s.span,{className:"mord texttt",children:"execution\xa0fee"})}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(s.span,{className:"mrel",children:"="}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.2222em"}}),(0,n.jsx)(s.span,{className:"mord text",children:(0,n.jsx)(s.span,{className:"mord texttt",children:"minimum_base_fee_per_gas"})}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"\u2217"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.938em"}}),(0,n.jsxs)(s.span,{className:"mord",children:[(0,n.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,n.jsx)(s.span,{className:"msupsub",children:(0,n.jsx)(s.span,{className:"vlist-t",children:(0,n.jsx)(s.span,{className:"vlist-r",children:(0,n.jsx)(s.span,{className:"vlist",style:{height:"0.938em"},children:(0,n.jsxs)(s.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,n.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsxs)(s.span,{className:"mord mtight",children:[(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"a"}),(0,n.jsx)(s.span,{className:"mbin mtight",children:"\u2217"}),(0,n.jsx)(s.span,{className:"mopen mtight",children:"("}),(0,n.jsx)(s.span,{className:"mord text mtight",children:(0,n.jsx)(s.span,{className:"mord texttt mtight",children:"backlog"})}),(0,n.jsx)(s.span,{className:"mbin mtight",children:"\u2212"}),(0,n.jsx)(s.span,{className:"mord text mtight",children:(0,n.jsx)(s.span,{className:"mord texttt mtight",children:"tolerance"})}),(0,n.jsx)(s.span,{className:"mclose mtight",children:")"})]})})]})})})})})]})]})]})]})}),"\n",(0,n.jsx)(s.p,{children:"In other words, the execution fee is the base fee times the exponential function of the alpha scaling factor times the backlog in excess of the tolerance."}),"\n",(0,n.jsx)(s.h2,{id:"inclusion-fee",children:"Inclusion fee"}),"\n",(0,n.jsxs)(s.p,{children:["The inclusion fee, also called the ",(0,n.jsx)(s.em,{children:"data availability fee"}),", helps Etherlink cover the cost of posting data to layer 1."]}),"\n",(0,n.jsxs)(s.p,{children:["The amount of the fee depends on the size of the data in the transaction (as provided by ",(0,n.jsx)(s.code,{children:"tx.data.size()"}),") and the size of the access list, a list of addresses and storage keys that a transaction intends to access (as provided by ",(0,n.jsx)(s.code,{children:"tx.access_list.size()"}),")."]}),"\n",(0,n.jsx)(s.p,{children:"Etherlink calculates the inclusion fee with this equation:"}),"\n",(0,n.jsx)(s.span,{className:"katex-display",children:(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mtext,{mathvariant:"monospace",children:"0.000004"}),(0,n.jsx)(s.mtext,{children:"\xa0"}),(0,n.jsx)(s.mtext,{mathvariant:"monospace",children:"XTZ"})]}),(0,n.jsx)(s.mo,{children:"\u2217"}),(0,n.jsx)(s.mo,{stretchy:"false",children:"("}),(0,n.jsx)(s.mn,{children:"150"}),(0,n.jsx)(s.mo,{children:"+"}),(0,n.jsx)(s.mtext,{mathvariant:"monospace",children:"tx.data.size()"}),(0,n.jsx)(s.mo,{children:"+"}),(0,n.jsx)(s.mtext,{mathvariant:"monospace",children:"tx.access_list.size()"}),(0,n.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\texttt{0.000004 XTZ} * (150 + \\texttt{tx.data.size()} + \\texttt{tx.access\\_list.size()})"})]})})}),(0,n.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.6111em"}}),(0,n.jsx)(s.span,{className:"mord text",children:(0,n.jsx)(s.span,{className:"mord texttt",children:"0.000004\xa0XTZ"})}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"\u2217"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.jsx)(s.span,{className:"mopen",children:"("}),(0,n.jsx)(s.span,{className:"mord",children:"150"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"+"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.7778em",verticalAlign:"-0.0833em"}}),(0,n.jsx)(s.span,{className:"mord text",children:(0,n.jsx)(s.span,{className:"mord texttt",children:"tx.data.size()"})}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"+"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.jsx)(s.span,{className:"mord text",children:(0,n.jsx)(s.span,{className:"mord texttt",children:"tx.access_list.size()"})}),(0,n.jsx)(s.span,{className:"mclose",children:")"})]})]})]})})]})}function m(e={}){const{wrapper:s}={...(0,a.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},11151:(e,s,t)=>{t.d(s,{Z:()=>c,a:()=>r});var n=t(67294);const a={},i=n.createContext(a);function r(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);