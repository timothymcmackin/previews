import{D as a}from"./chunks/DocFunction.Doty0qhz.js";import{c as h,o as l,aj as p,G as e,w as n,j as s,a as i}from"./chunks/framework.BHElM6wE.js";/* empty css                                                                           */const g=JSON.parse('{"title":"Contracts","description":"","frontmatter":{},"headers":[],"relativePath":"manual/data-types/contracts.md","filePath":"manual/data-types/contracts.md"}'),r={name:"manual/data-types/contracts.md"},u=Object.assign(r,{setup(k){return(d,t)=>(l(),h("div",null,[t[3]||(t[3]=p('<h1 id="contracts" tabindex="-1">Contracts <a class="header-anchor" href="#contracts" aria-label="Permalink to &quot;Contracts&quot;">â€‹</a></h1><p>Within SmartPy modules, contracts are represented with the type <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.contract</span></span></code></span> and are constructed with the <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.contract(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, address, entrypoint)</span></span></code></span> function. For example, to call a contract from an entrypoint in another contract, you create an <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.contract</span></span></code></span> type to represent the contract to call.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.contract</span></span></code></span> type is different from the contract objects that you create in <a href="/previews/smartpy/casting-scenarios/manual/scenarios/test_scenarios">test scenarios</a>. The <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.contract</span></span></code></span> type is used in entrypoint code to call other contracts from a deployed smart contract, not in test scenarios.</p></div>',3)),e(a,{name:"sp.contract",args:["type, address","type, address, entrypoint"],rTypes:["sp.option[sp.contract[t]]","sp.option[sp.contract[t]]"]},{default:n(()=>t[0]||(t[0]=[s("p",null,[i("Returns a "),s("span",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"sp.Some(sp.contract[t])")])])]),i(" if this contract exists, "),s("span",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"None")])])]),i(" otherwise.")],-1),s("p",null,[i("If given, the "),s("span",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"entrypoint")])])]),i(" parameter must be named and be a constant string. For example, "),s("span",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"sp.contract(sp.nat, sp.address("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"KT1xxxx"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"), "),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"entrypoint"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"approve"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")])])])],-1),s("p",null,[i("If the "),s("span",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"entrypoint")])])]),i(" parameter is absent, the entrypoint is taken from the address, as in "),s("span",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"KT1AafHA1C1vk959wvHWBispY9Y2f3fxBUUo"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"%"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"approve")])])]),i(". If the address doesn't contain an entrypoint, the entrypoint is "),s("span",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"default")])])]),i(". For more information about the default entrypoint, see "),s("a",{href:"https://docs.tezos.com/smart-contracts/entrypoints#implementation-details-the-default-entrypoint",target:"_blank",rel:"noreferrer"},"Implementation details: the default entrypoint"),i(" on docs.tezos.com.")],-1),s("p",null,[i("Then you can call the contract with the "),s("span",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"sp.transfer")])])]),i(" function, as in this example:")],-1),s("div",{class:"language-smartpy vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"smartpy"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"address "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," sp.address("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"KT1R2LTg3mQoLvHtUjo2xSi7RMBUJ1sJkDiD"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"contract_opt "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," sp.contract(sp.int, address, "),s("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"entrypoint"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"increment"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"match"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," contract_opt:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    case"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Some(contract):")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        sp.transfer(sp.int("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"), sp.mutez("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"), contract)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    case"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," None"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        sp.trace("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Failed to find contract"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")])])])],-1),s("p",null,[i("For more information about calling contracts from contracts, see "),s("a",{href:"./operations"},"Operations"),i(".")],-1)])),_:1,__:[0]}),e(a,{name:"sp.self_entrypoint",arg:"entrypoint_name",rType:"sp.contract[t]"},{default:n(()=>t[1]||(t[1]=[s("p",null,[i("Returns an "),s("span",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"sp.contract[t]")])])]),i(" type corresponding to the contract.")],-1),s("p",null,[i("The "),s("span",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"entrypoint_name")])])]),i(" argument must be a constant string, not an expression.")],-1)])),_:1,__:[1]}),e(a,{name:"sp.to_address",arg:"c: sp.contract[t]",rType:"sp.address"},{default:n(()=>t[2]||(t[2]=[s("p",null,[s("span",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"sp.to_address(c)")])])]),i(" returns the address of a value of type "),s("span",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"sp.contract")])])]),i(".")],-1),s("p",null,[i("If the "),s("span",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"sp.contract[t]")])])]),i(' designates a specific entrypoint, the entrypoint is included in the address. For example, this address includes the "approve" entrypoint: '),s("span",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"sp.address("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"KT1AafHA1C1vk959wvHWBispY9Y2f3fxBUUo'),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"%a"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'pprove"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")])])]),i(".")],-1)])),_:1,__:[2]})]))}});export{g as __pageData,u as default};
