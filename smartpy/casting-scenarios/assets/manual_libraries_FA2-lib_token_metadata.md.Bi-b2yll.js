import{_ as a,c as i,o as t,aj as e}from"./chunks/framework.BHElM6wE.js";const c=JSON.parse('{"title":"Token metadata","description":"","frontmatter":{},"headers":[],"relativePath":"manual/libraries/FA2-lib/token_metadata.md","filePath":"manual/libraries/FA2-lib/token_metadata.md"}'),n={name:"manual/libraries/FA2-lib/token_metadata.md"};function h(l,s,p,k,o,d){return t(),i("div",null,s[0]||(s[0]=[e(`<h1 id="token-metadata" tabindex="-1">Token metadata <a class="header-anchor" href="#token-metadata" aria-label="Permalink to &quot;Token metadata&quot;">​</a></h1><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Token metadata should not be confused with <a href="./contract_metadata">contract metadata</a>.</p></div><p>In an FA2 contract, each token ID is related to one token metadata object. The metadata provides information that is not directly used for a contract&#39;s operation, such as a description of the token and links to thumbnails that illustrate it. If an FA2 contract contains 150 NFTs, it must contain 150 token metadata objects in a map.</p><p>In most cases, metadata objects are stored in the contract itself or in a JSON file stored outside of the blockchain and referenced in the contract.</p><p>The FA2 library does not provide a way to store metadata JSON files. Many token creators use the <a href="https://ipfs.tech/" target="_blank" rel="noreferrer">InterPlanetary File System</a> (IPFS) to store metadata in a decentralized way.</p><p>SmartPy provides tools to upload metadata to IPFS automatically; see <a href="/previews/smartpy/casting-scenarios/manual/scenarios/metadata">Creating and publishing metadata</a>.</p><h2 id="creating-metadata" tabindex="-1">Creating metadata <a class="header-anchor" href="#creating-metadata" aria-label="Permalink to &quot;Creating metadata&quot;">​</a></h2><p>Token metadata is stored in key-value pairs in the type <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.map[sp.string, sp.bytes]</span></span></code></span>.</p><p>A few of the keys are reserved and predefined by <a href="https://gitlab.com/tezos/tzip/-/blob/master/proposals/tzip-12/tzip-12.md" target="_blank" rel="noreferrer">TZIP-12</a>:</p><ul><li><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span></code></span> (empty-string): If the token metadata is hosted somewhere as JSON outside the contract, this key should correspond to the URI of that JSON data.</li><li><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span></span></code></span>: A display name for the token as a UTF-8 string</li><li><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">symbol</span></span></code></span>: A short identifier for the token as a UTF-8 string, such as XTZ or EUR</li><li><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">decimals</span></span></code></span>: An integer (converted to a UTF-8 string in decimal) that defines the position of the decimal point in token balances for display purposes</li></ul><p>You can add any number of other custom fields.</p><p>The library provides the utility function <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">make_metadata</span></span></code></span> (available only outside the contract) that you can use to create the object with only the three reserved fields, as in this example:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> smartpy.templates </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fa2_lib </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fa2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">example_md </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fa2.make_metadata(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">decimals</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Example token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">symbol</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DFA2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>If you need more values in the metadata, you can create your own object, as in this example:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bytes_of_string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(s):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sp.bytes(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0x&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s.encode(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).hex())</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">example_md </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;decimals&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: bytes_of_string(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> %</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: bytes_of_string(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Example FA2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;symbol&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: bytes_of_string(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DFA2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;custom_field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: bytes_of_string(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;This is a custom field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Then you pass the metadata object (whether it contains the metadata fields itself or a link to the JSON metadata elsewhere) to the contract&#39;s <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mint</span></span></code></span> entrypoint, as in this example:</p><div class="language-smartpy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">smartpy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contract.mint(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        sp.record(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">metadata</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">example_md, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">to_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">account.address),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    _sender</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">admin,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h2 id="advanced-media" tabindex="-1">Advanced media <a class="header-anchor" href="#advanced-media" aria-label="Permalink to &quot;Advanced media&quot;">​</a></h2><p>NFTs often include an image, a list of authors, and a lot of other information about the token.</p><p>The corresponding keys and values for NFTs are described in the <a href="https://gitlab.com/tezos/tzip/-/blob/master/proposals/tzip-16/tzip-16.md" target="_blank" rel="noreferrer">TZIP-16</a> standard. Most NFT creators add this information to a JSON file, upload that file to IPFS, and reference it in the contract.</p>`,20)]))}const E=a(n,[["render",h]]);export{c as __pageData,E as default};
