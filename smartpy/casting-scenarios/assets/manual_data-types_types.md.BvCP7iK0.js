import{_ as i,c as a,o as t,aj as e}from"./chunks/framework.BHElM6wE.js";const c=JSON.parse('{"title":"Types","description":"","frontmatter":{},"headers":[],"relativePath":"manual/data-types/types.md","filePath":"manual/data-types/types.md"}'),n={name:"manual/data-types/types.md"};function p(h,s,l,d,k,r){return t(),a("div",null,s[0]||(s[0]=[e(`<h1 id="types" tabindex="-1">Types <a class="header-anchor" href="#types" aria-label="Permalink to &quot;Types&quot;">​</a></h1><p>SmartPy features a comprehensive type system that provides strong typing and type safety for smart contract development.</p><h3 id="primitive" tabindex="-1">Primitive <a class="header-anchor" href="#primitive" aria-label="Permalink to &quot;Primitive&quot;">​</a></h3><table tabindex="0"><thead><tr><th>SmartPy Type</th><th>Description</th><th>Documentation</th></tr></thead><tbody><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.int</span></span></code></span></td><td>Arbitrary precision integer</td><td><a href="./integers-and-mutez">Integers and Mutez</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.nat</span></span></code></span></td><td>Non-negative integer</td><td><a href="./integers-and-mutez">Integers and Mutez</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.bool</span></span></code></span></td><td>Boolean type with values <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span></span></code></span> or <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span></span></code></span></td><td><a href="./booleans">Booleans</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.string</span></span></code></span></td><td>String of characters</td><td><a href="./strings-and-bytes">Strings and Bytes</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.bytes</span></span></code></span></td><td>Sequence of bytes</td><td><a href="./strings-and-bytes">Strings and Bytes</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.timestamp</span></span></code></span></td><td>Timestamp value</td><td><a href="./timestamps">Timestamps</a></td></tr></tbody></table><h3 id="tezos-specific" tabindex="-1">Tezos specific <a class="header-anchor" href="#tezos-specific" aria-label="Permalink to &quot;Tezos specific&quot;">​</a></h3><table tabindex="0"><thead><tr><th>SmartPy Type</th><th>Description</th><th>Documentation</th></tr></thead><tbody><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.mutez</span></span></code></span></td><td>Micro-tez (unit of currency)</td><td><a href="./integers-and-mutez">Integers and Mutez</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.address</span></span></code></span></td><td>Tezos address</td><td><a href="./addresses">Addresses</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.key</span></span></code></span></td><td>Public key</td><td><a href="./keys-and-signatures">Keys and Signatures</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.key_hash</span></span></code></span></td><td>Hash of a public key</td><td><a href="./keys-and-signatures">Keys and Signatures</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.signature</span></span></code></span></td><td>Cryptographic signature</td><td><a href="./keys-and-signatures">Keys and Signatures</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.chain_id</span></span></code></span></td><td>Chain identifier</td><td><a href="./addresses">Addresses</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.operation</span></span></code></span></td><td>Tezos operation</td><td><a href="./operations">Operations</a></td></tr></tbody></table><h3 id="cryptographic" tabindex="-1">Cryptographic <a class="header-anchor" href="#cryptographic" aria-label="Permalink to &quot;Cryptographic&quot;">​</a></h3><table tabindex="0"><thead><tr><th>SmartPy Type</th><th>Description</th><th>Documentation</th></tr></thead><tbody><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.bls12_381_fr</span></span></code></span></td><td>BLS12-381 scalar field element</td><td><a href="./bls12-381">BLS12-381</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.bls12_381_g1</span></span></code></span></td><td>BLS12-381 G1 point</td><td><a href="./bls12-381">BLS12-381</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.bls12_381_g2</span></span></code></span></td><td>BLS12-381 G2 point</td><td><a href="./bls12-381">BLS12-381</a></td></tr></tbody></table><h3 id="compound-types" tabindex="-1">Compound types <a class="header-anchor" href="#compound-types" aria-label="Permalink to &quot;Compound types&quot;">​</a></h3><table tabindex="0"><thead><tr><th>SmartPy Type</th><th>Description</th><th>Documentation</th></tr></thead><tbody><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.pair[T1, T2]</span></span></code></span></td><td>Pair of values</td><td><a href="./tuples">Tuples</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.record(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">field1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">T1, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></span></td><td>Named structure with fields</td><td><a href="./records">Records</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.option[T]</span></span></code></span></td><td>Optional value of type T or <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span></span></code></span></td><td><a href="./options-and-variants">Options and Variants</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.variant(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tag1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">T1, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></span></td><td>Tagged union type</td><td><a href="./options-and-variants">Options and Variants</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.list[T]</span></span></code></span></td><td>List of elements of type T</td><td><a href="./lists-sets-and-maps">Lists, Sets, and Maps</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.set[T]</span></span></code></span></td><td>Collection of unique elements</td><td><a href="./lists-sets-and-maps">Lists, Sets, and Maps</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.map[K, V]</span></span></code></span></td><td>Associative array mapping keys to values</td><td><a href="./lists-sets-and-maps">Lists, Sets, and Maps</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.big_map[K, V]</span></span></code></span></td><td>Lazy map to store a lot of values</td><td><a href="./lists-sets-and-maps">Lists, Sets, and Maps</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.lambda_(t1, t2, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">effects)</span></span></code></span></td><td>Function from type A to type B</td><td><a href="./lambdas">Lambdas</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.ticket[T]</span></span></code></span></td><td>Authenticated quantities issued by contracts or users</td><td><a href="./tickets">Tickets</a></td></tr><tr><td><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.contract[T]</span></span></code></span></td><td>Representation of a contract interface accepting values of type T</td><td><a href="./contracts">Contracts</a></td></tr></tbody></table><h2 id="type-declaration" tabindex="-1">Type declaration <a class="header-anchor" href="#type-declaration" aria-label="Permalink to &quot;Type declaration&quot;">​</a></h2><p>SmartPy uses Python type annotations for explicit type declarations:</p><div class="language-smartpy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">smartpy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x: sp.int):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    pass</span></span></code></pre></div><p>A type can be defined using <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span></span></code></span> to be reused later (only at module level).</p><div class="language-smartpy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">smartpy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">my_nat: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sp.nat</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x: my_nat):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    pass</span></span></code></pre></div><h2 id="type-inference" tabindex="-1">Type inference <a class="header-anchor" href="#type-inference" aria-label="Permalink to &quot;Type inference&quot;">​</a></h2><p>SmartPy infers types for most values:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Inferred as sp.int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sp.nat(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Explicitly building sp.nat</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sp.cast(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sp.nat)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Explicitly set to sp.nat</span></span></code></pre></div><h2 id="type-declaration-vs-conversion" tabindex="-1">Type declaration vs conversion <a class="header-anchor" href="#type-declaration-vs-conversion" aria-label="Permalink to &quot;Type declaration vs conversion&quot;">​</a></h2><p>SmartPy provides multiple ways to manipulate types:</p><h3 id="type-declaration-with-constructors" tabindex="-1">Type declaration with constructors <a class="header-anchor" href="#type-declaration-with-constructors" aria-label="Permalink to &quot;Type declaration with constructors&quot;">​</a></h3><p>Type constructors in SmartPy are used to explicitly declare a value of a specific type, not to convert between types:</p><div class="language-smartpy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">smartpy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># This DECLARES a nat value - it doesn&#39;t convert an int to a nat</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># For example: sp.nat(sp.int(5)) isn&#39;t allowed</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sp.nat(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># This also DECLARES a value of type list[sp.int]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">my_list </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Not a Python list being converted, but a SmartPy sp.list[sp.int]</span></span></code></pre></div><h3 id="type-annotation-with-sp-cast" tabindex="-1">Type annotation with sp.cast <a class="header-anchor" href="#type-annotation-with-sp-cast" aria-label="Permalink to &quot;Type annotation with sp.cast&quot;">​</a></h3><p><span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.cast</span></span></code></span> is used to explicitly annotate the type of an expression, not to convert between types:</p><div class="language-smartpy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">smartpy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># This annotates {} as being a map[sp.address, sp.int]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># It does NOT convert a Python dict to a SmartPy map</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sp.cast({}, sp.map[sp.address, sp.int])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Similarly, this annotates 5 as a nat</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sp.cast(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sp.nat)</span></span></code></pre></div><h3 id="when-to-use-type-declaration" tabindex="-1">When to use type declaration <a class="header-anchor" href="#when-to-use-type-declaration" aria-label="Permalink to &quot;When to use type declaration&quot;">​</a></h3><p>SmartPy must know the type of all variables to compile to Michelson. Type declaration is necessary in cases such as:</p><ol><li><p><strong>Empty collections</strong> - When initializing empty collections where the type cannot be inferred:</p><div class="language-smartpy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">smartpy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">empty_map </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sp.cast({}, sp.map[sp.string, sp.nat])</span></span></code></pre></div></li><li><p><strong>Explicit contract storage</strong> - When defining the expected structure of contract storage:</p><div class="language-smartpy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">smartpy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@sp.module</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    t_storage: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sp.record(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">counter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.nat)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Counter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Contract</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, init_value):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.data.counter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> init_value</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # Ensure storage matches the declared type</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            sp.cast(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.data, t_storage)</span></span></code></pre></div></li><li><p><strong>Layout specifications</strong> - To set specific field layouts for records:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">t_param: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sp.record(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    from_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.address, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">txs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.list[sp.record(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">to_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.address, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">amount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.nat)]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).layout((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;from_&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;txs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div></li></ol><h3 id="common-misconceptions" tabindex="-1">Common misconceptions <a class="header-anchor" href="#common-misconceptions" aria-label="Permalink to &quot;Common misconceptions&quot;">​</a></h3><ol><li><p><strong>Not Type Conversion:</strong> <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.cast</span></span></code></span> and type constructors do not change a value&#39;s type - they declare or annotate it.</p></li><li><p><strong>Not Python Types:</strong> SmartPy types are distinct from Python types. For example, <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></span> in SmartPy is a <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.list[sp.int]</span></span></code></span>, not a Python list.</p></li></ol><h2 id="type-system-features" tabindex="-1">Type system features <a class="header-anchor" href="#type-system-features" aria-label="Permalink to &quot;Type system features&quot;">​</a></h2><h3 id="type-inference-1" tabindex="-1">Type inference <a class="header-anchor" href="#type-inference-1" aria-label="Permalink to &quot;Type inference&quot;">​</a></h3><p>SmartPy infers the types of most expressions automatically:</p><div class="language-smartpy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">smartpy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # x inferred as sp.int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # y inferred as sp.bool</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># z inferred as sp.list[sp.int]</span></span></code></pre></div><h3 id="generics" tabindex="-1">Generics <a class="header-anchor" href="#generics" aria-label="Permalink to &quot;Generics&quot;">​</a></h3><p>Many SmartPy container types support generic type parameters:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">addresses: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sp.set[sp.address]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">balances: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sp.map[sp.address, sp.mutez]</span></span></code></pre></div><h2 id="type-compatibility" tabindex="-1">Type compatibility <a class="header-anchor" href="#type-compatibility" aria-label="Permalink to &quot;Type compatibility&quot;">​</a></h2><p>SmartPy has a strict type system. Values must match their expected types exactly, with a few exceptions for numerical types:</p><div class="language-smartpy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">smartpy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x: sp.nat):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    pass</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">f(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 5 is inferred as sp.nat due to the function signature</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># \`f(-5)\` would fails because -5 cannot be a nat</span></span></code></pre></div><p>The SmartPy library provides conversion functions like <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.as_nat()</span></span></code></span> and <span class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sp.to_int()</span></span></code></span> when explicit type conversion is needed. These are not casts but actual conversion operations that check values and fail if the conversion is not possible.</p><p>For more detailed explanation, see <a href="./casting">casting</a></p>`,43)]))}const g=i(n,[["render",p]]);export{c as __pageData,g as default};
