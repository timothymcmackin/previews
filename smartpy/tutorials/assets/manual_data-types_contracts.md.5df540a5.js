import{D as n}from"./chunks/DocFunction.e9a30d9e.js";import{o,c as p,Q as r,C as t,y as l,v as s,a}from"./chunks/framework.741828c6.js";import"./chunks/DocFunction.vue_vue_type_style_index_0_scoped_21214205_lang.4ed993c7.js";const h=JSON.parse('{"title":"Contracts","description":"","frontmatter":{},"headers":[],"relativePath":"manual/data-types/contracts.md","filePath":"manual/data-types/contracts.md"}'),c={name:"manual/data-types/contracts.md"},m=Object.assign(c,{setup(i){return(y,e)=>(o(),p("div",null,[e[3]||(e[3]=r('<h1 id="contracts" tabindex="-1">Contracts <a class="header-anchor" href="#contracts" aria-label="Permalink to &quot;Contracts&quot;">​</a></h1><p>Within SmartPy modules, contracts are represented with the type <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">contract</span></span></code></span> and are constructed with the <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">contract</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">type</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> address</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> entrypoint</span><span style="color:#89DDFF;">)</span></span></code></span> function. For example, to call a contract from an entrypoint in another contract, you create an <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">contract</span></span></code></span> type to represent the contract to call.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>The <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">contract</span></span></code></span> type is different from the contract objects that you create in <a href="/previews/smartpy/tutorials/manual/scenarios/test_scenarios">test scenarios</a>. The <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">contract</span></span></code></span> type is used in entrypoint code to call other contracts from a deployed smart contract, not in test scenarios.</p></div>',3)),t(n,{name:"sp.contract",args:["type, address","type, address, entrypoint"],rTypes:["sp.option[sp.contract[t]]","sp.option[sp.contract[t]]"]},{default:l(()=>e[0]||(e[0]=[s("p",null,[a("Returns a "),s("span",{class:"inline shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"sp"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Some"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"sp"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"contract"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F07178"}},"t"),s("span",{style:{color:"#89DDFF"}},"])")])])]),a(" if this contract exists, "),s("span",{class:"inline shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"None")])])]),a(" otherwise.")],-1),s("p",null,[a("If given, the "),s("span",{class:"inline shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"entrypoint")])])]),a(" parameter must be named and be a constant string. For example, "),s("span",{class:"inline shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"sp"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"contract"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"sp"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"nat"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," sp"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"address"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"KT1xxxx"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},"),"),a(" "),s("span",{style:{color:"#BABED8","font-style":"italic"}},"entrypoint"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"approve"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},")")])])])],-1),s("p",null,[a("If the "),s("span",{class:"inline shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"entrypoint")])])]),a(" parameter is absent, the entrypoint is taken from the address, as in "),s("span",{class:"inline shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"KT1AafHA1C1vk959wvHWBispY9Y2f3fxBUUo"),s("span",{style:{color:"#89DDFF"}},"%"),s("span",{style:{color:"#BABED8"}},"approve")])])]),a(". If the address doesn't contain an entrypoint, the entrypoint is "),s("span",{class:"inline shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"default")])])]),a(". For more information about the default entrypoint, see "),s("a",{href:"https://docs.tezos.com/smart-contracts/entrypoints#implementation-details-the-default-entrypoint",target:"_blank",rel:"noreferrer"},"Implementation details: the default entrypoint"),a(" on docs.tezos.com.")],-1),s("p",null,[a("Then you can call the contract with the "),s("span",{class:"inline shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"sp"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"transfer")])])]),a(" function, as in this example:")],-1),s("div",{class:"language-smartpy"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"smartpy"),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#babed8"}},'address = sp.address("KT1R2LTg3mQoLvHtUjo2xSi7RMBUJ1sJkDiD")')]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#babed8"}},'contract_opt = sp.contract(sp.int, address, entrypoint="increment")')]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#babed8"}},"match contract_opt:")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#babed8"}},"    case Some(contract):")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#babed8"}},"        sp.transfer(sp.int(5), sp.mutez(0), contract)")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#babed8"}},"    case None:")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#babed8"}},'        sp.trace("Failed to find contract")')])])])],-1),s("p",null,[a("For more information about calling contracts from contracts, see "),s("a",{href:"./operations"},"Operations"),a(".")],-1)])),_:1}),t(n,{name:"sp.self_entrypoint",arg:"entrypoint_name",rType:"sp.contract[t]"},{default:l(()=>e[1]||(e[1]=[s("p",null,[a("Returns an "),s("span",{class:"inline shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"sp"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"contract"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F07178"}},"t"),s("span",{style:{color:"#89DDFF"}},"]")])])]),a(" type corresponding to the contract.")],-1),s("p",null,[a("The "),s("span",{class:"inline shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"entrypoint_name")])])]),a(" argument must be a constant string, not an expression.")],-1)])),_:1}),t(n,{name:"sp.to_address",arg:"c: sp.contract[t]",rType:"sp.address"},{default:l(()=>e[2]||(e[2]=[s("p",null,[s("span",{class:"inline shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"sp"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"to_address"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"c"),s("span",{style:{color:"#89DDFF"}},")")])])]),a(" returns the address of a value of type "),s("span",{class:"inline shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"sp"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"contract")])])]),a(".")],-1),s("p",null,[a("If the "),s("span",{class:"inline shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"sp"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"contract"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F07178"}},"t"),s("span",{style:{color:"#89DDFF"}},"]")])])]),a(' designates a specific entrypoint, the entrypoint is included in the address. For example, this address includes the "approve" entrypoint: '),s("span",{class:"inline shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#BABED8"}},"sp"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"address"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"KT1AafHA1C1vk959wvHWBispY9Y2f3fxBUUo"),s("span",{style:{color:"#F78C6C"}},"%a"),s("span",{style:{color:"#C3E88D"}},"pprove"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},")")])])]),a(".")],-1)])),_:1})]))}});export{h as __pageData,m as default};
