import{_ as a,o as n,c as e,Q as l}from"./chunks/framework.741828c6.js";const D=JSON.parse('{"title":"Entrypoints","description":"","frontmatter":{},"headers":[],"relativePath":"manual/libraries/FA2-lib/entrypoints.md","filePath":"manual/libraries/FA2-lib/entrypoints.md"}'),p={name:"manual/libraries/FA2-lib/entrypoints.md"};function o(t,s,r,c,i,y){return n(),e("div",null,s[0]||(s[0]=[l(`<h1 id="entrypoints" tabindex="-1">Entrypoints <a class="header-anchor" href="#entrypoints" aria-label="Permalink to &quot;Entrypoints&quot;">​</a></h1><p>When you import the base classes as described in <a href="./base_classes">Base classes</a>, the FA2 library automatically adds the standard entrypoints that the FA2 standard requires. You can override these entrypoints or add other custom entrypoints.</p><div class="info custom-block"><p class="custom-block-title">Off-chain views</p><p>In addition to entrypoints, the FA2 library creates off-chain views as described by the FA2 standard. For these views to work, you must upload their code in contract metadata as described in <a href="/previews/smartpy/tutorials/manual/scenarios/metadata">Creating and publishing metadata</a>.</p></div><h2 id="standard-entrypoints" tabindex="-1">Standard entrypoints <a class="header-anchor" href="#standard-entrypoints" aria-label="Permalink to &quot;Standard entrypoints&quot;">​</a></h2><p>The FA2 library provides the three standard entrypoints <a href="#transfer"><span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">transfer</span></span></code></span></a>, <a href="#balance_of"><span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">balance_of</span></span></code></span></a>, and <a href="#update_operators"><span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">update_operators</span></span></code></span></a>. These entrypoints work the same way for each type of token. You can modify them with <a href="./transfer-policies">transfer policies</a> or replace them with <a href="#custom-entrypoints">custom entrypoints</a> as long as the custom entrypoint meets the FA2 standard.</p><h3 id="transfer" tabindex="-1"><span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">transfer</span></span></code></span> <a class="header-anchor" href="#transfer" aria-label="Permalink to &quot;\`transfer\`&quot;">​</a></h3><p>The <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">transfer</span></span></code></span> entrypoint moves tokens from one account to another. It requires a list of batches as an argument. Each batch is a record that contains the following fields:</p><ul><li><span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">from_</span></span></code></span>: The account that sends the tokens</li><li><span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">txs</span></span></code></span>: A list of records, each with these fields: <ul><li><span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">to_</span></span></code></span>: The account that receives the tokens</li><li><span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">token_id</span></span></code></span>: The token ID</li><li><span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">amount</span></span></code></span>: The amount of tokens to transfer</li></ul></li></ul><p>By default, the owner of a token and their designated operators can transfer a token. You can change permissions for transferring tokens by setting a <a href="./transfer-policies">transfer policy</a>.</p><p>The following example makes three token transfers in a single call to the <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">transfer</span></span></code></span> entrypoint:</p><div class="language-smartpy"><button title="Copy Code" class="copy"></button><span class="lang">smartpy</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">contract.transfer(</span></span>
<span class="line"><span style="color:#babed8;">    [</span></span>
<span class="line"><span style="color:#babed8;">        sp.record(</span></span>
<span class="line"><span style="color:#babed8;">            from_=alice.address,</span></span>
<span class="line"><span style="color:#babed8;">            txs=[</span></span>
<span class="line"><span style="color:#babed8;">                sp.record(to_=bob.address, amount=10, token_id=0),</span></span>
<span class="line"><span style="color:#babed8;">                sp.record(to_=bob.address, amount=10, token_id=1),</span></span>
<span class="line"><span style="color:#babed8;">            ],</span></span>
<span class="line"><span style="color:#babed8;">        ),</span></span>
<span class="line"><span style="color:#babed8;">        sp.record(</span></span>
<span class="line"><span style="color:#babed8;">            from_=bob.address, txs=[sp.record(to_=alice.address, amount=11, token_id=0)]</span></span>
<span class="line"><span style="color:#babed8;">        ),</span></span>
<span class="line"><span style="color:#babed8;">    ],</span></span>
<span class="line"><span style="color:#babed8;">    _sender=charlie,</span></span>
<span class="line"><span style="color:#babed8;">)</span></span></code></pre></div><p>The type of the <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">transfer</span></span></code></span> entrypoint&#39;s parameter is available in the library as the <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">t</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">transfer_batch</span></span></code></span> type, which is equivalent to:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">list</span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#F07178;">    sp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">record</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#BABED8;font-style:italic;">from_</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#BABED8;font-style:italic;">txs</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">list</span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#F07178;">            sp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">record</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">to_</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#BABED8;font-style:italic;">token_id</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">nat</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#BABED8;font-style:italic;">amount</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">nat</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">layout</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">                </span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">to_</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">token_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">amount</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#82AAFF;">            </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">layout</span><span style="color:#89DDFF;">((</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">from_</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">txs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span></code></pre></div><p>The <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">transfer</span></span></code></span> entrypoint can raise these exceptions: <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">FA2_TOKEN_UNDEFINED</span></span></code></span>, <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">FA2_NOT_OPERATOR</span></span></code></span>, <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">FA2_INSUFFICIENT_BALANCE</span></span></code></span>, and <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">FA2_TX_DENIED</span></span></code></span>.</p><h3 id="update-operators" tabindex="-1"><span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">update_operators</span></span></code></span> <a class="header-anchor" href="#update-operators" aria-label="Permalink to &quot;\`update_operators\`&quot;">​</a></h3><p>The <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">update_operators</span></span></code></span> entrypoint modifies the list of operators, which are accounts that are authorized to transfer tokens that another account owns. Only the owner of a token can set the operators for their tokens.</p><p>This entrypoint takes a list of actions, each of which is either <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">&quot;</span><span style="color:#676E95;font-style:italic;">remove_operator</span><span style="color:#89DDFF;font-style:italic;">&quot;</span></span></code></span> or <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">&quot;</span><span style="color:#676E95;font-style:italic;">add_operator</span><span style="color:#89DDFF;font-style:italic;">&quot;</span></span></code></span> associated with an operator permission. Each operator permission is a record of:</p><ul><li><span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">owner</span></span></code></span>: The account on which the operator can perform the transfer</li><li><span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">operator</span></span></code></span>: The account given permission to transfer</li><li><span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">token_id</span></span></code></span>: The token ID for which permission is granted</li></ul><p>This example removes the account <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">op1</span></span></code></span> as the operator for Alice&#39;s tokens with the ID 0 and adds the account <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">op2</span></span></code></span> as an operator for the same tokens:</p><div class="language-smartpy"><button title="Copy Code" class="copy"></button><span class="lang">smartpy</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">contract.update_operators(</span></span>
<span class="line"><span style="color:#babed8;">    [</span></span>
<span class="line"><span style="color:#babed8;">        sp.variant(</span></span>
<span class="line"><span style="color:#babed8;">            &quot;remove_operator&quot;,</span></span>
<span class="line"><span style="color:#babed8;">            sp.record(owner=alice.address, operator=op1.address, token_id=0),</span></span>
<span class="line"><span style="color:#babed8;">        ),</span></span>
<span class="line"><span style="color:#babed8;">        sp.variant(</span></span>
<span class="line"><span style="color:#babed8;">            &quot;add_operator&quot;,</span></span>
<span class="line"><span style="color:#babed8;">            sp.record(owner=alice.address, operator=op2.address, token_id=0),</span></span>
<span class="line"><span style="color:#babed8;">        ),</span></span>
<span class="line"><span style="color:#babed8;">    ],</span></span>
<span class="line"><span style="color:#babed8;">    _sender=alice,</span></span>
<span class="line"><span style="color:#babed8;">)</span></span></code></pre></div><p>The type of the <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">update_operators</span></span></code></span> entrypoint&#39;s parameter is available in the library as the <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">t</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">update_operators_params</span></span></code></span> type, which is equivalent to:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">list</span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#F07178;">    sp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">variant</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#BABED8;font-style:italic;">add_operator</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">record</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">            </span><span style="color:#BABED8;font-style:italic;">owner</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#BABED8;font-style:italic;">operator</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#BABED8;font-style:italic;">token_id</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">nat</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">layout</span><span style="color:#89DDFF;">((</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">owner</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">operator</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">token_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))),</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#BABED8;font-style:italic;">remove_operator</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">record</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">            </span><span style="color:#BABED8;font-style:italic;">owner</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#BABED8;font-style:italic;">operator</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#BABED8;font-style:italic;">token_id</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">nat</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">layout</span><span style="color:#89DDFF;">((</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">owner</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">operator</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">token_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))),</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span></code></pre></div><p>The <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">update_operators</span></span></code></span> can raise these exceptions: <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">FA2_NOT_OWNER</span></span></code></span> and <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">FA2_OPERATORS_UNSUPPORTED</span></span></code></span>.</p><h3 id="balance-of" tabindex="-1"><span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">balance_of</span></span></code></span> <a class="header-anchor" href="#balance-of" aria-label="Permalink to &quot;\`balance_of\`&quot;">​</a></h3><p>The <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">balance_of</span></span></code></span> entrypoint is used to query the balance of multiple account/token pairs. It sends the balances to a callback address.</p><p>It takes two parameters:</p><ul><li><p><span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">callback</span></span></code></span>: Information about the contract to send the balance information to, in this format:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">contract</span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#F07178;">    sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">list</span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#F07178;">        sp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">record</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">            </span><span style="color:#BABED8;font-style:italic;">request</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">record</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">owner</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#BABED8;font-style:italic;">token_id</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">nat</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">layout</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">                </span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">owner</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">token_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">            </span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#82AAFF;">            </span><span style="color:#BABED8;font-style:italic;">balance</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">nat</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">layout</span><span style="color:#89DDFF;">((</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">request</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">balance</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span></code></pre></div></li><li><p><span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">requests</span></span></code></span>: Information about the owners and token IDs to provide information about, in this format:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">list</span><span style="color:#89DDFF;">[</span><span style="color:#F07178;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">record</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">owner</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#BABED8;font-style:italic;">token_id</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">nat</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">layout</span><span style="color:#89DDFF;">((</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">owner</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">token_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))]</span></span></code></pre></div><p>The layout of this entrypoint is <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">requests</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span> <span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">callback</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span></code></span>.</p></li></ul><p>Together, these parameters are available in the library as the <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">t</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">balance_of_params</span></span></code></span> type.</p><p>This example sends a user&#39;s balance of the token ID 0 to the <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">receive_balances</span></span></code></span> entrypoint of another contract:</p><div class="language-smartpy"><button title="Copy Code" class="copy"></button><span class="lang">smartpy</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">contract.balance_of(</span></span>
<span class="line"><span style="color:#babed8;">    callback=sp.contract(</span></span>
<span class="line"><span style="color:#babed8;">        sp.list(fa2.t.balance_of_response),</span></span>
<span class="line"><span style="color:#babed8;">        contract2.address,</span></span>
<span class="line"><span style="color:#babed8;">        entry_point=&quot;receive_balances&quot;,</span></span>
<span class="line"><span style="color:#babed8;">    ).open_some(),</span></span>
<span class="line"><span style="color:#babed8;">    requests=[sp.record(owner=alice.address, token_id=0)],</span></span>
<span class="line"><span style="color:#babed8;">    _sender=alice,</span></span>
<span class="line"><span style="color:#babed8;">)</span></span></code></pre></div><p>The <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">balance_of</span></span></code></span> transfers 0 mutez to <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">callback</span></span></code></span> with corresponding response. This response is in the type <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">t</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">balance_of_response</span></span></code></span>, which is equivalent to:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">record</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">request</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">record</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">owner</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#BABED8;font-style:italic;">token_id</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">nat</span><span style="color:#89DDFF;">),</span><span style="color:#82AAFF;"> </span><span style="color:#BABED8;font-style:italic;">balance</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">nat</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">layout</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">request</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">balance</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span></code></pre></div><p>The <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">balance_of</span></span></code></span> entrypoint can raise these exceptions: <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">FA2_NOT_OWNER</span></span></code></span> and <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">FA2_OPERATORS_UNSUPPORTED</span></span></code></span>.</p><h2 id="custom-entrypoints" tabindex="-1">Custom entrypoints <a class="header-anchor" href="#custom-entrypoints" aria-label="Permalink to &quot;Custom entrypoints&quot;">​</a></h2><p>You can either override the provided entrypoints or add your own, just as you would in any other SmartPy contract.</p><p>For example, this contract has an entrypoint named <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">my_entrypoint</span></span></code></span> in addition to the entrypoints provided by the <span class="inline shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">main</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">Fungible</span></span></code></span> base class:</p><div class="language-smartpy"><button title="Copy Code" class="copy"></button><span class="lang">smartpy</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">class ExampleFA2(main.Fungible):</span></span>
<span class="line"><span style="color:#babed8;">    @sp.entrypoint</span></span>
<span class="line"><span style="color:#babed8;">    def my_entrypoint(self, params):</span></span>
<span class="line"><span style="color:#babed8;">        ...</span></span></code></pre></div><p>You can override the standard entrypoints in this way, but to maintain compliance with the FA2 standard, they should have the same interface as the standard entrypoints.</p><h2 id="non-standard-entrypoints" tabindex="-1">Non-standard entrypoints <a class="header-anchor" href="#non-standard-entrypoints" aria-label="Permalink to &quot;Non-standard entrypoints&quot;">​</a></h2><p>The FA2 library provides entrypoints and views that are not required by the standard. You can add them to your contracts with the <a href="./mixins">mixins</a> mechanism.</p><p>For example, the FA2 standard does not require contracts to have mint and burn entrypoints to create and destroy tokens, but the FA2 library provides them.</p>`,41)]))}const d=a(p,[["render",o]]);export{D as __pageData,d as default};
