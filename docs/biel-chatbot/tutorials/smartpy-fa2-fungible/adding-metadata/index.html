<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorials/smartpy-fa2-fungible/adding-metadata" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Part 3: Adding metadata | Tezos Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.tezos.com/previews/docs/biel-chatbot/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.tezos.com/previews/docs/biel-chatbot/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.tezos.com/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/adding-metadata"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Part 3: Adding metadata | Tezos Documentation"><meta data-rh="true" name="description" content="In this part, you configure the metadata for the contract."><meta data-rh="true" property="og:description" content="In this part, you configure the metadata for the contract."><link data-rh="true" rel="icon" href="/previews/docs/biel-chatbot/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.tezos.com/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/adding-metadata"><link data-rh="true" rel="alternate" href="https://docs.tezos.com/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/adding-metadata" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.tezos.com/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/adding-metadata" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://QRIAHGML9Q-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-56M3FZ8",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>





<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pushfeedback@latest/dist/pushfeedback/pushfeedback.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/biel-search@latest/dist/biel-search/biel-search.css">

<meta http-equiv="Content-Security-Policy" content=" default-src &#39;none&#39;; base-uri &#39;self&#39;; manifest-src &#39;self&#39;; script-src https://*.googletagmanager.com https://cdn.jsdelivr.net &#39;self&#39; &#39;unsafe-inline&#39;; style-src https://cdn.jsdelivr.net https://fonts.googleapis.com &#39;self&#39; &#39;unsafe-inline&#39;; font-src https://cdn.jsdelivr.net &#39;self&#39;; img-src &#39;self&#39; https://projects.gitlab.io https://gitlab.com https://*.googletagmanager.com https://*.google-analytics.com data:; media-src &#39;self&#39;; form-action &#39;self&#39;; connect-src &#39;self&#39; https://*.algolia.net https://*.algolianet.com https://*.googletagmanager.com https://*.google-analytics.com https://*.analytics.google.com https://app.pushfeedback.com wss://app.biel.ai https://app.biel.ai; frame-src https://tezosbot.vercel.app;">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/previews/docs/biel-chatbot/assets/css/styles.5d8acf6d.css">
<script src="/previews/docs/biel-chatbot/assets/js/runtime~main.463daacc.js" defer="defer"></script>
<script src="/previews/docs/biel-chatbot/assets/js/main.95aa8612.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-56M3FZ8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/previews/docs/biel-chatbot/"><div class="navbar__logo"><img src="/previews/docs/biel-chatbot/img/logo-tezos.svg" alt="Developer Docs for Tezos" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/previews/docs/biel-chatbot/img/logo-tezos.svg" alt="Developer Docs for Tezos" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Tezos Docs</b></a><a class="navbar__item navbar__link" href="/previews/docs/biel-chatbot/overview/">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/previews/docs/biel-chatbot/tutorials">Tutorials</a></div><div class="navbar__items navbar__items--right"><a href="https://gitlab.com/tezos/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_dCNk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button><biel-search-button project="w30c27l8fg" button-style="rounded" header-title="AI-powered search">AI-powered search</biel-search-button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/previews/docs/biel-chatbot/tutorials">Tutorials home</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__divider"><div>Beginner</div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/smart-contract">Deploy a smart contract</a><button aria-label="Expand sidebar category &#x27;Deploy a smart contract&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/dapp">Start with a minimum dApp and add new features</a><button aria-label="Expand sidebar category &#x27;Start with a minimum dApp and add new features&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__divider"><div>Intermediate</div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/build-your-first-app">Build a simple web application</a><button aria-label="Expand sidebar category &#x27;Build a simple web application&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible">Create a fungible token with the SmartPy FA2 library</a><button aria-label="Collapse sidebar category &#x27;Create a fungible token with the SmartPy FA2 library&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/basic-fa2-token">Part 1: Setting up a simple FA2 token</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/minting-and-burning">Part 2: Adding minting and burning entrypoints</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/adding-metadata">Part 3: Adding metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/customizing-operations">Part 4: Customizing operations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/deploying-contract">Part 5: Deploying the contract</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/create-nfts">Create NFTs</a><button aria-label="Expand sidebar category &#x27;Create NFTs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/join-dal-baker">Run a Tezos node in 5 steps</a><button aria-label="Expand sidebar category &#x27;Run a Tezos node in 5 steps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/bake-with-ledger">Bake using a Ledger device</a><button aria-label="Expand sidebar category &#x27;Bake using a Ledger device&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__divider"><div>Advanced</div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/smart-rollup">Deploy a Smart Rollup</a><button aria-label="Expand sidebar category &#x27;Deploy a Smart Rollup&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/build-an-nft-marketplace">Build an NFT marketplace</a><button aria-label="Expand sidebar category &#x27;Build an NFT marketplace&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/security">Learn and play with security</a><button aria-label="Expand sidebar category &#x27;Learn and play with security&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/mobile">Create a mobile game</a><button aria-label="Expand sidebar category &#x27;Create a mobile game&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/build-files-archive-with-dal">Implement a file archive with the DAL</a><button aria-label="Expand sidebar category &#x27;Implement a file archive with the DAL&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/previews/docs/biel-chatbot/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible"><span itemprop="name">Create a fungible token with the SmartPy FA2 library</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Part 3: Adding metadata</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Part 3: Adding metadata</h1></header><p>In this part, you configure the metadata for the contract.</p>
<p>Contract metadata provides details about the contract itself, including its name, description, and what standards it follows.
This information lets off-chain applications like wallets and block explorers show information about the contract.
Contracts can also store other information in metadata, including the code for off-chain views and information about error messages.</p>
<p>Contracts that manage tokens also store metadata about those tokens, including descriptions of the tokens and links to preview media.</p>
<p>Generally, contracts store their metadata and token metadata off-chain and include only a link to it in their storage.
Storing the metadata off-chain saves space and makes it easier for off-chain applications to access it.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="storing-metadata-with-ipfs">Storing metadata with IPFS<a href="#storing-metadata-with-ipfs" class="hash-link" aria-label="Direct link to Storing metadata with IPFS" title="Direct link to Storing metadata with IPFS">​</a></h2>
<p>Many contracts store metadata with the InterPlanetary File System (IPFS) protocol.
This protocol stores files in a decentralized peer-to-peer network and indexes them by their hash.
That way, users can access media by its hash, and the hash allows them to verify that the files have not changed.
As long as one IPFS user has a copy of the data, they can re-upload it to IPFS with the same hash so it is seamlessly available again.</p>
<p>Therefore, uploading data to IPFS doesn&#x27;t mean that it will be available forever; at least one user must keep a copy of it.
Instructing an IPFS node to keep a copy of a file is called <em>pinning</em> the file.
SmartPy provides a function that uploads data to IPFS via the Pinata service and instructs Pinata to pin it.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tutorial-contract">Tutorial contract<a href="#tutorial-contract" class="hash-link" aria-label="Direct link to Tutorial contract" title="Direct link to Tutorial contract">​</a></h2>
<p>The completed contract that you create in this part is at <a href="https://github.com/trilitech/tutorial-applications/blob/main/smartpy_fa2_fungible/part_3_complete.py" target="_blank" rel="noopener noreferrer">part_3_complete.py</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-a-pinata-api-key">Getting a Pinata API key<a href="#getting-a-pinata-api-key" class="hash-link" aria-label="Direct link to Getting a Pinata API key" title="Direct link to Getting a Pinata API key">​</a></h2>
<p>SmartPy test scenarios can upload files to IPFS with <a href="https://www.pinata.cloud/" target="_blank" rel="noopener noreferrer">Pinata</a>, so to follow this part of the tutorial, you need a free account on <a href="https://www.pinata.cloud" target="_blank" rel="noopener noreferrer">https://www.pinata.cloud</a> and an API key.</p>
<p>Follow these steps to create a Pinata API key:</p>
<ol>
<li>
<p>Create a free Pinata account at <a href="https://app.pinata.cloud/developers/api-keys" target="_blank" rel="noopener noreferrer">https://app.pinata.cloud/developers/api-keys</a>.</p>
</li>
<li>
<p>Go to the API Keys tab and click <strong>New Key</strong>.</p>
</li>
<li>
<p>On the Create New API Key page, expand API Endpoint Access and enable the <code>pinFileToIPFS</code> permission, as in this picture:</p>
<img src="/img/tutorials/pinata-key-permissions.png" alt="Selecting the permissions for the Pinata key" style="width:300px">
</li>
<li>
<p>In the <strong>Key Name</strong> field, give the key a name, such as &quot;My Key.&quot;</p>
</li>
<li>
<p>Click <strong>Create Key</strong>.</p>
<p>The API Key Info window shows the API key and secret, which you must copy immediately, because it is not shown again.</p>
</li>
<li>
<p>Copy the API Key and API Secret fields and save the values on your computer.
You need these values in the next section.</p>
<p>You can see the new API key on the API Keys tab:</p>
<p><img decoding="async" loading="lazy" alt="The new Pinata API key in the Pinata web app" src="/previews/docs/biel-chatbot/assets/images/created-pinata-key-83f12d338e45932536b13918123efaf5.png" width="1872" height="726" class="img_ev3q"></p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="uploading-metadata">Uploading metadata<a href="#uploading-metadata" class="hash-link" aria-label="Direct link to Uploading metadata" title="Direct link to Uploading metadata">​</a></h2>
<p>The SmartPy <code>sp.pin_on_ipfs</code> function uploads metadata to IPFS via your Pinata account and &quot;pins&quot; it to ensure that it remains available until you remove it.
In this section, you add code to use this function to upload and pin contract metadata to IPFS when the test scenario runs.
It is still advisable to save a local copy of your metadata, just as you would with any upload service.</p>
<ol>
<li>
<p>After the code that instantiates the contract in the test scenario, use the <code>sp.create_tzip16_metadata</code> function to create a metadata object that is compatible with the <a href="https://gitlab.com/tezos/tzip/-/blob/master/proposals/tzip-16/tzip-16.md" target="_blank" rel="noopener noreferrer">TZIP-16</a> standard for contract metadata:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Build contract metadata content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract_metadata = sp.create_tzip16_metadata(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name=&quot;My FA2 fungible token contract&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description=&quot;This is an FA2 fungible token contract using SmartPy.&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version=&quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    license_name=&quot;CC-BY-SA&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    license_details=&quot;Creative Commons Attribution Share Alike license 4.0 https://creativecommons.org/licenses/by/4.0/&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    interfaces=[&quot;TZIP-012&quot;, &quot;TZIP-016&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    authors=[&quot;SmartPy &lt;https://smartpy.io/#contact&gt;&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    homepage=&quot;https://smartpy.io/ide?template=fa2_lib_fungible.py&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Optionally, upload the source code to IPFS and add the URI here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    source_uri=None,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    offchain_views=contract.get_offchain_views(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This code must come after you create the contract but before you add the contract to the scenario because it uses the <code>contract.get_offchain_views</code> function to retrieve the contract&#x27;s off-chain views.
Off-chain views are stored in metadata, not in the contract code or storage.</p>
</li>
<li>
<p>Optional: Edit the metadata fields with information about your contract.</p>
</li>
<li>
<p>Add permission information to the metadata with this code:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Add the info specific to FA2 permissions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract_metadata[&quot;permissions&quot;] = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # The operator policy chosen:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # owner-or-operator-transfer is the default.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;operator&quot;: &quot;owner-or-operator-transfer&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Those two options should always have these values.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # It means that the contract doesn&#x27;t use the hook mechanism.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;receiver&quot;: &quot;owner-no-hook&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;sender&quot;: &quot;owner-no-hook&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This metadata describes who is allowed to transfer tokens.
The permissions in this code allow token owners and operators to transfer tokens.
For more information about operators, see <a href="/previews/docs/biel-chatbot/architecture/tokens/FA2">FA2 tokens</a>.</p>
</li>
<li>
<p>Pin the metadata to IPFS and get its URI with this code:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Upload the metadata to IPFS and get its URI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata_uri = sp.pin_on_ipfs(contract_metadata, api_key=None, secret_key=None)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Update the <code>None</code> values in the <code>sp.pin_on_ipfs</code> function with your Pinata API key and secret key.
You can also put them in the <code>PINATA_KEY</code> and <code>PINATA_SECRET</code> environment variables and remove the <code>api_key</code> and <code>secret_key</code> parameters from the function call.</p>
</li>
<li>
<p>Create the contract metadata and add it to the contract with this code:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Create the metadata big map based on the IPFS URI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract_metadata = sp.scenario_utils.metadata_of_url(metadata_uri)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Update the scenario instance with the new metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract.data.metadata = contract_metadata</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This code creates a big map that has a single entry that points to the metadata URI.</p>
</li>
<li>
<p>Run the <code>python fa2_fungible.py</code> command to compile and test your contract.
Now, SmartPy uploads the metadata as part of the compilation process.</p>
</li>
<li>
<p>In your Pinata account, verify that the metadata file uploaded correctly.
By default, the file is named &quot;No name set&quot; and looks like this in your Pinata files:</p>
<p><img decoding="async" loading="lazy" alt="The uploaded file on Pinata" src="/previews/docs/biel-chatbot/assets/images/pinata-pinned-file-4676ce1ec636c3baed6ecc1fb93879db.png" width="1540" height="270" class="img_ev3q"></p>
<p>You can click this file to see it and verify that the name and description at the top of the file match the name and description of your contract.
The rest of the file is the code of off-chain views that the FA2 library adds automatically.</p>
</li>
</ol>
<p>The completed contract is at <a href="https://github.com/trilitech/tutorial-applications/blob/main/smartpy_fa2_fungible/part_3_complete.py" target="_blank" rel="noopener noreferrer">part_3_complete.py</a>.</p>
<p>Now when you deploy the completed contract, wallets and block explorers can show information about it.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-05-10T04:00:00.000Z" itemprop="dateModified">May 10, 2024</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/minting-and-burning"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Part 2: Adding minting and burning entrypoints</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/customizing-operations"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Part 4: Customizing operations</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#storing-metadata-with-ipfs" class="table-of-contents__link toc-highlight">Storing metadata with IPFS</a></li><li><a href="#tutorial-contract" class="table-of-contents__link toc-highlight">Tutorial contract</a></li><li><a href="#getting-a-pinata-api-key" class="table-of-contents__link toc-highlight">Getting a Pinata API key</a></li><li><a href="#uploading-metadata" class="table-of-contents__link toc-highlight">Uploading metadata</a></li></ul></div></div></div></div></main></div></div></div></div>
<script type="module" src="https://cdn.jsdelivr.net/npm/pushfeedback@latest/dist/pushfeedback/pushfeedback.esm.js"></script>
<script>const feedbackButton=document.createElement("feedback-button");feedbackButton.setAttribute("project","80ja0zkj8v"),feedbackButton.setAttribute("modal-position","bottom-right"),feedbackButton.setAttribute("button-style","light"),feedbackButton.setAttribute("button-position","bottom-right"),feedbackButton.setAttribute("id","default"),feedbackButton.textContent="Feedback",document.body.appendChild(feedbackButton)</script>
<script type="module" src="https://cdn.jsdelivr.net/npm/biel-search@latest/dist/biel-search/biel-search.esm.js"></script>
<script>const bielButton=document.createElement("biel-button");bielButton.setAttribute("project","w30c27l8fg"),bielButton.setAttribute("modal-position","bottom-right"),bielButton.setAttribute("button-style","dark"),bielButton.setAttribute("button-position","center-right"),bielButton.setAttribute("header-title","Tezos documentation chatbot"),bielButton.setAttribute("footer-text",'AI-generated answers may contain errors. Verify the information before use. For more information, see <a href="https://timothymcmackin.github.io/previews/docs/biel-chatbot/overview/chatbot">Using the chatbot</a>.'),bielButton.setAttribute("id","default"),bielButton.textContent="Ask AI",document.body.appendChild(bielButton)</script></body>
</html>