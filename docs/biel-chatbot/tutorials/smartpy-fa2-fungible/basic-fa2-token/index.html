<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorials/smartpy-fa2-fungible/basic-fa2-token" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Part 1: Setting up a simple FA2 token | Tezos Developer Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://timothymcmackin.github.io/previews/docs/biel-chatbot/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://timothymcmackin.github.io/previews/docs/biel-chatbot/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://timothymcmackin.github.io/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/basic-fa2-token"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Part 1: Setting up a simple FA2 token | Tezos Developer Documentation"><meta data-rh="true" name="description" content="In the first part of this tutorial, you create an FA2 token contact that has only the basic features that the standard requires."><meta data-rh="true" property="og:description" content="In the first part of this tutorial, you create an FA2 token contact that has only the basic features that the standard requires."><link data-rh="true" rel="icon" href="/previews/docs/biel-chatbot/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://timothymcmackin.github.io/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/basic-fa2-token"><link data-rh="true" rel="alternate" href="https://timothymcmackin.github.io/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/basic-fa2-token" hreflang="en"><link data-rh="true" rel="alternate" href="https://timothymcmackin.github.io/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/basic-fa2-token" hreflang="x-default"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-56M3FZ8",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>





<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pushfeedback@latest/dist/pushfeedback/pushfeedback.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/biel-search@latest/dist/biel-search/biel-search.css">

<meta http-equiv="Content-Security-Policy" content=" default-src &#39;none&#39;; base-uri &#39;self&#39;; manifest-src &#39;self&#39;; script-src https://*.googletagmanager.com https://cdn.jsdelivr.net &#39;self&#39; &#39;unsafe-inline&#39;; style-src https://cdn.jsdelivr.net &#39;self&#39; &#39;unsafe-inline&#39;; font-src https://cdn.jsdelivr.net &#39;self&#39;; img-src &#39;self&#39; https://*.googletagmanager.com https://*.google-analytics.com data:; media-src &#39;self&#39;; form-action &#39;self&#39;; connect-src &#39;self&#39; https://*.algolia.net https://*.algolianet.com https://*.googletagmanager.com https://*.google-analytics.com https://*.analytics.google.com https://app.pushfeedback.com wss://app.biel.ai https://app.biel.ai; frame-src https://tezosbot.vercel.app;">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/previews/docs/biel-chatbot/assets/css/styles.8d13b62a.css">
<script src="/previews/docs/biel-chatbot/assets/js/runtime~main.30e16d3c.js" defer="defer"></script>
<script src="/previews/docs/biel-chatbot/assets/js/main.9567d2cb.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-56M3FZ8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/previews/docs/biel-chatbot/"><div class="navbar__logo"><img src="/previews/docs/biel-chatbot/img/logo-tezos.svg" alt="Developer Docs for Tezos" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/previews/docs/biel-chatbot/img/logo-tezos.svg" alt="Developer Docs for Tezos" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Tezos Docs</b></a><a class="navbar__item navbar__link" href="/previews/docs/biel-chatbot/overview/">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/previews/docs/biel-chatbot/tutorials">Tutorials</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/trilitech/tezos-developer-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><biel-search-button project="w30c27l8fg" button-style="rounded" header-title="Documentation chatbot">AI-powered search</biel-search-button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/previews/docs/biel-chatbot/tutorials">Tutorials home</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__divider"><div>Beginner</div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/smart-contract">Deploy a smart contract</a><button aria-label="Expand sidebar category &#x27;Deploy a smart contract&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/create-an-nft/nft-web-app">Mint NFTs from a web app</a><button aria-label="Expand sidebar category &#x27;Mint NFTs from a web app&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/dapp">Start with a minimum dApp and add new features</a><button aria-label="Expand sidebar category &#x27;Start with a minimum dApp and add new features&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__divider"><div>Intermediate</div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/build-your-first-app">Build a simple web application</a><button aria-label="Expand sidebar category &#x27;Build a simple web application&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible">Create a fungible token with the SmartPy FA2 library</a><button aria-label="Collapse sidebar category &#x27;Create a fungible token with the SmartPy FA2 library&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/basic-fa2-token">Part 1: Setting up a simple FA2 token</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/minting-and-burning">Part 2: Adding minting and burning entrypoints</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/adding-metadata">Part 3: Adding metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/customizing-operations">Part 4: Customizing operations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/deploying-contract">Part 5: Deploying the contract</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/previews/docs/biel-chatbot/tutorials/create-an-nft/nft-taquito">Create a contract and web app that mints NFTs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/create-nfts">Create NFTs</a><button aria-label="Expand sidebar category &#x27;Create NFTs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/join-dal-baker">Run a Tezos node in 5 steps</a><button aria-label="Expand sidebar category &#x27;Run a Tezos node in 5 steps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/bake-with-ledger">Bake using a Ledger device</a><button aria-label="Expand sidebar category &#x27;Bake using a Ledger device&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__divider"><div>Advanced</div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/smart-rollup">Deploy a Smart Rollup</a><button aria-label="Expand sidebar category &#x27;Deploy a Smart Rollup&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/build-an-nft-marketplace">Build an NFT marketplace</a><button aria-label="Expand sidebar category &#x27;Build an NFT marketplace&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/security">Learn and play with security</a><button aria-label="Expand sidebar category &#x27;Learn and play with security&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/mobile">Create a mobile game</a><button aria-label="Expand sidebar category &#x27;Create a mobile game&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-chatbot/tutorials/build-files-archive-with-dal">Implement a file archive with the DAL</a><button aria-label="Expand sidebar category &#x27;Implement a file archive with the DAL&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/previews/docs/biel-chatbot/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible"><span itemprop="name">Create a fungible token with the SmartPy FA2 library</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Part 1: Setting up a simple FA2 token</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Part 1: Setting up a simple FA2 token</h1></header><p>In the first part of this tutorial, you create an FA2 token contact that has only the basic features that the standard requires.
For example, the standard does not require the contract to have <code>mint</code> and <code>burn</code> entrypoints that allow administrators to create and destroy tokens.
In this case, you create the contract with all of the tokens that it will ever have.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<p>To run this part of the tutorial, makes sure that you have the following tools installed:</p>
<ul>
<li><a href="https://www.python.org/" target="_blank" rel="noopener noreferrer">Python</a> and the <code>pip</code> package manager</li>
<li><a href="https://smartpy.io/manual/introduction/installation" target="_blank" rel="noopener noreferrer">SmartPy</a> version 0.20.0 or later; to verify the version of SmartPy you have installed, run <code>pip list | grep smartpy</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tutorial-contract">Tutorial contract<a href="#tutorial-contract" class="hash-link" aria-label="Direct link to Tutorial contract" title="Direct link to Tutorial contract">​</a></h2>
<p>The completed contract that you create in this part is at <a href="https://github.com/trilitech/tutorial-applications/blob/main/smartpy_fa2_fungible/part_1_complete.py" target="_blank" rel="noopener noreferrer">part_1_complete.py</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-the-library-to-create-a-contract">Using the library to create a contract<a href="#using-the-library-to-create-a-contract" class="hash-link" aria-label="Direct link to Using the library to create a contract" title="Direct link to Using the library to create a contract">​</a></h2>
<p>The FA2 library provides classes that you can extend to create your contract class.
Each class creates a certain type of token contract:</p>
<ul>
<li><code>main.Nft</code>: Non-fungible tokens, which are unique digital assets</li>
<li><code>main.Fungible</code>: Fungible tokens, which are interchangeable assets, like tez or other cryptocurrencies</li>
<li><code>main.SingleAsset</code>: Single-asset tokens, which are a simplified case of fungible tokens, allowing only one token type per contract</li>
</ul>
<p>Follow these steps to create your own token contract based on the <code>main.Fungible</code> base class:</p>
<ol>
<li>
<p>Create a Python file with a <code>.py</code> extension, such as <code>fa2_fungible.py</code>, in any text editor.</p>
</li>
<li>
<p>In the file, import SmartPy and its FA2 modules:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import smartpy as sp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from smartpy.templates import fa2_lib as fa2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Alias the main template for FA2 contracts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = fa2.main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create a SmartPy module to store your contract class and import the FA2 module:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@sp.module</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def my_module():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    import main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>In the module, create a contract class that inherits from the base class and the <code>OnchainviewBalanceOf</code> class, which provides an on-chain view that provides token balances:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class MyFungibleContract(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main.Fungible,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main.OnchainviewBalanceOf,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">):</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create the contract&#x27;s <code>__init__()</code> method and initialize the superclasses:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def __init__(self, contract_metadata, ledger, token_metadata):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Initialize on-chain balance view</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main.OnchainviewBalanceOf.__init__(self)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Initialize fungible token base class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main.Fungible.__init__(self, contract_metadata, ledger, token_metadata)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note the order of these classes both in the <code>class</code> statement and within the <code>__init__()</code> method.
You must inherit and initialize these classes in a specific order for them to work, as described in <a href="https://smartpy.io/guides/FA2-lib/mixins" target="_blank" rel="noopener noreferrer">Mixins</a>. </p>
</li>
<li>
<p>Outside the module, add these two utility functions to call views in the contract:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def _get_balance(fa2_contract, args):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;Utility function to call the contract&#x27;s get_balance view to get an account&#x27;s token balance.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return sp.View(fa2_contract, &quot;get_balance&quot;)(args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def _total_supply(fa2_contract, args):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;Utility function to call the contract&#x27;s total_supply view to get the total amount of tokens.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return sp.View(fa2_contract, &quot;total_supply&quot;)(args)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p>At this point, the contract looks like this:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import smartpy as sp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from smartpy.templates import fa2_lib as fa2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Alias the main template for FA2 contracts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = fa2.main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@sp.module</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def my_module():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    import main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    class MyFungibleContract(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        main.Fungible,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        main.OnchainviewBalanceOf,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def __init__(self, contract_metadata, ledger, token_metadata):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Initialize on-chain balance view</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            main.OnchainviewBalanceOf.__init__(self)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Initialize fungible token base class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            main.Fungible.__init__(self, contract_metadata, ledger, token_metadata)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def _get_balance(fa2_contract, args):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;Utility function to call the contract&#x27;s get_balance view to get an account&#x27;s token balance.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return sp.View(fa2_contract, &quot;get_balance&quot;)(args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def _total_supply(fa2_contract, args):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;Utility function to call the contract&#x27;s total_supply view to get the total amount of tokens.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return sp.View(fa2_contract, &quot;total_supply&quot;)(args)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Indentation is significant in Python, so make sure that your contract is indented like this example.</p>
<p>This short contract is all of the necessary code for a basic FA2 token contract.
The inherited classes provide all of the necessary entrypoints.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-the-contract-to-a-test-scenario">Adding the contract to a test scenario<a href="#adding-the-contract-to-a-test-scenario" class="hash-link" aria-label="Direct link to Adding the contract to a test scenario" title="Direct link to Adding the contract to a test scenario">​</a></h2>
<p>SmartPy provides a testing framework that runs contracts in a realistic simulation called a test scenario.
This test scenario is also the way SmartPy compiles contracts to Michelson for deployment, so you must add your contract to a test scenario.</p>
<ol>
<li>
<p>At the end of the contract file, define a test scenario function with this code:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@sp.add_test()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def test():</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The code within this scenario is ordinary Python, not SmartPy, so you can do all of the things that you can normally do in Python, including importing modules and calling external APIs.
Code within a SmartPy module (annotated with <code>@sp.module</code>) is SmartPy code and is limited by what you can do in smart contracts.
Importing modules and calling external APIs isn&#x27;t possible in SmartPy modules, except for the modules that SmartPy provides.</p>
</li>
<li>
<p>Inside the test scenario function, initialize the test scenario by passing a name for the scenario and the module to use in the scenario to the <code>sp.test_scenario</code> function:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Create and configure the test scenario</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario = sp.test_scenario(&quot;fa2_lib_fungible&quot;, my_module)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Define test accounts to use in the scenario with the <code>sp.test_account</code> function:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Define test accounts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alice = sp.test_account(&quot;Alice&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bob = sp.test_account(&quot;Bob&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Set up token metadata, which describes the tokens to users.
For example, these lines create metadata for two token types, named <code>Token Zero</code> and <code>Token One</code>:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Define initial token metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tok0_md = fa2.make_metadata(name=&quot;Token Zero&quot;, decimals=0, symbol=&quot;Tok0&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tok1_md = fa2.make_metadata(name=&quot;Token One&quot;, decimals=0, symbol=&quot;Tok1&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>fa2.make_metadata</code> function creates a token metadata object that complies with the <a href="https://gitlab.com/tezos/tzip/-/blob/master/proposals/tzip-12/tzip-12.md" target="_blank" rel="noopener noreferrer">TZIP-12</a> standard.</p>
<p>Your contract can have as many types of fungible tokens as you want, but the examples in this tutorial use these two token types.
The contract assigns them numeric IDs starting at 0.</p>
</li>
<li>
<p>Create the starting ledger for the contract, which lists the tokens and their owners.
This example gives 10 of token 0 to the Alice test account and 10 of token 1 to the Bob test account:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Define tokens and initial owners</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">initial_ledger = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (alice.address, 0): 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (bob.address, 1): 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The type of this ledger is set by the FA2 standard, so casting it to the <code>ledger_fungible</code> type helps you make sure that your ledger matches the standard.</p>
<p>The ledger is a big map where the key is a pair of the token owner and token ID and the value is the amount of tokens.
In table format, the ledger looks like this:</p>
<table><thead><tr><th>key</th><th>value</th></tr></thead><tbody><tr><td>Alice, token ID 0</td><td>10</td></tr><tr><td>Bob, token ID 1</td><td>10</td></tr></tbody></table>
<p>You can distribute tokens to any accounts that you want in the test scenario.
Because the contract has no <code>mint</code> entrypoint, this initial ledger defines all of the tokens and token types that the contract contains.</p>
</li>
<li>
<p>Create an instance of the contract in the test scenario and pass the values for its initial storage:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Instantiate the FA2 fungible token contract</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract = my_module.MyFungibleContract(sp.big_map(), initial_ledger, [tok0_md, tok1_md])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These are the parameters for the contract&#x27;s <code>__init__()</code> method:</p>
<ul>
<li>The contract metadata, which is blank for now</li>
<li>The initial ledger</li>
<li>The metadata for the token types, in a list</li>
</ul>
</li>
<li>
<p>Add the contract to the test scenario, which deploys (originates) it to the simulated Tezos environment:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Originate the contract in the test scenario</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario += contract</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p>At this point, the contract looks like this:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import smartpy as sp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from smartpy.templates import fa2_lib as fa2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Alias the main template for FA2 contracts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main = fa2.main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@sp.module</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def my_module():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    import main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    class MyFungibleContract(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        main.Fungible,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        main.OnchainviewBalanceOf,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def __init__(self, contract_metadata, ledger, token_metadata):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Initialize on-chain balance view</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            main.OnchainviewBalanceOf.__init__(self)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Initialize fungible token base class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            main.Fungible.__init__(self, contract_metadata, ledger, token_metadata)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def _get_balance(fa2_contract, args):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;Utility function to call the contract&#x27;s get_balance view to get an account&#x27;s token balance.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return sp.View(fa2_contract, &quot;get_balance&quot;)(args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def _total_supply(fa2_contract, args):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot;Utility function to call the contract&#x27;s total_supply view to get the total amount of tokens.&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return sp.View(fa2_contract, &quot;total_supply&quot;)(args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@sp.add_test()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def test():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Create and configure the test scenario</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scenario = sp.test_scenario(&quot;fa2_lib_fungible&quot;, my_module)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Define test accounts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alice = sp.test_account(&quot;Alice&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bob = sp.test_account(&quot;Bob&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Define initial token metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tok0_md = fa2.make_metadata(name=&quot;Token Zero&quot;, decimals=0, symbol=&quot;Tok0&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tok1_md = fa2.make_metadata(name=&quot;Token One&quot;, decimals=0, symbol=&quot;Tok1&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Define tokens and initial owners</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    initial_ledger = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (alice.address, 0): 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (bob.address, 1): 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Instantiate the FA2 fungible token contract</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contract = my_module.MyFungibleContract(sp.big_map(), initial_ledger, [tok0_md, tok1_md])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Originate the contract in the test scenario</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scenario += contract</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-tests">Adding tests<a href="#adding-tests" class="hash-link" aria-label="Direct link to Adding tests" title="Direct link to Adding tests">​</a></h2>
<p>SmartPy has built-in tools for testing contracts as part of the test scenario.
In test scenarios, you can call contract entrypoints, verify the contract storage, and do other things to make sure that the contract is working as expected.</p>
<p>Follow these steps to add tests to the contract:</p>
<ol>
<li>
<p>At the end of the file, add this code to verify the initial state of the ledger:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">scenario.h2(&quot;Verify the initial owners of the tokens&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _get_balance(contract, sp.record(owner=alice.address, token_id=0)) == 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _get_balance(contract, sp.record(owner=bob.address, token_id=0)) == 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _get_balance(contract, sp.record(owner=alice.address, token_id=1)) == 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _get_balance(contract, sp.record(owner=bob.address, token_id=1)) == 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(_total_supply(contract, sp.record(token_id=0)) == 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(_total_supply(contract, sp.record(token_id=1)) == 10)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This code uses the <code>get_balance_of</code> and <code>total_supply</code> views to check the current owners of the tokens and the total amount of tokens when the contract is deployed.</p>
<p>Note that the calls to these views are within the <code>scenario.verify</code> function.
To verify details about the deployed contract, you must use this function to access the state of the contract within the test scenario.</p>
</li>
<li>
<p>Add this code to call the contract&#x27;s <code>transfer</code> entrypoint and verify that the tokens transferred correctly:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">scenario.h2(&quot;Transfer tokens&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Bob sends 3 of token 1 to Alice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract.transfer(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sp.record(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            from_=bob.address,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            txs=[sp.record(to_=alice.address, amount=3, token_id=1)],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _sender=bob,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _get_balance(contract, sp.record(owner=alice.address, token_id=0)) == 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _get_balance(contract, sp.record(owner=bob.address, token_id=0)) == 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _get_balance(contract, sp.record(owner=alice.address, token_id=1)) == 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _get_balance(contract, sp.record(owner=bob.address, token_id=1)) == 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(_total_supply(contract, sp.record(token_id=0)) == 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(_total_supply(contract, sp.record(token_id=1)) == 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Alice sends 4 of token 0 to Bob</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract.transfer(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sp.record(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            from_=alice.address,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            txs=[sp.record(to_=bob.address, amount=4, token_id=0)],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _sender=alice,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _get_balance(contract, sp.record(owner=alice.address, token_id=0)) == 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _get_balance(contract, sp.record(owner=bob.address, token_id=0)) == 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _get_balance(contract, sp.record(owner=alice.address, token_id=1)) == 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _get_balance(contract, sp.record(owner=bob.address, token_id=1)) == 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(_total_supply(contract, sp.record(token_id=0)) == 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scenario.verify(_total_supply(contract, sp.record(token_id=1)) == 10)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This code calls the transfer entrypoint, passes the transfer information, and adds the <code>_sender=bob</code> parameter to indicate that the transfer came from Bob&#x27;s account.
Then it calls the contract&#x27;s views again to verify that the tokens were transferred and that the total supply of tokens remains the same.
Then it tries again from Alice&#x27;s account.</p>
</li>
<li>
<p>Test an entrypoint call that should fail by adding this code:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Bob cannot transfer Alice&#x27;s tokens</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract.transfer(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sp.record(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            from_=alice.address,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            txs=[sp.record(to_=bob.address, amount=1, token_id=0)],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _sender=bob,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _valid=False,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This call should fail because it comes from Bob&#x27;s account but the call tries to transfer tokens out of Alice&#x27;s account.
The call includes the <code>_valid=False</code> parameter to indicate that this call should fail.</p>
</li>
</ol>
<p>You can add any number of tests to your test scenario.
In practice, you should test all features of your contract thoroughly to identify any problems before deployment.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="compiling-the-contract">Compiling the contract<a href="#compiling-the-contract" class="hash-link" aria-label="Direct link to Compiling the contract" title="Direct link to Compiling the contract">​</a></h2>
<p>To compile the contract, use the <code>python</code> command, just like any other Python file:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python fa2_fungible.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If SmartPy compiles your contract successfully, nothing is printed to the command line output.
Its compiler writes your contract to a folder with the name in the <code>sp.test_scenario</code> function, which is <code>fa2_lib_fungible</code> in this example.
This folder has many files, including:</p>
<ul>
<li><code>log.txt</code>: A compilation log that lists the steps in the test scenario and connects them to the other files that the compiler created.</li>
<li><code>step_003_cont_0_contract.tz</code>: The compiled Michelson contract, which is what you deploy to Tezos in the next section.
The compiler also creates a JSON version of the compiled contract.</li>
<li><code>step_003_cont_0_storage.tz</code>: The compiled Michelson value of the initial contract storage, based on the parameters you passed when you instantiated the contract in the test scenario.
The compiler also creates a JSON and Python version of the storage.</li>
<li><code>step_003_cont_0_types.py</code>: The Python types that the contract uses, which can help you call the contract from other SmartPy contracts.</li>
</ul>
<p>You can use the compiled contract and storage files to deploy the contract.
In the next section, you deploy the contract to a local Tezos sandbox.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<p>If the <code>python</code> command shows any errors, make sure that your contract matches the example.
In particular, check your indentation, because indentation is significant in Python and SmartPy.</p>
<p>You can compare your contract with the completed contract here: <a href="https://github.com/trilitech/tutorial-applications/blob/main/smartpy_fa2_fungible/part_1_complete.py" target="_blank" rel="noopener noreferrer">part_1_complete.py</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optional-deploy-the-contract-to-the-octez-client-mockup-mode">(Optional) Deploy the contract to the Octez client mockup mode<a href="#optional-deploy-the-contract-to-the-octez-client-mockup-mode" class="hash-link" aria-label="Direct link to (Optional) Deploy the contract to the Octez client mockup mode" title="Direct link to (Optional) Deploy the contract to the Octez client mockup mode">​</a></h2>
<p>The Octez client provides a few local sandbox modes that you can use to test contracts without uploading them to a test network or running a local Tezos environment.</p>
<p>Follow these steps to set up the Octez client mockup mode and deploy the contract to it:</p>
<ol>
<li>
<p>Install the Octez client by following the steps in <a href="/previews/docs/biel-chatbot/developing/octez-client/installing">Installing the Octez client</a>.</p>
</li>
<li>
<p>Set up the Octez client mockup mode:</p>
<ol>
<li>
<p>Run this command to start mockup mode:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">octez-client \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --protocol ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --base-dir /tmp/mockup \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --mode mockup \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  create mockup</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now you can run commands in mockup mode by prefixing them with <code>octez-client --mode mockup --base-dir /tmp/mockup</code>.</p>
</li>
<li>
<p>Create an alias for mockup mode:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">alias mockup-client=&#x27;octez-client --mode mockup --base-dir /tmp/mockup&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now you can run commands in mockup mode with the <code>mockup-client</code> alias, as in this example:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mockup-client list known addresses</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
</li>
<li>
<p>Deploy the contract to mockup mode:</p>
<ol>
<li>
<p>Create two Octez accounts to represent the Alice and Bob accounts in the test scenario:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mockup-client gen keys alice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mockup-client gen keys bob</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Get the addresses for Alice and Bob by running this command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mockup-client list known addresses</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Replace the addresses in the initial storage value in the <code>step_003_cont_0_storage.tz</code> file with the mockup addresses.
For example, the file might look like this:</p>
<div class="language-michelson codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-michelson codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(</span><span class="token type keyword" style="color:#00009f">Pair</span><span class="token plain"> {Elt (</span><span class="token type keyword" style="color:#00009f">Pair</span><span class="token plain"> &quot;tz1Utg2AKcbLgVokY7J8QiCjcfo5KHk3VtHU&quot; 1) 10; Elt (</span><span class="token type keyword" style="color:#00009f">Pair</span><span class="token plain"> &quot;tz1XeaZgLqgCqMA3Egz5Q7bqiqdFefaNoQd5&quot; 0) 10} (</span><span class="token type keyword" style="color:#00009f">Pair</span><span class="token plain"> {} (</span><span class="token type keyword" style="color:#00009f">Pair</span><span class="token plain"> 2 (</span><span class="token type keyword" style="color:#00009f">Pair</span><span class="token plain"> {} (</span><span class="token type keyword" style="color:#00009f">Pair</span><span class="token plain"> {Elt 0 10; Elt 1 10} {Elt 0 (</span><span class="token type keyword" style="color:#00009f">Pair</span><span class="token plain"> 0 {Elt &quot;decimals&quot; 0x30; Elt &quot;name&quot; 0x546f6b656e205a65726f; Elt &quot;symbol&quot; 0x546f6b30}); Elt 1 (</span><span class="token type keyword" style="color:#00009f">Pair</span><span class="token plain"> 1 {Elt &quot;decimals&quot; 0x30; Elt &quot;name&quot; 0x546f6b656e204f6e65; Elt &quot;symbol&quot; 0x546f6b31})})))))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now you can use this file as the initial storage value and give the initial tokens to the mockup addresses.</p>
</li>
<li>
<p>Deploy the contract by passing the compiled contract and initial storage value to the <code>originate contract</code> command.
For example, if your compiled files are in the <code>fa2_lib_fungible</code> folder, the command looks like this:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mockup-client originate contract smartpy_fa2_fungible \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  transferring 0 from bootstrap1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  running fa2_lib_fungible/step_003_cont_0_contract.tz \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --init &quot;$(cat fa2_lib_fungible/step_003_cont_0_storage.tz)&quot; --burn-cap 3 --force</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you see errors that refer to unexpected characters, make sure the paths to the files are correct and that you changed only the content of addresses inside quotes in the storage file.</p>
<p>If you see the error &quot;Keys in a map literal must be in strictly ascending order, but they were unordered in literal,&quot; reverse the order of the two addresses.</p>
<p>If the deployment succeeds, the Octez client prints the address of the contract and aliases it as <code>smartpy_fa2_fungible</code>.</p>
</li>
<li>
<p>Use the built-in <code>get_balance_of</code> view to see the tokens that one of the accounts owns:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mockup-client run view get_balance_of \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  on contract smartpy_fa2_fungible \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  with input &#x27;{Pair &quot;tz1Utg2AKcbLgVokY7J8QiCjcfo5KHk3VtHU&quot; 1}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The response shows a Michelson value that includes the ID and amount of tokens that the address owns, as in this example:</p>
<div class="language-michelson codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-michelson codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{ </span><span class="token type keyword" style="color:#00009f">Pair</span><span class="token plain"> (</span><span class="token type keyword" style="color:#00009f">Pair</span><span class="token plain"> &quot;tz1Utg2AKcbLgVokY7J8QiCjcfo5KHk3VtHU&quot; 1) 10 }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
</li>
</ol>
<p>For more information, see <a href="https://tezos.gitlab.io/user/mockup.html" target="_blank" rel="noopener noreferrer">Mockup mode</a> in the Octez documentation.</p>
<p>Now you have a basic FA2 fungible token contract that starts with a predefined amount of tokens.</p>
<p>In the next part, you add minting and burning functionality to the contract so an administrator can create and destroy tokens.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-12-06T05:00:00.000Z" itemprop="dateModified">Dec 6, 2024</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Create a fungible token with the SmartPy FA2 library</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/minting-and-burning"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Part 2: Adding minting and burning entrypoints</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#tutorial-contract" class="table-of-contents__link toc-highlight">Tutorial contract</a></li><li><a href="#using-the-library-to-create-a-contract" class="table-of-contents__link toc-highlight">Using the library to create a contract</a></li><li><a href="#adding-the-contract-to-a-test-scenario" class="table-of-contents__link toc-highlight">Adding the contract to a test scenario</a></li><li><a href="#adding-tests" class="table-of-contents__link toc-highlight">Adding tests</a></li><li><a href="#compiling-the-contract" class="table-of-contents__link toc-highlight">Compiling the contract</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a></li><li><a href="#optional-deploy-the-contract-to-the-octez-client-mockup-mode" class="table-of-contents__link toc-highlight">(Optional) Deploy the contract to the Octez client mockup mode</a></li></ul></div></div></div></div></main></div></div></div></div>
<script type="module" src="https://cdn.jsdelivr.net/npm/pushfeedback@latest/dist/pushfeedback/pushfeedback.esm.js"></script>
<script>const feedbackButton=document.createElement("feedback-button");feedbackButton.setAttribute("project","80ja0zkj8v"),feedbackButton.setAttribute("modal-position","bottom-right"),feedbackButton.setAttribute("button-style","light"),feedbackButton.setAttribute("button-position","bottom-right"),feedbackButton.setAttribute("id","default"),feedbackButton.textContent="Feedback",document.body.appendChild(feedbackButton)</script>
<script type="module" src="https://cdn.jsdelivr.net/npm/biel-search@latest/dist/biel-search/biel-search.esm.js"></script>
<script>const bielButton=document.createElement("biel-button");bielButton.setAttribute("project","w30c27l8fg"),bielButton.setAttribute("modal-position","bottom-right"),bielButton.setAttribute("button-style","dark"),bielButton.setAttribute("button-position","center-right"),bielButton.setAttribute("header-title","Chatbot"),bielButton.setAttribute("id","default"),bielButton.textContent="Ask AI",document.body.appendChild(bielButton)</script></body>
</html>