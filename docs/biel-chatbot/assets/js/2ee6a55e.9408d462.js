"use strict";(self.webpackChunktezos_developer_docs=self.webpackChunktezos_developer_docs||[]).push([[6913],{83671:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>r,default:()=>l,frontMatter:()=>c,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"tutorials/join-dal-baker/prepare-account","title":"Step 2: Set up baker accounts","description":"In this section you use the Octez client to set up two accounts for your baker:","source":"@site/docs/tutorials/join-dal-baker/prepare-account.md","sourceDirName":"tutorials/join-dal-baker","slug":"/tutorials/join-dal-baker/prepare-account","permalink":"/previews/docs/biel-chatbot/tutorials/join-dal-baker/prepare-account","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1736398800000,"frontMatter":{"title":"Step 2: Set up baker accounts","authors":"Tezos core developers, Tim McMackin","last_update":{"date":"9 January 2025"}},"sidebar":"tutorialsSidebar","previous":{"title":"Step 1: Run an Octez node","permalink":"/previews/docs/biel-chatbot/tutorials/join-dal-baker/run-node"},"next":{"title":"Step 3: Run an Octez DAL node","permalink":"/previews/docs/biel-chatbot/tutorials/join-dal-baker/run-dal-node"}}');var a=n(74848),o=n(28453);const c={title:"Step 2: Set up baker accounts",authors:"Tezos core developers, Tim McMackin",last_update:{date:"9 January 2025"}},r=void 0,i={},u=[{value:"Why set up a consensus key?",id:"why-set-up-a-consensus-key",level:2},{value:"Creating the accounts",id:"creating-the-accounts",level:2}];function h(e){const t={a:"a",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"In this section you use the Octez client to set up two accounts for your baker:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"The baker key itself (also called the manager key) stakes tez and registers as a delegate"}),"\n",(0,a.jsxs)(t.li,{children:["The consensus key is the key that the baker uses to sign attestations, which are generally referred to as ",(0,a.jsx)(t.em,{children:"consensus operations"})]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"why-set-up-a-consensus-key",children:"Why set up a consensus key?"}),"\n",(0,a.jsx)(t.p,{children:"Using a separate consensus key is not required but it is good security practice.\nSigning consensus operations incurs no fees, so you can set up a consensus key with no tez.\nYou can generate and use this key on a remote machine that runs the baker and keep the baker key with your staked tez in a more secure location to reduce risk to your funds.\nThis prevents you from having to move private keys between machines, which is inherently dangerous."}),"\n",(0,a.jsx)(t.p,{children:"If the consensus key is compromised or lost, you can create a new consensus key and switch the baker to it without changing how your tez is staked and delegated and without moving your delegators and stakers to a new account.\nIn this way you can avoid transferring or backing up the consensus key or you can store it in a Key Management System (KMS) or Hardware Security Module (HSM) where no one has access to its private key."}),"\n",(0,a.jsx)(t.p,{children:"However, the consensus key can drain the liquid (unstaked) tez from the baker key, so you must keep the consensus key secure like all other keys."}),"\n",(0,a.jsxs)(t.p,{children:["For more information about consensus keys, see ",(0,a.jsx)(t.a,{href:"https://tezos.gitlab.io/user/key-management.html#consensus-key",children:"Consensus key"})," in the Octez documentation."]}),"\n",(0,a.jsx)(t.h2,{id:"creating-the-accounts",children:"Creating the accounts"}),"\n",(0,a.jsx)(t.p,{children:"In this section, you use the Octez client to create these accounts and set them up for baking."}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:['Create or import an account in the Octez client to be the baker account (sometimes called the "manager" account).\nThe simplest way to get an account is to use the Octez client to randomly generate an account.\nThis command creates an account and associates it with the ',(0,a.jsx)(t.code,{children:"my_baker"})," alias:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"octez-client gen keys my_baker\n"})}),"\n",(0,a.jsx)(t.p,{children:"You can get the address of the generated account with this command:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"octez-client show address my_baker\n"})}),"\n",(0,a.jsx)(t.p,{children:"You can check the balance of the account with this command:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"octez-client get balance for my_baker\n"})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Stake at least 6,000 tez with the account, saving a small liquid amount for transaction fees.\nStaked tez is temporarily frozen and cannot be spent, so you need some unstaked tez to pay transaction fees."}),"\n",(0,a.jsx)(t.p,{children:"You can check how much you have staked by running this command:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"octez-client get staked balance for my_baker\n"})}),"\n",(0,a.jsxs)(t.p,{children:["If you need to stake more, pass the amount to the ",(0,a.jsx)(t.code,{children:"stake"})," command, as in this example:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"octez-client stake 6000 for my_baker\n"})}),"\n",(0,a.jsxs)(t.p,{children:["If you are using a testnet and need tez to stake, you can get tez from the testnet faucet.\nFor example, if you are using Ghostnet, use the Ghostnet faucet linked from ",(0,a.jsx)(t.a,{href:"https://teztnets.com/ghostnet-about",children:"https://teztnets.com/ghostnet-about"})," to send tez to the baker account."]}),"\n",(0,a.jsx)(t.p,{children:"Running a baker requires staking at least 6,000 tez, but the more tez it stakes, the more rights it gets and the less time it has to wait to produce blocks and make attestations.\nHowever, be aware that getting large amounts of tez from the faucet may take a long time (sometimes more than one hour) to prevent abuse of the faucet.\nConsequently, some large requests may time out or fail and need to be resubmitted."}),"\n",(0,a.jsx)(t.p,{children:"When the account receives its tez, it owns enough stake to bake but has still no consensus or DAL rights because it has not declared its intention to become a baker."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["(Optional) Set up a separate account to be the consensus key.\nThis command creates an account and associates it with the ",(0,a.jsx)(t.code,{children:"consensus_key"})," alias:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"octez-client gen keys consensus_key\n"})}),"\n",(0,a.jsx)(t.p,{children:"This account does not need any tez."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Register the baker account as a delegate and set its consensus key (if you set one) by running the following command:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"octez-client register key my_baker as delegate with consensus key consensus_key\n"})}),"\n",(0,a.jsxs)(t.p,{children:["If you are not using a consensus key, omit the argument ",(0,a.jsx)(t.code,{children:"with consensus key consensus_key"}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Now the baker account has staked enough tez to earn the right to make attestations, including attestations that data is available on the DAL.\nIf you set up a consensus key, that key is authorized to sign consensus operations on behalf of the baker account.\nHowever, the accounts do not receive these rights until a certain amount of time has passed."}),"\n",(0,a.jsxs)(t.p,{children:["While you wait for attestation rights, continue to ",(0,a.jsx)(t.a,{href:"/tutorials/join-dal-baker/run-dal-node",children:"Step 3: Run an Octez DAL node"}),"."]})]})}function l(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>r});var s=n(96540);const a={},o=s.createContext(a);function c(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);