"use strict";(self.webpackChunktezos_developer_docs=self.webpackChunktezos_developer_docs||[]).push([[2211],{63730:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"tutorials/create-an-nft/nft-taquito","title":"Create a contract and web app that mints NFTs","description":"This tutorial covers how to set up a decentralized web application (dApp) that allows users to create NFTs on Tezos.","source":"@site/docs/tutorials/create-an-nft/nft-taquito.md","sourceDirName":"tutorials/create-an-nft","slug":"/tutorials/create-an-nft/nft-taquito","permalink":"/previews/docs/biel-chatbot/tutorials/create-an-nft/nft-taquito","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1704430800000,"frontMatter":{"title":"Create a contract and web app that mints NFTs","authors":"Sol Lederer, Tim McMackin","last_update":{"date":"5 January 2024"}},"sidebar":"tutorialsSidebar","previous":{"title":"Part 5: Deploying the contract","permalink":"/previews/docs/biel-chatbot/tutorials/smartpy-fa2-fungible/deploying-contract"},"next":{"title":"Create NFTs from a web application","permalink":"/previews/docs/biel-chatbot/tutorials/create-nfts"}}');var a=n(74848),i=n(28453);const o={title:"Create a contract and web app that mints NFTs",authors:"Sol Lederer, Tim McMackin",last_update:{date:"5 January 2024"}},r=void 0,c={},l=[{value:"What is a non-fungible token (NFT)?",id:"what-is-a-non-fungible-token-nft",level:2},{value:"Tutorial application",id:"tutorial-application",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Configure IPFS storage",id:"configure-ipfs-storage",level:2},{value:"Download the tutorial files",id:"download-the-tutorial-files",level:2},{value:"The tutorial contract",id:"the-tutorial-contract",level:2},{value:"Contract entrypoints",id:"contract-entrypoints",level:3},{value:"Contract types",id:"contract-types",level:3},{value:"Error messages",id:"error-messages",level:3},{value:"Internal functions",id:"internal-functions",level:3},{value:"Entrypoint functions",id:"entrypoint-functions",level:3},{value:"Initial storage state",id:"initial-storage-state",level:3},{value:"Originate (deploy) the smart contract to the testnet",id:"originate-deploy-the-smart-contract-to-the-testnet",level:2},{value:"Run the backend application",id:"run-the-backend-application",level:2},{value:"Run the frontend application",id:"run-the-frontend-application",level:2},{value:"Testing the application",id:"testing-the-application",level:2},{value:"Summary",id:"summary",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"This tutorial covers how to set up a decentralized web application (dApp) that allows users to create NFTs on Tezos.\nNo prior knowledge of NFTs or Tezos is required, but because the tutorial application uses TypeScript, some familiarity with JavaScript or TypeScript makes it easier to understand."}),"\n",(0,a.jsx)(t.p,{children:"In this tutorial, you will learn:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"What NFTs are"}),"\n",(0,a.jsx)(t.li,{children:"How to set up distributed storage for NFT metadata"}),"\n",(0,a.jsx)(t.li,{children:"How to deploy (originate) a smart contract to Tezos"}),"\n",(0,a.jsxs)(t.li,{children:["How to use the ",(0,a.jsx)(t.a,{href:"https://tezostaquito.io/",children:"Taquito"})," JavaScript/TypeScript SDK to access Tezos and user wallets and to send transactions to Tezos"]}),"\n"]}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsxs)(t.p,{children:["This tutorial covers both the backend and frontend parts of a dApp.\nFor a simpler tutorial that covers creating only the frontend application, see ",(0,a.jsx)(t.a,{href:"/tutorials/create-an-nft/nft-web-app",children:"Mint NFTs from a web app"}),"."]})}),"\n",(0,a.jsx)(t.h2,{id:"what-is-a-non-fungible-token-nft",children:"What is a non-fungible token (NFT)?"}),"\n",(0,a.jsx)(t.p,{children:"An NFT is a special type of blockchain token that represents something unique.\nFungible tokens such as XTZ and real-world currencies like dollars and euros are interchangeable; each one is the same as every other.\nBy contrast, each NFT is unique and not interchangeable.\nNFTs can represent ownership over digital or physical assets like virtual collectibles or unique artwork, or anything that you want them to represent."}),"\n",(0,a.jsx)(t.p,{children:"Like other types of Tezos tokens, a collection of NFTs is managed by a smart contract.\nThe smart contract defines what information is in each token and how the tokens behave, such as what happens when a user transfers an NFT to another user.\nIt also keeps a ledger that records which account owns each NFT."}),"\n",(0,a.jsxs)(t.p,{children:["In this tutorial, you create NFTs that comply with the FA2 standard (formally known as the ",(0,a.jsx)(t.a,{href:"https://gitlab.com/tezos/tzip/-/blob/master/proposals/tzip-12/tzip-12.md",children:"TZIP-12"})," standard), the current standard for tokens on Tezos.\nThe FA2 standard creates a framework for how tokens behave on Tezos, including fungible, non-fungible, and other types of tokens.\nIt provides a standard API to transfer tokens, check token balances, manage operators (addresses that are permitted to transfer tokens on behalf of the token owner), and manage token metadata."]}),"\n",(0,a.jsx)(t.h2,{id:"tutorial-application",children:"Tutorial application"}),"\n",(0,a.jsx)(t.p,{children:"The application that you set up in this tutorial has three parts:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["The ",(0,a.jsx)(t.strong,{children:"smart contract"})," runs on the Tezos blockchain to manage the NFTs, including creating, transferring, and destroying them"]}),"\n",(0,a.jsxs)(t.li,{children:["The ",(0,a.jsx)(t.strong,{children:"backend application"})," runs on a web server to upload the NFT data to the internet"]}),"\n",(0,a.jsxs)(t.li,{children:["The ",(0,a.jsx)(t.strong,{children:"frontend application"})," runs on a web server and allows the user to connect their wallet, enter the information for the NFT, and send a request to the smart contract to create the NFT"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"This diagram shows what happens when the user creates an NFT with the application.\nThe rest of this tutorial covers these steps in detail:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Flow diagram of the tutorial application and interaction between the user and the parts of the application",src:n(44362).A+"",width:"2504",height:"1044"})}),"\n",(0,a.jsx)(t.p,{children:"The frontend application looks like this, with fields for the image to represent the NFT and for its metadata:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"The home page of the frontend application",src:n(36151).A+"",width:"1052",height:"1396"})}),"\n",(0,a.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsxs)(t.p,{children:["To run this tutorial you need Node.JS and NPM installed.\nSee ",(0,a.jsx)(t.a,{href:"https://nodejs.org/",children:"https://nodejs.org/"}),".\nYou can verify that they are installed by running these commands:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"node --version\nnpm --version\n"})}),"\n",(0,a.jsx)(t.h2,{id:"configure-ipfs-storage",children:"Configure IPFS storage"}),"\n",(0,a.jsx)(t.p,{children:"NFTs have metadata, usually including at least a title and description.\nOptionally, the NFT can include many other metadata fields, such as links to media and attributes in many different formats."}),"\n",(0,a.jsx)(t.p,{children:"Because storage space on blockchains is expensive, developers don't put entire token metadata files on Tezos.\nInstead, they configure decentralized storage for the NFT data and put only the link to that data on Tezos itself.\nIn this section, you set up storage for the NFT metadata using the InterPlanetary File System (IPFS) protocol."}),"\n",(0,a.jsxs)(t.p,{children:["IPFS requires authentication just like blockchain transactions, so in this section you set up an account with the Pinata IPFS provider and use it to upload (or ",(0,a.jsx)(t.em,{children:"pin"}),") the NFT data to IPFS."]}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Create a free Pinata account at ",(0,a.jsx)(t.a,{href:"https://app.pinata.cloud/developers/api-keys",children:"https://app.pinata.cloud/developers/api-keys"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Go to the API Keys tab and click ",(0,a.jsx)(t.strong,{children:"New Key"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["On the Create New API Key page, expand ",(0,a.jsx)(t.strong,{children:"API Endpoint Access > Pinning"})," and enable the ",(0,a.jsx)(t.code,{children:"pinFileToIPFS"})," and ",(0,a.jsx)(t.code,{children:"pinJSONToIPFS"})," permissions, as in this picture:"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Selecting the permissions for the Pinata key",src:n(46115).A+"",width:"1158",height:"1128"})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["In the ",(0,a.jsx)(t.strong,{children:"Key Name"}),' field, give the key a name, such as "My Key."']}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)(t.strong,{children:"Create Key"}),"."]}),"\n",(0,a.jsx)(t.p,{children:"The API Key Info window shows the API key and secret, which you must copy immediately, because they are not shown again."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Copy the API Key and API Secret fields and save the values on your computer.\nYou need these values in the next section."}),"\n",(0,a.jsx)(t.p,{children:"You can see the new API key on the API Keys tab:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"The new Pinata API key in the Pinata web app",src:n(71353).A+"",width:"1872",height:"726"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Now your applications can use your Pinata account to pin NFT data to IPFS."}),"\n",(0,a.jsx)(t.h2,{id:"download-the-tutorial-files",children:"Download the tutorial files"}),"\n",(0,a.jsx)(t.p,{children:"The tutorial application has three parts:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"The smart contract that manages the NFTs"}),"\n",(0,a.jsx)(t.li,{children:"The backend application that handles uploading data to IPFS"}),"\n",(0,a.jsx)(t.li,{children:"The frontend application that connects to the user's wallet, sends the data to the backend application, and sends the transactions to the smart contract to mint the NFTs"}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["The tutorial application files are in this GiHub repository: ",(0,a.jsx)(t.a,{href:"https://github.com/trilitech/tutorial-applications/tree/main/nft-taquito",children:"https://github.com/trilitech/tutorial-applications/tree/main/nft-taquito"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["If you have the ",(0,a.jsx)(t.code,{children:"git"})," program installed, you can clone the repository with this command:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"git clone https://github.com/trilitech/tutorial-applications.git\n"})}),"\n",(0,a.jsxs)(t.p,{children:["If you don't have git installed, go to ",(0,a.jsx)(t.a,{href:"https://github.com/trilitech/tutorial-applications/tree/main/nft-taquito",children:"https://github.com/trilitech/tutorial-applications/tree/main/nft-taquito"}),' and click "Code  Download ZIP" and extra the ZIP file on your computer.']}),"\n",(0,a.jsxs)(t.p,{children:["Then, go to the application in the ",(0,a.jsx)(t.code,{children:"nft-taquito"})," folder."]}),"\n",(0,a.jsx)(t.h2,{id:"the-tutorial-contract",children:"The tutorial contract"}),"\n",(0,a.jsxs)(t.p,{children:["The file ",(0,a.jsx)(t.code,{children:"contract/NFTS_contract.mligo"})," contains the code for the smart contract that manages the NFTs.\nThis contract is written in the CameLIGO version of the LIGO smart contract programming language, with a syntax similar to OCaml.\nThis contract is already written for you, so do not need any experience with these languages to run the tutorial."]}),"\n",(0,a.jsxs)(t.p,{children:["This contract creates NFTs that comply with the FA2 standard (formally known as the ",(0,a.jsx)(t.a,{href:"https://gitlab.com/tezos/tzip/-/blob/master/proposals/tzip-12/tzip-12.md",children:"TZIP-12"})," standard), the current standard for tokens on Tezos.\nThe FA2 standard creates a framework for how tokens behave on Tezos, including fungible, non-fungible, and other types of tokens.\nIt provides a standard API to transfer tokens, check token balances, manage operators (addresses that are permitted to transfer tokens on behalf of the token owner), and manage token metadata."]}),"\n",(0,a.jsx)(t.p,{children:"The full details of the smart contract are beyond the scope of this tutorial, but the major parts of the contract have descriptions in comments."}),"\n",(0,a.jsx)(t.h3,{id:"contract-entrypoints",children:"Contract entrypoints"}),"\n",(0,a.jsxs)(t.p,{children:["Like APIs, smart contracts have ",(0,a.jsx)(t.em,{children:"entrypoints"}),", which are commands that transaction senders (client applications such as your web app or other contracts) can call.\nTo comply with the TZIP-12 standard, the smart contract must have these entrypoints:"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"transfer"}),": Transfers tokens from one account to another"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"balance_of"}),": Provides information about the tokens that an account owns"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"update_operators"}),": Changes the accounts that can transfer tokens"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"This contract includes these additional entrypoints:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"mint"}),": Creates NFTs"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"burn"}),": Destroys NFTs"]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"contract-types",children:"Contract types"}),"\n",(0,a.jsx)(t.p,{children:"Because Tezos uses strongly-typed languages, this contract's code starts by defining the types that the contract uses.\nThese types are important for verifying that data is in the correct format, such as the parameters the transaction senders pass."}),"\n",(0,a.jsxs)(t.p,{children:["For example, the ",(0,a.jsx)(t.code,{children:"transfer"})," entrypoint accepts a list of the ",(0,a.jsx)(t.code,{children:"transfer"})," type.\nThis type includes the account to transfer tokens from and a list of the ",(0,a.jsx)(t.code,{children:"transfer_destination"})," type, which includes the account to transfer tokens to, the ID of the token to transfer, and the amount to transfer:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-cameligo",children:"type token_id = nat\n\ntype transfer_destination =\n[@layout:comb]\n{\n  to_ : address;\n  token_id : token_id;\n  amount : nat;\n}\n\ntype transfer =\n[@layout:comb]\n{\n  from_ : address;\n  txs : transfer_destination list;\n}\n"})}),"\n",(0,a.jsx)(t.h3,{id:"error-messages",children:"Error messages"}),"\n",(0,a.jsxs)(t.p,{children:["The contract defines a series of error messages, and comments in the code describe what each error message means.\nFor example, the ",(0,a.jsx)(t.code,{children:"balance_of"})," and ",(0,a.jsx)(t.code,{children:"transfer"})," entrypoints return this error if the client requests information about a token that does not exist or tries to transfer a token that does not exist:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-cameligo",children:'(** One of the specified `token_id`s is not defined within the FA2 contract *)\nlet fa2_token_undefined = "FA2_TOKEN_UNDEFINED"\n'})}),"\n",(0,a.jsx)(t.h3,{id:"internal-functions",children:"Internal functions"}),"\n",(0,a.jsx)(t.p,{children:"The contract has many internal functions, such as this function, which gets the specified account's balance of tokens.\nIn the case of NFTs, only one of each token exists, so the function returns a balance of 1 if the account owns the token and 0 if it does not."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-cameligo",children:"(**\nRetrieve the balances for the specified tokens and owners\n@return callback operation\n*)\nlet get_balance (p, ledger : balance_of_param * ledger) : operation =\n  let to_balance = fun (r : balance_of_request) ->\n    let owner = Big_map.find_opt r.token_id ledger in\n    match owner with\n    | None -> (failwith fa2_token_undefined : balance_of_response)\n    | Some o ->\n      let bal = if o = r.owner then 1n else 0n in\n      { request = r; balance = bal; }\n  in\n  let responses = List.map to_balance p.requests in\n  Tezos.transaction responses 0mutez p.callback\n"})}),"\n",(0,a.jsx)(t.h3,{id:"entrypoint-functions",children:"Entrypoint functions"}),"\n",(0,a.jsxs)(t.p,{children:["Each entrypoint in the contract is a function with the ",(0,a.jsx)(t.code,{children:"@entry"})," annotation.\nFor example, the ",(0,a.jsx)(t.code,{children:"mint"})," entrypoint calls an internal function to handle minting tokens based on the parameters that are defined in the ",(0,a.jsx)(t.code,{children:"mint_params"})," type:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-cameligo",children:"(** Mint NFT entrypoint *)\n[@entry]\nlet mint (p : mint_params) (storage : nft_token_storage) : return_value =\n    ([]: operation list), mint (p, storage)\n"})}),"\n",(0,a.jsx)(t.h3,{id:"initial-storage-state",children:"Initial storage state"}),"\n",(0,a.jsx)(t.p,{children:"An FA2 contract usually contains these properties in its storage:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["A table named ",(0,a.jsx)(t.code,{children:"ledger"})," that records the token IDs and the address of the current owner"]}),"\n",(0,a.jsxs)(t.li,{children:["A table named ",(0,a.jsx)(t.code,{children:"metadata"})," that records the metadata associated with the contract itself, such as its name, creator, and what standards it meets"]}),"\n",(0,a.jsxs)(t.li,{children:["A table named ",(0,a.jsx)(t.code,{children:"token_metadata"})," that records the metadata associated with every token stored in the contract"]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["In this case, the contract uses the CameLIGO ",(0,a.jsx)(t.code,{children:"bigmap"})," type for these tables."]}),"\n",(0,a.jsx)(t.p,{children:"This contract's storage includes other properties, including the list of operators and the next token ID."}),"\n",(0,a.jsx)(t.p,{children:"When you originate (deploy) the contract to Tezos, you must set the initial state of its storage.\nFor this contract, the initial storage state is in the comment at the end of the file."}),"\n",(0,a.jsx)(t.h2,{id:"originate-deploy-the-smart-contract-to-the-testnet",children:"Originate (deploy) the smart contract to the testnet"}),"\n",(0,a.jsxs)(t.p,{children:["There are many ways to originate a contract on Tezos.\nFor a tutorial on using the command line, see ",(0,a.jsx)(t.a,{href:"/tutorials/smart-contract/",children:"Deploy a smart contract"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["Before you originate your contract to the main Tezos network (referred to as ",(0,a.jsx)(t.em,{children:"Mainnet"}),"), you can originate it to a testnet.\nTestnets are useful for testing Tezos operations because testnets provide tokens for free so you can work with Tezos without spending real tokens."]}),"\n",(0,a.jsxs)(t.p,{children:["This tutorial uses the online LIGO IDE at ",(0,a.jsx)(t.a,{href:"https://ide.ligolang.org/",children:"https://ide.ligolang.org/"})," because you don't have to install any tools to use it."]}),"\n",(0,a.jsx)(t.p,{children:"Follow these steps to originate the smart contract to Tezos:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["In a web browser, open the IDE at ",(0,a.jsx)(t.a,{href:"https://ide.ligolang.org/",children:"https://ide.ligolang.org/"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["At the top right, click the ",(0,a.jsx)(t.strong,{children:"Network"})," drop-down list and next to ",(0,a.jsx)(t.strong,{children:"Tezos"}),", select the ",(0,a.jsx)(t.strong,{children:"Ghostnet"})," testnet.\nThe network changes to the Ghostnet testnet, as in this picture:"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"The IDE menu, showing the Ghostnet testnet selected",src:n(3695).A+"",width:"460",height:"138"})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Create an account to use to originate the contract:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["At the top right, click the ",(0,a.jsx)(t.strong,{children:"Keypair Manager"}),' button.\nThe "Keypair Manager" window opens.']}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)(t.strong,{children:"Create"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:['Give the keypair a name such as "My keys" and click ',(0,a.jsx)(t.strong,{children:"Create"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:['From the "Keypair Manager" window, copy the address of the new account, which begins with ',(0,a.jsx)(t.code,{children:"kt1"}),".\nYou will need this address later."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)(t.strong,{children:"Close"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Send funds to the account from the testnet faucet:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Go to the Ghostnet faucet at ",(0,a.jsx)(t.a,{href:"https://faucet.ghostnet.teztnets.com/",children:"https://faucet.ghostnet.teztnets.com/"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Put the new account address in the ",(0,a.jsx)(t.strong,{children:"Or fund any address"})," field."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Click the button to request 100 tokens and wait for the browser to complete the operation."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:'When you see a message that the tokens are sent to your address, go back to the web IDE, open the "Keypair Manager" window and verify that the account has tokens, as in this example:'}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"The IDE Keypair Manager window, showing an account with funds",src:n(41156).A+"",width:"1608",height:"600"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["In the IDE, Click the ",(0,a.jsx)(t.strong,{children:"New"})," button."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:['In the "Create a New Project" window, give your project a name, such as "NFT tutorial," select "Empty Project" in the ',(0,a.jsx)(t.strong,{children:"Template"}),' field, and select "CameLIGO" in the ',(0,a.jsx)(t.strong,{children:"Syntax"})," field."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)(t.strong,{children:"Create Project"}),".\nThe IDE opens a blank contract file and shows commands for the file on the left-hand side of the window."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Paste the contents of the ",(0,a.jsx)(t.code,{children:"contract/NFTS_contract.mligo"})," file into the editor.\nThe IDE saves the file automatically."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Remove the module name:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)(t.strong,{children:"Project Settings"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Clear the ",(0,a.jsx)(t.strong,{children:"Module name (optional)"})," field."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Close the Project Settings window."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)(t.strong,{children:"Compile"}),' and then in the "Compile" window, click ',(0,a.jsx)(t.strong,{children:"Compile"}),".\nThe IDE compiles the contract code to Michelson, the base language that all Tezos contracts use.\nAt the bottom of the window, it prints the message ",(0,a.jsx)(t.code,{children:"wrote output to .workspaces/NFT tutorial/build/contracts/Contract.tz"}),".\nIf you see an error, make sure that you copied the entire contract file."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Originate the contract:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)(t.strong,{children:"Deploy"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:['In the "Deploy contract" window, in the ',(0,a.jsx)(t.strong,{children:"Init storage"})," field, paste the initial storage value for the contract, which you can get from the comment at the end of the contract:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-cameligo",children:'{\n  ledger = (Big_map.empty: (token_id, address) big_map);\n  operators = (Big_map.empty: ((address * (address * token_id)), unit) big_map);\n  reverse_ledger = (Big_map.empty: (address, token_id list) big_map);\n  metadata = Big_map.literal [\n  ("", Bytes.pack("tezos-storage:contents"));\n  ("contents", ("7b2276657273696f6e223a2276312e302e30222c226e616d65223a2254555473222c22617574686f7273223a5b2240636c617564656261726465225d2c22696e7465726661636573223a5b22545a49502d303132222c22545a49502d303136225d7d": bytes))\n  ];\n  token_metadata = (Big_map.empty: (token_id, token_metadata) big_map);\n  next_token_id = 0n;\n  admin = ("tz1Me1MGhK7taay748h4gPnX2cXvbgL6xsYL": address);\n}\n'})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["In the ",(0,a.jsx)(t.strong,{children:"Signer"})," field, make sure your new account is selected."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Leave the other fields blank and click ",(0,a.jsx)(t.strong,{children:"Estimate"}),".\nThe IDE calculates the fees for the deployment."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)(t.strong,{children:"Deploy"})," and leave the window open to wait for the contract to be originate."]}),"\n",(0,a.jsx)(t.p,{children:"Originating the contract can take a few minutes.\nWhen the transaction completes, the window shows a message that the contract was deployed."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Copy the contract address, which starts with ",(0,a.jsx)(t.code,{children:"KT1"}),', and then close the "Deploy contract" window.']}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Verify that the contract is on the testnet by finding it on a block explorer:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Open a Tezos block explorer such as ",(0,a.jsx)(t.a,{href:"https://tzkt.io",children:"TzKT"})," or ",(0,a.jsx)(t.a,{href:"https://better-call.dev/",children:"Better Call Dev"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Set the explorer to Ghostnet instead of Mainnet."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Paste the contract address into the search field and press Enter."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Go to the Entrypoints tab to see the entrypoints and their parameters."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Now anyone can call the Tezos contract if they have tokens for the fees and send a valid request."}),"\n",(0,a.jsx)(t.h2,{id:"run-the-backend-application",children:"Run the backend application"}),"\n",(0,a.jsx)(t.p,{children:"The backend application is responsible for uploading the NFT data to IPFS.\nIn these steps, you configure the backend application with your Pinata information:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["In your command-line window, go to the ",(0,a.jsx)(t.code,{children:"backend"})," folder of the tutorial application."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Install its dependencies by running ",(0,a.jsx)(t.code,{children:"npm install"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["In the ",(0,a.jsx)(t.code,{children:"src/PinataKeys.ts"})," file, replace ",(0,a.jsx)(t.code,{children:"DUMMY_KEY"})," with your Pinata API key and replace ",(0,a.jsx)(t.code,{children:"DUMMY_SECRET"})," with your Pinata secret."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Open the ",(0,a.jsx)(t.code,{children:"src/index.ts"})," file."]}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"corsOptions"})," constant in this file contains the location of the frontend application.\nIt includes the default location of the frontend application (",(0,a.jsx)(t.code,{children:"http://localhost:5173"}),") and an example custom URL."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:'const corsOptions = {\n  origin: ["http://localhost:5173", "https://my-cool-nft-app.com"],\n  optionsSuccessStatus: 200 // some legacy browsers (IE11, various SmartTVs) choke on 204\n};\n'})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["If you intend to host the frontend application anywhere other than on your computer, add its URL to the ",(0,a.jsx)(t.code,{children:"corsOptions"})," constant."]}),"\n",(0,a.jsx)(t.p,{children:"If you are not going to change where the frontend application is hosted, you can leave this code unchanged."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Review the code for the ",(0,a.jsx)(t.code,{children:"POST /mint"})," endpoint."]}),"\n",(0,a.jsxs)(t.p,{children:["This endpoint is the only endpoint that the frontend application uses.\nFirst, it accesses the image file that the user uploads and uses the Pinata ",(0,a.jsx)(t.code,{children:"pinFileToIFPS"})," method to pin it to IPFS with a name and description:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:'const readableStreamForFile = fs.createReadStream(`./uploads/${fileName}`);\nconst options: any = {\n  pinataMetadata: {\n    name: req.body.title.replace(/\\s/g, "-"),\n    keyvalues: {\n      description: req.body.description\n    }\n  }\n};\nconst pinnedFile = await pinata.pinFileToIPFS(\n  readableStreamForFile,\n  options\n);\n'})}),"\n",(0,a.jsx)(t.p,{children:"The app must pin the picture first because the token metadata includes a hash of the picture."}),"\n",(0,a.jsx)(t.p,{children:"Then, it creates a metadata object with information about the NFT, including its name and description and the IPFS URI of the image and pins that metadata object to IPFS:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:'if (pinnedFile.IpfsHash && pinnedFile.PinSize > 0) {\n  // remove file from server\n  fs.unlinkSync(`./uploads/${fileName}`);\n  // pins metadata\n  const metadata = {\n    name: req.body.title,\n    description: req.body.description,\n    symbol: "TUT",\n    artifactUri: `ipfs://${pinnedFile.IpfsHash}`,\n    displayUri: `ipfs://${pinnedFile.IpfsHash}`,\n    creators: [req.body.creator],\n    decimals: 0,\n    thumbnailUri: "https://tezostaquito.io/img/favicon.png",\n    is_transferable: true,\n    shouldPreferSymbol: false\n  };\n\n  const pinnedMetadata = await pinata.pinJSONToIPFS(metadata, {\n    pinataMetadata: {\n      name: "TUT-metadata"\n    }\n  });\n  // ...\n}\n'})}),"\n",(0,a.jsxs)(t.p,{children:["This metadata object includes several standard fields for Tezos tokens, including a name, description, symbol to show in wallets, and URIs to preview pictures and thumbnails.\nThe ",(0,a.jsx)(t.code,{children:"decimals"})," field is set to 0 because there is only one of each NFT."]}),"\n",(0,a.jsx)(t.p,{children:"If both of the pins were successful, the endpoint returns the IPFS URIs of the image and metadata to the frontend application:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:'if (pinnedMetadata.IpfsHash && pinnedMetadata.PinSize > 0) {\n  res.status(200).json({\n    status: true,\n    msg: {\n      imageHash: pinnedFile.IpfsHash,\n      metadataHash: pinnedMetadata.IpfsHash\n    }\n  });\n} else {\n  res\n    .status(500)\n    .json({ status: false, msg: "metadata were not pinned" });\n}\n'})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Start the backend application by running ",(0,a.jsx)(t.code,{children:"npm run dev"}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"run-the-frontend-application",children:"Run the frontend application"}),"\n",(0,a.jsx)(t.p,{children:"The frontend application accepts information about a new NFT from the user, sends the image and metadata to the backend, and calls the smart contract to mint the NFT.\nFollow these steps to configure and start the frontend application:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["In your command-line window, go to the ",(0,a.jsx)(t.code,{children:"frontend"})," folder of the tutorial application."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Install its dependencies by running ",(0,a.jsx)(t.code,{children:"npm install"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Open the ",(0,a.jsx)(t.code,{children:"src/App.svelte"})," file."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Set the ",(0,a.jsx)(t.code,{children:"contractAddress"})," constant to the address of the originated smart contract, which starts with ",(0,a.jsx)(t.code,{children:"KT1"}),":"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:'const contractAddress = "KT1XdU2tK5hoDhtToP4kSSR9HiCkie4mZqFp";\n'})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Review the code for the ",(0,a.jsx)(t.code,{children:"onMount"})," function:"]}),"\n",(0,a.jsxs)(t.p,{children:["This function runs when the page loads.\nIt starts by creating an instance of the Taquito ",(0,a.jsx)(t.code,{children:"TezosToolkit"})," object, which provides access to Tezos.\nIt also creates an object to unpack data from the map properties in the contract's storage:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"Tezos = new TezosToolkit(rpcUrl);\nTezos.setPackerProvider(new MichelCodecPacker());\n"})}),"\n",(0,a.jsxs)(t.p,{children:["It creates an instance of the Beacon ",(0,a.jsx)(t.code,{children:"BeaconWallet"})," object to prepare to connect to the user's wallet, but it does not connect to the user's wallet immediately.\nIt could try to connect to the user's wallet immediately, but it's better programming practice to wait and let the user click a button to connect their wallet after the page loads."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"wallet = new BeaconWallet(walletOptions);\n"})}),"\n",(0,a.jsx)(t.p,{children:"The application can remember if it has a connection to a wallet, so if the user has connected their wallet before, it connects to that wallet automatically:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"if (await wallet.client.getActiveAccount()) {\n  userAddress = await wallet.getPKH();\n  Tezos.setWalletProvider(wallet);\n  await getUserNfts(userAddress);\n}\n"})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Review the code for the ",(0,a.jsx)(t.code,{children:"connect"})," function."]}),"\n",(0,a.jsxs)(t.p,{children:["First, this function uses the ",(0,a.jsx)(t.a,{href:"https://docs.walletbeacon.io/",children:"Beacon wallet SDK"})," to prompt the user to connect their wallet if it is not already connected:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"if (!wallet) {\n  wallet = new BeaconWallet(walletOptions);\n}\n"})}),"\n",(0,a.jsx)(t.p,{children:"Then, it requests permission from the user:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"await wallet.requestPermissions();\n"})}),"\n",(0,a.jsxs)(t.p,{children:["Finally, it retrieves the user's current NFTs with the ",(0,a.jsx)(t.code,{children:"getUserNfts"})," function:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"await getUserNfts(userAddress);\n"})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Review the code for the ",(0,a.jsx)(t.code,{children:"getUserNfts"})," function:"]}),"\n",(0,a.jsx)(t.p,{children:"This function receives the user's account address.\nThen, it retrieves the current storage for the smart contract, including information about which account owns each NFT:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"const getUserNfts = async (address: string) => {\n  // finds user's NFTs\n  const contract = await Tezos.wallet.at(contractAddress);\n  nftStorage = await contract.storage();\n  const getTokenIds = await nftStorage.reverse_ledger.get(address);\n  // ...\n}\n"})}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"reverse_ledger"})," property in the contract storage keeps a list of who owns each NFT.\nHowever, this property is not a standard feature of NFT smart contracts.\nAccording to the standard, the contract must have a ",(0,a.jsx)(t.code,{children:"ledger"})," property that maps the ID of each token to the address that owns it.\nThe ",(0,a.jsx)(t.code,{children:"reverse_ledger"})," property indexes this information in the opposite way, so the code can filter the list of tokens according to a given owner's address.\nThis property is for the convenience of apps accessing the storage and may not be available on other NFT contracts."]}),"\n",(0,a.jsx)(t.p,{children:"Now that it has the list of IDs of NFTs that the account owns, it retrieves the metadata for each token from the contract storage:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:'if (getTokenIds) {\n  userNfts = await Promise.all([\n    ...getTokenIds.map(async id => {\n      const tokenId = id.toNumber();\n      const metadata = await nftStorage.token_metadata.get(tokenId);\n      const tokenInfoBytes = metadata.token_info.get("");\n      const tokenInfo = bytes2Char(tokenInfoBytes);\n      return {\n        tokenId,\n        ipfsHash:\n          tokenInfo.slice(0, 7) === "ipfs://" ? tokenInfo.slice(7) : null\n      };\n    })\n  ]);\n}\n'})}),"\n",(0,a.jsxs)(t.p,{children:["The frontend uses this ",(0,a.jsx)(t.code,{children:"userNfts"})," variable to show the user's NFTs on the page."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Review the ",(0,a.jsx)(t.code,{children:"upload"})," function:"]}),"\n",(0,a.jsxs)(t.p,{children:["This function starts by creating an HTML form data object with the image, title, and description for the NFT and the address of the creator, who will own the new NFT.\nIt sends this data to the backend's ",(0,a.jsx)(t.code,{children:"POST /mint"})," endpoint:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:'const data = new FormData();\ndata.append("image", files[0]);\ndata.append("title", title);\ndata.append("description", description);\ndata.append("creator", userAddress);\n\nconst response = await fetch(`${serverUrl}/mint`, {\n  method: "POST",\n  headers: {\n    "Access-Control-Allow-Origin": "*"\n  },\n  body: data\n});\n'})}),"\n",(0,a.jsxs)(t.p,{children:["It receives the response from the backend with the URIs for the NFT metadata.\nThen, it creates a Taquito ",(0,a.jsx)(t.code,{children:"ContractAbstraction"})," object to represent the smart contract and provide access to the contract's methods and storage:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"const contract = await Tezos.wallet.at(contractAddress);\n"})}),"\n",(0,a.jsxs)(t.p,{children:["It uses this object to call the contract's ",(0,a.jsx)(t.code,{children:"mint"})," entrypoint and pass the metadata and wallet address:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:'const contract = await Tezos.wallet.at(contractAddress);\nconst op = await contract.methods\n  .mint(char2Bytes("ipfs://" + data.msg.metadataHash), userAddress)\n  .send();\nconsole.log("Op hash:", op.opHash);\nawait op.confirmation();\n'})}),"\n",(0,a.jsxs)(t.p,{children:["Finally, it refreshes the list of the user's NFTs with the ",(0,a.jsx)(t.code,{children:"getUserNfts"})," function:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"await getUserNfts(userAddress);\n"})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Start the frontend application by running ",(0,a.jsx)(t.code,{children:"npm run dev"}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"testing-the-application",children:"Testing the application"}),"\n",(0,a.jsx)(t.p,{children:"To test the application, you must have a Tezos wallet and a small amount of XTZ tokens to pay the transaction fees."}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Install any wallet that is compatible with Tezos, such as ",(0,a.jsx)(t.a,{href:"https://templewallet.com/",children:"Temple wallet"})," and switch to the Ghostnet network."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Send funds to the wallet from the testnet faucet:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Go to the Ghostnet faucet at ",(0,a.jsx)(t.a,{href:"https://faucet.ghostnet.teztnets.com/",children:"https://faucet.ghostnet.teztnets.com/"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Put the wallet account address in the ",(0,a.jsx)(t.strong,{children:"Or fund any address"})," field."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Click the button to request 5 tez and wait for the browser to complete the operation."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"When you see a message that the tokens are sent to your address, open your wallet and verify that the tokens are there.\nIt can take a few minutes for them to appear."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["When the frontend application starts, open the web browser to ",(0,a.jsx)(t.a,{href:"http://localhost:5173/",children:"http://localhost:5173/"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)(t.strong,{children:"Connect your wallet"})," and approve the connection in your wallet."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)(t.strong,{children:"Choose file"})," and select any image for the NFT."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Add a title and description for the new NFT in the ",(0,a.jsx)(t.strong,{children:"Title"})," and ",(0,a.jsx)(t.strong,{children:"Description"})," fields."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Click ",(0,a.jsx)(t.strong,{children:"Mint NFT"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Confirm the transaction in your wallet, which requires a small amount of XTZ for the transaction fees."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Wait for the transaction to complete.\nWhen it completes, the screen changes to a success message with links to the NFT information, as in this picture:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"The success message, with links to the NFT information",src:n(20943).A+"",width:"1052",height:"1396"})}),"\n",(0,a.jsx)(t.p,{children:'In the "Your NFTs" list, you can click on a number (starting at 0) to see the information that is in the NFT, which includes the name and description that you added and links to data on IPFS.\nThe page also shows a link to a block explorer where you can see technical information about the minting transaction.'}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["To see information about the smart contract and NFT collection, go to a block explorer such as ",(0,a.jsx)(t.a,{href:"https://tzkt.io/",children:"https://tzkt.io/"}),", set it to Ghostnet, and enter the address of the smart contract.\nThe explorer shows information such a list of the tokens in the collection and who owns them.\nYou can also see the current state of the storage for the contract."]}),"\n",(0,a.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,a.jsx)(t.p,{children:"In this tutorial, you learned how to create an application that mints applications on Tezos on behalf of users.\nThe parts are independent, so you could code a different frontend application to call the smart contract or use a different backend application to upload the NFT metadata."}),"\n",(0,a.jsxs)(t.p,{children:["If you want to continue working with this application, try implementing the ",(0,a.jsx)(t.code,{children:"burn"})," entrypoint in the frontend to allow users to destroy their NFTs.\nThe contract has a ",(0,a.jsx)(t.code,{children:"burn"})," entrypoint, but the frontend does not provide a way to call it."]}),"\n",(0,a.jsx)(t.p,{children:"You can try adding your own entrypoints and originating a new contract, but you cannot update the existing contract after it is originated."}),"\n",(0,a.jsx)(t.p,{children:"You can add a fee to mint NFTs by sending funds along with the mint transaction.\nIf you add the fee as in the following code, the transaction takes the fee amount along with the transaction fee from the user's wallet.\nCurrently, the contract does not have a way to send this fee to any other account, so the fee is locked in the contract forever.\nYou can add an entrypoint to the contract that allows authorized users to withdraw the fee later."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:'const op = await contract.methods\n  .mint(char2Bytes("ipfs://" + data.msg.metadataHash), userAddress)\n  .send({ amount: 1 });\n'})}),"\n",(0,a.jsx)(t.p,{children:"You can also optimize the application by generating the IPFS hashes on the client side before pinning them.\nIf the mint transaction fails, it may leave unused metadata in your IPFS account.\nTo avoid this problem, you can start an IPFS node in the browser, pin the metadata there, mint the NFT, and pin the metadata to your Pinata account only if the mint transaction succeeds."}),"\n",(0,a.jsxs)(t.p,{children:["If you want to continue working with NFTs in a more complex way, try creating a marketplace for tokens as described in the tutorial ",(0,a.jsx)(t.a,{href:"/tutorials/build-an-nft-marketplace",children:"Build an NFT Marketplace"}),"."]})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},71353:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/created-pinata-key-83f12d338e45932536b13918123efaf5.png"},46115:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/pinata-key-permissions-0a3fc6069b11b5f2fcaacf2e4c0473b8.png"},20943:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/taquito-application-created-nft-a24ba59b335cdec874c57dd435672d5e.png"},44362:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/taquito-application-flow-e0f8fd4c3ab79a1c5740ab62c379358c.png"},36151:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/taquito-application-home-fa3abc9b439cdb5031114c2ee168c070.png"},41156:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/web-ligo-ide-account-db823736ea394797f7299d33f8534d51.png"},3695:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/web-ligo-ide-ghostnet-58ca7c9f5d476cbd430d3030b8c19161.png"},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var s=n(96540);const a={},i=s.createContext(a);function o(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);