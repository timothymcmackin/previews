"use strict";(self.webpackChunktezos_developer_docs=self.webpackChunktezos_developer_docs||[]).push([[3516],{1104:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"tutorials/join-dal-baker/run-node","title":"Step 1: Run an Octez node","description":"The first thing you need is a Tezos layer 1 node, which is an instance of the octez-node program and part of the Octez suite of programs.","source":"@site/docs/tutorials/join-dal-baker/run-node.md","sourceDirName":"tutorials/join-dal-baker","slug":"/tutorials/join-dal-baker/run-node","permalink":"/previews/docs/biel-chatbot/tutorials/join-dal-baker/run-node","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1736398800000,"frontMatter":{"title":"Step 1: Run an Octez node","authors":"Tezos core developers, Tim McMackin","last_update":{"date":"9 January 2025"}},"sidebar":"tutorialsSidebar","previous":{"title":"Run a Tezos node in 5 steps","permalink":"/previews/docs/biel-chatbot/tutorials/join-dal-baker"},"next":{"title":"Step 2: Set up baker accounts","permalink":"/previews/docs/biel-chatbot/tutorials/join-dal-baker/prepare-account"}}');var o=t(74848),r=t(28453);const i={title:"Step 1: Run an Octez node",authors:"Tezos core developers, Tim McMackin",last_update:{date:"9 January 2025"}},a=void 0,l={},c=[{value:"Installing Octez",id:"installing-octez",level:2},{value:"Running the layer 1 node",id:"running-the-layer-1-node",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["The first thing you need is a Tezos layer 1 node, which is an instance of the ",(0,o.jsx)(n.code,{children:"octez-node"})," program and part of the Octez suite of programs."]}),"\n",(0,o.jsx)(n.h2,{id:"installing-octez",children:"Installing Octez"}),"\n",(0,o.jsx)(n.p,{children:"The version of Octez to use depends on the Tezos network that you are using."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["For Mainnet or Ghostnet, install the most recent release of Octez, including ",(0,o.jsx)(n.code,{children:"octez-client"}),", ",(0,o.jsx)(n.code,{children:"octez-node"}),", ",(0,o.jsx)(n.code,{children:"octez-dal-node"}),", and the baker for the current protocol:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"On MacOS, run these commands:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"brew tap serokell/tezos-packaging-stable https://github.com/serokell/tezos-packaging-stable.git\nbrew install tezos-client tezos-node tezos-dal-node tezos-baker-PsQuebec\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["On Linux and Windows WSL, download and install the built binaries from the ",(0,o.jsx)(n.a,{href:"https://gitlab.com/tezos/tezos/-/releases",children:"Octez release page"}),", as in this example for Ubuntu:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"wget -O octez-binaries-20.3-linux-x86_64.tar.gz https://gitlab.com/tezos/tezos/-/package_files/150896058/download\ntar xf octez-binaries-20.3-linux-x86_64.tar.gz\nsudo cp octez-x86_64/octez* /usr/local/bin/\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["For Weeklynet, look up the necessary version of Octez at ",(0,o.jsx)(n.a,{href:"https://teztnets.com/weeklynet-about",children:"https://teztnets.com/weeklynet-about"})," and install it with the instructions there."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["For more installation options, see ",(0,o.jsx)(n.a,{href:"https://tezos.gitlab.io/introduction/howtoget.html",children:"Installing Octez"})," in the Octez documentation."]}),"\n",(0,o.jsxs)(n.p,{children:["If you build from source, you can use the ",(0,o.jsx)(n.code,{children:"latest-release"})," branch to work with Ghostnet."]}),"\n",(0,o.jsx)(n.h2,{id:"running-the-layer-1-node",children:"Running the layer 1 node"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Ensure that the port on which the node listens for connections from peer nodes (by default, 9732) is accessible from outside its system.\nYou may need to adapt your firewall rules or set up network address translation (NAT) to direct external traffic to the node."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Initialize the Octez node for the network.\nFor example, to initialize it for Ghostnet, run this command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"octez-node config init --network ghostnet\n"})}),"\n",(0,o.jsxs)(n.p,{children:["By default, the node stores its data in the folder ",(0,o.jsx)(n.code,{children:"$HOME/.tezos-node"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Download a rolling snapshot of the network from ",(0,o.jsx)(n.a,{href:"https://snapshot.tzinit.org",children:"https://snapshot.tzinit.org"})," based on the instructions on that site.\nFor example, the command to download a Ghostnet snapshot from the European servers might look like this:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"wget -O snapshot_file https://snapshots.eu.tzinit.org/ghostnet/rolling\n"})}),"\n",(0,o.jsx)(n.p,{children:"If you get an error that says that the data directory is invalid, clean up the directory as the error message indicates."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Load the snapshot in the node by running this command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"octez-node snapshot import snapshot_file\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Install the Zcash parameters as described ",(0,o.jsx)(n.a,{href:"https://tezos.gitlab.io/introduction/howtoget.html#setup-zcash-params",children:"Install Zcash Parameters"})," in the Octez documentation."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Start the node:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"octez-node run --rpc-addr 127.0.0.1:8732\n"})}),"\n",(0,o.jsxs)(n.p,{children:["You may add option ",(0,o.jsx)(n.code,{children:'--log-output="$HOME/octez-node.log"'})," to redirect its output in a log file."]}),"\n",(0,o.jsx)(n.p,{children:"At first launch, the node generates a fresh identity file used to identify itself on the network.\nThen it bootstraps the chain, which takes a variable amount of time depending on how many blocks need to be loaded."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Make sure the Octez client uses your node by running this command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"octez-client -E http://localhost:8732 config update\n"})}),"\n",(0,o.jsxs)(n.p,{children:['If you see an error that says "Failed to acquire the protocol version from the node," ensure that your node is running and verify that the host name and port in the ',(0,o.jsx)(n.code,{children:"config update"})," command are correct."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Wait for your node to bootstrap by running this command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"octez-client bootstrapped\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The client waits until it is connected and the node is running at the current level.\nWhen it is connected and the node is updated, the command prints the message ",(0,o.jsx)(n.code,{children:"Node is bootstrapped"}),".\nThe time it takes depends on how many blocks the node must retrieve to catch up from the snapshot to the current head block."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Optional: Hide the Octez client's network warning message by running this command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"export TEZOS_CLIENT_UNSAFE_DISABLE_DISCLAIMER=y\n"})}),"\n",(0,o.jsx)(n.p,{children:"This command suppresses the message that your instance of the Octez client is not using Mainnet."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Ensure that the node runs persistently.\nLook up how to run programs persistently in the documentation for your operating system.\nYou can also refer to ",(0,o.jsx)(n.a,{href:"https://opentezos.com/node-baking/baking/persistent-baker/",children:"Run a persistent baking node"})," on opentezos.com or ",(0,o.jsx)(n.a,{href:"https://tezos.gitlab.io/introduction/services.html",children:"Setting up Octez Services"})," in the Octez documentation."]}),"\n",(0,o.jsxs)(n.p,{children:["For example, if your operating system uses the ",(0,o.jsx)(n.code,{children:"systemd"})," software suite, your service file might look like this example:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-systemd",children:"[Unit]\nDescription=Octez node\nWants=network-online.target\nAfter=network-online.target\n\n[Install]\nWantedBy=multi-user.target\n\n[Service]\nType=simple\nUser=tezos\nExecStart=octez-node run --rpc-addr 127.0.0.1:8732 --data-dir $HOME/.tezos-node\nWorkingDirectory=/opt/octez-node\nRestart=on-failure\nRestartSec=5\nStandardOutput=append:/opt/octez-node.log\nStandardError=append:/opt/octez-node.log\nSyslogIdentifier=%n\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Optional: When the node has bootstrapped and caught up with the current head block, you can delete the snapshot file to save space."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["In the meantime, you can continue the baking infrastructure while the node is bootstrapping.\nContinue to ",(0,o.jsx)(n.a,{href:"/tutorials/join-dal-baker/prepare-account",children:"Step 2: Set up baker accounts"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var s=t(96540);const o={},r=s.createContext(o);function i(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);