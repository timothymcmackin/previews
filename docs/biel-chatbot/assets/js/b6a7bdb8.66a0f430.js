"use strict";(self.webpackChunktezos_developer_docs=self.webpackChunktezos_developer_docs||[]).push([[3931],{56590:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"tutorials/smart-rollup/set-up","title":"Part 1: Setting up the application","description":"To set up the application for the tutorial, you must configure Rust to build the kernel and start a Docker container that has resources that are needed to debug and deploy it.","source":"@site/docs/tutorials/smart-rollup/set-up.md","sourceDirName":"tutorials/smart-rollup","slug":"/tutorials/smart-rollup/set-up","permalink":"/previews/docs/biel-chatbot/tutorials/smart-rollup/set-up","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1731560400000,"frontMatter":{"title":"Part 1: Setting up the application","last_update":{"date":"14 November 2024"}},"sidebar":"tutorialsSidebar","previous":{"title":"Deploy a Smart Rollup","permalink":"/previews/docs/biel-chatbot/tutorials/smart-rollup"},"next":{"title":"Part 2: Running the kernel in debug mode","permalink":"/previews/docs/biel-chatbot/tutorials/smart-rollup/debug"}}');var i=t(74848),s=t(28453);const r={title:"Part 1: Setting up the application",last_update:{date:"14 November 2024"}},l=void 0,a={},c=[{value:"Building the application",id:"building-the-application",level:2},{value:"Start the Docker container",id:"start-the-docker-container",level:2}];function d(e){const n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"To set up the application for the tutorial, you must configure Rust to build the kernel and start a Docker container that has resources that are needed to debug and deploy it."}),"\n",(0,i.jsx)(n.h2,{id:"building-the-application",children:"Building the application"}),"\n",(0,i.jsx)(n.p,{children:"Follow these steps to get the application code and build it:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Clone the repository with the tutorial application:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git clone https://gitlab.com/trili/hello-world-kernel.git\ncd hello-world-kernel/\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Configure Rust to build WebAssembly applications:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Verify that you have Rust version 1.73.0 or later installed by running ",(0,i.jsx)(n.code,{children:"rustc --version"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["If you have a version of Rust later than 1.73.0, use the ",(0,i.jsx)(n.code,{children:"rustup override"})," command to use version 1.73.0:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"rustup override set 1.73.0\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Add WASM as a compilation target for Rust by running this command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"rustup target add wasm32-unknown-unknown\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Build the application by running this command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cargo build --target wasm32-unknown-unknown\n"})}),"\n",(0,i.jsxs)(n.p,{children:['If the application builds correctly, the terminal shows a message that looks like "Finished dev [unoptimized + debuginfo] target(s) in 15s."\nYou can see the compiled application in the ',(0,i.jsx)(n.code,{children:"target/wasm32-unknown-unknown/debug"})," folder.\nIn particular, the compiled kernel is in the ",(0,i.jsx)(n.code,{children:"hello_world_kernel.wasm"})," file."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Now the kernel is compiled into a single file that nodes can run."}),"\n",(0,i.jsx)(n.h2,{id:"start-the-docker-container",children:"Start the Docker container"}),"\n",(0,i.jsx)(n.p,{children:"Tezos provides a Docker image that contains the Octez client, which allows you to interact with Tezos from the command line.\nLater, you will use this image to run a sandbox Tezos environment for testing the rollup."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Make sure that Docker desktop is running."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Pull the most recent Tezos Docker image, which contains the most recent version of Octez:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker pull tezos/tezos:master\n"})}),"\n",(0,i.jsx)(n.p,{children:"You can install Octez directly on your system, but keeping it in Docker is faster and more convenient for running the tutorial application."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Make sure you are in the ",(0,i.jsx)(n.code,{children:"hello-world-kernel"})," folder, at the same level as the ",(0,i.jsx)(n.code,{children:"Cargo.toml"})," and ",(0,i.jsx)(n.code,{children:"sandbox_node.sh"})," files."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Run this command to start the Docker image, open a command-line terminal in that image, and mount the ",(0,i.jsx)(n.code,{children:"hello-world-kernel"})," folder in it:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -it --rm --volume $(pwd):/home/tezos/hello-world-kernel --entrypoint /bin/sh --name octez-container tezos/tezos:master\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Your command-line prompt changes to indicate that it is now inside the running Docker container.\nThis image includes the Octez command-line client and other Tezos tools.\nIt also uses the docker ",(0,i.jsx)(n.code,{children:"--volume"})," argument to mount the contents of the ",(0,i.jsx)(n.code,{children:"hello-world-kernel"})," folder in the container so you can use those files within the container."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Verify that the container has the necessary tools by running these commands:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"octez-node --version\noctez-smart-rollup-wasm-debugger --version\noctez-smart-rollup-node --version\noctez-client --version\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Each of these commands should print a version number.\nThe specific version number is not important as long as you retrieved the latest image with the ",(0,i.jsx)(n.code,{children:"docker pull tezos/tezos:master"})," command."]}),"\n",(0,i.jsxs)(n.p,{children:["Don't close this terminal window or exit the Docker terminal session, because Docker will close the container.\nIf you accidentally close the container, you can run the ",(0,i.jsx)(n.code,{children:"docker run ..."})," command again to open a new one."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Now the application is built and you have an environment that you can debug it in.\nFor the rest of the tutorial, you must be aware of whether you are running commands inside or outside of the Docker container.\nThe container has Octez but not Rust, so you run Rust commands outside of the container and Octez commands inside the container."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var o=t(96540);const i={},s=o.createContext(i);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);