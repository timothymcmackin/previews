"use strict";(self.webpackChunktezos_developer_docs=self.webpackChunktezos_developer_docs||[]).push([[4748],{90342:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"developing/octez-client/transactions","title":"Interacting with contracts","description":"Before sending transactions to contracts with the Octez client, make sure that your client is configured to use an RPC node for the network that you want to use.","source":"@site/docs/developing/octez-client/transactions.md","sourceDirName":"developing/octez-client","slug":"/developing/octez-client/transactions","permalink":"/previews/docs/ledger/developing/octez-client/transactions","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1698379200000,"frontMatter":{"title":"Interacting with contracts","authors":"Tim McMackin","last_update":{"date":"27 October 2023"}},"sidebar":"documentationSidebar","previous":{"title":"Creating accounts","permalink":"/previews/docs/ledger/developing/octez-client/accounts"},"next":{"title":"Getting information about the blockchain","permalink":"/previews/docs/ledger/developing/information"}}');var c=n(74848),o=n(28453);const s={title:"Interacting with contracts",authors:"Tim McMackin",last_update:{date:"27 October 2023"}},r=void 0,i={},l=[{value:"Sending tez",id:"sending-tez",level:2},{value:"Calling smart contracts",id:"calling-smart-contracts",level:2},{value:"Originating (deploying) smart contracts",id:"originating-deploying-smart-contracts",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(t.p,{children:["Before sending transactions to contracts with the Octez client, make sure that your client is configured to use an RPC node for the network that you want to use.\nTo verify the RPC node that you are using, run ",(0,c.jsx)(t.code,{children:"octez-client config show"})," and look at the value in the ",(0,c.jsx)(t.code,{children:"entrypoint"})," field."]}),"\n",(0,c.jsx)(t.h2,{id:"sending-tez",children:"Sending tez"}),"\n",(0,c.jsxs)(t.p,{children:["To send tez from a source account to a target account, use the ",(0,c.jsx)(t.code,{children:"octez-client transfer"})," command, as in this example:"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-bash",children:"octez-client transfer 42 from account1 to account2 --fee-cap 0.9\n"})}),"\n",(0,c.jsx)(t.p,{children:"You can use addresses or local aliases for the source and target accounts, but Octez must have the private key for the source account to sign the transaction."}),"\n",(0,c.jsxs)(t.p,{children:["To check the balance of an account after a transaction, use the ",(0,c.jsx)(t.code,{children:"octez-client get balance for"})," command and pass the alias or address of an account, as in this example:"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-bash",children:"octez-client get balance for account1\n"})}),"\n",(0,c.jsx)(t.h2,{id:"calling-smart-contracts",children:"Calling smart contracts"}),"\n",(0,c.jsxs)(t.p,{children:["To call a smart contract, use the ",(0,c.jsx)(t.code,{children:"octez-client transfer"})," command.\nContracts can have aliases in the Octez client like accounts.\nThis example calls a contract with the alias ",(0,c.jsx)(t.code,{children:"my-counter"}),":"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-bash",children:"octez-client --wait none transfer 0 \\\n  from account1 to my-counter \\\n  --entrypoint 'increment' --arg '5' --burn-cap 0.1\n"})}),"\n",(0,c.jsxs)(t.p,{children:["This command calls the ",(0,c.jsx)(t.code,{children:"increment"})," entrypoint of the ",(0,c.jsx)(t.code,{children:"my-counter"}),' contract and includes 0 tez and up to 0.1 tez in fees with the transaction.\nIt passes the parameter "5" to the entrypoint.\nYou can use a local alias or the full address for the smart contract.']}),"\n",(0,c.jsx)(t.p,{children:"Because entrypoints accept parameters in Michelson code, you must encode the values that you send as Michelson values.\nThe high-level languages have tools to help you encode values in Michelson.\nFor example, if you are using LIGO to create an entrypoint that accepts an integer, address, and string as a parameter, you can pass the parameter values as a LIGO expression and get the Michelson version with this command:"}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-bash",children:'ligo compile parameter MyContract.jsligo -e "myentrypoint" \\\n  \'[5, "tz1QCVQinE8iVj1H2fckqx6oiM85CNJSK9Sx" as address, "hello"]\'\n'})}),"\n",(0,c.jsx)(t.p,{children:"The compiled parameter value looks like this:"}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{children:'(Pair 5 "tz1QCVQinE8iVj1H2fckqx6oiM85CNJSK9Sx" "hello")\n'})}),"\n",(0,c.jsxs)(t.p,{children:["Then you can use this value for the value of the ",(0,c.jsx)(t.code,{children:"--arg"})," argument in the ",(0,c.jsx)(t.code,{children:"octez-client transfer"})," command."]}),"\n",(0,c.jsx)(t.h2,{id:"originating-deploying-smart-contracts",children:"Originating (deploying) smart contracts"}),"\n",(0,c.jsxs)(t.p,{children:["To deploy (originate) a smart contract to the current network, use the ",(0,c.jsx)(t.code,{children:"octez-client originate contract"})," command, as in this example from the ",(0,c.jsx)(t.a,{href:"/tutorials/smart-contract",children:"Deploy a smart contract"})," tutorial:"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-bash",children:"octez-client originate contract my-counter \\\n  transferring 0 from account1 \\\n  running increment.tz \\\n  --init 10 --burn-cap 0.1 --force\n"})}),"\n",(0,c.jsxs)(t.p,{children:["This command accepts the compiled version of the contract as a Michelson ",(0,c.jsx)(t.code,{children:".tz"})," file.\nSee the documentation for the high-level language you are using for how to compile a contract.\nLike the command to call a smart contract, this command accepts the initial value of the contract storage as a Michelson-encoded value."]}),"\n",(0,c.jsxs)(t.p,{children:["After you originate the contract, you can use the local alias from this command to send transactions to its entrypoints.\nYou can see the aliases of contracts by running the command ",(0,c.jsx)(t.code,{children:"octez-client list known contracts"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,c.jsx)(t,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var a=n(96540);const c={},o=a.createContext(c);function s(e){const t=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),a.createElement(o.Provider,{value:t},e.children)}}}]);