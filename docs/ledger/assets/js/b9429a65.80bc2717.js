"use strict";(self.webpackChunktezos_developer_docs=self.webpackChunktezos_developer_docs||[]).push([[6555],{3109:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"tutorials/build-files-archive-with-dal/set-up-environment","title":"Part 1: Setting up an environment","description":"Because Weeklynet requires a specific version of the Octez suite, you can\'t use most wallet applications and installations of the Octez suite with it.","source":"@site/docs/tutorials/build-files-archive-with-dal/set-up-environment.md","sourceDirName":"tutorials/build-files-archive-with-dal","slug":"/tutorials/build-files-archive-with-dal/set-up-environment","permalink":"/previews/docs/ledger/tutorials/build-files-archive-with-dal/set-up-environment","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1707886800000,"frontMatter":{"title":"Part 1: Setting up an environment","authors":"Tim McMackin","last_update":{"date":"14 February 2024"}},"sidebar":"tutorialsSidebar","previous":{"title":"Implement a file archive with the DAL and a Smart Rollup","permalink":"/previews/docs/ledger/tutorials/build-files-archive-with-dal"},"next":{"title":"Part 2: Getting the DAL parameters","permalink":"/previews/docs/ledger/tutorials/build-files-archive-with-dal/get-dal-params"}}');var a=t(74848),i=t(28453);const r={title:"Part 1: Setting up an environment",authors:"Tim McMackin",last_update:{date:"14 February 2024"}},o=void 0,l={},c=[{value:"Set up a Weeklynet environment and account",id:"set-up-a-weeklynet-environment-and-account",level:2},{value:"Install Rust",id:"install-rust",level:2},{value:"Install Clang",id:"install-clang",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"Because Weeklynet requires a specific version of the Octez suite, you can't use most wallet applications and installations of the Octez suite with it.\nInstead, you must set up an environment with a specific version of the Octez suite and use it to create and fund an account."}),"\n",(0,a.jsx)(n.admonition,{title:"Weeklynet resets every week",type:"note",children:(0,a.jsx)(n.p,{children:"Weeklynet is reset every Wednesday, which deletes all accounts, smart contracts, and Smart Rollups.\nTherefore, you must recreate your environment and account and redeploy your smart Contracts and Smart Rollups after the network resets."})}),"\n",(0,a.jsx)(n.h2,{id:"set-up-a-weeklynet-environment-and-account",children:"Set up a Weeklynet environment and account"}),"\n",(0,a.jsxs)(n.p,{children:["The easiest way to use Weeklynet is to use the Docker image that is generated each time Weeklynet is reset and recreated.\nAs another option, you can build the specific version of the Octez suite locally.\nFor instructions, see the Weeklynet page at ",(0,a.jsx)(n.a,{href:"https://teztnets.com/weeklynet-about",children:"https://teztnets.com/weeklynet-about"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"To set up an environment and account in a Docker container, follow these steps:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["From the ",(0,a.jsx)(n.a,{href:"https://teztnets.com/weeklynet-about",children:"Weeklynet"})," page, find the Docker command to create a container from the correct Docker image, as in this example:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker run -it --entrypoint=/bin/sh tezos/tezos:master_7f3bfc90_20240116181914\n"})}),"\n",(0,a.jsx)(n.p,{children:"The image tag in this command changes each time the network is reset."}),"\n",(0,a.jsxs)(n.admonition,{type:"tip",children:[(0,a.jsxs)(n.p,{children:["If you're not used to working inside Docker containers, you can map a folder on your computer to a folder in the container to create a ",(0,a.jsx)(n.a,{href:"https://docs.docker.com/storage/volumes/",children:"Docker volume"}),".\nThis way, you can edit files on your computer and the changes will appear on the files inside the container.\nFor example, to start a container and map the current folder to the ",(0,a.jsx)(n.code,{children:"/home/tezos"})," folder in the container, run this command:"]}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker run -it --entrypoint=/bin/sh -v .:/home/tezos tezos/tezos:master_7f3bfc90_20240116181914\n"})}),(0,a.jsx)(n.p,{children:"You can map a folder like this only when you create a container; you cannot add it later."})]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Copy the URL of the public RPC endpoint for Weeklynet, such as ",(0,a.jsx)(n.code,{children:"https://rpc.weeklynet-2024-01-17.teztnets.com"}),".\nThis endpoint also changes each time the network is reset."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["For convenience, you may want to set this endpoint as the value of the ",(0,a.jsx)(n.code,{children:"ENDPOINT"})," environment variable.\nThe parts of the Octez suite don't use this environment variable directly, but you can save time by using this variable in commands."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"In the container, initialize the Octez client with that endpoint, such as this example:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"octez-client -E https://rpc.weeklynet-2024-01-17.teztnets.com config init\n"})}),"\n",(0,a.jsx)(n.p,{children:"or:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"octez-client -E $ENDPOINT config init\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Optional: Hide the network warning message by running this command:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"export TEZOS_CLIENT_UNSAFE_DISABLE_DISCLAIMER=y\n"})}),"\n",(0,a.jsx)(n.p,{children:"This command suppresses the message that your instance of the Octez client is not using Mainnet."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Create an account with the command ",(0,a.jsx)(n.code,{children:"octez-client gen keys $MY_ACCOUNT"}),", where ",(0,a.jsx)(n.code,{children:"$MY_ACCOUNT"})," is an alias for your account."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Get the public key hash of the new account by running the command ",(0,a.jsx)(n.code,{children:"octez-client show address $MY_ACCOUNT"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["From the ",(0,a.jsx)(n.a,{href:"https://teztnets.com/weeklynet-about",children:"Weeklynet"})," page, open the Weeklynet faucet and send some tez to the account.\n50 tez is enough to get started, and you can always go back to the faucet to get more."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Now you can use this account to deploy Smart Rollups."}),"\n",(0,a.jsx)(n.h2,{id:"install-rust",children:"Install Rust"}),"\n",(0,a.jsx)(n.p,{children:"To run this tutorial, install Rust in the environment by running the following command.\nThe application in this tutorial uses Rust because of its support for WebAssembly (WASM), the language that Smart Rollups use to communicate.\nRollups can use any language that has WASM compilation support."}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Make sure that the ",(0,a.jsx)(n.code,{children:"curl"})," program is installed.\nIf you are using the Tezos Docker container, run ",(0,a.jsx)(n.code,{children:"sudo apk add curl"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Run this command to install Rust:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Follow the instructions in the Rust installation program.\nFor example, it may prompt you to run ",(0,a.jsx)(n.code,{children:'source "$HOME/.cargo/env"'})," to configure your current terminal window to run Rust."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Add WASM as a compilation target for Rust by running this command:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"rustup target add wasm32-unknown-unknown\n"})}),"\n",(0,a.jsxs)(n.p,{children:["You can see other ways of installing Rust at ",(0,a.jsx)(n.a,{href:"https://www.rust-lang.org",children:"https://www.rust-lang.org"}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"install-clang",children:"Install Clang"}),"\n",(0,a.jsx)(n.p,{children:"Clang and LLVM are required for compilation to WebAssembly.\nVersion 11 or later of Clang is required."}),"\n",(0,a.jsx)(n.p,{children:"If you are using the Tezos Docker container, run these commands:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo apk add clang\nexport CC=clang\n"})}),"\n",(0,a.jsx)(n.p,{children:"Here are instructions for installing the appropriate tools on different operating systems:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"MacOS"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'brew install llvm\nexport CC="$(brew --prefix llvm)/bin/clang"\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Ubuntu"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install clang-11\nexport CC=clang-11\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Fedora"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"dnf install clang\nexport CC=clang\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arch Linux"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"pacman -S clang\nexport CC=clang\n"})}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"export CC"})," command sets Clang as the default C/C++ compiler."]}),"\n",(0,a.jsxs)(n.p,{children:["After you run these commands, run ",(0,a.jsx)(n.code,{children:"$CC --version"})," to verify that you have version 11 or greater installed."]}),"\n",(0,a.jsxs)(n.p,{children:["Also, ensure that your version of Clang ",(0,a.jsx)(n.code,{children:"wasm32"})," target with by running the command ",(0,a.jsx)(n.code,{children:"$CC -print-targets | grep wasm32"})," and verifying that the results include ",(0,a.jsx)(n.code,{children:"wasm32"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["When your environment is ready, continue to ",(0,a.jsx)(n.a,{href:"/tutorials/build-files-archive-with-dal/get-dal-params",children:"Part 2: Getting the DAL parameters"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var s=t(96540);const a={},i=s.createContext(a);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);