"use strict";(self.webpackChunktezos_developer_docs=self.webpackChunktezos_developer_docs||[]).push([[449],{49102:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>r});const o=JSON.parse('{"id":"unity/connecting-accounts","title":"Connecting accounts","description":"Connecting to a user\'s wallet is a prerequisite to working with Tezos in any application.","source":"@site/docs/unity/connecting-accounts.md","sourceDirName":"unity","slug":"/unity/connecting-accounts","permalink":"/previews/docs/ledger/unity/connecting-accounts","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1715659200000,"frontMatter":{"title":"Connecting accounts","authors":"Tim McMackin","last_update":{"date":"14 May 2024"}},"sidebar":"documentationSidebar","previous":{"title":"Prefabs","permalink":"/previews/docs/ledger/unity/prefabs"},"next":{"title":"Managing contracts","permalink":"/previews/docs/ledger/unity/managing-contracts"}}');var i=t(74848),c=t(28453);const s={title:"Connecting accounts",authors:"Tim McMackin",last_update:{date:"14 May 2024"}},a=void 0,l={},r=[{value:"Best practices",id:"best-practices",level:2},{value:"The <code>TezosAuthenticator</code> prefab",id:"the-tezosauthenticator-prefab",level:2},{value:"Connection methods",id:"connection-methods",level:2},{value:"QR code connections",id:"qr-code-connections",level:3},{value:"Deep link connections",id:"deep-link-connections",level:3},{value:"Social connections",id:"social-connections",level:3},{value:"Disconnecting",id:"disconnecting",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Connecting to a user's wallet is a prerequisite to working with Tezos in any application.\nAccessing the wallet allows your project to see the tokens in it and to prompt the user to submit transactions, but it does not give your project direct control over the wallet.\nUsers still confirm or reject all transactions in their wallet application, so you must handle both of these use cases."}),"\n",(0,i.jsx)(n.p,{children:"Using a wallet application in this way saves you from having to implement payment processing and security in your application.\nGame developers can also use the wallet and its account as a unique account identifier and as the user's inventory."}),"\n",(0,i.jsxs)(n.p,{children:["For an example of connecting to wallets, see the ",(0,i.jsx)(n.a,{href:"/unity/scenes#wallet-connection-scene",children:"WalletConnection tutorial scene"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["For more information about Tezos wallets, see ",(0,i.jsx)(n.a,{href:"/developing/wallet-setup",children:"Installing and funding a wallet"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best practices"}),"\n",(0,i.jsxs)(n.p,{children:["When working with wallets, be sure to follow the advice in ",(0,i.jsx)(n.a,{href:"/dApps/best-practices",children:"Best practices and avoiding flaws"})," for wallet connections.\nFor example, don't force the user to connect their wallet as soon as the application loads.\nInstead, let them see the application first.\nAlso, provide a prominent disconnect button to allow users to disconnect one account and connect a different one."]}),"\n",(0,i.jsxs)(n.h2,{id:"the-tezosauthenticator-prefab",children:["The ",(0,i.jsx)(n.code,{children:"TezosAuthenticator"})," prefab"]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"TezosAuthenticator"})," prefab provides the tools that you need to connect to user's Tezos wallets in a Unity project.\nYou can copy the ",(0,i.jsx)(n.code,{children:"TezosAuthenticator"})," and ",(0,i.jsx)(n.code,{children:"TezosManager"})," prefabs to your scene, and the ",(0,i.jsx)(n.code,{children:"TezosAuthenticator"})," prefab automatically adds features that connect to users' wallets."]}),"\n",(0,i.jsx)(n.h2,{id:"connection-methods",children:"Connection methods"}),"\n",(0,i.jsx)(n.p,{children:"This table shows the ways that the SDK can connect to wallets and which platforms they are appropriate for:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Connection method"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Web platform (WebGL)"}),(0,i.jsx)(n.th,{children:"Mobile apps"}),(0,i.jsx)(n.th,{children:"Standalone applications"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"QR code"}),(0,i.jsx)(n.td,{children:"Users scan a QR code with a wallet app"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Deep link"}),(0,i.jsx)(n.td,{children:"The application opens the user's wallet app directly"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"No"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Social wallets"}),(0,i.jsx)(n.td,{children:"The application opens the user's Kukai web-based wallet"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["Regardless of the connection method, the Tezos Unity SDK runs the ",(0,i.jsx)(n.code,{children:"WalletConnected"})," or ",(0,i.jsx)(n.code,{children:"WalletConnectionFailed"})," event, as appropriate.\nFor more information about events, see the ",(0,i.jsx)(n.a,{href:"/unity/reference/EventManager",children:"Unity SDK EventManager object"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"qr-code-connections",children:"QR code connections"}),"\n",(0,i.jsx)(n.p,{children:"This method generates a QR code that a user scans with their wallet application:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["The Unity application calls the ",(0,i.jsx)(n.a,{href:"/unity/reference/Wallet#connect",children:(0,i.jsx)(n.code,{children:"Wallet.Connect()"})})," method with the ",(0,i.jsx)(n.code,{children:"walletProvider"})," parameter set to ",(0,i.jsx)(n.code,{children:"WalletProviderType.beacon"})," to send a connection request to a wallet application via the ",(0,i.jsx)(n.a,{href:"https://gitlab.com/tezos/tzip/-/tree/master/proposals/tzip-10",children:"TZIP-10 protocol"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The wallet returns a handshake that includes pairing information for the wallet, which triggers the ",(0,i.jsx)(n.code,{children:"HandshakeReceived"})," event."]}),"\n",(0,i.jsxs)(n.li,{children:["From the handshake information, the SDK generates a QR code.\nThe ",(0,i.jsx)(n.code,{children:"TezosAuthenticator"})," prefab handles the QR code generation with the ",(0,i.jsx)(n.code,{children:"QrCodeGenerator"})," class."]}),"\n",(0,i.jsx)(n.li,{children:"The user scans the QR code with their wallet app and approves the connection."}),"\n",(0,i.jsxs)(n.li,{children:["The SDK receives the connection approval, which triggers the ",(0,i.jsx)(n.code,{children:"WalletConnected"})," event and includes information about the connected account."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"deep-link-connections",children:"Deep link connections"}),"\n",(0,i.jsx)(n.p,{children:"Deep link connections open the user's wallet app directly, which can be a mobile app or a browser extension.\nThis method relies on the Beacon SDK to interact with wallet apps:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The Unity WebGL application calls the ",(0,i.jsx)(n.a,{href:"/unity/reference/Wallet#connect",children:(0,i.jsx)(n.code,{children:"Wallet.Connect()"})})," method with the ",(0,i.jsx)(n.code,{children:"walletProvider"})," parameter set to ",(0,i.jsx)(n.code,{children:"WalletProviderType.beacon"}),".\nThe Beacon SDK detects that it is running in a web application and opens a popup window with the wallets that Beacon can connect to:"]}),"\n",(0,i.jsx)("img",{src:"/img/unity/unity-connecting-beacon-popup.png",alt:"Beacon popup window with wallet types including Temple and Umami",style:{width:300}}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.a,{href:"https://walletbeacon.io/",children:"Beacon"})," SDK handles the process of connecting to the wallet."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The SDK receives the connection approval, which triggers the ",(0,i.jsx)(n.code,{children:"WalletConnected"})," event and includes information about the connected account."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"social-connections",children:"Social connections"}),"\n",(0,i.jsxs)(n.p,{children:["Social wallets exist as accounts managed by web apps such as ",(0,i.jsx)(n.a,{href:"https://kukai.app/",children:"Kukai"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["To connect to a social wallet, the Unity WebGL application calls ",(0,i.jsx)(n.a,{href:"/unity/reference/Wallet#connect",children:(0,i.jsx)(n.code,{children:"Wallet.Connect()"})})," with the ",(0,i.jsx)(n.code,{children:"walletProvider"})," parameter set to ",(0,i.jsx)(n.code,{children:"WalletProviderType.kukai"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"disconnecting",children:"Disconnecting"}),"\n",(0,i.jsxs)(n.p,{children:["It's important to provide a disconnect button so the user can disconnect when they are finished with the application or if they want to connect with a different account.\nTo disconnect the active wallet, call the ",(0,i.jsx)(n.a,{href:"/unity/reference/Wallet#disconnect",children:(0,i.jsx)(n.code,{children:"Wallet.Disconnect()"})})," method."]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var o=t(96540);const i={},c=o.createContext(i);function s(e){const n=o.useContext(c);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(c.Provider,{value:n},e.children)}}}]);