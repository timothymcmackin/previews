"use strict";(self.webpackChunktezos_developer_docs=self.webpackChunktezos_developer_docs||[]).push([[3533],{94633:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"tutorials/smart-rollup/deploy","title":"Part 4: Deploying (originating) the rollup","description":"Smart Rollups are originated in a way similar to smart contracts.","source":"@site/docs/tutorials/smart-rollup/deploy.md","sourceDirName":"tutorials/smart-rollup","slug":"/tutorials/smart-rollup/deploy","permalink":"/previews/docs/ledger/tutorials/smart-rollup/deploy","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1722484800000,"frontMatter":{"title":"Part 4: Deploying (originating) the rollup","last_update":{"date":"1 August 2024"}},"sidebar":"tutorialsSidebar","previous":{"title":"Part 3: Optimizing the kernel","permalink":"/previews/docs/ledger/tutorials/smart-rollup/optimize"},"next":{"title":"Part 5: Running and interacting with the rollup node","permalink":"/previews/docs/ledger/tutorials/smart-rollup/run"}}');var r=t(74848),s=t(28453);const a={title:"Part 4: Deploying (originating) the rollup",last_update:{date:"1 August 2024"}},i=void 0,l={},c=[];function d(e){const n={a:"a",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Smart Rollups are originated in a way similar to smart contracts.\nInstead of running the ",(0,r.jsx)(n.code,{children:"octez-client originate contract"})," command, you run the ",(0,r.jsx)(n.code,{children:"octez-client originate smart rollup"})," command.\nThis command creates an address for the rollup and stores a small amount of data about it on layer 1."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In the Docker container, in the ",(0,r.jsx)(n.code,{children:"hello-world-kernel"})," folder, run this command to start the sandbox:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"./sandbox_node.sh\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This command starts a Tezos testing environment, including a baking node running in sandbox mode and a group of test accounts.\nThe console shows repeated messages that show that the node is baking blocks.\nFor more information about sandbox mode, see ",(0,r.jsx)(n.a,{href:"https://tezos.gitlab.io/user/sandbox.html",children:"sandbox mode"}),"."]}),"\n",(0,r.jsx)(n.p,{children:'If you see an error that says "Unable to connect to the node," you can ignore it because it happens only once while the node is starting.'}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Leave that terminal instance running for the rest of the tutorial."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Open a new terminal window."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"In the new terminal window, enter the Docker container by running this command:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker exec -it octez-container /bin/sh\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now the second terminal window is running inside the container just like the first one."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"In the new terminal window, go to the folder with the Smart Rollup code:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd hello-world-kernel\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"In the second terminal window, run this command to verify that the sandbox is running with the correct protocol:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"octez-client rpc get /chains/main/blocks/head/metadata | grep protocol\n"})}),"\n",(0,r.jsx)(n.p,{children:"The response shows the protocol that the sandbox is running, as in this example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'{ "protocol": "ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK",\n  "next_protocol": "ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK",\n'})}),"\n",(0,r.jsx)(n.p,{children:"If you don't see a message that looks like this one, check for errors in the first terminal window."}),"\n",(0,r.jsx)(n.p,{children:"Now the sandbox is running in the Docker container and you can use it to test the rollup."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Run this command to deploy the installer kernel to the Tezos sandbox:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'octez-client originate smart rollup \\\n  "test_smart_rollup" from "bootstrap1" \\\n  of kind wasm_2_0_0 of type bytes \\\n  with kernel file:hello_world_kernel_installer.hex --burn-cap 3\n'})}),"\n",(0,r.jsxs)(n.p,{children:["If you need to open a new terminal window within the Docker container, run the command ",(0,r.jsx)(n.code,{children:"docker exec -it octez-container /bin/sh"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Like the command to originate a smart contract, this command uses the ",(0,r.jsx)(n.code,{children:"--burn-cap"})," argument to allow the transaction to take fees from the account.\nAlso like deploying a smart contract, the response in the terminal shows information about the transaction and the address of the originated Smart Rollup, which starts with ",(0,r.jsx)(n.code,{children:"sr1"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Now layer 1 is aware of the rollup and nodes can run the rollup kernel."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var o=t(96540);const r={},s=o.createContext(r);function a(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);