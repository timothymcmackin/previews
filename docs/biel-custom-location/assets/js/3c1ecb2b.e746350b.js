"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3712],{77294:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"developing/information/indexers","title":"Indexers","description":"Indexers are off-chain applications that retrieve blockchain data, process it, and store it in a way that makes it easier to search and use.","source":"@site/docs/developing/information/indexers.md","sourceDirName":"developing/information","slug":"/developing/information/indexers","permalink":"/previews/docs/biel-custom-location/developing/information/indexers","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1704171600000,"frontMatter":{"title":"Indexers","authors":"Tezos Ukraine, Tim McMackin","last_update":{"date":"2 January 2024"}},"sidebar":"documentationSidebar","previous":{"title":"Block explorers","permalink":"/previews/docs/biel-custom-location/developing/information/block-explorers"},"next":{"title":"An introduction to smart contracts","permalink":"/previews/docs/biel-custom-location/smart-contracts"}}');var i=t(74848),s=t(28453);const o={title:"Indexers",authors:"Tezos Ukraine, Tim McMackin",last_update:{date:"2 January 2024"}},r=void 0,d={},c=[{value:"Why indexers are needed",id:"why-indexers-are-needed",level:2},{value:"How indexers work",id:"how-indexers-work",level:2},{value:"Types of indexers",id:"types-of-indexers",level:2},{value:"Full indexers",id:"full-indexers",level:3},{value:"Selective indexers",id:"selective-indexers",level:3},{value:"Setting up indexers",id:"setting-up-indexers",level:2},{value:"Using indexers",id:"using-indexers",level:2},{value:"Data available on indexers",id:"data-available-on-indexers",level:2},{value:"Where indexers are used",id:"where-indexers-are-used",level:2}];function l(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Indexers are off-chain applications that retrieve blockchain data, process it, and store it in a way that makes it easier to search and use.\nIndexers are an important component of ",(0,i.jsx)(n.a,{href:"/developing/information/block-explorers",children:"Block explorers"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"You can use indexers to provide the data that you need for your dApps."}),"\n",(0,i.jsx)(n.h2,{id:"why-indexers-are-needed",children:"Why indexers are needed"}),"\n",(0,i.jsxs)(n.p,{children:["Tezos nodes store copies of blocks, but they provide only certain information about those blocks through the ",(0,i.jsx)(n.a,{href:"/architecture/nodes#the-rpc-interface",children:"RPC interface"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"For example, assume that you want information about an operation and all you have is its hash.\nThe RPC interface can't provide this information directly, so you would have to search each block until you found the block with this operation, which is very inefficient."}),"\n",(0,i.jsx)(n.p,{children:"Instead, you can use an indexer that records information about each operation.\nThis kind of indexer can provide information about a specific operation by its hash or a list of operations sent by a certain account."}),"\n",(0,i.jsx)(n.h2,{id:"how-indexers-work",children:"How indexers work"}),"\n",(0,i.jsx)(n.p,{children:"You can imagine indexers as the card catalog in a library.\nLibraries typically sort books by genre and author name, so readers can find a book if they know its genre or author."}),"\n",(0,i.jsx)(n.p,{children:"However, suppose a reader wants to find a poem about acacia trees, a story about a gas station architect, or every book written in 1962.\nWithout any other information, they must check all the books in the library until they find what they are looking for."}),"\n",(0,i.jsx)(n.p,{children:"To simplify the process of searching for books, libraries add each new book they receive to their card catalogs.\nCard catalogs list all of the books on a certain topic and provide other metadata such as the authors' names and publication dates.\nReaders can look up a topic in the catalog and get a list of all books on that topic.\nLibraries can index books in as many ways as are necessary to help people search for books more efficiently."}),"\n",(0,i.jsx)(n.p,{children:"Similarly, relational databases can have indexes to speed up queries.\nIn the same way, blockchain indexers create a database with the blockchain data organized in certain ways."}),"\n",(0,i.jsx)(n.h2,{id:"types-of-indexers",children:"Types of indexers"}),"\n",(0,i.jsx)(n.p,{children:"There are two main types of blockchain indexers: full and selective."}),"\n",(0,i.jsx)(n.h3,{id:"full-indexers",children:"Full indexers"}),"\n",(0,i.jsx)(n.p,{children:"Full indexers process and write all data from blocks, from simple transactions to validator's node software versions.\nBlockchain explorers commonly use them to provide users with advanced blockchain analytics and allow them to search for any type of on-chain data.\nAlso, those who host full indexers can offer public APIs that other projects can use without hosting the indexer themselves."}),"\n",(0,i.jsx)(n.p,{children:"You can get data from these full indexers, which allow you to find almost any information in the Tezos blockchain:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://api.tzkt.io/",children:"TzKT"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.tzpro.io/",children:"TzPro"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/blockwatch-cc/tzindex",children:"TzIndex"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"selective-indexers",children:"Selective indexers"}),"\n",(0,i.jsx)(n.p,{children:"Selective indexers store only selected data, which means that they need less space and resources to maintain.\nCreating a selective indexer requires you to write the logic for the indexes, including what data to fetch, how to process it, and how to store it."}),"\n",(0,i.jsx)(n.p,{children:"Usually, they are used in projects that require only specific on-chain data, such as active user balances, balances of their smart contracts, and NFT metadata.\nYou can optimize a custom selective indexer for fast execution of specific project queries.\nYou can also use them to work with data in the way that you want to, such as storing token amounts with decimal places."}),"\n",(0,i.jsx)(n.p,{children:"You can use these frameworks to create your own selective indexer to provide the data that you need in the format that you need:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/tzConnectBerlin/que-pasa",children:"Que Pasa"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://dipdup.io/",children:"DipDup"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://dappetizer.dev/",children:"Dappetizer"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For example, ",(0,i.jsx)(n.a,{href:"https://teia.art/",children:"Teia.art"})," and other NFT marketplaces use their indexers based on DipDup, optimized for working with NFTs."]}),"\n",(0,i.jsx)(n.h2,{id:"setting-up-indexers",children:"Setting up indexers"}),"\n",(0,i.jsxs)(n.p,{children:["For information on setting up indexers, see the documentation for the indexer or ",(0,i.jsx)(n.a,{href:"https://opentezos.com/dapp/indexers/introduction/",children:"Indexers"})," on OpenTezos."]}),"\n",(0,i.jsx)(n.h2,{id:"using-indexers",children:"Using indexers"}),"\n",(0,i.jsx)(n.p,{children:"The exact list of tables, index schemas, and command syntax depend on the indexer and database it uses.\nFor information about how to use a specific indexer, see its documentation."}),"\n",(0,i.jsx)(n.p,{children:"Some indexers provide information about networks other than Mainnet, so check the indexer's documentation for information about selecting a network."}),"\n",(0,i.jsx)(n.p,{children:"For example, this TzKT query gets an account's balance of the USDT token:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"https://api.tzkt.io/v1/tokens/balances?token.contract=KT1XnTn74bUtxHfDtBmm2bGZAQfhPbvKWR8o&account=tz1a1RTsGUbads3VucUQDxJF4EDXkDWcDHPK\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For information about the TZKT indexer's API, see ",(0,i.jsx)(n.a,{href:"https://api.tzkt.io",children:"https://api.tzkt.io"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Indexers can organize data in custom ways.\nFor example, TzKT indexes FA1.2 and FA2 tokens and gives each an internal ID.\nThis ID can be faster and easier to work with and compare than using the contract ID and token ID."}),"\n",(0,i.jsx)(n.p,{children:"This TzKT query gets information about an FA1.2 token based on its internal ID instead of its contract address and token ID:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"https://api.tzkt.io/v1/tokens?id=42290944933889\n"})}),"\n",(0,i.jsx)(n.p,{children:"The response provides information about the token:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "id": 42290944933889,\n    "contract": {\n      "alias": "kUSD",\n      "address": "KT1K9gCRgaLRFKTErYt1wVxA3Frb9FjasjTV"\n    },\n    "tokenId": "0",\n    "standard": "fa1.2",\n    "firstMinter": {\n      "address": "tz1eDj5UuChVcZpA7gofUtyVS6mdQAcyEbZ5"\n    },\n    "firstLevel": 1330112,\n    "firstTime": "2021-02-04T05:43:23Z",\n    "lastLevel": 4860455,\n    "lastTime": "2024-01-03T12:23:49Z",\n    "transfersCount": 556579,\n    "balancesCount": 11270,\n    "holdersCount": 5313,\n    "totalMinted": "34975975281693622711131319",\n    "totalBurned": "33819058060274650139662474",\n    "totalSupply": "1156917221418972571468845",\n    "metadata": {\n      "name": "Kolibri USD",\n      "symbol": "kUSD",\n      "decimals": "18"\n    }\n  }\n]\n'})}),"\n",(0,i.jsx)(n.h2,{id:"data-available-on-indexers",children:"Data available on indexers"}),"\n",(0,i.jsx)(n.p,{children:"The exact list of queries and filters depends on the selected indexer.\nHere are some examples of information you can get from full indexers:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Account: Balance in tez, transaction history, address type, and status like "baker" or "delegator"'}),"\n",(0,i.jsx)(n.li,{children:"Block: Header, content, and metadata like address and socials of the baker who made the block"}),"\n",(0,i.jsx)(n.li,{children:"Contract: Description, entrypoints, balance, code in Michelson, storage, and the content of a specific big map"}),"\n",(0,i.jsx)(n.li,{children:"Bakers and delegators: Who earned how much, who endorsed a particular block, and how much users delegate"}),"\n",(0,i.jsx)(n.li,{children:"Protocol: What cycle is now, what is on the vote, how many tez are in circulation"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For example, here are some examples for getting information from TzKT.\nFollow the links and paste your address instead of ",(0,i.jsx)(n.code,{children:"tz1\u20269v4"})," into the address bar to get data about your account:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://api.tzkt.io/v1/tokens/balances?account=tz1UEQzJbuaGJgwvkekk6HwGwaKvjZ7rr9v4&token.contract=KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton",children:"fxhash NFTs you own"}),".\nThe fxhash contract address filters the query, so try to change the address to see your NFTs from other marketplaces."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://api.tzkt.io/v1/accounts/tz1UEQzJbuaGJgwvkekk6HwGwaKvjZ7rr9v4/balance_history",children:"Your balance history in tez"}),'.\nNodes and indexers display balances without decimals, and ""balance": 500000" means only five tez.']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://api.tzkt.io/v1/tokens/transfers?from=tz1UEQzJbuaGJgwvkekk6HwGwaKvjZ7rr9v4",children:"List of FA1.2 and FA2 token transfers"}),' where you were the sender. Change "from" to "to" in the query to see the list of transfers where you were a recipient.']}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["TzKT provides information about Ghostnet.\nFor example, you can run any of the previous queries on Ghostnet by changing the host name in the URL to ",(0,i.jsx)(n.code,{children:"https://api.ghostnet.tzkt.io/"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"where-indexers-are-used",children:"Where indexers are used"}),"\n",(0,i.jsx)(n.p,{children:"Many applications that work with on-chain data use an indexer."}),"\n",(0,i.jsx)(n.p,{children:"The simplest example of working with an indexer is a blockchain wallet.\nFor example, to display a user's token balances, Temple Wallet queries data from the TzKT indexer and gets tokens' tickers and logos from the contract metadata."}),"\n",(0,i.jsxs)(n.p,{children:["You can do the same thing by calling the ",(0,i.jsx)(n.code,{children:"GET tokens/balances"})," endpoint of the TzKT API and including your address as the value of the ",(0,i.jsx)(n.code,{children:"account"})," parameter, as in this example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"https://api.tzkt.io/v1/tokens/balances?account=tz1UEQzJbuaGJgwvkekk6HwGwaKvjZ7rr9v4\n"})}),"\n",(0,i.jsx)(n.p,{children:"In the same way, Temple Wallet receives transaction details and displays NFTs, delegation rewards, the value of your tokens, and other data.\nIt uses other sources for other data.\nFor example, it requests the XTZ price from Coingecko."}),"\n",(0,i.jsx)(n.p,{children:"Other blockchain applications use indexers in similar ways:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Decentralized exchanges use indexers to get historical data on the balances of each pool, transactions with them, and the value of tez.\nBased on this data, they calculate the volume of transactions in tez and other currencies, as well as the historical prices of tokens in fiat currencies."}),"\n",(0,i.jsx)(n.li,{children:"NFT marketplace websites index transactions with their contracts to display new NFTs, transaction history, and statistics of the most popular tokens."}),"\n",(0,i.jsx)(n.li,{children:"Block explorers display data from all blocks with the help of indexers and allow users to find anything, like operation details by hash.\nThanks to this, users can find the information they need in a user-friendly graphical interface."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var a=t(96540);const i={},s=a.createContext(i);function o(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);