"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2373],{51238:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"dApps/sending-transactions","title":"Sending transactions","description":"After connecting to a wallet, dApps can call smart contract entrypoints and make transactions with that wallet.","source":"@site/docs/dApps/sending-transactions.md","sourceDirName":"dApps","slug":"/dApps/sending-transactions","permalink":"/previews/docs/biel-custom-location/dApps/sending-transactions","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1737435600000,"frontMatter":{"title":"Sending transactions","authors":"Tim McMackin","last_update":{"date":"21 January 2025"},"dependencies":{"taquito":"21.0.1"}},"sidebar":"documentationSidebar","previous":{"title":"Connecting to wallets","permalink":"/previews/docs/biel-custom-location/dApps/wallets"},"next":{"title":"Taquito dApp SDK for TypeScript","permalink":"/previews/docs/biel-custom-location/dApps/taquito"}}');var o=e(74848),s=e(28453);const r={title:"Sending transactions",authors:"Tim McMackin",last_update:{date:"21 January 2025"},dependencies:{taquito:"21.0.1"}},i=void 0,c={},l=[{value:"Taquito",id:"taquito",level:2},{value:"Sending tez",id:"sending-tez",level:3},{value:"Calling contracts",id:"calling-contracts",level:3},{value:"Beacon",id:"beacon",level:2},{value:"Sending tez with Beacon",id:"sending-tez-with-beacon",level:3},{value:"Calling contracts with Beacon",id:"calling-contracts-with-beacon",level:3},{value:"Octez",id:"octez",level:2}];function d(t){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...t.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"After connecting to a wallet, dApps can call smart contract entrypoints and make transactions with that wallet."}),"\n",(0,o.jsx)(n.p,{children:"These calls can include:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Sending tez to an account or smart contract"}),"\n",(0,o.jsxs)(n.p,{children:["When a dApp sends tez, it removes the tez from the source account and adds it to the target account.\nWhen you send tez to a smart contract's address without calling an entrypoint, the smart contract behaves as though you called its ",(0,o.jsx)(n.code,{children:"default"})," entrypoint.\nSome tools have a specific syntax for sending tez to a contract that is different from the syntax to call an entrypoint, so check your tool's documentation for how to send tez to a contract."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Calling a smart contract entrypoint"}),"\n",(0,o.jsx)(n.p,{children:"When a dApp calls a smart contract, it passes an argument in Michelson format that includes the name of the entrypoint and the parameters to pass to it.\nMost tools compile this argument for you, so you can call the entrypoint and pass parameters as though you were calling a function.\nA call to a smart contract entrypoint always includes a transfer of tez, even if the amount is zero."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Originating a smart contract"}),"\n",(0,o.jsx)(n.p,{children:"Tools can originate a smart contract from source code."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["For information about calling contracts from other contracts, see ",(0,o.jsx)(n.a,{href:"/smart-contracts/logic/operations",children:"Operations"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"taquito",children:"Taquito"}),"\n",(0,o.jsxs)(n.p,{children:["You can use the Taquito SDK to send transactions from JavaScript/TypeScript applications.\nFor more information about Taquito, see ",(0,o.jsx)(n.a,{href:"/dApps/taquito",children:"Taquito"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"sending-tez",children:"Sending tez"}),"\n",(0,o.jsxs)(n.p,{children:["To send tez with Taquito, connect to the user's wallet and use the ",(0,o.jsx)(n.code,{children:"Tezos.wallet.transfer"})," method, as in this example:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { TezosToolkit } from \"@taquito/taquito\";\nconst Tezos = new TezosToolkit(rpcUrl);\n\nconst options = {\n  name: 'MyAwesomeDapp',\n  iconUrl: 'https://tezostaquito.io/img/favicon.svg',\n  network: {\n    type: NetworkType.GHOSTNET,\n  },\n};\nconst wallet = new BeaconWallet(options);\n\nTezos.setWalletProvider(wallet);\n\nawait Tezos.wallet.transfer({\n  amount: sendAmount,\n  to: targetAccount,\n})\n  .send()\n  .then((op) => {\n    console.log(`Waiting for ${op.opHash} to be confirmed...`);\n    return op.confirmation(2).then(() => op.opHash);\n  })\n  .catch((error) => console.log(`Error: ${JSON.stringify(error, null, 2)}`));\n"})}),"\n",(0,o.jsxs)(n.p,{children:["You can also use the Taquito Contract API to send tez in a similar way.\nFor more information, see ",(0,o.jsx)(n.a,{href:"https://tezostaquito.io/docs/making_transfers",children:"Transfers"})," in the Taquito documentation."]}),"\n",(0,o.jsx)(n.h3,{id:"calling-contracts",children:"Calling contracts"}),"\n",(0,o.jsx)(n.p,{children:"Taquito offers several different ways to send transactions from JavaScript/TypeScript code.\nOne way is to create a Taquito object that represents the contract.\nThat contract object contains a method that corresponds to each entrypoint in the contract."}),"\n",(0,o.jsx)(n.p,{children:'For example, this code calls an entrypoint named "doSomething."\nIt passes parameters in the order that the contract expects them:'}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"import { TezosToolkit } from \"@taquito/taquito\";\nconst Tezos = new TezosToolkit(rpcUrl);\n\nTezos.setWalletProvider(wallet);\nconst contract = await Tezos.wallet.at(contractAddress);\ntry {\n  const op = await contract.methodsObject.doSomething('Param 1', 25).send();\n  console.log(`Waiting for ${op.opHash} to be confirmed...`);\n  await op.confirmation(2);\n} catch (error) {\n  console.log(`Error: ${JSON.stringify(error, null, 2)}`);\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"To call an entrypoint that accepts parameters, you must encode those parameters in the format that the entrypoint requires."}),"\n",(0,o.jsx)(n.p,{children:"To see the format for these parameters, create a Taquito object that represents the contract and extract its parameter schema, as in the following example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const contract = await Tezos.wallet.at(contractAddress);\nconst parameterSchema = contract.parameterSchema;\nconsole.log(parameterSchema.ExtractSignatures());\n"})}),"\n",(0,o.jsx)(n.p,{children:"The response shows the entrypoints in the contract and the parameters that they accept."}),"\n",(0,o.jsxs)(n.p,{children:["For example, the ",(0,o.jsx)(n.a,{href:"/architecture/tokens/FA2",children:"FA2"})," ",(0,o.jsx)(n.code,{children:"transfer"})," entrypoint appears like this:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'[\n  "transfer",\n  {\n    "list": {\n      "from_": "address",\n      "txs": {\n        "list": {\n          "to_": "address",\n          "token_id": "nat",\n          "amount": "nat"\n        }\n      }\n    }\n  }\n]\n'})}),"\n",(0,o.jsxs)(n.p,{children:["This ",(0,o.jsx)(n.code,{children:"transfer"})," entrypoint accepts an array of token transfers.\nEach transfer object includes the address to take the tokens from and an array of accounts to send the tokens to, as in this example:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const transactionParams = [\n  {\n    from_: sourceAddress,\n    txs: [\n      {\n        to_: targetAddress1,\n        token_id: 7,\n        amount: 2,\n      },\n      {\n        to_: targetAddress2,\n        token_id: 7,\n        amount: 3,\n      },\n    ],\n  },\n];\n"})}),"\n",(0,o.jsxs)(n.p,{children:["To call the ",(0,o.jsx)(n.code,{children:"transfer"})," entrypoint, pass this parameter to the Taquito entrypoint method, as in this example:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"Tezos.setWalletProvider(wallet);\nconst contract = await Tezos.wallet.at(contractAddress);\n\nconst transactionParams = [\n  {\n    from_: sourceAddress,\n    txs: [\n      {\n        to_: targetAddress1,\n        token_id: 7,\n        amount: 2,\n      },\n      {\n        to_: targetAddress2,\n        token_id: 7,\n        amount: 3,\n      },\n    ],\n  },\n];\n\nconst estimation = await Tezos.estimate.transfer({\n  to: contractAddress,\n  amount: 0,\n  parameter: contract.methodsObject.transfer(transactionParams).toTransferParams().parameter\n});\n\nconst operation = await contract.methods\n  .transfer(transactionParams, estimation)\n  .send();\n\nconsole.log(`Waiting for ${operation.opHash} to be confirmed...`);\n\nawait operation.confirmation(2);\n\nconsole.log(\n  `Operation injected: https://ghost.tzstats.com/${operation.opHash}`,\n);\n"})}),"\n",(0,o.jsxs)(n.p,{children:["For more examples of calling smart contracts, see tutorials such as ",(0,o.jsx)(n.a,{href:"/tutorials/build-your-first-app",children:"Build a simple web application"})," or ",(0,o.jsx)(n.a,{href:"/tutorials/create-nfts",children:"Create NFTs from a web application"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["For more information about using Taquito, see ",(0,o.jsx)(n.a,{href:"https://tezostaquito.io/docs/smartcontracts",children:"Smart contracts"})," in the Taquito documentation."]}),"\n",(0,o.jsxs)(n.p,{children:["For a video walkthrough, see ",(0,o.jsx)(n.a,{href:"https://www.youtube.com/watch?v=xL6jyW1sqmA",children:"Interacting with FA2 Contracts Using Taquito"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"beacon",children:"Beacon"}),"\n",(0,o.jsx)(n.p,{children:"You can use the Beacon SDK to send transactions from JavaScript/TypeScript code."}),"\n",(0,o.jsx)(n.h3,{id:"sending-tez-with-beacon",children:"Sending tez with Beacon"}),"\n",(0,o.jsxs)(n.p,{children:["To send tez with Beacon, use the ",(0,o.jsx)(n.code,{children:"requestOperation"})," method, as in this example:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const response = await dAppClient.requestOperation({\n  operationDetails: [\n    {\n      kind: TezosOperationType.TRANSACTION,\n      destination: targetAddress, // Address of the target account\n      amount: sendAmount, // Amount to send in mutez\n    },\n  ],\n})\n"})}),"\n",(0,o.jsx)(n.h3,{id:"calling-contracts-with-beacon",children:"Calling contracts with Beacon"}),"\n",(0,o.jsxs)(n.p,{children:["To call contracts with Beacon, use the ",(0,o.jsx)(n.code,{children:"requestOperation"})," method and pass the address of the contract, the entrypoint to call, and the parameters to include, as in this example:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"import { TezosOperationType } from '@airgap/beacon-sdk'\n\nconst result = await dAppClient.requestOperation({\n  operationDetails: [\n    {\n      kind: TezosOperationType.TRANSACTION,\n      amount: '0',\n      destination: CONTRACT_ADDRESS,\n      parameters: {\n        entrypoint: 'mint',\n        value: {\n          int: 3,\n        },\n      },\n    },\n  ],\n})\n"})}),"\n",(0,o.jsx)(n.h2,{id:"octez",children:"Octez"}),"\n",(0,o.jsxs)(n.p,{children:["The Octez command-line client can send tez and call contracts from the command line.\nSee ",(0,o.jsx)(n.a,{href:"/developing/octez-client/transactions",children:"Interacting with contracts"}),"."]})]})}function p(t={}){const{wrapper:n}={...(0,s.R)(),...t.components};return n?(0,o.jsx)(n,{...t,children:(0,o.jsx)(d,{...t})}):d(t)}},28453:(t,n,e)=>{e.d(n,{R:()=>r,x:()=>i});var a=e(96540);const o={},s=a.createContext(o);function r(t){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof t?t(n):{...n,...t}}),[n,t])}function i(t){let n;return n=t.disableParentContext?"function"==typeof t.components?t.components(o):t.components||o:r(t.components),a.createElement(s.Provider,{value:n},t.children)}}}]);