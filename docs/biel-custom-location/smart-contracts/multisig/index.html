<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-smart-contracts/multisig" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Multi-signature contracts | Tezos Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.tezos.com/previews/docs/biel-custom-location/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.tezos.com/previews/docs/biel-custom-location/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.tezos.com/previews/docs/biel-custom-location/smart-contracts/multisig"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Multi-signature contracts | Tezos Documentation"><meta data-rh="true" name="description" content="Multi-signature (or multisig) contracts require multiple accounts to authorize operations before running them."><meta data-rh="true" property="og:description" content="Multi-signature (or multisig) contracts require multiple accounts to authorize operations before running them."><link data-rh="true" rel="icon" href="/previews/docs/biel-custom-location/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.tezos.com/previews/docs/biel-custom-location/smart-contracts/multisig"><link data-rh="true" rel="alternate" href="https://docs.tezos.com/previews/docs/biel-custom-location/smart-contracts/multisig" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.tezos.com/previews/docs/biel-custom-location/smart-contracts/multisig" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://QRIAHGML9Q-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-56M3FZ8",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>





<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pushfeedback@latest/dist/pushfeedback/pushfeedback.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/biel-search@latest/dist/biel-search/biel-search.css">

<meta http-equiv="Content-Security-Policy" content=" default-src &#39;none&#39;; base-uri &#39;self&#39;; manifest-src &#39;self&#39;; script-src https://*.googletagmanager.com https://cdn.jsdelivr.net &#39;self&#39; &#39;unsafe-inline&#39;; style-src https://cdn.jsdelivr.net https://fonts.googleapis.com &#39;self&#39; &#39;unsafe-inline&#39;; font-src https://cdn.jsdelivr.net &#39;self&#39;; img-src &#39;self&#39; https://projects.gitlab.io https://gitlab.com https://*.googletagmanager.com https://*.google-analytics.com data:; media-src &#39;self&#39;; form-action &#39;self&#39;; connect-src &#39;self&#39; https://*.algolia.net https://*.algolianet.com https://*.googletagmanager.com https://*.google-analytics.com https://*.analytics.google.com https://app.pushfeedback.com wss://app.biel.ai https://app.biel.ai; frame-src https://tezosbot.vercel.app;">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/biel-search@latest/dist/biel-search/biel-search.css">
<script src="https://cdn.jsdelivr.net/npm/biel-search@latest/dist/biel-search/biel-search.esm.js"></script><link rel="stylesheet" href="/previews/docs/biel-custom-location/assets/css/styles.f29cb94e.css">
<script src="/previews/docs/biel-custom-location/assets/js/runtime~main.89728094.js" defer="defer"></script>
<script src="/previews/docs/biel-custom-location/assets/js/main.cbba9715.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-56M3FZ8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/previews/docs/biel-custom-location/"><div class="navbar__logo"><img src="/previews/docs/biel-custom-location/img/logo-tezos.svg" alt="Developer Docs for Tezos" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/previews/docs/biel-custom-location/img/logo-tezos.svg" alt="Developer Docs for Tezos" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Tezos Docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/previews/docs/biel-custom-location/overview/">Documentation</a><a class="navbar__item navbar__link" href="/previews/docs/biel-custom-location/tutorials">Tutorials</a><a class="navbar__item navbar__link" href="/previews/docs/biel-custom-location/overview/resources#documentation-map">Map</a></div><div class="navbar__items navbar__items--right"><a href="https://gitlab.com/tezos/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item"><biel-button project="w30c27l8fg" header-title="Biel.ai chatbot" modal-position="bottom-right" button-style="dark">
                  Ask AI
                </biel-button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-custom-location/overview/">Overview</a><button aria-label="Expand sidebar category &#x27;Overview&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-custom-location/using">Using Tezos</a><button aria-label="Expand sidebar category &#x27;Using Tezos&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-custom-location/architecture">Architecture</a><button aria-label="Expand sidebar category &#x27;Architecture&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-custom-location/developing">Developing on Tezos</a><button aria-label="Expand sidebar category &#x27;Developing on Tezos&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/previews/docs/biel-custom-location/smart-contracts">Smart contracts</a><button aria-label="Collapse sidebar category &#x27;Smart contracts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/samples">Sample smart contracts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/languages">Languages</a><button aria-label="Expand sidebar category &#x27;Languages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/data-types">Data types</a><button aria-label="Expand sidebar category &#x27;Data types&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/logic/comparing">Logic</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/creating">Creating smart contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/deploying">Deploying smart contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/entrypoints">Entrypoints</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/storage">Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/special-values">Special values</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/constants">Global table of constants</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/serialization">Serialization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/sapling">Private transactions (Sapling)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/views">Views</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/events">Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/delegation">Delegation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/multisig">Multi-signature contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/timelocks">Timelocks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/previews/docs/biel-custom-location/smart-contracts/oracles">Oracles</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-custom-location/dApps">Decentralized applications (dApps)</a><button aria-label="Expand sidebar category &#x27;Decentralized applications (dApps)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/previews/docs/biel-custom-location/unity">Tezos Unity SDK</a><button aria-label="Expand sidebar category &#x27;Tezos Unity SDK&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/previews/docs/biel-custom-location/reference/style-guide">Reference</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/previews/docs/biel-custom-location/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/previews/docs/biel-custom-location/smart-contracts"><span itemprop="name">Smart contracts</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Multi-signature contracts</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Multi-signature contracts</h1></header><p>Multi-signature (or multisig) contracts require multiple accounts to authorize operations before running them.
They have many applications, including:</p>
<ul>
<li>Governance: DAOs and other groups can use them to vote on the actions that the organization takes.</li>
<li>Funds distribution: Accounts can vote on where funds are sent.</li>
<li>Security: Requiring multiple signatures can prevent a single compromised wallet from doing malicious things.</li>
</ul>
<p>As with any contract, a single account must originate multisig contracts, but that account does not necessarily have any special privileges on the contract.
The contract originator does not even need to be one of the accounts that can authorize operations.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-proposals">Using proposals<a href="#using-proposals" class="hash-link" aria-label="Direct link to Using proposals" title="Direct link to Using proposals">​</a></h2>
<p>One common way to create a multisig contract is to allow authorized users to submit a proposal that other authorized users can vote on.
For example, this multisig contract stores tez and allows users to propose and vote on the account that should receive the tez:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import smartpy as sp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@sp.module</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def main():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proposal_type: type = sp.big_map[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sp.int,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sp.record(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            paymentAmt=sp.mutez,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            receiver=sp.address,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            voters=sp.set[sp.address],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            votingComplete=sp.bool,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    class MultiSigContract(sp.Contract):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def __init__(self, members, requiredVotes):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # Keep track of all the proposals submitted to the multisig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.data.proposals = sp.cast(sp.big_map(), proposal_type)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.data.activeProposalId = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.data.members = sp.cast(members, sp.set[sp.address])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.data.requiredVotes = sp.cast(requiredVotes, sp.nat)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @sp.entrypoint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def deposit(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            assert self.data.members.contains(sp.sender), &quot;Not a Member of MultiSig&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @sp.entrypoint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def submit_proposal(self, params):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Submit a new proposal/lambda for members</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            of the MultiSig to vote for.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            assert self.data.members.contains(sp.sender), &quot;Not a Member of MultiSig&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            assert (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                params.paymentAmt &lt;= sp.balance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ), &quot;The MultiSig does not have enough funds for this proposal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.data.activeProposalId += (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                1  # submitting a new proposal inactivates the last one</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.data.proposals[self.data.activeProposalId] = sp.record(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                paymentAmt=params.paymentAmt,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                receiver=params.receiver,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                voters={sp.sender},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                votingComplete=False,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @sp.entrypoint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        def vote_on_proposal(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            assert self.data.members.contains(sp.sender), &quot;Not a Member of MultiSig&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            # check if the user has previously voted on the proposal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            assert not self.data.proposals[self.data.activeProposalId].voters.contains(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                sp.sender</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ), &quot;Member has voted on this proposal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.data.proposals[self.data.activeProposalId].voters.add(sp.sender)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                sp.len(self.data.proposals[self.data.activeProposalId].voters)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                == self.data.requiredVotes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                sp.send(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.data.proposals[self.data.activeProposalId].receiver,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.data.proposals[self.data.activeProposalId].paymentAmt,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.data.proposals[self.data.activeProposalId].votingComplete = True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@sp.add_test()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def test():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scenario = sp.test_scenario(&quot;Multisig test&quot;, main)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alice = sp.test_account(&quot;alice&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bob = sp.test_account(&quot;bob&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    charlie = sp.test_account(&quot;charlie&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dani = sp.test_account(&quot;dani&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    earl = sp.test_account(&quot;earl&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scenario.h3(&quot;MultiSig Proposal Contract&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    members = sp.set()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    members.add(alice.address)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    members.add(bob.address)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    members.add(charlie.address)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    members.add(earl.address)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contract = main.MultiSigContract(members, 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scenario += contract</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scenario.h3(&quot;Members can add funds to the contract&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contract.deposit(_sender=alice.address, _amount=sp.tez(50))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scenario.h3(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Members can submit a proposal for funds to be sent to an address - Proposal 1.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contract.submit_proposal(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sp.record(paymentAmt=sp.tez(30), receiver=dani.address),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _sender=alice.address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scenario.h3(&quot;Non-members cannot vote on proposals&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contract.vote_on_proposal(_valid=False, _sender=dani.address)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scenario.h3(&quot;Member 2 can vote on proposal&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contract.vote_on_proposal(_sender=bob.address)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scenario.h3(&quot;Member 3 can vote on proposal&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contract.vote_on_proposal(_sender=charlie.address)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scenario.h3(&quot;Contract balance should drop to 20tez after transfer&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scenario.verify(contract.balance == sp.tez(20))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scenario.h3(&quot;A New proposal can be created&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contract.submit_proposal(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sp.record(paymentAmt=sp.tez(20), receiver=dani.address),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _sender=alice.address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scenario.h3(&quot;New proposal can be voted on&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contract.vote_on_proposal(_sender=charlie.address)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This contract stores a big-map of proposals, each with an amount to pay, the account to pay, and information about who has voted for the proposal:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">proposal_type: type = sp.big_map[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sp.int,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sp.record(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        paymentAmt=sp.mutez,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        receiver=sp.address,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        voters=sp.set[sp.address],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        votingComplete=sp.bool,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>submit_proposal</code> entrypoint allows authorized users to submit a payment amount and an account address, which adds a proposal to the storage:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">self.data.proposals[self.data.activeProposalId] = sp.record(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    paymentAmt=params.paymentAmt,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    receiver=params.receiver,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    voters={sp.sender},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    votingComplete=False,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Authorized accounts call the <code>vote_on_proposal</code> entrypoint to vote for the currently active proposal:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@sp.entrypoint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def vote_on_proposal(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert self.data.members.contains(sp.sender), &quot;Not a Member of MultiSig&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # check if the user has previously voted on the proposal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert not self.data.proposals[self.data.activeProposalId].voters.contains(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sp.sender</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ), &quot;Member has voted on this proposal&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.data.proposals[self.data.activeProposalId].voters.add(sp.sender)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Accounts that don&#x27;t want to vote for the proposal don&#x27;t need to do anything.</p>
<p>When the necessary number of votes have been reached, the <code>vote_on_proposal</code> entrypoint automatically sends the tez to the account in the proposal:</p>
<div class="language-smartpy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smartpy codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sp.len(self.data.proposals[self.data.activeProposalId].voters)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    == self.data.requiredVotes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sp.send(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.data.proposals[self.data.activeProposalId].receiver,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.data.proposals[self.data.activeProposalId].paymentAmt,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.data.proposals[self.data.activeProposalId].votingComplete = True</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-multi-signature-operations">Using multi-signature operations<a href="#using-multi-signature-operations" class="hash-link" aria-label="Direct link to Using multi-signature operations" title="Direct link to Using multi-signature operations">​</a></h2>
<p>You can also require operations to be signed by multiple accounts.
For example, the <a href="/previews/docs/biel-custom-location/developing/octez-client">Octez client</a> has a built-in multisig contract that you can use.
The contract requires signatures from multiple accounts before running transactions such as :</p>
<ul>
<li>Distributing tez</li>
<li>Changing the threshold</li>
<li>Changing the accounts</li>
<li>Setting the delegate of the contract</li>
<li>Running arbitrary Michelson code</li>
</ul>
<p>To originate the contract, you specify the accounts to include as authorized signers of the contract and the threshold, which is the number of accounts that are needed to authorize a transaction.
This example creates a contract with three members and a threshold of 2:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">octez-client deploy multisig msig transferring 100 from my_account \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  with threshold 2 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  on public keys alice bob charlie --burn-cap 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To initiate a transaction, use the <code>octez-client prepare multisig transaction</code> command.
For example, this command initiates a transfer of 10 tez from the contract to Bob&#x27;s account:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">octez-client prepare multisig transaction on msig transferring 10 to bob</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The response includes a string of bytes that the other accounts must sign, as in this example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Bytes to sign: &#x27;0x05070707070a00000004af1864d90a0000001601af1399f7f3123697929b158b554f5dd697aa7e330007070001050502000000350320053d036d0743035d0a00000015000f2c3d65a941224c35fa05e965386726da7cab32031e0743036a0080dac409034f034d031b&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Blake 2B Hash: &#x27;CmaXVZ2u7HxNGfSzw1Bu5vFEsoQs7YDPs5q6KH1g7HGG&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Threshold (number of signatures required): 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Public keys of the signers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  edpkuNgk7cbsBbuYCgbow7svichVJsVZ5pZ5DQ6Uv4aFCoA1gv1qaF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  edpktzDT3t9m2rSkrYbUycCHdvKVcK9MmcMffMRddHZKyxksUcnVXb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  edpkvGvA6b6KfdwH5Q8fyq9J3494Fw58BKKPgdei3QfvrrnLt5nd58</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To sign the bytes, the other accounts run the <code>octez-client sign bytes</code> command.
For example, this code assigns the bytes to the <code>TO_SIGN</code> variable and signs them with two accounts:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TO_SIGN=$(octez-client prepare multisig transaction on msig transferring 10 to bob --bytes-only)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALICE_S_SIGNATURE=$(octez-client sign bytes &quot;$TO_SIGN&quot; for alice | cut -d &#x27; &#x27; -f 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CHARLIE_S_SIGNATURE=$(octez-client sign bytes &quot;$TO_SIGN&quot; for charlie | cut -d &#x27; &#x27; -f 2)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then you can use the two accounts&#x27; signatures to run the transaction:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">octez-client run transaction &quot;$TO_SIGN&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  on multisig contract msig \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  on behalf of charlie \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  with signatures &quot;$ALICE_S_SIGNATURE&quot; &quot;$CHARLIE_S_SIGNATURE&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --burn-cap 0.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The contract uses a counter to ensure that the signatures work only once.</p>
<p>For more information, run the command <code>octez-client man multisig</code> and see <a href="https://octez.tezos.com/docs/user/multisig.html" target="_blank" rel="noopener noreferrer">Built-in multisig contracts</a> in the Octez documentation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-multi-signature-wallets">Setting up multi-signature wallets<a href="#setting-up-multi-signature-wallets" class="hash-link" aria-label="Direct link to Setting up multi-signature wallets" title="Direct link to Setting up multi-signature wallets">​</a></h2>
<p>Some tools create wallets that can store tez and other tokens and manage the process of signing transactions.
For example, TzSafe provides a front-end application that lets you:</p>
<ul>
<li>Create a multisig wallet and store tez, FA1.2 tokens, and FA2 tokens in it</li>
<li>Create proposals to transfer tokens</li>
<li>Sign or reject proposals</li>
<li>Run approved proposals</li>
</ul>
<p>For more information about TzSafe, see <a href="https://docs.tzsafe.marigold.dev" target="_blank" rel="noopener noreferrer">https://docs.tzsafe.marigold.dev</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="securing-multisig-contracts">Securing multisig contracts<a href="#securing-multisig-contracts" class="hash-link" aria-label="Direct link to Securing multisig contracts" title="Direct link to Securing multisig contracts">​</a></h2>
<p>Like all contracts, you must ensure ensure that multisig contracts won&#x27;t become compromised or permanently blocked.</p>
<ul>
<li>Control the list of voters, how accounts can be added or removed, and how many votes are needed to approve a proposal</li>
<li>Prevent users from blocking the contract by setting a time limit for proposals</li>
<li>Prevent users from clogging the contract with too many proposals or submitting a new proposal before other users have time to vote on the current proposal</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-information">More information<a href="#more-information" class="hash-link" aria-label="Direct link to More information" title="Direct link to More information">​</a></h2>
<p>For more information on multisig contracts, see examples in the repository <a href="https://github.com/onedebos/multisig" target="_blank" rel="noopener noreferrer">https://github.com/onedebos/multisig</a> and an explanation in this video: <a href="https://www.youtube.com/watch?v=r9QrrSfJuVg" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=r9QrrSfJuVg</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-04-09T04:00:00.000Z" itemprop="dateModified">Apr 9, 2025</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/previews/docs/biel-custom-location/smart-contracts/delegation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Delegation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/previews/docs/biel-custom-location/smart-contracts/timelocks"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Timelocks</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#using-proposals" class="table-of-contents__link toc-highlight">Using proposals</a></li><li><a href="#using-multi-signature-operations" class="table-of-contents__link toc-highlight">Using multi-signature operations</a></li><li><a href="#setting-up-multi-signature-wallets" class="table-of-contents__link toc-highlight">Setting up multi-signature wallets</a></li><li><a href="#securing-multisig-contracts" class="table-of-contents__link toc-highlight">Securing multisig contracts</a></li><li><a href="#more-information" class="table-of-contents__link toc-highlight">More information</a></li></ul></div></div></div></div></main></div></div></div></div>
<script type="module" src="https://cdn.jsdelivr.net/npm/pushfeedback@latest/dist/pushfeedback/pushfeedback.esm.js"></script>
<script>const feedbackButton=document.createElement("feedback-button");feedbackButton.setAttribute("project","80ja0zkj8v"),feedbackButton.setAttribute("modal-position","bottom-right"),feedbackButton.setAttribute("button-style","light"),feedbackButton.setAttribute("button-position","bottom-right"),feedbackButton.setAttribute("footer-text",'For information about providing feedback and the kinds of feedback that we are interested in, see <a href="/overview/feedback" target="_blank">Providing feedback</a>.'),feedbackButton.setAttribute("message-placeholder","Comments on specific points and/or aspects (out of date, wrong, incomplete, ...)"),feedbackButton.setAttribute("id","default"),feedbackButton.textContent="Feedback",document.body.appendChild(feedbackButton)</script>
<script type="module" src="https://cdn.jsdelivr.net/npm/biel-search@latest/dist/biel-search/biel-search.esm.js"></script>
<script>const bielButton=document.createElement("biel-button");bielButton.setAttribute("project","w30c27l8fg"),bielButton.setAttribute("modal-position","bottom-right"),bielButton.setAttribute("button-style","dark"),bielButton.setAttribute("button-position","custom"),bielButton.setAttribute("header-title","Tezos documentation chatbot (beta)"),bielButton.setAttribute("footer-text",'AI-generated answers may contain errors. Verify the information before use. For more information, see <a href="https://docs.tezos.com/overview/chatbot">Using the chatbot</a>.'),bielButton.setAttribute("id","default"),bielButton.textContent="Ask AI",document.body.appendChild(bielButton)</script></body>
</html>