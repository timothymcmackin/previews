"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6555],{3109:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"tutorials/build-files-archive-with-dal/set-up-environment","title":"Part 1: Setting up an environment","description":"These steps cover how to set up a development environment to work with Smart Rollups and the DAL.","source":"@site/docs/tutorials/build-files-archive-with-dal/set-up-environment.md","sourceDirName":"tutorials/build-files-archive-with-dal","slug":"/tutorials/build-files-archive-with-dal/set-up-environment","permalink":"/previews/docs/biel-ai-search/tutorials/build-files-archive-with-dal/set-up-environment","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1725940800000,"frontMatter":{"title":"Part 1: Setting up an environment","authors":"Tim McMackin","last_update":{"date":"10 September 2024"}},"sidebar":"tutorialsSidebar","previous":{"title":"Implement a file archive with the DAL and a Smart Rollup","permalink":"/previews/docs/biel-ai-search/tutorials/build-files-archive-with-dal"},"next":{"title":"Part 2: Getting the DAL parameters","permalink":"/previews/docs/biel-ai-search/tutorials/build-files-archive-with-dal/get-dal-params"}}');var o=t(74848),i=t(28453);const r={title:"Part 1: Setting up an environment",authors:"Tim McMackin",last_update:{date:"10 September 2024"}},a=void 0,l={},c=[{value:"Install Rust",id:"install-rust",level:2},{value:"Install Clang",id:"install-clang",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"These steps cover how to set up a development environment to work with Smart Rollups and the DAL.\nTo work with these elements, you need the Octez suite, which includes the Octez command-line client for interacting with Tezos and the binaries for the DAL node and Smart Rollup node.\nYou must use the same version of the Octez suite that the network is using."}),"\n",(0,o.jsxs)(n.p,{children:["The easiest way to use the Octez suite is to use the ",(0,o.jsx)(n.code,{children:"tezos/tezos"})," Docker image.\nAs another option, you can get the built version of the Octez suite from ",(0,o.jsx)(n.a,{href:"https://octez.tezos.com/docs/",children:"https://octez.tezos.com/docs/"})," or build the specific version of the Octez suite locally."]}),"\n",(0,o.jsx)(n.p,{children:"To set up an environment and account in a Docker container, follow these steps:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Retrieve the latest version of the ",(0,o.jsx)(n.code,{children:"tezos/tezos"})," Docker image by running this command:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker pull tezos/tezos:latest\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Start a Docker container from the image:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker run -it --entrypoint=/bin/sh tezos/tezos:latest\n"})}),"\n",(0,o.jsxs)(n.admonition,{type:"tip",children:[(0,o.jsxs)(n.p,{children:["If you're not used to working inside Docker containers, you can map a folder on your computer to a folder in the container to create a ",(0,o.jsx)(n.a,{href:"https://docs.docker.com/storage/volumes/",children:"Docker volume"}),".\nThis way, you can edit files on your computer and the changes will appear on the files inside the container.\nFor example, to start a container and map the current folder to the ",(0,o.jsx)(n.code,{children:"/home/tezos"})," folder in the container, run this command:"]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker run -it --entrypoint=/bin/sh -v .:/home/tezos tezos/tezos:latest\n"})}),(0,o.jsx)(n.p,{children:"You can map a folder like this only when you create a container; you cannot add it later."})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"In the container, configure the layer 1 node for Ghostnet:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"octez-node config init --network ghostnet\n"})}),"\n",(0,o.jsx)(n.p,{children:"If you see an error that says that the node has a pre-existing configuration file, update the existing configuration file by running this command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"octez-node config update --network ghostnet\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Download a snapshot of Ghostnet from ",(0,o.jsx)(n.a,{href:"https://snapshot.tzinit.org",children:"https://snapshot.tzinit.org"})," based on the instructions on that site.\nFor example, the command to download the snapshot may look like this:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"wget -O snapshot_file https://snapshots.eu.tzinit.org/ghostnet/rolling\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Load the snapshot in the node by running this command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"octez-node snapshot import snapshot_file\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Run this command to start the node:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"octez-node run --rpc-addr 127.0.0.1:8732\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Leave the node running in that terminal window and open a new terminal window in the same environment.\nIf you are using a Docker container, you can enter the container with the ",(0,o.jsx)(n.code,{children:"docker exec"})," command, as in ",(0,o.jsx)(n.code,{children:"docker exec -it my-image /bin/sh"}),".\nTo get the name of the Docker container, run the ",(0,o.jsx)(n.code,{children:"docker ps"})," command."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"In the container, initialize the Octez client to use your node, such as this example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"octez-client -E http://127.0.0.1:8732 config init\n"})}),"\n",(0,o.jsx)(n.p,{children:"This command uses the default port for the node, but you can change it if you are running the node somewhere else."}),"\n",(0,o.jsxs)(n.p,{children:['If you get an error that says "Failed to acquire the protocol version from the node," the node is not ready yet.\nWait a few minutes for the node to be ready, run ',(0,o.jsx)(n.code,{children:"rm -rf /home/tezos/.tezos-client/config"})," to remove the configuration file, and try the ",(0,o.jsx)(n.code,{children:"config init"})," command again."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Optional: Hide the network warning message by running this command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"export TEZOS_CLIENT_UNSAFE_DISABLE_DISCLAIMER=y\n"})}),"\n",(0,o.jsx)(n.p,{children:"This command suppresses the message that your instance of the Octez client is not using Mainnet."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Create an account with the command ",(0,o.jsx)(n.code,{children:"octez-client gen keys my_wallet"}),", where ",(0,o.jsx)(n.code,{children:"my_wallet"})," is an alias for your account."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Get the public key hash of the new account by running the command ",(0,o.jsx)(n.code,{children:"octez-client show address my_wallet"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["From the ",(0,o.jsx)(n.a,{href:"https://teztnets.com/ghostnet-about",children:"Ghostnet"})," page, open the Ghostnet faucet and send some tez to the account.\n50 tez is enough to get started, and you can always go back to the faucet to get more."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Now you can use this account to deploy Smart Rollups."}),"\n",(0,o.jsx)(n.h2,{id:"install-rust",children:"Install Rust"}),"\n",(0,o.jsx)(n.p,{children:"To run this tutorial, install Rust in the environment by running the following command.\nThe application in this tutorial uses Rust because of its support for WebAssembly (WASM), the language that Smart Rollups use to communicate.\nRollups can use any language that has WASM compilation support."}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Make sure that the ",(0,o.jsx)(n.code,{children:"curl"})," program is installed.\nIf you are using the Tezos Docker container, run ",(0,o.jsx)(n.code,{children:"sudo apk add curl"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Run this command to install Rust:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Follow the instructions in the Rust installation program.\nFor example, it may prompt you to run ",(0,o.jsx)(n.code,{children:'. "$HOME/.cargo/env"'})," to configure your current terminal window to run Rust."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Set the version of Rust to 1.80 by running this command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"rustup override set 1.80\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Add WASM as a compilation target for Rust by running this command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"rustup target add wasm32-unknown-unknown\n"})}),"\n",(0,o.jsxs)(n.p,{children:["You can see other ways of installing Rust at ",(0,o.jsx)(n.a,{href:"https://www.rust-lang.org",children:"https://www.rust-lang.org"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"install-clang",children:"Install Clang"}),"\n",(0,o.jsx)(n.p,{children:"Clang and LLVM are required for compilation to WebAssembly.\nVersion 11 or later of Clang is required."}),"\n",(0,o.jsxs)(n.p,{children:["If you are using the ",(0,o.jsx)(n.code,{children:"tezos/tezos"})," Docker image, run these commands:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo apk add clang\nexport CC=clang\n"})}),"\n",(0,o.jsx)(n.p,{children:"Here are instructions for installing the appropriate tools on different operating systems:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"MacOS"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'brew install llvm\nexport CC="$(brew --prefix llvm)/bin/clang"\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Ubuntu"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install clang-11\nexport CC=clang-11\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Fedora"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"dnf install clang\nexport CC=clang\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Arch Linux"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"pacman -S clang\nexport CC=clang\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"export CC"})," command sets Clang as the default C/C++ compiler."]}),"\n",(0,o.jsxs)(n.p,{children:["After you run these commands, run ",(0,o.jsx)(n.code,{children:"$CC --version"})," to verify that you have version 11 or greater installed."]}),"\n",(0,o.jsxs)(n.p,{children:["Also, ensure that your version of Clang ",(0,o.jsx)(n.code,{children:"wasm32"})," target with by running the command ",(0,o.jsx)(n.code,{children:"$CC -print-targets | grep wasm32"})," and verifying that the results include ",(0,o.jsx)(n.code,{children:"wasm32"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["When your environment is ready, continue to ",(0,o.jsx)(n.a,{href:"/tutorials/build-files-archive-with-dal/get-dal-params",children:"Part 2: Getting the DAL parameters"}),"."]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var s=t(96540);const o={},i=s.createContext(o);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);