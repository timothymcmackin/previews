"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7461],{21071:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>c,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>h});const o=JSON.parse('{"id":"architecture/tokens/FA1.2","title":"FA1.2 tokens","description":"The FA1.2 standard is for fungible tokens, which are collections of identical, interchangeable tokens.","source":"@site/docs/architecture/tokens/FA1.2.md","sourceDirName":"architecture/tokens","slug":"/architecture/tokens/FA1.2","permalink":"/previews/docs/biel-ai-search/architecture/tokens/FA1.2","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1708578000000,"frontMatter":{"title":"FA1.2 tokens","authors":"Claude Barde, Aymeric Bethencourt, Tim McMackin","last_update":{"date":"22 February 2024"}},"sidebar":"documentationSidebar","previous":{"title":"Tokens","permalink":"/previews/docs/biel-ai-search/architecture/tokens"},"next":{"title":"FA2 tokens","permalink":"/previews/docs/biel-ai-search/architecture/tokens/FA2"}}');var a=n(74848),s=n(28453);const r={title:"FA1.2 tokens",authors:"Claude Barde, Aymeric Bethencourt, Tim McMackin",last_update:{date:"22 February 2024"}},c=void 0,i={},h=[{value:"Allowances",id:"allowances",level:2},{value:"Entrypoints",id:"entrypoints",level:2},{value:"Storage",id:"storage",level:2}];function l(e){const t={a:"a",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["The FA1.2 standard is for ",(0,a.jsx)(t.em,{children:"fungible tokens"}),", which are collections of identical, interchangeable tokens.\nTez are fungible tokens because each tez is the same as every other tez, though tez are not compatible with the FA1.2 standard.\nCommonly used FA1.2 tokens include ",(0,a.jsx)(t.a,{href:"https://kickico.com/en/kusd",children:"kUSD"})," and ",(0,a.jsx)(t.a,{href:"https://ctez.app",children:"Ctez"}),"."]}),"\n",(0,a.jsx)(t.p,{children:"Contracts that follow this standard keep a ledger that records how many tokens different accounts own.\nThey have entrypoints that allow users to transfer tokens and limit the amount that can be transferred.\nThey also have entrypoints that provide information such as the total amount of tokens and the amount of tokens that a specified account owns."}),"\n",(0,a.jsxs)(t.p,{children:["For the full details of the FA1.2 standard, see ",(0,a.jsx)(t.a,{href:"https://gitlab.com/tezos/tzip/-/blob/master/proposals/tzip-7/tzip-7.md",children:"Tezos Improvement Proposal 7 (TZIP-7)"}),", which defines the standard."]}),"\n",(0,a.jsxs)(t.p,{children:["You can verify that a contract follows the FA1.2 standard by running the following Octez client command, where ",(0,a.jsx)(t.code,{children:"$CONTRACT_ADDRESS"})," is the address of the contract:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"octez-client check contract $CONTRACT_ADDRESS implements fa1.2\n"})}),"\n",(0,a.jsxs)(t.p,{children:["The Octez client also supports other interactions with FA1.2 contracts, such as transferring tokens or checking balances, as described at ",(0,a.jsx)(t.a,{href:"https://octez.tezos.com/docs/user/fa12.html",children:"FA1.2 support"})," in the Octez documentation."]}),"\n",(0,a.jsx)(t.h2,{id:"allowances",children:"Allowances"}),"\n",(0,a.jsxs)(t.p,{children:["FA1.2 contracts keep track of how many tokens an account A permits another account B to transfer out of account A.\nThis limit is known as the ",(0,a.jsx)(t.em,{children:"allowance"})," for account B.\nIn this scenario, account B is known as the ",(0,a.jsx)(t.em,{children:"spender"})," for account A."]}),"\n",(0,a.jsx)(t.p,{children:"This feature allows an account to authorize another account to transfer a certain amount of tokens on its behalf."}),"\n",(0,a.jsx)(t.p,{children:"For example, you might authorize an application to take a certain amount of your tokens, as part of one or several transactions, by setting the application's allowance for your tokens."}),"\n",(0,a.jsx)(t.p,{children:"The spender must have an allowance from the owner of the tokens for a number of their tokens to transfer.\nWhen a spender or token owner transfers tokens, their allowance decreases by the amount of tokens they transfer."}),"\n",(0,a.jsx)(t.p,{children:"Allowances also apply to the token owner.\nAn account cannot transfer more tokens than its allowance, even if it has enough tokens and it sent the request itself.\nThis means that if you want to transfer some of your tokens, you must first set your account's allowance to the amount to transfer."}),"\n",(0,a.jsx)(t.p,{children:"For security reasons, an allowance cannot be changed from a non-zero amount to another non-zero amount.\nTherefore, transferring FA1.2 tokens from a source account to a destination account often involves these steps:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:"Set the spender's allowance for the source account to 0."}),"\n",(0,a.jsx)(t.li,{children:"Set the spender's allowance for the source account to the amount of tokens to transfer."}),"\n",(0,a.jsx)(t.li,{children:"Transfer the tokens from the source account to the destination account."}),"\n",(0,a.jsx)(t.li,{children:"Set the spender's allowance for the source account to 0 to prevent errors if a future change in allowance doesn't set the allowance to 0 first."}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"entrypoints",children:"Entrypoints"}),"\n",(0,a.jsx)(t.p,{children:"FA1.2 contracts must have these entrypoints:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.code,{children:"approve"}),": Sets the amount of tokens that an account can transfer on behalf of the token owner."]}),"\n",(0,a.jsxs)(t.p,{children:["Its parameters are the address of the account that is authorized to transfer the tokens on behalf of the sender and the amount of tokens to allow.\nIf the request tries to change the allowance from a non-zero amount to a non-zero amount, it must fail and return an ",(0,a.jsx)(t.code,{children:"UnsafeAllowanceChange"})," error message."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.code,{children:"transfer"}),": Transfers tokens from one account to another."]}),"\n",(0,a.jsx)(t.p,{children:"Its parameters are the address to take tokens from and a tuple that includes the address to give tokens to and the amount of tokens to transfer."}),"\n",(0,a.jsxs)(t.p,{children:["The transaction sender must be an address that has been authorized to transfer the tokens via the ",(0,a.jsx)(t.code,{children:"approve"})," endpoint, even if the transaction sender and address that owns the tokens are the same address.\nAfter the transfer, the sender's allowance is decreased by the amount of tokens transferred."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"FA1.2 contracts must also have the following entrypoints providing information to other smart contracts.\nThese entrypoints accept a contract address as a parameter and send a callback transaction to that address with information about the current state of the contract.\nThese entrypoints must not change the storage or generate any operations other than the callback transaction."}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"getAllowance"}),": Returns the allowance that the specified sender can transfer out of the specified source account"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"getBalance"}),": Returns the amount of tokens that the specified account owns"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"getTotalSupply"}),": Returns the total amount of tokens in the contract"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"FA1.2 contracts can add any other entrypoints in addition to the required entrypoints."}),"\n",(0,a.jsx)(t.h2,{id:"storage",children:"Storage"}),"\n",(0,a.jsx)(t.p,{children:"No specific storage is required by the standard, but FA1.2 contracts typically use these values:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:'A big-map named "ledger" where the key is the owner\'s address and the value is the amount of tokens it owns and a map of its allowances'}),"\n",(0,a.jsx)(t.li,{children:'A natural number named "totalSupply" that is the total amount of tokens'}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>c});var o=n(96540);const a={},s=o.createContext(a);function r(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);