"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2133],{77857:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>c,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"smart-contracts","title":"An introduction to smart contracts","description":"A smart contract is a piece of code stored on the blockchain. It contains a set of instructions and rules to trigger them. Once deployed, it becomes immutable, but a user can trigger the execution of the code without modifying it.","source":"@site/docs/smart-contracts.mdx","sourceDirName":".","slug":"/smart-contracts","permalink":"/previews/docs/docmap-thumbnail/smart-contracts","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1707973200000,"frontMatter":{"title":"An introduction to smart contracts","authors":"Thomas Zoughebi, Aymeric Bethencourt, Maxime Fernandez, and Tim McMackin","last_update":{"date":"15 February 2024"}},"sidebar":"documentationSidebar","previous":{"title":"Indexers","permalink":"/previews/docs/docmap-thumbnail/developing/information/indexers"},"next":{"title":"Sample smart contracts","permalink":"/previews/docs/docmap-thumbnail/smart-contracts/samples"}}');var s=n(74848),r=n(28453),o=n(81291);const c={title:"An introduction to smart contracts",authors:"Thomas Zoughebi, Aymeric Bethencourt, Maxime Fernandez, and Tim McMackin",last_update:{date:"15 February 2024"}},i=void 0,l={},h=[{value:"Smart contract metaphor",id:"smart-contract-metaphor",level:2},{value:"Components of a smart contract",id:"components-of-a-smart-contract",level:2},{value:"Limitations of smart contracts",id:"limitations-of-smart-contracts",level:2},{value:"Features of Tezos smart contracts",id:"features-of-tezos-smart-contracts",level:2},{value:"Lifecycle of a Tezos smart contract",id:"lifecycle-of-a-tezos-smart-contract",level:2},{value:"Deployment of a Tezos smart contract",id:"deployment-of-a-tezos-smart-contract",level:3},{value:"Call of a Tezos smart contract",id:"call-of-a-tezos-smart-contract",level:3}];function d(t){const e={a:"a",admonition:"admonition",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...t.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.p,{children:"A smart contract is a piece of code stored on the blockchain. It contains a set of instructions and rules to trigger them. Once deployed, it becomes immutable, but a user can trigger the execution of the code without modifying it."}),"\n",(0,s.jsx)(e.h2,{id:"smart-contract-metaphor",children:"Smart contract metaphor"}),"\n",(0,s.jsx)(e.p,{children:"Smart contracts can achieve different kinds of operations with coins and other smart contracts. They're comparable to snack vending machines:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:'Each machine has a contract saying "Give me cryptocurrency, then I give you a food item or drink."'}),"\n",(0,s.jsx)(e.li,{children:"Each machine can have a different smart contract for various food or drink items."}),"\n",(0,s.jsx)(e.li,{children:"Other smart contracts can work with the machines behind the scenes, such as a contract that represents an employee gathering the money from the machines."}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["Each machine doesn't operate until enough currency is delivered (",(0,s.jsx)(e.em,{children:"Gas"}),"). Note that the quantities of foods or drinks change while their ",(0,s.jsx)(e.em,{children:"types"})," can't (ever)."]}),"\n",(0,s.jsxs)(e.p,{children:["Of course, smart contracts go beyond this metaphor. Thanks to ",(0,s.jsx)(e.em,{children:"transparency"})," and ",(0,s.jsx)(e.em,{children:"immutability"}),", they allow an ",(0,s.jsx)(e.strong,{children:"agreement"})," to be secured between two or more parties."]}),"\n",(0,s.jsxs)(e.p,{children:["For example, it is common to create financial instruments like various ",(0,s.jsx)(e.em,{children:"tokens"})," (usually worth a fraction of the blockchain's ",(0,s.jsx)(e.em,{children:"coin"}),") with different usability and characteristics inside a multiple smart contracts system. Other more or less complex projects can propose ",(0,s.jsx)(e.em,{children:"lending"}),", ",(0,s.jsx)(e.em,{children:"stablecoins"}),", or ",(0,s.jsx)(e.em,{children:"crowdfunding"}),"."]}),"\n",(0,s.jsx)(e.p,{children:"In most cases, smart contracts remove intermediates and drastically reduce costs compared to classic paper contracts and their validations."}),"\n",(0,s.jsxs)(e.p,{children:["Notice that a smart contract can only run and interact with the blockchain it's stored on. It can't interact with the outside world. That's where ",(0,s.jsx)(e.em,{children:"decentralized applications"}),' or "dApps" come in, because they provide interfaces for the outside world.']}),"\n",(0,s.jsx)(e.h2,{id:"components-of-a-smart-contract",children:"Components of a smart contract"}),"\n",(0,s.jsx)(e.p,{children:"A smart contract is composed of three elements:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Its balance: a contract is a kind of account, and can receive and send tez"}),"\n",(0,s.jsxs)(e.li,{children:["Its ",(0,s.jsx)(e.a,{href:"/smart-contracts/storage",children:"storage"}),": data that is dedicated to and can be read and written by the contract"]}),"\n",(0,s.jsxs)(e.li,{children:["Its code: one or more ",(0,s.jsx)(e.a,{href:"/smart-contracts/entrypoints",children:"entrypoints"}),", which are a kind of function that can be called either from outside the chain or from other contracts"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["The smart contract code is in the Michelson language, but several high-level languages exist to make it easier to write the code.\nSee ",(0,s.jsx)(e.a,{href:"/smart-contracts/languages",children:"Languages"}),"."]}),"\n",(0,s.jsx)(e.admonition,{title:"VisualTez",type:"note",children:(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.a,{href:"https://visualtez.com/editor",children:"VisualTez"})," allows you to visualize the fundamental logic of a smart contract without relying on any specific syntax."]})}),"\n",(0,s.jsx)(e.h2,{id:"limitations-of-smart-contracts",children:"Limitations of smart contracts"}),"\n",(0,s.jsx)(e.p,{children:"All a contract can do can be summarized as:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Performing computations"}),"\n",(0,s.jsx)(e.li,{children:"Reading or updating the value of its own storage"}),"\n",(0,s.jsxs)(e.li,{children:["Generating a list of operations, such as calls to other contracts (see ",(0,s.jsx)(e.a,{href:"/smart-contracts/logic/operations",children:"Operations"}),")"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"Smart contracts can't do these things:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Access programs outside the blockchain, including calling external APIs"}),"\n",(0,s.jsx)(e.li,{children:"Access other contracts' storage"}),"\n",(0,s.jsx)(e.li,{children:"Change their code"}),"\n",(0,s.jsxs)(e.li,{children:["Catch and respond to errors (see ",(0,s.jsx)(e.a,{href:"/smart-contracts/logic/errors",children:"Handling errors"}),")"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"features-of-tezos-smart-contracts",children:"Features of Tezos smart contracts"}),"\n",(0,s.jsx)(e.p,{children:"Tezos smart contracts support these features:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"/smart-contracts/storage",children:"Storage"})," of data that the contract can read and write to"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"/smart-contracts/entrypoints",children:"Entrypoints"})," that users can call"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"/smart-contracts/data-types",children:"Data types"})," from simple to complex and logic that can be used on them, including ",(0,s.jsx)(e.a,{href:"/smart-contracts/logic/comparing",children:"Comparing values"})," and ",(0,s.jsx)(e.a,{href:"/smart-contracts/logic/loops",children:"Loops"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"/smart-contracts/logic/operations",children:"Operations"}),", which are calls to other smart contracts"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"/smart-contracts/views",children:"Views"}),", which expose data to other contracts"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"/smart-contracts/logic/errors",children:"Handling errors"}),", although error handling in Tezos is very different from other platforms"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"/smart-contracts/constants",children:"Constants"})," that are available to all contracts"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"/smart-contracts/sapling",children:"Sapling"}),", a way to run private transactions"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"lifecycle-of-a-tezos-smart-contract",children:"Lifecycle of a Tezos smart contract"}),"\n",(0,s.jsx)(e.p,{children:"Tezos contracts have a two-step lifecycle:"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"Deployment"}),"\n",(0,s.jsx)(e.li,{children:"Interactions through calls"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"deployment-of-a-tezos-smart-contract",children:"Deployment of a Tezos smart contract"}),"\n",(0,s.jsxs)(e.p,{children:["The deployment of a Tezos smart contract is called ",(0,s.jsx)(e.em,{children:"origination"}),"."]}),"\n",(0,s.jsx)(e.p,{children:"When a smart contract is originated, an address and a corresponding persistent storage are allocated to it. The smart contract address is like its identity and where it lives on the ledger."}),"\n",(0,s.jsx)(e.p,{children:"After it is deployed, anyone or anything can call the smart contract, including contracts on the chain and applications off the chain, by submitting an operation to its address with arguments. This call triggers the execution of the pre-defined instructions in the contract's code."}),"\n",(0,s.jsx)(e.p,{children:"The origination of a Tezos smart contract must define:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"A complex parameter type in the low-level Michelson language, which is a list or tuple of each parameter type (see more below with high-level languages)"}),"\n",(0,s.jsx)(e.li,{children:"The storage type"}),"\n",(0,s.jsx)(e.li,{children:"The initial value of the storage"}),"\n",(0,s.jsx)(e.li,{children:"A set of instructions in Michelson"}),"\n"]}),"\n",(0,s.jsx)(o.A,{src:"/img/tezos_smart_contract_content.svg",caption:"Figure 1: The contents of a Tezos smart contract"}),"\n",(0,s.jsx)(e.p,{children:"After the contract is deployed, it cannot be changed or removed from the blockchain."}),"\n",(0,s.jsxs)(e.p,{children:["For more information about deploying smart contracts, see ",(0,s.jsx)(e.a,{href:"/smart-contracts/deploying",children:"Deploying smart contracts"}),"."]}),"\n",(0,s.jsx)(e.h3,{id:"call-of-a-tezos-smart-contract",children:"Call of a Tezos smart contract"}),"\n",(0,s.jsx)(e.p,{children:"A smart contract can be called by a classic account or by a smart contract account. The operation or transaction specifies one or more arguments. In the below example, we increase or decrease a value in the storage:"}),"\n",(0,s.jsx)(o.A,{src:"/img/invoke_smart_contract_wo_entrypoint.svg",caption:"Figure 2: Call of a smart contract triggering its code and modifying its storage's state"}),"\n",(0,s.jsx)(e.p,{children:"Users can call smart contracts from different platforms, including:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["The Octez command-line program, which is provided by Tezos to send transactions to Tezos and interact with the chain in other ways, including hosting a node. For more information about the Octez client, see ",(0,s.jsx)(e.a,{href:"https://octez.tezos.com/docs/",children:"https://octez.tezos.com/docs/"}),"."]}),"\n",(0,s.jsx)(e.li,{children:"Remote Procedure Calls (RPCs) via HTTP."}),"\n",(0,s.jsxs)(e.li,{children:["SDKs such as ",(0,s.jsx)(e.a,{href:"https://tezostaquito.io/",children:"Taquito"}),"."]}),"\n"]})]})}function m(t={}){const{wrapper:e}={...(0,r.R)(),...t.components};return e?(0,s.jsx)(e,{...t,children:(0,s.jsx)(d,{...t})}):d(t)}},81291:(t,e,n)=>{n.d(e,{A:()=>r});n(96540);var a=n(29030),s=n(74848);function r(t){let{src:e,caption:n}=t;return(0,s.jsxs)("figure",{style:{border:"1px solid #888",padding:20},children:[(0,s.jsx)("img",{src:(0,a.Ay)(e),alt:n}),(0,s.jsx)("figcaption",{children:n})]})}},28453:(t,e,n)=>{n.d(e,{R:()=>o,x:()=>c});var a=n(96540);const s={},r=a.createContext(s);function o(t){const e=a.useContext(r);return a.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function c(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:o(t.components),a.createElement(r.Provider,{value:e},t.children)}}}]);